import{b8 as l,a as v,L as f,a1 as g,t as y,d as w,b9 as C,b,w as x,f as k,h,i as D,_ as H,r as m,o as r,c as _,q as N,n as P,E as R,ba as p,bb as B}from"./index-4a568665.js";import{R as E}from"./Country-0821353b.js";function F(e,n){const{days:t}=n;let{hours:o,minutes:i,seconds:a,milliseconds:c}=n;if(e.includes("DD")?e=e.replace("DD",l(t)):o+=t*24,e.includes("HH")?e=e.replace("HH",l(o)):i+=o*60,e.includes("mm")?e=e.replace("mm",l(i)):a+=i*60,e.includes("ss")?e=e.replace("ss",l(a)):c+=a*1e3,e.includes("S")){const s=l(c,3);e.includes("SSS")?e=e.replace("SSS",s):e.includes("SS")?e=e.replace("SS",s.slice(0,2)):e=e.replace("S",s.charAt(0))}return e}const[A,T]=v("count-down"),q={time:f(0),format:g("HH:mm:ss"),autoStart:y,millisecond:Boolean};var I=w({name:A,props:q,emits:["change","finish"],setup(e,{emit:n,slots:t}){const{start:o,pause:i,reset:a,current:c}=C({time:+e.time,millisecond:e.millisecond,onChange:d=>n("change",d),onFinish:()=>n("finish")}),s=b(()=>F(e.format,c.value)),u=()=>{a(+e.time),e.autoStart&&o()};return x(()=>e.time,u,{immediate:!0}),k({start:o,pause:i,reset:u}),()=>h("div",{role:"timer",class:T()},[t.default?t.default(c.value):s.value])}});const V=D(I);function K(){return new Promise(e=>{setTimeout(()=>{e({code:0,data:{code:123456},msg:"成功"})},10)})}const L={class:"send-code"},O={key:1},Z={class:"block"},j={__name:"SendCode",props:{phone:{type:[String,Number],default:""},type:{type:[String,Number],default:""}},setup(e){const n=e,t=m(!0),o=m(60*1e3),i=()=>{t.value=!0},a=()=>{const s=n.type;if(console.log(s),s===1){c();return}if(!n.phone){p("请输入手机号");return}if(!E.i18nPhoneReg.test(n.phone)){p("手机号格式错误");return}c()},c=async()=>{const s=await K();s.code===B?t.value=!1:p(s.msg)};return(s,u)=>{const d=V;return r(),_("div",L,[t.value?(r(),_("span",{key:0,onClick:a},"获取验证码")):(r(),_("p",O,[h(d,{onFinish:i,time:o.value},{default:N(S=>[P("span",Z,R(S.seconds)+"s后重发",1)]),_:1},8,["time"])]))])}}},J=H(j,[["__scopeId","data-v-3163ff92"]]);export{J as _};
