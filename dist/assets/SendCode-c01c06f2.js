import{aY as l,h as v,P as f,m as g,t as y,d as w,aZ as C,b as x,w as k,j as D,f as h,q as P,_ as b,r as m,o as r,c as _,z as H,y as N,K as R,a_ as p,a$ as B}from"./index-24392173.js";import{R as F}from"./Country-44d56128.js";function A(e,n){const{days:t}=n;let{hours:o,minutes:i,seconds:a,milliseconds:c}=n;if(e.includes("DD")?e=e.replace("DD",l(t)):o+=t*24,e.includes("HH")?e=e.replace("HH",l(o)):i+=o*60,e.includes("mm")?e=e.replace("mm",l(i)):a+=i*60,e.includes("ss")?e=e.replace("ss",l(a)):c+=a*1e3,e.includes("S")){const s=l(c,3);e.includes("SSS")?e=e.replace("SSS",s):e.includes("SS")?e=e.replace("SS",s.slice(0,2)):e=e.replace("S",s.charAt(0))}return e}const[E,T]=v("count-down"),q={time:f(0),format:g("HH:mm:ss"),autoStart:y,millisecond:Boolean};var I=w({name:E,props:q,emits:["change","finish"],setup(e,{emit:n,slots:t}){const{start:o,pause:i,reset:a,current:c}=C({time:+e.time,millisecond:e.millisecond,onChange:d=>n("change",d),onFinish:()=>n("finish")}),s=x(()=>A(e.format,c.value)),u=()=>{a(+e.time),e.autoStart&&o()};return k(()=>e.time,u,{immediate:!0}),D({start:o,pause:i,reset:u}),()=>h("div",{role:"timer",class:T()},[t.default?t.default(c.value):s.value])}});const K=P(I);function V(){return new Promise(e=>{setTimeout(()=>{e({code:0,data:{code:123456},msg:"成功"})},10)})}const Z={class:"send-code"},j={key:1},z={class:"block"},O={__name:"SendCode",props:{phone:{type:[String,Number],default:""},type:{type:[String,Number],default:""}},setup(e){const n=e,t=m(!0),o=m(60*1e3),i=()=>{t.value=!0},a=()=>{const s=n.type;if(console.log(s),s===1){c();return}if(!n.phone){p("请输入手机号");return}if(!F.i18nPhoneReg.test(n.phone)){p("手机号格式错误");return}c()},c=async()=>{const s=await V();s.code===B?t.value=!1:p(s.msg)};return(s,u)=>{const d=K;return r(),_("div",Z,[t.value?(r(),_("span",{key:0,onClick:a},"获取验证码")):(r(),_("p",j,[h(d,{onFinish:i,time:o.value},{default:H(S=>[N("span",z,R(S.seconds)+"s后重发",1)]),_:1},8,["time"])]))])}}},G=b(O,[["__scopeId","data-v-3163ff92"]]);export{G as _};
