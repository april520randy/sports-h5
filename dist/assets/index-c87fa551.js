function e(e,t){const n=Object.create(null),o=e.split(",");for(let r=0;r<o.length;r++)n[o[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}function t(e){if(T(e)){const n={};for(let o=0;o<e.length;o++){const r=e[o],a=A(r)?i(r):t(r);if(a)for(const e in a)n[e]=a[e]}return n}return A(e)||R(e)?e:void 0}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const n=/;(?![^(]*\))/g,o=/:([^]+)/,r=/\/\*.*?\*\//gs;function i(e){const t={};return e.replace(r,"").split(n).forEach((e=>{if(e){const n=e.split(o);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function a(e){let t="";if(A(e))t=e;else if(T(e))for(let n=0;n<e.length;n++){const o=a(e[n]);o&&(t+=o+" ")}else if(R(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function s(e){if(!e)return null;let{class:n,style:o}=e;return n&&!A(n)&&(e.class=a(n)),o&&(e.style=t(o)),e}const c=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function l(e){return!!e||""===e}function u(e,t){if(e===t)return!0;let n=E(e),o=E(t);if(n||o)return!(!n||!o)&&e.getTime()===t.getTime();if(n=L(e),o=L(t),n||o)return e===t;if(n=T(e),o=T(t),n||o)return!(!n||!o)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=u(e[o],t[o]);return n}(e,t);if(n=R(e),o=R(t),n||o){if(!n||!o)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const o=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(o&&!r||!o&&r||!u(e[n],t[n]))return!1}}return String(e)===String(t)}function d(e,t){return e.findIndex((e=>u(e,t)))}const p=e=>A(e)?e:null==e?"":T(e)||R(e)&&(e.toString===x||!D(e.toString))?JSON.stringify(e,h,2):String(e),h=(e,t)=>t&&t.__v_isRef?h(e,t.value):S(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:I(t)?{[`Set(${t.size})`]:[...t.values()]}:!R(t)||T(t)||U(t)?t:String(t),f={},g=[],v=()=>{},m=()=>!1,_=/^on[^a-z]/,y=e=>_.test(e),b=e=>e.startsWith("onUpdate:"),M=Object.assign,C=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},k=Object.prototype.hasOwnProperty,w=(e,t)=>k.call(e,t),T=Array.isArray,S=e=>"[object Map]"===N(e),I=e=>"[object Set]"===N(e),E=e=>"[object Date]"===N(e),D=e=>"function"==typeof e,A=e=>"string"==typeof e,L=e=>"symbol"==typeof e,R=e=>null!==e&&"object"==typeof e,O=e=>R(e)&&D(e.then)&&D(e.catch),x=Object.prototype.toString,N=e=>x.call(e),P=e=>N(e).slice(8,-1),U=e=>"[object Object]"===N(e),G=e=>A(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,B=e(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),F=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},q=/-(\w)/g,V=F((e=>e.replace(q,((e,t)=>t?t.toUpperCase():"")))),H=/\B([A-Z])/g,z=F((e=>e.replace(H,"-$1").toLowerCase())),j=F((e=>e.charAt(0).toUpperCase()+e.slice(1))),$=F((e=>e?`on${j(e)}`:"")),W=(e,t)=>!Object.is(e,t),K=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Y=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},X=e=>{const t=parseFloat(e);return isNaN(t)?e:t},J=e=>{const t=A(e)?Number(e):NaN;return isNaN(t)?e:t};let Z;const Q=()=>Z||(Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),ee=["ad","ad-content-page","ad-draw","audio","button","camera","canvas","checkbox","checkbox-group","cover-image","cover-view","editor","form","functional-page-navigator","icon","image","input","label","live-player","live-pusher","map","movable-area","movable-view","navigator","official-account","open-data","picker","picker-view","picker-view-column","progress","radio","radio-group","rich-text","scroll-view","slider","swiper","swiper-item","switch","text","textarea","video","view","web-view"].map((e=>"uni-"+e));const te="\n",ne=44,oe=50,re="UNI_LOCALE",ie=["%","%"],ae="#007aff",se=/^([a-z-]+:)?\/\//i,ce=/^data:.*,.*/,le="WEB_INVOKE_APPSERVICE",ue="onShow",de="onHide",pe="onError",he="onThemeChange",fe="onPageNotFound",ge="onUnhandledRejection",ve="onLoad",me="onReady",_e="onUnload",ye="onInit",be="onSaveExitState",Me="onResize",Ce="onBackPress",ke="onPageScroll",we="onTabItemTap",Te="onReachBottom",Se="onPullDownRefresh",Ie="onShareTimeline",Ee="onAddToFavorites",De="onShareAppMessage",Ae="onNavigationBarButtonTap",Le="onNavigationBarChange",Re="onNavigationBarSearchInputClicked",Oe="onNavigationBarSearchInputChanged",xe="onNavigationBarSearchInputConfirmed",Ne="onNavigationBarSearchInputFocusChanged",Pe="onAppEnterForeground",Ue="onAppEnterBackground",Ge="onWebInvokeAppService";function Be(e){return e&&(e.appContext?e.proxy:e)}function Fe(e){if(!e)return;let t=e.type.name;for(;t&&(n=z(t),-1!==ee.indexOf("uni-"+n.replace("v-uni-","")));)t=(e=e.parent).type.name;var n;return e.proxy}function qe(e){return 1===e.nodeType}function Ve(e){return 0===e.indexOf("/")}function He(e){return Ve(e)?e:"/"+e}function ze(e){return Ve(e)?e.slice(1):e}const je=(e,t)=>{let n;for(let o=0;o<e.length;o++)n=e[o](t);return n};function $e(e,t=null){let n;return(...o)=>(e&&(n=e.apply(t,o),e=null),n)}const We=e=>e>9?e:"0"+e;function Ke({date:e=new Date,mode:t="date"}){return"time"===t?We(e.getHours())+":"+We(e.getMinutes()):e.getFullYear()+"-"+We(e.getMonth()+1)+"-"+We(e.getDate())}function Ye(e){return V(e.substring(5))}const Xe=$e((()=>{const e=HTMLElement.prototype,t=e.setAttribute;e.setAttribute=function(e,n){if(e.startsWith("data-")&&this.tagName.startsWith("UNI-")){(this.__uniDataset||(this.__uniDataset={}))[Ye(e)]=n}t.call(this,e,n)};const n=e.removeAttribute;e.removeAttribute=function(e){this.__uniDataset&&e.startsWith("data-")&&this.tagName.startsWith("UNI-")&&delete this.__uniDataset[Ye(e)],n.call(this,e)}}));function Je(e){return M({},e.dataset,e.__uniDataset)}const Ze=new RegExp("\"[^\"]+\"|'[^']+'|url\\([^)]+\\)|(\\d*\\.?\\d+)[r|u]px","g");function Qe(e){return{passive:e}}function et(e){const{id:t,offsetTop:n,offsetLeft:o}=e;return{id:t,dataset:Je(e),offsetTop:n,offsetLeft:o}}function nt(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function ot(e={}){const t={};return Object.keys(e).forEach((n=>{try{t[n]=nt(e[n])}catch(gS){t[n]=e[n]}})),t}const rt=/\+/g;function it(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const e=n[o].replace(rt," ");let r=e.indexOf("="),i=nt(r<0?e:e.slice(0,r)),a=r<0?null:nt(e.slice(r+1));if(i in t){let e=t[i];T(e)||(e=t[i]=[e]),e.push(a)}else t[i]=a}return t}function at(e,t,{clearTimeout:n,setTimeout:o}){let r;const i=function(){n(r);r=o((()=>e.apply(this,arguments)),t)};return i.cancel=function(){n(r)},i}class st{constructor(e,t){this.id=e,this.listener={},this.emitCache=[],t&&Object.keys(t).forEach((e=>{this.on(e,t[e])}))}emit(e,...t){const n=this.listener[e];if(!n)return this.emitCache.push({eventName:e,args:t});n.forEach((e=>{e.fn.apply(e.fn,t)})),this.listener[e]=n.filter((e=>"once"!==e.type))}on(e,t){this._addListener(e,"on",t),this._clearCache(e)}once(e,t){this._addListener(e,"once",t),this._clearCache(e)}off(e,t){const n=this.listener[e];if(n)if(t)for(let o=0;o<n.length;)n[o].fn===t&&(n.splice(o,1),o--),o++;else delete this.listener[e]}_clearCache(e){for(let t=0;t<this.emitCache.length;t++){const n=this.emitCache[t],o=e?n.eventName===e?e:null:n.eventName;if(!o)continue;"number"!=typeof this.emit.apply(this,[o,...n.args])?(this.emitCache.splice(t,1),t--):this.emitCache.pop()}}_addListener(e,t,n){(this.listener[e]||(this.listener[e]=[])).push({fn:n,type:t})}}const ct=[ye,ve,ue,de,_e,Ce,ke,we,Te,Se,Ie,De,Ee,be,Ae,Re,Oe,xe,Ne],lt=[ve,ue];const ut=[ue,de,"onLaunch",pe,he,fe,ge,ye,ve,me,_e,Me,Ce,ke,we,Te,Se,Ie,Ee,De,be,Ae,Re,Oe,xe,Ne];let dt;const pt=[];const ht=$e(((e,t)=>{if(D(e._component.onError))return t(e)})),ft=function(){};ft.prototype={on:function(e,t,n){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var o=this;function r(){o.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),o=n[e],r=[];if(o&&t)for(var i=0,a=o.length;i<a;i++)o[i].fn!==t&&o[i].fn._!==t&&r.push(o[i]);return r.length?n[e]=r:delete n[e],this}};var gt=ft;const vt={black:"rgba(0,0,0,0.4)",white:"rgba(255,255,255,0.4)"};function mt(e,t={},n="light"){const o=t[n],r={};return o?(Object.keys(e).forEach((i=>{let a=e[i];r[i]=(()=>{if(U(a))return mt(a,t,n);if(T(a))return a.map((e=>U(e)?mt(e,t,n):e));if(A(a)&&a.startsWith("@")){const t=a.replace("@","");let n=o[t]||a;switch(i){case"titleColor":n="black"===n?"#000000":"#ffffff";break;case"borderStyle":n=(e=n)&&e in vt?vt[e]:e}return n}var e;return a})()})),r):e}let _t;class yt{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=_t,!e&&_t&&(this.index=(_t.scopes||(_t.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=_t;try{return _t=this,e()}finally{_t=t}}}on(){_t=this}off(){_t=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function bt(e){return new yt(e)}const Mt=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Ct=e=>(e.w&St)>0,kt=e=>(e.n&St)>0,wt=new WeakMap;let Tt=0,St=1;const It=30;let Et;const Dt=Symbol(""),At=Symbol("");class Lt{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,function(e,t=_t){t&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();let e=Et,t=Ot;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Et,Et=this,Ot=!0,St=1<<++Tt,Tt<=It?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=St})(this):Rt(this),this.fn()}finally{Tt<=It&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let o=0;o<t.length;o++){const r=t[o];Ct(r)&&!kt(r)?r.delete(e):t[n++]=r,r.w&=~St,r.n&=~St}t.length=n}})(this),St=1<<--Tt,Et=this.parent,Ot=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Et===this?this.deferStop=!0:this.active&&(Rt(this),this.onStop&&this.onStop(),this.active=!1)}}function Rt(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Ot=!0;const xt=[];function Nt(){xt.push(Ot),Ot=!1}function Pt(){const e=xt.pop();Ot=void 0===e||e}function Ut(e,t,n){if(Ot&&Et){let t=wt.get(e);t||wt.set(e,t=new Map);let o=t.get(n);o||t.set(n,o=Mt()),Gt(o)}}function Gt(e,t){let n=!1;Tt<=It?kt(e)||(e.n|=St,n=!Ct(e)):n=!e.has(Et),n&&(e.add(Et),Et.deps.push(e))}function Bt(e,t,n,o,r,i){const a=wt.get(e);if(!a)return;let s=[];if("clear"===t)s=[...a.values()];else if("length"===n&&T(e)){const e=Number(o);a.forEach(((t,n)=>{("length"===n||n>=e)&&s.push(t)}))}else switch(void 0!==n&&s.push(a.get(n)),t){case"add":T(e)?G(n)&&s.push(a.get("length")):(s.push(a.get(Dt)),S(e)&&s.push(a.get(At)));break;case"delete":T(e)||(s.push(a.get(Dt)),S(e)&&s.push(a.get(At)));break;case"set":S(e)&&s.push(a.get(Dt))}if(1===s.length)s[0]&&Ft(s[0]);else{const e=[];for(const t of s)t&&e.push(...t);Ft(Mt(e))}}function Ft(e,t){const n=T(e)?e:[...e];for(const o of n)o.computed&&qt(o);for(const o of n)o.computed||qt(o)}function qt(e,t){(e!==Et||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Vt=e("__proto__,__v_isRef,__isVue"),Ht=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(L)),zt=Xt(),jt=Xt(!1,!0),$t=Xt(!0),Wt=Kt();function Kt(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=xn(this);for(let t=0,r=this.length;t<r;t++)Ut(n,0,t+"");const o=n[t](...e);return-1===o||!1===o?n[t](...e.map(xn)):o}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){Nt();const n=xn(this)[t].apply(this,e);return Pt(),n}})),e}function Yt(e){const t=xn(this);return Ut(t,0,e),t.hasOwnProperty(e)}function Xt(e=!1,t=!1){return function(n,o,r){if("__v_isReactive"===o)return!e;if("__v_isReadonly"===o)return e;if("__v_isShallow"===o)return t;if("__v_raw"===o&&r===(e?t?Sn:Tn:t?wn:kn).get(n))return n;const i=T(n);if(!e){if(i&&w(Wt,o))return Reflect.get(Wt,o,r);if("hasOwnProperty"===o)return Yt}const a=Reflect.get(n,o,r);return(L(o)?Ht.has(o):Vt(o))?a:(e||Ut(n,0,o),t?a:Fn(a)?i&&G(o)?a:a.value:R(a)?e?En(a):In(a):a)}}function Jt(e=!1){return function(t,n,o,r){let i=t[n];if(Ln(i)&&Fn(i)&&!Fn(o))return!1;if(!e&&(Rn(o)||Ln(o)||(i=xn(i),o=xn(o)),!T(t)&&Fn(i)&&!Fn(o)))return i.value=o,!0;const a=T(t)&&G(n)?Number(n)<t.length:w(t,n),s=Reflect.set(t,n,o,r);return t===xn(r)&&(a?W(o,i)&&Bt(t,"set",n,o):Bt(t,"add",n,o)),s}}const Zt={get:zt,set:Jt(),deleteProperty:function(e,t){const n=w(e,t);e[t];const o=Reflect.deleteProperty(e,t);return o&&n&&Bt(e,"delete",t,void 0),o},has:function(e,t){const n=Reflect.has(e,t);return L(t)&&Ht.has(t)||Ut(e,0,t),n},ownKeys:function(e){return Ut(e,0,T(e)?"length":Dt),Reflect.ownKeys(e)}},Qt={get:$t,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},en=M({},Zt,{get:jt,set:Jt(!0)}),tn=e=>e,nn=e=>Reflect.getPrototypeOf(e);function on(e,t,n=!1,o=!1){const r=xn(e=e.__v_raw),i=xn(t);n||(t!==i&&Ut(r,0,t),Ut(r,0,i));const{has:a}=nn(r),s=o?tn:n?Un:Pn;return a.call(r,t)?s(e.get(t)):a.call(r,i)?s(e.get(i)):void(e!==r&&e.get(t))}function rn(e,t=!1){const n=this.__v_raw,o=xn(n),r=xn(e);return t||(e!==r&&Ut(o,0,e),Ut(o,0,r)),e===r?n.has(e):n.has(e)||n.has(r)}function an(e,t=!1){return e=e.__v_raw,!t&&Ut(xn(e),0,Dt),Reflect.get(e,"size",e)}function sn(e){e=xn(e);const t=xn(this);return nn(t).has.call(t,e)||(t.add(e),Bt(t,"add",e,e)),this}function cn(e,t){t=xn(t);const n=xn(this),{has:o,get:r}=nn(n);let i=o.call(n,e);i||(e=xn(e),i=o.call(n,e));const a=r.call(n,e);return n.set(e,t),i?W(t,a)&&Bt(n,"set",e,t):Bt(n,"add",e,t),this}function ln(e){const t=xn(this),{has:n,get:o}=nn(t);let r=n.call(t,e);r||(e=xn(e),r=n.call(t,e)),o&&o.call(t,e);const i=t.delete(e);return r&&Bt(t,"delete",e,void 0),i}function un(){const e=xn(this),t=0!==e.size,n=e.clear();return t&&Bt(e,"clear",void 0,void 0),n}function dn(e,t){return function(n,o){const r=this,i=r.__v_raw,a=xn(i),s=t?tn:e?Un:Pn;return!e&&Ut(a,0,Dt),i.forEach(((e,t)=>n.call(o,s(e),s(t),r)))}}function pn(e,t,n){return function(...o){const r=this.__v_raw,i=xn(r),a=S(i),s="entries"===e||e===Symbol.iterator&&a,c="keys"===e&&a,l=r[e](...o),u=n?tn:t?Un:Pn;return!t&&Ut(i,0,c?At:Dt),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function hn(e){return function(...t){return"delete"!==e&&this}}function fn(){const e={get(e){return on(this,e)},get size(){return an(this)},has:rn,add:sn,set:cn,delete:ln,clear:un,forEach:dn(!1,!1)},t={get(e){return on(this,e,!1,!0)},get size(){return an(this)},has:rn,add:sn,set:cn,delete:ln,clear:un,forEach:dn(!1,!0)},n={get(e){return on(this,e,!0)},get size(){return an(this,!0)},has(e){return rn.call(this,e,!0)},add:hn("add"),set:hn("set"),delete:hn("delete"),clear:hn("clear"),forEach:dn(!0,!1)},o={get(e){return on(this,e,!0,!0)},get size(){return an(this,!0)},has(e){return rn.call(this,e,!0)},add:hn("add"),set:hn("set"),delete:hn("delete"),clear:hn("clear"),forEach:dn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=pn(r,!1,!1),n[r]=pn(r,!0,!1),t[r]=pn(r,!1,!0),o[r]=pn(r,!0,!0)})),[e,n,t,o]}const[gn,vn,mn,_n]=fn();function yn(e,t){const n=t?e?_n:mn:e?vn:gn;return(t,o,r)=>"__v_isReactive"===o?!e:"__v_isReadonly"===o?e:"__v_raw"===o?t:Reflect.get(w(n,o)&&o in t?n:t,o,r)}const bn={get:yn(!1,!1)},Mn={get:yn(!1,!0)},Cn={get:yn(!0,!1)},kn=new WeakMap,wn=new WeakMap,Tn=new WeakMap,Sn=new WeakMap;function In(e){return Ln(e)?e:Dn(e,!1,Zt,bn,kn)}function En(e){return Dn(e,!0,Qt,Cn,Tn)}function Dn(e,t,n,o,r){if(!R(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const i=r.get(e);if(i)return i;const a=(s=e).__v_skip||!Object.isExtensible(s)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(P(s));var s;if(0===a)return e;const c=new Proxy(e,2===a?o:n);return r.set(e,c),c}function An(e){return Ln(e)?An(e.__v_raw):!(!e||!e.__v_isReactive)}function Ln(e){return!(!e||!e.__v_isReadonly)}function Rn(e){return!(!e||!e.__v_isShallow)}function On(e){return An(e)||Ln(e)}function xn(e){const t=e&&e.__v_raw;return t?xn(t):e}function Nn(e){return Y(e,"__v_skip",!0),e}const Pn=e=>R(e)?In(e):e,Un=e=>R(e)?En(e):e;function Gn(e){Ot&&Et&&Gt((e=xn(e)).dep||(e.dep=Mt()))}function Bn(e,t){const n=(e=xn(e)).dep;n&&Ft(n)}function Fn(e){return!(!e||!0!==e.__v_isRef)}function qn(e){return Hn(e,!1)}function Vn(e){return Hn(e,!0)}function Hn(e,t){return Fn(e)?e:new zn(e,t)}class zn{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:xn(e),this._value=t?e:Pn(e)}get value(){return Gn(this),this._value}set value(e){const t=this.__v_isShallow||Rn(e)||Ln(e);e=t?e:xn(e),W(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Pn(e),Bn(this))}}function jn(e){return Fn(e)?e.value:e}const $n={get:(e,t,n)=>jn(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const r=e[t];return Fn(r)&&!Fn(n)?(r.value=n,!0):Reflect.set(e,t,n,o)}};function Wn(e){return An(e)?e:new Proxy(e,$n)}function Kn(e){const t=T(e)?new Array(e.length):{};for(const n in e)t[n]=Xn(e,n);return t}class Yn{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return e=xn(this._object),t=this._key,null===(n=wt.get(e))||void 0===n?void 0:n.get(t);var e,t,n}}function Xn(e,t,n){const o=e[t];return Fn(o)?o:new Yn(e,t,n)}var Jn;class Zn{constructor(e,t,n,o){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[Jn]=!1,this._dirty=!0,this.effect=new Lt(e,(()=>{this._dirty||(this._dirty=!0,Bn(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const e=xn(this);return Gn(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Qn(e,t,n,o){let r;try{r=o?e(...o):e()}catch(i){to(i,t,n)}return r}function eo(e,t,n,o){if(D(e)){const r=Qn(e,t,n,o);return r&&O(r)&&r.catch((e=>{to(e,t,n)})),r}const r=[];for(let i=0;i<e.length;i++)r.push(eo(e[i],t,n,o));return r}function to(e,t,n,o=!0){t&&t.vnode;if(t){let o=t.parent;const r=t.proxy,i=n;for(;o;){const t=o.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,i))return;o=o.parent}const a=t.appContext.config.errorHandler;if(a)return void Qn(a,null,10,[e,r,i])}!function(e,t,n,o=!0){console.error(e)}(e,0,0,o)}Jn="__v_isReadonly";let no=!1,oo=!1;const ro=[];let io=0;const ao=[];let so=null,co=0;const lo=Promise.resolve();let uo=null;function po(e){const t=uo||lo;return e?t.then(this?e.bind(this):e):t}function ho(e){ro.length&&ro.includes(e,no&&e.allowRecurse?io+1:io)||(null==e.id?ro.push(e):ro.splice(function(e){let t=io+1,n=ro.length;for(;t<n;){const o=t+n>>>1;mo(ro[o])<e?t=o+1:n=o}return t}(e.id),0,e),fo())}function fo(){no||oo||(oo=!0,uo=lo.then(yo))}function go(e,t=(no?io+1:0)){for(;t<ro.length;t++){const e=ro[t];e&&e.pre&&(ro.splice(t,1),t--,e())}}function vo(e){if(ao.length){const e=[...new Set(ao)];if(ao.length=0,so)return void so.push(...e);for(so=e,so.sort(((e,t)=>mo(e)-mo(t))),co=0;co<so.length;co++)so[co]();so=null,co=0}}const mo=e=>null==e.id?1/0:e.id,_o=(e,t)=>{const n=mo(e)-mo(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function yo(e){oo=!1,no=!0,ro.sort(_o);try{for(io=0;io<ro.length;io++){const e=ro[io];e&&!1!==e.active&&Qn(e,null,14)}}finally{io=0,ro.length=0,vo(),no=!1,uo=null,(ro.length||ao.length)&&yo()}}function bo(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||f;let r=n;const i=t.startsWith("update:"),a=i&&t.slice(7);if(a&&a in o){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:i}=o[e]||f;i&&(r=n.map((e=>A(e)?e.trim():e))),t&&(r=n.map(X))}let s,c=o[s=$(t)]||o[s=$(V(t))];!c&&i&&(c=o[s=$(z(t))]),c&&eo(c,e,6,Mo(e,c,r));const l=o[s+"Once"];if(l){if(e.emitted){if(e.emitted[s])return}else e.emitted={};e.emitted[s]=!0,eo(l,e,6,Mo(e,l,r))}}function Mo(e,t,n){if(1!==n.length)return n;if(D(t)){if(t.length<2)return n}else if(!t.find((e=>e.length>=2)))return n;const o=n[0];if(o&&w(o,"type")&&w(o,"timeStamp")&&w(o,"target")&&w(o,"currentTarget")&&w(o,"detail")){const t=e.proxy,o=t.$gcd(t,!0);o&&n.push(o)}return n}function Co(e,t,n=!1){const o=t.emitsCache,r=o.get(e);if(void 0!==r)return r;const i=e.emits;let a={},s=!1;if(!D(e)){const o=e=>{const n=Co(e,t,!0);n&&(s=!0,M(a,n))};!n&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}return i||s?(T(i)?i.forEach((e=>a[e]=null)):M(a,i),R(e)&&o.set(e,a),a):(R(e)&&o.set(e,null),null)}function ko(e,t){return!(!e||!y(t))&&(t=t.slice(2).replace(/Once$/,""),w(e,t[0].toLowerCase()+t.slice(1))||w(e,z(t))||w(e,t))}let wo=null,To=null;function So(e){const t=wo;return wo=e,To=e&&e.type.__scopeId||null,t}function Io(e){To=e}function Eo(){To=null}function Do(e,t=wo,n){if(!t)return e;if(e._n)return e;const o=(...n)=>{o._d&&Vi(-1);const r=So(t);let i;try{i=e(...n)}finally{So(r),o._d&&Vi(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function Ao(e){const{type:t,vnode:n,proxy:o,withProxy:r,props:i,propsOptions:[a],slots:s,attrs:c,emit:l,render:u,renderCache:d,data:p,setupState:h,ctx:f,inheritAttrs:g}=e;let v,m;const _=So(e);try{if(4&n.shapeFlag){const e=r||o;v=oa(u.call(e,e,d,i,h,p,f)),m=c}else{const e=t;0,v=oa(e.length>1?e(i,{attrs:c,slots:s,emit:l}):e(i,null)),m=t.props?c:Lo(c)}}catch(M){Gi.length=0,to(M,e,1),v=Zi(Pi)}let y=v;if(m&&!1!==g){const e=Object.keys(m),{shapeFlag:t}=y;e.length&&7&t&&(a&&e.some(b)&&(m=Ro(m,a)),y=ea(y,m))}return n.dirs&&(y=ea(y),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),v=y,So(_),v}const Lo=e=>{let t;for(const n in e)("class"===n||"style"===n||y(n))&&((t||(t={}))[n]=e[n]);return t},Ro=(e,t)=>{const n={};for(const o in e)b(o)&&o.slice(9)in t||(n[o]=e[o]);return n};function Oo(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const i=o[r];if(t[i]!==e[i]&&!ko(n,i))return!0}return!1}const xo=e=>e.__isSuspense;function No(e,t){if(ua){let n=ua.provides;const o=ua.parent&&ua.parent.provides;o===n&&(n=ua.provides=Object.create(o)),n[e]=t,"app"===ua.type.mpType&&ua.appContext.app.provide(e,t)}else;}function Po(e,t,n=!1){const o=ua||wo;if(o){const r=null==o.parent?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&D(t)?t.call(o.proxy):t}}function Uo(e,t){return Fo(e,null,t)}const Go={};function Bo(e,t,n){return Fo(e,t,n)}function Fo(e,t,{immediate:n,deep:o,flush:r,onTrack:i,onTrigger:a}=f){const s=_t===(null==ua?void 0:ua.scope)?ua:null;let c,l,u=!1,d=!1;if(Fn(e)?(c=()=>e.value,u=Rn(e)):An(e)?(c=()=>e,o=!0):T(e)?(d=!0,u=e.some((e=>An(e)||Rn(e))),c=()=>e.map((e=>Fn(e)?e.value:An(e)?Ho(e):D(e)?Qn(e,s,2):void 0))):c=D(e)?t?()=>Qn(e,s,2):()=>{if(!s||!s.isUnmounted)return l&&l(),eo(e,s,3,[h])}:v,t&&o){const e=c;c=()=>Ho(e())}let p,h=e=>{l=y.onStop=()=>{Qn(e,s,4)}};if(va){if(h=v,t?n&&eo(t,s,3,[c(),d?[]:void 0,h]):c(),"sync"!==r)return v;{const e=wa();p=e.__watcherHandles||(e.__watcherHandles=[])}}let g=d?new Array(e.length).fill(Go):Go;const m=()=>{if(y.active)if(t){const e=y.run();(o||u||(d?e.some(((e,t)=>W(e,g[t]))):W(e,g)))&&(l&&l(),eo(t,s,3,[e,g===Go?void 0:d&&g[0]===Go?[]:g,h]),g=e)}else y.run()};let _;m.allowRecurse=!!t,"sync"===r?_=m:"post"===r?_=()=>ki(m,s&&s.suspense):(m.pre=!0,s&&(m.id=s.uid),_=()=>ho(m));const y=new Lt(c,_);t?n?m():g=y.run():"post"===r?ki(y.run.bind(y),s&&s.suspense):y.run();const b=()=>{y.stop(),s&&s.scope&&C(s.scope.effects,y)};return p&&p.push(b),b}function qo(e,t,n){const o=this.proxy,r=A(e)?e.includes(".")?Vo(o,e):()=>o[e]:e.bind(o,o);let i;D(t)?i=t:(i=t.handler,n=t);const a=ua;pa(this);const s=Fo(r,i.bind(o),n);return a?pa(a):ha(),s}function Vo(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Ho(e,t){if(!R(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),Fn(e))Ho(e.value,t);else if(T(e))for(let n=0;n<e.length;n++)Ho(e[n],t);else if(I(e)||S(e))e.forEach((e=>{Ho(e,t)}));else if(U(e))for(const n in e)Ho(e[n],t);return e}function zo(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mr((()=>{e.isMounted=!0})),wr((()=>{e.isUnmounting=!0})),e}const jo=[Function,Array],$o={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jo,onEnter:jo,onAfterEnter:jo,onEnterCancelled:jo,onBeforeLeave:jo,onLeave:jo,onAfterLeave:jo,onLeaveCancelled:jo,onBeforeAppear:jo,onAppear:jo,onAfterAppear:jo,onAppearCancelled:jo},Wo={name:"BaseTransition",props:$o,setup(e,{slots:t}){const n=da(),o=zo();let r;return()=>{const i=t.default&&Qo(t.default(),!0);if(!i||!i.length)return;let a=i[0];if(i.length>1)for(const e of i)if(e.type!==Pi){a=e;break}const s=xn(e),{mode:c}=s;if(o.isLeaving)return Xo(a);const l=Jo(a);if(!l)return Xo(a);const u=Yo(l,s,o,n);Zo(l,u);const d=n.subTree,p=d&&Jo(d);let h=!1;const{getTransitionKey:f}=l.type;if(f){const e=f();void 0===r?r=e:e!==r&&(r=e,h=!0)}if(p&&p.type!==Pi&&(!Wi(l,p)||h)){const e=Yo(p,s,o,n);if(Zo(p,e),"out-in"===c)return o.isLeaving=!0,e.afterLeave=()=>{o.isLeaving=!1,!1!==n.update.active&&n.update()},Xo(a);"in-out"===c&&l.type!==Pi&&(e.delayLeave=(e,t,n)=>{Ko(o,p)[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=n})}return a}}};function Ko(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function Yo(e,t,n,o){const{appear:r,mode:i,persisted:a=!1,onBeforeEnter:s,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:d,onLeave:p,onAfterLeave:h,onLeaveCancelled:f,onBeforeAppear:g,onAppear:v,onAfterAppear:m,onAppearCancelled:_}=t,y=String(e.key),b=Ko(n,e),M=(e,t)=>{e&&eo(e,o,9,t)},C=(e,t)=>{const n=t[1];M(e,t),T(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},k={mode:i,persisted:a,beforeEnter(t){let o=s;if(!n.isMounted){if(!r)return;o=g||s}t._leaveCb&&t._leaveCb(!0);const i=b[y];i&&Wi(e,i)&&i.el._leaveCb&&i.el._leaveCb(),M(o,[t])},enter(e){let t=c,o=l,i=u;if(!n.isMounted){if(!r)return;t=v||c,o=m||l,i=_||u}let a=!1;const s=e._enterCb=t=>{a||(a=!0,M(t?i:o,[e]),k.delayedLeave&&k.delayedLeave(),e._enterCb=void 0)};t?C(t,[e,s]):s()},leave(t,o){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return o();M(d,[t]);let i=!1;const a=t._leaveCb=n=>{i||(i=!0,o(),M(n?f:h,[t]),t._leaveCb=void 0,b[r]===e&&delete b[r])};b[r]=e,p?C(p,[t,a]):a()},clone:e=>Yo(e,t,n,o)};return k}function Xo(e){if(rr(e))return(e=ea(e)).children=null,e}function Jo(e){return rr(e)?e.children?e.children[0]:void 0:e}function Zo(e,t){6&e.shapeFlag&&e.component?Zo(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Qo(e,t=!1,n){let o=[],r=0;for(let i=0;i<e.length;i++){let a=e[i];const s=null==n?a.key:String(n)+String(null!=a.key?a.key:i);a.type===xi?(128&a.patchFlag&&r++,o=o.concat(Qo(a.children,t,s))):(t||a.type!==Pi)&&o.push(null!=s?ea(a,{key:s}):a)}if(r>1)for(let i=0;i<o.length;i++)o[i].patchFlag=-2;return o}function er(e){return D(e)?{setup:e,name:e.name}:e}const tr=e=>!!e.type.__asyncLoader;function nr(e){D(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:o,delay:r=200,timeout:i,suspensible:a=!0,onError:s}=e;let c,l=null,u=0;const d=()=>{let e;return l||(e=l=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),s)return new Promise(((t,n)=>{s(e,(()=>t((u++,l=null,d()))),(()=>n(e)),u+1)}));throw e})).then((t=>e!==l&&l?l:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),c=t,t))))};return er({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return c},setup(){const e=ua;if(c)return()=>or(c,e);const t=t=>{l=null,to(t,e,13,!o)};if(a&&e.suspense||va)return d().then((t=>()=>or(t,e))).catch((e=>(t(e),()=>o?Zi(o,{error:e}):null)));const s=qn(!1),u=qn(),p=qn(!!r);return r&&setTimeout((()=>{p.value=!1}),r),null!=i&&setTimeout((()=>{if(!s.value&&!u.value){const e=new Error(`Async component timed out after ${i}ms.`);t(e),u.value=e}}),i),d().then((()=>{s.value=!0,e.parent&&rr(e.parent.vnode)&&ho(e.parent.update)})).catch((e=>{t(e),u.value=e})),()=>s.value&&c?or(c,e):u.value&&o?Zi(o,{error:u.value}):n&&!p.value?Zi(n):void 0}})}function or(e,t){const{ref:n,props:o,children:r,ce:i}=t.vnode,a=Zi(e,o,r);return a.ref=n,a.ce=i,delete t.vnode.ce,a}const rr=e=>e.type.__isKeepAlive;class ir{constructor(e){this.max=e,this._cache=new Map,this._keys=new Set,this._max=parseInt(e,10)}get(e){const{_cache:t,_keys:n,_max:o}=this,r=t.get(e);if(r)n.delete(e),n.add(e);else if(n.add(e),o&&n.size>o){const e=n.values().next().value;this.pruneCacheEntry(t.get(e)),this.delete(e)}return r}set(e,t){this._cache.set(e,t)}delete(e){this._cache.delete(e),this._keys.delete(e)}forEach(e,t){this._cache.forEach(e.bind(t))}}const ar={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number],matchBy:{type:String,default:"name"},cache:Object},setup(e,{slots:t}){const n=da(),o=n.ctx;if(!o.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const r=e.cache||new ir(e.max);r.pruneCacheEntry=a;let i=null;function a(t){var o;!i||!Wi(t,i)||"key"===e.matchBy&&t.key!==i.key?(hr(o=t),u(o,n,s,!0)):i&&hr(i)}const s=n.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:d}}}=o,p=d("div");function h(t){r.forEach(((n,o)=>{const i=gr(n,e.matchBy);!i||t&&t(i)||(r.delete(o),a(n))}))}o.activate=(e,t,n,o,r)=>{const i=e.component;if(i.ba){const e=i.isDeactivated;i.isDeactivated=!1,K(i.ba),i.isDeactivated=e}l(e,t,n,0,s),c(i.vnode,e,t,n,i,s,o,e.slotScopeIds,r),ki((()=>{i.isDeactivated=!1,i.a&&K(i.a);const t=e.props&&e.props.onVnodeMounted;t&&sa(t,i.parent,e)}),s)},o.deactivate=e=>{const t=e.component;t.bda&&vr(t.bda),l(e,p,null,1,s),ki((()=>{t.bda&&mr(t.bda),t.da&&K(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&sa(n,t.parent,e),t.isDeactivated=!0}),s)},Bo((()=>[e.include,e.exclude,e.matchBy]),(([e,t])=>{e&&h((t=>cr(e,t))),t&&h((e=>!cr(t,e)))}),{flush:"post",deep:!0});let f=null;const g=()=>{null!=f&&r.set(f,fr(n.subTree))};return Mr(g),kr(g),wr((()=>{r.forEach(((t,o)=>{r.delete(o),a(t);const{subTree:i,suspense:s}=n,c=fr(i);if(t.type!==c.type||"key"===e.matchBy&&t.key!==c.key);else{c.component.bda&&K(c.component.bda),hr(c);const e=c.component.da;e&&ki(e,s)}}))})),()=>{if(f=null,!t.default)return null;const n=t.default(),o=n[0];if(n.length>1)return i=null,n;if(!$i(o)||!(4&o.shapeFlag)&&!xo(o.type))return i=null,o;let a=fr(o);const s=a.type,c=gr(a,e.matchBy),{include:l,exclude:u}=e;if(l&&(!c||!cr(l,c))||u&&c&&cr(u,c))return i=a,o;const d=null==a.key?s:a.key,p=r.get(d);return a.el&&(a=ea(a),xo(o.type)&&(o.ssContent=a)),f=d,p&&(a.el=p.el,a.component=p.component,a.transition&&Zo(a,a.transition),a.shapeFlag|=512),a.shapeFlag|=256,i=a,xo(o.type)?o:a}}},sr=ar;function cr(e,t){return T(e)?e.some((e=>cr(e,t))):A(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function lr(e,t){dr(e,"a",t)}function ur(e,t){dr(e,"da",t)}function dr(e,t,n=ua){const o=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(o.__called=!1,_r(t,o,n),n){let e=n.parent;for(;e&&e.parent;)rr(e.parent.vnode)&&pr(o,t,n,e),e=e.parent}}function pr(e,t,n,o){const r=_r(t,e,o,!0);Tr((()=>{C(o[t],r)}),n)}function hr(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function fr(e){return xo(e.type)?e.ssContent:e}function gr(e,t){if("name"===t){const t=e.type;return ba(tr(e)?t.__asyncResolved||{}:t)}return String(e.key)}function vr(e){for(let t=0;t<e.length;t++){const n=e[t];n.__called||(n(),n.__called=!0)}}function mr(e){e.forEach((e=>e.__called=!1))}function _r(e,t,n=ua,o=!1){if(n){if(r=e,ct.indexOf(r)>-1&&n.$pageInstance){if(n.type.__reserved)return;if(n!==n.$pageInstance&&(n=n.$pageInstance,function(e){return lt.indexOf(e)>-1}(e))){const o=n.proxy;eo(t.bind(o),n,e,ve===e?[o.$page.options]:[])}}const i=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Nt(),pa(n);const r=eo(t,n,e,o);return ha(),Pt(),r});return o?i.unshift(a):i.push(a),a}var r}const yr=e=>(t,n=ua)=>(!va||"sp"===e)&&_r(e,((...e)=>t(...e)),n),br=yr("bm"),Mr=yr("m"),Cr=yr("bu"),kr=yr("u"),wr=yr("bum"),Tr=yr("um"),Sr=yr("sp"),Ir=yr("rtg"),Er=yr("rtc");function Dr(e,t=ua){_r("ec",e,t)}function Ar(e,t){const n=wo;if(null===n)return e;const o=ya(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[e,n,a,s=f]=t[i];e&&(D(e)&&(e={mounted:e,updated:e}),e.deep&&Ho(n),r.push({dir:e,instance:o,value:n,oldValue:void 0,arg:a,modifiers:s}))}return e}function Lr(e,t,n,o){const r=e.dirs,i=t&&t.dirs;for(let a=0;a<r.length;a++){const s=r[a];i&&(s.oldValue=i[a].value);let c=s.dir[o];c&&(Nt(),eo(c,n,8,[e.el,s,e,t]),Pt())}}const Rr="components",Or="directives";function xr(e,t){return Gr(Rr,e,!0,t)||e}const Nr=Symbol();function Pr(e){return A(e)?Gr(Rr,e,!1)||e:e||Nr}function Ur(e){return Gr(Or,e)}function Gr(e,t,n=!0,o=!1){const r=wo||ua;if(r){const n=r.type;if(e===Rr){const e=ba(n,!1);if(e&&(e===t||e===V(t)||e===j(V(t))))return n}const i=Br(r[e]||n[e],t)||Br(r.appContext[e],t);return!i&&o?n:i}}function Br(e,t){return e&&(e[t]||e[V(t)]||e[j(V(t))])}function Fr(e,t,n,o){let r;const i=n&&n[o];if(T(e)||A(e)){r=new Array(e.length);for(let n=0,o=e.length;n<o;n++)r[n]=t(e[n],n,void 0,i&&i[n])}else if("number"==typeof e){r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,i&&i[n])}else if(R(e))if(e[Symbol.iterator])r=Array.from(e,((e,n)=>t(e,n,void 0,i&&i[n])));else{const n=Object.keys(e);r=new Array(n.length);for(let o=0,a=n.length;o<a;o++){const a=n[o];r[o]=t(e[a],a,o,i&&i[o])}}else r=[];return n&&(n[o]=r),r}function qr(e,t,n={},o,r){if(wo.isCE||wo.parent&&tr(wo.parent)&&wo.parent.isCE)return"default"!==t&&(n.name=t),Zi("slot",n,o&&o());let i=e[t];i&&i._c&&(i._d=!1),Fi();const a=i&&Vr(i(n)),s=ji(xi,{key:n.key||a&&a.key||`_${t}`},a||(o?o():[]),a&&1===e._?64:-2);return!r&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),i&&i._c&&(i._d=!0),s}function Vr(e){return e.some((e=>!$i(e)||e.type!==Pi&&!(e.type===xi&&!Vr(e.children))))?e:null}const Hr=e=>e?fa(e)?ya(e)||e.proxy:Hr(e.parent):null,zr=M(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Hr(e.parent),$root:e=>Hr(e.root),$emit:e=>e.emit,$options:e=>Jr(e),$forceUpdate:e=>e.f||(e.f=()=>ho(e.update)),$nextTick:e=>e.n||(e.n=po.bind(e.proxy)),$watch:e=>qo.bind(e)}),jr=(e,t)=>e!==f&&!e.__isScriptSetup&&w(e,t),$r={get({_:e},t){const{ctx:n,setupState:o,data:r,props:i,accessCache:a,type:s,appContext:c}=e;let l;if("$"!==t[0]){const s=a[t];if(void 0!==s)switch(s){case 1:return o[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(jr(o,t))return a[t]=1,o[t];if(r!==f&&w(r,t))return a[t]=2,r[t];if((l=e.propsOptions[0])&&w(l,t))return a[t]=3,i[t];if(n!==f&&w(n,t))return a[t]=4,n[t];Wr&&(a[t]=0)}}const u=zr[t];let d,p;return u?("$attrs"===t&&Ut(e,0,t),u(e)):(d=s.__cssModules)&&(d=d[t])?d:n!==f&&w(n,t)?(a[t]=4,n[t]):(p=c.config.globalProperties,w(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:o,setupState:r,ctx:i}=e;return jr(r,t)?(r[t]=n,!0):o!==f&&w(o,t)?(o[t]=n,!0):!w(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(i[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:r,propsOptions:i}},a){let s;return!!n[a]||e!==f&&w(e,a)||jr(t,a)||(s=i[0])&&w(s,a)||w(o,a)||w(zr,a)||w(r.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:w(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Wr=!0;function Kr(e){const t=Jr(e),n=e.proxy,o=e.ctx;Wr=!1,t.beforeCreate&&Yr(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:a,watch:s,provide:c,inject:l,created:u,beforeMount:d,mounted:p,beforeUpdate:h,updated:f,activated:g,deactivated:m,beforeDestroy:_,beforeUnmount:y,destroyed:b,unmounted:M,render:C,renderTracked:k,renderTriggered:w,errorCaptured:S,serverPrefetch:I,expose:E,inheritAttrs:A,components:L,directives:O,filters:x}=t;if(l&&function(e,t,n=v,o=!1){T(e)&&(e=ti(e));for(const r in e){const n=e[r];let i;i=R(n)?"default"in n?Po(n.from||r,n.default,!0):Po(n.from||r):Po(n),Fn(i)&&o?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[r]=i}}(l,o,null,e.appContext.config.unwrapInjectedRef),a)for(const v in a){const e=a[v];D(e)&&(o[v]=e.bind(n))}if(r){const t=r.call(n,n);R(t)&&(e.data=In(t))}if(Wr=!0,i)for(const T in i){const e=i[T],t=D(e)?e.bind(n,n):D(e.get)?e.get.bind(n,n):v,r=!D(e)&&D(e.set)?e.set.bind(n):v,a=Ma({get:t,set:r});Object.defineProperty(o,T,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(s)for(const v in s)Xr(s[v],o,n,v);if(c){const e=D(c)?c.call(n):c;Reflect.ownKeys(e).forEach((t=>{No(t,e[t])}))}function N(e,t){T(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(u&&Yr(u,e,"c"),N(br,d),N(Mr,p),N(Cr,h),N(kr,f),N(lr,g),N(ur,m),N(Dr,S),N(Er,k),N(Ir,w),N(wr,y),N(Tr,M),N(Sr,I),T(E))if(E.length){const t=e.exposed||(e.exposed={});E.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});C&&e.render===v&&(e.render=C),null!=A&&(e.inheritAttrs=A),L&&(e.components=L),O&&(e.directives=O);const P=e.appContext.config.globalProperties.$applyOptions;P&&P(t,e,n)}function Yr(e,t,n){eo(T(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Xr(e,t,n,o){const r=o.includes(".")?Vo(n,o):()=>n[o];if(A(e)){const n=t[e];D(n)&&Bo(r,n)}else if(D(e))Bo(r,e.bind(n));else if(R(e))if(T(e))e.forEach((e=>Xr(e,t,n,o)));else{const o=D(e.handler)?e.handler.bind(n):t[e.handler];D(o)&&Bo(r,o,e)}}function Jr(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,s=i.get(t);let c;return s?c=s:r.length||n||o?(c={},r.length&&r.forEach((e=>Zr(c,e,a,!0))),Zr(c,t,a)):c=t,R(t)&&i.set(t,c),c}function Zr(e,t,n,o=!1){const{mixins:r,extends:i}=t;i&&Zr(e,i,n,!0),r&&r.forEach((t=>Zr(e,t,n,!0)));for(const a in t)if(o&&"expose"===a);else{const o=Qr[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const Qr={data:ei,props:oi,emits:oi,methods:oi,computed:oi,beforeCreate:ni,created:ni,beforeMount:ni,mounted:ni,beforeUpdate:ni,updated:ni,beforeDestroy:ni,beforeUnmount:ni,destroyed:ni,unmounted:ni,activated:ni,deactivated:ni,errorCaptured:ni,serverPrefetch:ni,components:oi,directives:oi,watch:function(e,t){if(!e)return t;if(!t)return e;const n=M(Object.create(null),e);for(const o in t)n[o]=ni(e[o],t[o]);return n},provide:ei,inject:function(e,t){return oi(ti(e),ti(t))}};function ei(e,t){return t?e?function(){return M(D(e)?e.call(this,this):e,D(t)?t.call(this,this):t)}:t:e}function ti(e){if(T(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ni(e,t){return e?[...new Set([].concat(e,t))]:t}function oi(e,t){return e?M(M(Object.create(null),e),t):t}function ri(e,t,n,o=!1){const r={},i={};Y(i,Ki,1),e.propsDefaults=Object.create(null),ii(e,t,r,i);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);n?e.props=o?r:Dn(r,!1,en,Mn,wn):e.type.props?e.props=r:e.props=i,e.attrs=i}function ii(e,t,n,o){const[r,i]=e.propsOptions;let a,s=!1;if(t)for(let c in t){if(B(c))continue;const l=t[c];let u;r&&w(r,u=V(c))?i&&i.includes(u)?(a||(a={}))[u]=l:n[u]=l:ko(e.emitsOptions,c)||c in o&&l===o[c]||(o[c]=l,s=!0)}if(i){const t=xn(n),o=a||f;for(let a=0;a<i.length;a++){const s=i[a];n[s]=ai(r,t,s,o[s],e,!w(o,s))}}return s}function ai(e,t,n,o,r,i){const a=e[n];if(null!=a){const e=w(a,"default");if(e&&void 0===o){const e=a.default;if(a.type!==Function&&D(e)){const{propsDefaults:i}=r;n in i?o=i[n]:(pa(r),o=i[n]=e.call(null,t),ha())}else o=e}a[0]&&(i&&!e?o=!1:!a[1]||""!==o&&o!==z(n)||(o=!0))}return o}function si(e,t,n=!1){const o=t.propsCache,r=o.get(e);if(r)return r;const i=e.props,a={},s=[];let c=!1;if(!D(e)){const o=e=>{c=!0;const[n,o]=si(e,t,!0);M(a,n),o&&s.push(...o)};!n&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}if(!i&&!c)return R(e)&&o.set(e,g),g;if(T(i))for(let u=0;u<i.length;u++){const e=V(i[u]);ci(e)&&(a[e]=f)}else if(i)for(const u in i){const e=V(u);if(ci(e)){const t=i[u],n=a[e]=T(t)||D(t)?{type:t}:Object.assign({},t);if(n){const t=di(Boolean,n.type),o=di(String,n.type);n[0]=t>-1,n[1]=o<0||t<o,(t>-1||w(n,"default"))&&s.push(e)}}}const l=[a,s];return R(e)&&o.set(e,l),l}function ci(e){return"$"!==e[0]}function li(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function ui(e,t){return li(e)===li(t)}function di(e,t){return T(t)?t.findIndex((t=>ui(t,e))):D(t)&&ui(t,e)?0:-1}const pi=e=>"_"===e[0]||"$stable"===e,hi=e=>T(e)?e.map(oa):[oa(e)],fi=(e,t,n)=>{if(t._n)return t;const o=Do(((...e)=>hi(t(...e))),n);return o._c=!1,o},gi=(e,t,n)=>{const o=e._ctx;for(const r in e){if(pi(r))continue;const n=e[r];if(D(n))t[r]=fi(0,n,o);else if(null!=n){const e=hi(n);t[r]=()=>e}}},vi=(e,t)=>{const n=hi(t);e.slots.default=()=>n},mi=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=xn(t),Y(t,"_",n)):gi(t,e.slots={})}else e.slots={},t&&vi(e,t);Y(e.slots,Ki,1)},_i=(e,t,n)=>{const{vnode:o,slots:r}=e;let i=!0,a=f;if(32&o.shapeFlag){const e=t._;e?n&&1===e?i=!1:(M(r,t),n||1!==e||delete r._):(i=!t.$stable,gi(t,r)),a=t}else t&&(vi(e,t),a={default:1});if(i)for(const s in r)pi(s)||s in a||delete r[s]};function yi(){return{app:null,config:{isNativeTag:m,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bi=0;function Mi(e,t){return function(n,o=null){D(n)||(n=Object.assign({},n)),null==o||R(o)||(o=null);const r=yi(),i=new Set;let a=!1;const s=r.app={_uid:bi++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:Ta,get config(){return r.config},set config(e){},use:(e,...t)=>(i.has(e)||(e&&D(e.install)?(i.add(e),e.install(s,...t)):D(e)&&(i.add(e),e(s,...t))),s),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),s),component:(e,t)=>t?(r.components[e]=t,s):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,s):r.directives[e],mount(i,c,l){if(!a){const u=Zi(n,o);return u.appContext=r,c&&t?t(u,i):e(u,i,l),a=!0,s._container=i,i.__vue_app__=s,s._instance=u.component,ya(u.component)||u.component.proxy}},unmount(){a&&(e(null,s._container),delete s._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,s)};return s}}function Ci(e,t,n,o,r=!1){if(T(e))return void e.forEach(((e,i)=>Ci(e,t&&(T(t)?t[i]:t),n,o,r)));if(tr(o)&&!r)return;const i=4&o.shapeFlag?ya(o.component)||o.component.proxy:o.el,a=r?null:i,{i:s,r:c}=e,l=t&&t.r,u=s.refs===f?s.refs={}:s.refs,d=s.setupState;if(null!=l&&l!==c&&(A(l)?(u[l]=null,w(d,l)&&(d[l]=null)):Fn(l)&&(l.value=null)),D(c))Qn(c,s,12,[a,u]);else{const t=A(c),o=Fn(c);if(t||o){const s=()=>{if(e.f){const n=t?w(d,c)?d[c]:u[c]:c.value;r?T(n)&&C(n,i):T(n)?n.includes(i)||n.push(i):t?(u[c]=[i],w(d,c)&&(d[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else t?(u[c]=a,w(d,c)&&(d[c]=a)):o&&(c.value=a,e.k&&(u[e.k]=a))};a?(s.id=-1,ki(s,n)):s()}}}const ki=function(e,t){var n;t&&t.pendingBranch?T(e)?t.effects.push(...e):t.effects.push(e):(T(n=e)?ao.push(...n):so&&so.includes(n,n.allowRecurse?co+1:co)||ao.push(n),fo())};function wi(e){return function(e,t){Q().__VUE__=!0;const{insert:n,remove:o,patchProp:r,forcePatchProp:i,createElement:a,createText:s,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:p,setScopeId:h=v,insertStaticContent:m}=e,_=(e,t,n,o=null,r=null,i=null,a=!1,s=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Wi(e,t)&&(o=Z(e),$(e,r,i,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:l,ref:u,shapeFlag:d}=t;switch(l){case Ni:y(e,t,n,o);break;case Pi:b(e,t,n,o);break;case Ui:null==e&&M(t,n,o,a);break;case xi:R(e,t,n,o,r,i,a,s,c);break;default:1&d?T(e,t,n,o,r,i,a,s,c):6&d?x(e,t,n,o,r,i,a,s,c):(64&d||128&d)&&l.process(e,t,n,o,r,i,a,s,c,te)}null!=u&&r&&Ci(u,e&&e.ref,i,t||e,!t)},y=(e,t,o,r)=>{if(null==e)n(t.el=s(t.children),o,r);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},b=(e,t,o,r)=>{null==e?n(t.el=c(t.children||""),o,r):t.el=e.el},M=(e,t,n,o)=>{[e.el,e.anchor]=m(e.children,t,n,o,e.el,e.anchor)},C=({el:e,anchor:t},o,r)=>{let i;for(;e&&e!==t;)i=p(e),n(e,o,r),e=i;n(t,o,r)},k=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=p(e),o(e),e=n;o(t)},T=(e,t,n,o,r,i,a,s,c)=>{a=a||"svg"===t.type,null==e?S(t,n,o,r,i,a,s,c):D(e,t,r,i,a,s,c)},S=(e,t,o,i,s,c,l,d)=>{let p,h;const{type:f,props:g,shapeFlag:v,transition:m,dirs:_}=e;if(p=e.el=a(e.type,c,g&&g.is,g),8&v?u(p,e.children):16&v&&E(e.children,p,null,i,s,c&&"foreignObject"!==f,l,d),_&&Lr(e,null,i,"created"),I(p,e,e.scopeId,l,i),g){for(const t in g)"value"===t||B(t)||r(p,t,null,g[t],c,e.children,i,s,J);"value"in g&&r(p,"value",null,g.value),(h=g.onVnodeBeforeMount)&&sa(h,i,e)}Object.defineProperty(p,"__vueParentComponent",{value:i,enumerable:!1}),_&&Lr(e,null,i,"beforeMount");const y=(!s||s&&!s.pendingBranch)&&m&&!m.persisted;y&&m.beforeEnter(p),n(p,t,o),((h=g&&g.onVnodeMounted)||y||_)&&ki((()=>{h&&sa(h,i,e),y&&m.enter(p),_&&Lr(e,null,i,"mounted")}),s)},I=(e,t,n,o,r)=>{if(n&&h(e,n),o)for(let i=0;i<o.length;i++)h(e,o[i]);if(r){if(t===r.subTree){const t=r.vnode;I(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},E=(e,t,n,o,r,i,a,s,c=0)=>{for(let l=c;l<e.length;l++){const c=e[l]=s?ra(e[l]):oa(e[l]);_(null,c,t,n,o,r,i,a,s)}},D=(e,t,n,o,a,s,c)=>{const l=t.el=e.el;let{patchFlag:d,dynamicChildren:p,dirs:h}=t;d|=16&e.patchFlag;const g=e.props||f,v=t.props||f;let m;n&&Ti(n,!1),(m=v.onVnodeBeforeUpdate)&&sa(m,n,t,e),h&&Lr(t,e,n,"beforeUpdate"),n&&Ti(n,!0);const _=a&&"foreignObject"!==t.type;if(p?A(e.dynamicChildren,p,l,n,o,_,s):c||F(e,t,l,null,n,o,_,s,!1),d>0){if(16&d)L(l,t,g,v,n,o,a);else if(2&d&&g.class!==v.class&&r(l,"class",null,v.class,a),4&d&&r(l,"style",g.style,v.style,a),8&d){const s=t.dynamicProps;for(let t=0;t<s.length;t++){const c=s[t],u=g[c],d=v[c];(d!==u||"value"===c||i&&i(l,c))&&r(l,c,u,d,a,e.children,n,o,J)}}1&d&&e.children!==t.children&&u(l,t.children)}else c||null!=p||L(l,t,g,v,n,o,a);((m=v.onVnodeUpdated)||h)&&ki((()=>{m&&sa(m,n,t,e),h&&Lr(t,e,n,"updated")}),o)},A=(e,t,n,o,r,i,a)=>{for(let s=0;s<t.length;s++){const c=e[s],l=t[s],u=c.el&&(c.type===xi||!Wi(c,l)||70&c.shapeFlag)?d(c.el):n;_(c,l,u,null,o,r,i,a,!0)}},L=(e,t,n,o,a,s,c)=>{if(n!==o){if(n!==f)for(const i in n)B(i)||i in o||r(e,i,n[i],null,c,t.children,a,s,J);for(const l in o){if(B(l))continue;const u=o[l],d=n[l];(u!==d&&"value"!==l||i&&i(e,l))&&r(e,l,d,u,c,t.children,a,s,J)}"value"in o&&r(e,"value",n.value,o.value)}},R=(e,t,o,r,i,a,c,l,u)=>{const d=t.el=e?e.el:s(""),p=t.anchor=e?e.anchor:s("");let{patchFlag:h,dynamicChildren:f,slotScopeIds:g}=t;g&&(l=l?l.concat(g):g),null==e?(n(d,o,r),n(p,o,r),E(t.children,o,p,i,a,c,l,u)):h>0&&64&h&&f&&e.dynamicChildren?(A(e.dynamicChildren,f,o,i,a,c,l),(null!=t.key||i&&t===i.subTree)&&Si(e,t,!0)):F(e,t,o,p,i,a,c,l,u)},x=(e,t,n,o,r,i,a,s,c)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?r.ctx.activate(t,n,o,a,c):N(t,n,o,r,i,a,c):P(e,t,c)},N=(e,t,n,o,r,i,a)=>{const s=e.component=function(e,t,n){const o=e.type,r=(t?t.appContext:e.appContext)||ca,i={uid:la++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new yt(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:si(o,r),emitsOptions:Co(o,r),emit:null,emitted:null,propsDefaults:f,inheritAttrs:o.inheritAttrs,ctx:f,data:f,props:f,attrs:f,slots:f,refs:f,setupState:f,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,bda:null,da:null,ba:null,a:null,rtg:null,rtc:null,ec:null,sp:null};i.ctx={_:i},i.root=t?t.root:i,i.emit=bo.bind(null,i),i.$pageInstance=t&&t.$pageInstance,e.ce&&e.ce(i);return i}(e,o,r);if(rr(e)&&(s.ctx.renderer=te),function(e,t=!1){va=t;const{props:n,children:o}=e.vnode,r=fa(e);ri(e,n,r,t),mi(e,o);const i=r?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Nn(new Proxy(e.ctx,$r));const{setup:o}=n;if(o){const n=e.setupContext=o.length>1?function(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(Ut(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}(e):null;pa(e),Nt();const r=Qn(o,e,0,[e.props,n]);if(Pt(),ha(),O(r)){if(r.then(ha,ha),t)return r.then((n=>{ma(e,n,t)})).catch((t=>{to(t,e,0)}));e.asyncDep=r}else ma(e,r,t)}else _a(e,t)}(e,t):void 0;va=!1}(s),s.asyncDep){if(r&&r.registerDep(s,U),!e.el){const e=s.subTree=Zi(Pi);b(null,e,t,n)}}else U(s,e,t,n,r,i,a)},P=(e,t,n)=>{const o=t.component=e.component;if(function(e,t,n){const{props:o,children:r,component:i}=e,{props:a,children:s,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!r&&!s||s&&s.$stable)||o!==a&&(o?!a||Oo(o,a,l):!!a);if(1024&c)return!0;if(16&c)return o?Oo(o,a,l):!!a;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==o[n]&&!ko(l,n))return!0}}return!1}(e,t,n)){if(o.asyncDep&&!o.asyncResolved)return void G(o,t,n);o.next=t,function(e){const t=ro.indexOf(e);t>io&&ro.splice(t,1)}(o.update),o.update()}else t.el=e.el,o.vnode=t},U=(e,t,n,o,r,i,a)=>{const s=()=>{if(e.isMounted){let t,{next:n,bu:o,u:s,parent:c,vnode:l}=e,u=n;Ti(e,!1),n?(n.el=l.el,G(e,n,a)):n=l,o&&K(o),(t=n.props&&n.props.onVnodeBeforeUpdate)&&sa(t,c,n,l),Ti(e,!0);const p=Ao(e),h=e.subTree;e.subTree=p,_(h,p,d(h.el),Z(h),e,r,i),n.el=p.el,null===u&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,p.el),s&&ki(s,r),(t=n.props&&n.props.onVnodeUpdated)&&ki((()=>sa(t,c,n,l)),r)}else{let a;const{el:s,props:c}=t,{bm:l,m:u,parent:d}=e,p=tr(t);if(Ti(e,!1),l&&K(l),!p&&(a=c&&c.onVnodeBeforeMount)&&sa(a,d,t),Ti(e,!0),s&&oe){const n=()=>{e.subTree=Ao(e),oe(s,e.subTree,e,r,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const a=e.subTree=Ao(e);_(null,a,n,o,e,r,i),t.el=a.el}if(u&&ki(u,r),!p&&(a=c&&c.onVnodeMounted)){const e=t;ki((()=>sa(a,d,e)),r)}const{ba:h,a:f}=e;(256&t.shapeFlag||d&&tr(d.vnode)&&256&d.vnode.shapeFlag)&&(h&&vr(h),f&&ki(f,r),h&&ki((()=>mr(h)),r)),e.isMounted=!0,t=n=o=null}},c=e.effect=new Lt(s,(()=>ho(l)),e.scope),l=e.update=()=>c.run();l.id=e.uid,Ti(e,!0),l()},G=(e,t,n)=>{t.component=e;const o=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,o){const{props:r,attrs:i,vnode:{patchFlag:a}}=e,s=xn(r),[c]=e.propsOptions;let l=!1;if(!(o||a>0)||16&a){let o;ii(e,t,r,i)&&(l=!0);for(const i in s)t&&(w(t,i)||(o=z(i))!==i&&w(t,o))||(c?!n||void 0===n[i]&&void 0===n[o]||(r[i]=ai(c,s,i,void 0,e,!0)):delete r[i]);if(i!==s)for(const e in i)t&&w(t,e)||(delete i[e],l=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let o=0;o<n.length;o++){let a=n[o];if(ko(e.emitsOptions,a))continue;const u=t[a];if(c)if(w(i,a))u!==i[a]&&(i[a]=u,l=!0);else{const t=V(a);r[t]=ai(c,s,t,u,e,!1)}else u!==i[a]&&(i[a]=u,l=!0)}}l&&Bt(e,"set","$attrs")}(e,t.props,o,n),_i(e,t.children,n),Nt(),go(),Pt()},F=(e,t,n,o,r,i,a,s,c=!1)=>{const l=e&&e.children,d=e?e.shapeFlag:0,p=t.children,{patchFlag:h,shapeFlag:f}=t;if(h>0){if(128&h)return void H(l,p,n,o,r,i,a,s,c);if(256&h)return void q(l,p,n,o,r,i,a,s,c)}8&f?(16&d&&J(l,r,i),p!==l&&u(n,p)):16&d?16&f?H(l,p,n,o,r,i,a,s,c):J(l,r,i,!0):(8&d&&u(n,""),16&f&&E(p,n,o,r,i,a,s,c))},q=(e,t,n,o,r,i,a,s,c)=>{t=t||g;const l=(e=e||g).length,u=t.length,d=Math.min(l,u);let p;for(p=0;p<d;p++){const o=t[p]=c?ra(t[p]):oa(t[p]);_(e[p],o,n,null,r,i,a,s,c)}l>u?J(e,r,i,!0,!1,d):E(t,n,o,r,i,a,s,c,d)},H=(e,t,n,o,r,i,a,s,c)=>{let l=0;const u=t.length;let d=e.length-1,p=u-1;for(;l<=d&&l<=p;){const o=e[l],u=t[l]=c?ra(t[l]):oa(t[l]);if(!Wi(o,u))break;_(o,u,n,null,r,i,a,s,c),l++}for(;l<=d&&l<=p;){const o=e[d],l=t[p]=c?ra(t[p]):oa(t[p]);if(!Wi(o,l))break;_(o,l,n,null,r,i,a,s,c),d--,p--}if(l>d){if(l<=p){const e=p+1,d=e<u?t[e].el:o;for(;l<=p;)_(null,t[l]=c?ra(t[l]):oa(t[l]),n,d,r,i,a,s,c),l++}}else if(l>p)for(;l<=d;)$(e[l],r,i,!0),l++;else{const h=l,f=l,v=new Map;for(l=f;l<=p;l++){const e=t[l]=c?ra(t[l]):oa(t[l]);null!=e.key&&v.set(e.key,l)}let m,y=0;const b=p-f+1;let M=!1,C=0;const k=new Array(b);for(l=0;l<b;l++)k[l]=0;for(l=h;l<=d;l++){const o=e[l];if(y>=b){$(o,r,i,!0);continue}let u;if(null!=o.key)u=v.get(o.key);else for(m=f;m<=p;m++)if(0===k[m-f]&&Wi(o,t[m])){u=m;break}void 0===u?$(o,r,i,!0):(k[u-f]=l+1,u>=C?C=u:M=!0,_(o,t[u],n,null,r,i,a,s,c),y++)}const w=M?function(e){const t=e.slice(),n=[0];let o,r,i,a,s;const c=e.length;for(o=0;o<c;o++){const c=e[o];if(0!==c){if(r=n[n.length-1],e[r]<c){t[o]=r,n.push(o);continue}for(i=0,a=n.length-1;i<a;)s=i+a>>1,e[n[s]]<c?i=s+1:a=s;c<e[n[i]]&&(i>0&&(t[o]=n[i-1]),n[i]=o)}}i=n.length,a=n[i-1];for(;i-- >0;)n[i]=a,a=t[a];return n}(k):g;for(m=w.length-1,l=b-1;l>=0;l--){const e=f+l,d=t[e],p=e+1<u?t[e+1].el:o;0===k[l]?_(null,d,n,p,r,i,a,s,c):M&&(m<0||l!==w[m]?j(d,n,p,2):m--)}}},j=(e,t,o,r,i=null)=>{const{el:a,type:s,transition:c,children:l,shapeFlag:u}=e;if(6&u)return void j(e.component.subTree,t,o,r);if(128&u)return void e.suspense.move(t,o,r);if(64&u)return void s.move(e,t,o,te);if(s===xi){n(a,t,o);for(let e=0;e<l.length;e++)j(l[e],t,o,r);return void n(e.anchor,t,o)}if(s===Ui)return void C(e,t,o);if(2!==r&&1&u&&c)if(0===r)c.beforeEnter(a),n(a,t,o),ki((()=>c.enter(a)),i);else{const{leave:e,delayLeave:r,afterLeave:i}=c,s=()=>n(a,t,o),l=()=>{e(a,(()=>{s(),i&&i()}))};r?r(a,s,l):l()}else n(a,t,o)},$=(e,t,n,o=!1,r=!1)=>{const{type:i,props:a,ref:s,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:d,dirs:p}=e;if(null!=s&&Ci(s,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const h=1&u&&p,f=!tr(e);let g;if(f&&(g=a&&a.onVnodeBeforeUnmount)&&sa(g,t,e),6&u)X(e.component,n,o);else{if(128&u)return void e.suspense.unmount(n,o);h&&Lr(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,r,te,o):l&&(i!==xi||d>0&&64&d)?J(l,t,n,!1,!0):(i===xi&&384&d||!r&&16&u)&&J(c,t,n),o&&W(e)}(f&&(g=a&&a.onVnodeUnmounted)||h)&&ki((()=>{g&&sa(g,t,e),h&&Lr(e,null,t,"unmounted")}),n)},W=e=>{const{type:t,el:n,anchor:r,transition:i}=e;if(t===xi)return void Y(n,r);if(t===Ui)return void k(e);const a=()=>{o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:o}=i,r=()=>t(n,a);o?o(e.el,a,r):r()}else a()},Y=(e,t)=>{let n;for(;e!==t;)n=p(e),o(e),e=n;o(t)},X=(e,t,n)=>{const{bum:o,scope:r,update:i,subTree:a,um:s}=e;o&&K(o),r.stop(),i&&(i.active=!1,$(a,e,t,n)),s&&ki(s,t),ki((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},J=(e,t,n,o=!1,r=!1,i=0)=>{for(let a=i;a<e.length;a++)$(e[a],t,n,o,r)},Z=e=>6&e.shapeFlag?Z(e.component.subTree):128&e.shapeFlag?e.suspense.next():p(e.anchor||e.el),ee=(e,t,n)=>{null==e?t._vnode&&$(t._vnode,null,null,!0):_(t._vnode||null,e,t,null,null,null,n),go(),vo(),t._vnode=e},te={p:_,um:$,m:j,r:W,mt:N,mc:E,pc:F,pbc:A,n:Z,o:e};let ne,oe;t&&([ne,oe]=t(te));return{render:ee,hydrate:ne,createApp:Mi(ee,ne)}}(e)}function Ti({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Si(e,t,n=!1){const o=e.children,r=t.children;if(T(o)&&T(r))for(let i=0;i<o.length;i++){const e=o[i];let t=r[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[i]=ra(r[i]),t.el=e.el),n||Si(e,t)),t.type===Ni&&(t.el=e.el)}}const Ii=e=>e&&(e.disabled||""===e.disabled),Ei=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,Di=(e,t)=>{const n=e&&e.to;if(A(n)){if(t){return t(n)}return null}return n},Ai={__isTeleport:!0,process(e,t,n,o,r,i,a,s,c,l){const{mc:u,pc:d,pbc:p,o:{insert:h,querySelector:f,createText:g,createComment:v}}=l,m=Ii(t.props);let{shapeFlag:_,children:y,dynamicChildren:b}=t;if(null==e){const e=t.el=g(""),l=t.anchor=g("");h(e,n,o),h(l,n,o);const d=t.target=Di(t.props,f),p=t.targetAnchor=g("");d&&(h(p,d),a=a||Ei(d));const v=(e,t)=>{16&_&&u(y,e,t,r,i,a,s,c)};m?v(n,l):d&&v(d,p)}else{t.el=e.el;const o=t.anchor=e.anchor,u=t.target=e.target,h=t.targetAnchor=e.targetAnchor,g=Ii(e.props),v=g?n:u,_=g?o:h;if(a=a||Ei(u),b?(p(e.dynamicChildren,b,v,r,i,a,s),Si(e,t,!0)):c||d(e,t,v,_,r,i,a,s,!1),m)g||Li(t,n,o,l,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=Di(t.props,f);e&&Li(t,e,null,l,0)}else g&&Li(t,u,h,l,1)}Oi(t)},remove(e,t,n,o,{um:r,o:{remove:i}},a){const{shapeFlag:s,children:c,anchor:l,targetAnchor:u,target:d,props:p}=e;if(d&&i(u),(a||!Ii(p))&&(i(l),16&s))for(let h=0;h<c.length;h++){const e=c[h];r(e,t,n,!0,!!e.dynamicChildren)}},move:Li,hydrate:function(e,t,n,o,r,i,{o:{nextSibling:a,parentNode:s,querySelector:c}},l){const u=t.target=Di(t.props,c);if(u){const c=u._lpa||u.firstChild;if(16&t.shapeFlag)if(Ii(t.props))t.anchor=l(a(e),t,s(e),n,o,r,i),t.targetAnchor=c;else{t.anchor=a(e);let s=c;for(;s;)if(s=a(s),s&&8===s.nodeType&&"teleport anchor"===s.data){t.targetAnchor=s,u._lpa=t.targetAnchor&&a(t.targetAnchor);break}l(c,t,u,n,o,r,i)}Oi(t)}return t.anchor&&a(t.anchor)}};function Li(e,t,n,{o:{insert:o},m:r},i=2){0===i&&o(e.targetAnchor,t,n);const{el:a,anchor:s,shapeFlag:c,children:l,props:u}=e,d=2===i;if(d&&o(a,t,n),(!d||Ii(u))&&16&c)for(let p=0;p<l.length;p++)r(l[p],t,n,2);d&&o(s,t,n)}const Ri=Ai;function Oi(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n!==e.targetAnchor;)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const xi=Symbol(void 0),Ni=Symbol(void 0),Pi=Symbol(void 0),Ui=Symbol(void 0),Gi=[];let Bi=null;function Fi(e=!1){Gi.push(Bi=e?null:[])}let qi=1;function Vi(e){qi+=e}function Hi(e){return e.dynamicChildren=qi>0?Bi||g:null,Gi.pop(),Bi=Gi[Gi.length-1]||null,qi>0&&Bi&&Bi.push(e),e}function zi(e,t,n,o,r,i){return Hi(Ji(e,t,n,o,r,i,!0))}function ji(e,t,n,o,r){return Hi(Zi(e,t,n,o,r,!0))}function $i(e){return!!e&&!0===e.__v_isVNode}function Wi(e,t){return e.type===t.type&&e.key===t.key}const Ki="__vInternal",Yi=({key:e})=>null!=e?e:null,Xi=({ref:e,ref_key:t,ref_for:n})=>null!=e?A(e)||Fn(e)||D(e)?{i:wo,r:e,k:t,f:!!n}:e:null;function Ji(e,t=null,n=null,o=0,r=null,i=(e===xi?0:1),a=!1,s=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yi(t),ref:t&&Xi(t),scopeId:To,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:wo};return s?(ia(c,n),128&i&&e.normalize(c)):n&&(c.shapeFlag|=A(n)?8:16),qi>0&&!a&&Bi&&(c.patchFlag>0||6&i)&&32!==c.patchFlag&&Bi.push(c),c}const Zi=function(e,n=null,o=null,r=0,i=null,s=!1){e&&e!==Nr||(e=Pi);if($i(e)){const t=ea(e,n,!0);return o&&ia(t,o),qi>0&&!s&&Bi&&(6&t.shapeFlag?Bi[Bi.indexOf(e)]=t:Bi.push(t)),t.patchFlag|=-2,t}c=e,D(c)&&"__vccOpts"in c&&(e=e.__vccOpts);var c;if(n){n=Qi(n);let{class:e,style:o}=n;e&&!A(e)&&(n.class=a(e)),R(o)&&(On(o)&&!T(o)&&(o=M({},o)),n.style=t(o))}const l=A(e)?1:xo(e)?128:(e=>e.__isTeleport)(e)?64:R(e)?4:D(e)?2:0;return Ji(e,n,o,r,i,l,s,!0)};function Qi(e){return e?On(e)||Ki in e?M({},e):e:null}function ea(e,t,n=!1){const{props:o,ref:r,patchFlag:i,children:a}=e,s=t?aa(o||{},t):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&Yi(s),ref:t&&t.ref?n&&r?T(r)?r.concat(Xi(t)):[r,Xi(t)]:Xi(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xi?-1===i?16:16|i:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ea(e.ssContent),ssFallback:e.ssFallback&&ea(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ta(e=" ",t=0){return Zi(Ni,null,e,t)}function na(e="",t=!1){return t?(Fi(),ji(Pi,null,e)):Zi(Pi,null,e)}function oa(e){return null==e||"boolean"==typeof e?Zi(Pi):T(e)?Zi(xi,null,e.slice()):"object"==typeof e?ra(e):Zi(Ni,null,String(e))}function ra(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:ea(e)}function ia(e,t){let n=0;const{shapeFlag:o}=e;if(null==t)t=null;else if(T(t))n=16;else if("object"==typeof t){if(65&o){const n=t.default;return void(n&&(n._c&&(n._d=!1),ia(e,n()),n._c&&(n._d=!0)))}{n=32;const o=t._;o||Ki in t?3===o&&wo&&(1===wo.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=wo}}else D(t)?(t={default:t,_ctx:wo},n=32):(t=String(t),64&o?(n=16,t=[ta(t)]):n=8);e.children=t,e.shapeFlag|=n}function aa(...e){const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const e in r)if("class"===e)n.class!==r.class&&(n.class=a([n.class,r.class]));else if("style"===e)n.style=t([n.style,r.style]);else if(y(e)){const t=n[e],o=r[e];!o||t===o||T(t)&&t.includes(o)||(n[e]=t?[].concat(t,o):o)}else""!==e&&(n[e]=r[e])}return n}function sa(e,t,n,o=null){eo(e,t,7,[n,o])}const ca=yi();let la=0;let ua=null;const da=()=>ua||wo,pa=e=>{ua=e,e.scope.on()},ha=()=>{ua&&ua.scope.off(),ua=null};function fa(e){return 4&e.vnode.shapeFlag}let ga,va=!1;function ma(e,t,n){D(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:R(t)&&(e.setupState=Wn(t)),_a(e,n)}function _a(e,t,n){const o=e.type;if(!e.render){if(!t&&ga&&!o.render){const t=o.template||Jr(e).template;if(t){const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:i,compilerOptions:a}=o,s=M(M({isCustomElement:n,delimiters:i},r),a);o.render=ga(t,s)}}e.render=o.render||v}pa(e),Nt(),Kr(e),Pt(),ha()}function ya(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Wn(Nn(e.exposed)),{get:(t,n)=>n in t?t[n]:n in zr?zr[n](e):void 0,has:(e,t)=>t in e||t in zr}))}function ba(e,t=!0){return D(e)?e.displayName||e.name:e.name||t&&e.__name}const Ma=(e,t)=>function(e,t,n=!1){let o,r;const i=D(e);return i?(o=e,r=v):(o=e.get,r=e.set),new Zn(o,r,i||!r,n)}(e,0,va);function Ca(e,t,n){const o=arguments.length;return 2===o?R(t)&&!T(t)?$i(t)?Zi(e,null,[t]):Zi(e,t):Zi(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):3===o&&$i(n)&&(n=[n]),Zi(e,t,n))}const ka=Symbol(""),wa=()=>Po(ka),Ta="3.2.47",Sa="undefined"!=typeof document?document:null,Ia=Sa&&Sa.createElement("template"),Ea={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r=t?Sa.createElementNS("http://www.w3.org/2000/svg",e):Sa.createElement(e,n?{is:n}:void 0);return"select"===e&&o&&null!=o.multiple&&r.setAttribute("multiple",o.multiple),r},createText:e=>Sa.createTextNode(e),createComment:e=>Sa.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Sa.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,r,i){const a=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),r!==i&&(r=r.nextSibling););else{Ia.innerHTML=o?`<svg>${e}</svg>`:e;const r=Ia.content;if(o){const e=r.firstChild;for(;e.firstChild;)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const Da=/\s*!important$/;function Aa(e,t,n){if(T(n))n.forEach((n=>Aa(e,t,n)));else if(null==n&&(n=""),n=Fa(n),t.startsWith("--"))e.setProperty(t,n);else{const o=function(e,t){const n=Ra[t];if(n)return n;let o=V(t);if("filter"!==o&&o in e)return Ra[t]=o;o=j(o);for(let r=0;r<La.length;r++){const n=La[r]+o;if(n in e)return Ra[t]=n}return t}(e,t);Da.test(n)?e.setProperty(z(o),n.replace(Da,""),"important"):e[o]=n}}const La=["Webkit","Moz","ms"],Ra={};const{unit:Oa,unitRatio:xa,unitPrecision:Na}={unit:"rem",unitRatio:10/320,unitPrecision:5},Pa=(Ua=Oa,Ga=xa,Ba=Na,e=>e.replace(Ze,((e,t)=>{if(!t)return e;if(1===Ga)return`${t}${Ua}`;const n=function(e,t){const n=Math.pow(10,t+1),o=Math.floor(e*n);return 10*Math.round(o/10)/n}(parseFloat(t)*Ga,Ba);return 0===n?"0":`${n}${Ua}`})));var Ua,Ga,Ba;const Fa=e=>A(e)?Pa(e):e,qa="http://www.w3.org/1999/xlink";function Va(e,t,n,o){e.addEventListener(t,n,o)}function Ha(e,t,n,o,r=null){const i=e._vei||(e._vei={}),a=i[t];if(o&&a)a.value=o;else{const[n,s]=function(e){let t;if(za.test(e)){let n;for(t={};n=e.match(za);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):z(e.slice(2));return[n,t]}(t);if(o){const a=i[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();const o=t&&t.proxy,r=o&&o.$nne,{value:i}=n;if(r&&T(i)){const n=Ka(e,i);for(let o=0;o<n.length;o++){const i=n[o];eo(i,t,5,i.__wwe?[e]:r(e))}}else eo(Ka(e,i),t,5,r&&!i.__wwe?r(e,i,t):[e])};return n.value=e,n.attached=Wa(),n}(o,r);Va(e,n,a,s)}else a&&(!function(e,t,n,o){e.removeEventListener(t,n,o)}(e,n,a,s),i[t]=void 0)}}const za=/(?:Once|Passive|Capture)$/;let ja=0;const $a=Promise.resolve(),Wa=()=>ja||($a.then((()=>ja=0)),ja=Date.now());function Ka(e,t){if(T(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>{const t=t=>!t._stopped&&e&&e(t);return t.__wwe=e.__wwe,t}))}return t}const Ya=/^on[a-z]/;const Xa="transition",Ja="animation",Za=(e,{slots:t})=>Ca(Wo,os(e),t);Za.displayName="Transition";const Qa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},es=Za.props=M({},$o,Qa),ts=(e,t=[])=>{T(e)?e.forEach((e=>e(...t))):e&&e(...t)},ns=e=>!!e&&(T(e)?e.some((e=>e.length>1)):e.length>1);function os(e){const t={};for(const M in e)M in Qa||(t[M]=e[M]);if(!1===e.css)return t;const{name:n="v",type:o,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=a,appearToClass:u=s,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(R(e))return[rs(e.enter),rs(e.leave)];{const t=rs(e);return[t,t]}}(r),g=f&&f[0],v=f&&f[1],{onBeforeEnter:m,onEnter:_,onEnterCancelled:y,onLeave:b,onLeaveCancelled:C,onBeforeAppear:k=m,onAppear:w=_,onAppearCancelled:T=y}=t,S=(e,t,n)=>{as(e,t?u:s),as(e,t?l:a),n&&n()},I=(e,t)=>{e._isLeaving=!1,as(e,d),as(e,h),as(e,p),t&&t()},E=e=>(t,n)=>{const r=e?w:_,a=()=>S(t,e,n);ts(r,[t,a]),ss((()=>{as(t,e?c:i),is(t,e?u:s),ns(r)||ls(t,o,g,a)}))};return M(t,{onBeforeEnter(e){ts(m,[e]),is(e,i),is(e,a)},onBeforeAppear(e){ts(k,[e]),is(e,c),is(e,l)},onEnter:E(!1),onAppear:E(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>I(e,t);is(e,d),hs(),is(e,p),ss((()=>{e._isLeaving&&(as(e,d),is(e,h),ns(b)||ls(e,o,v,n))})),ts(b,[e,n])},onEnterCancelled(e){S(e,!1),ts(y,[e])},onAppearCancelled(e){S(e,!0),ts(T,[e])},onLeaveCancelled(e){I(e),ts(C,[e])}})}function rs(e){return J(e)}function is(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function as(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function ss(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let cs=0;function ls(e,t,n,o){const r=e._endId=++cs,i=()=>{r===e._endId&&o()};if(n)return setTimeout(i,n);const{type:a,timeout:s,propCount:c}=us(e,t);if(!a)return o();const l=a+"end";let u=0;const d=()=>{e.removeEventListener(l,p),i()},p=t=>{t.target===e&&++u>=c&&d()};setTimeout((()=>{u<c&&d()}),s+1),e.addEventListener(l,p)}function us(e,t){const n=window.getComputedStyle(e),o=e=>(n[e]||"").split(", "),r=o(`${Xa}Delay`),i=o(`${Xa}Duration`),a=ds(r,i),s=o(`${Ja}Delay`),c=o(`${Ja}Duration`),l=ds(s,c);let u=null,d=0,p=0;t===Xa?a>0&&(u=Xa,d=a,p=i.length):t===Ja?l>0&&(u=Ja,d=l,p=c.length):(d=Math.max(a,l),u=d>0?a>l?Xa:Ja:null,p=u?u===Xa?i.length:c.length:0);return{type:u,timeout:d,propCount:p,hasTransform:u===Xa&&/\b(transform|all)(,|$)/.test(o(`${Xa}Property`).toString())}}function ds(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>ps(t)+ps(e[n]))))}function ps(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function hs(){return document.body.offsetHeight}const fs=new WeakMap,gs=new WeakMap,vs={name:"TransitionGroup",props:M({},es,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=da(),o=zo();let r,i;return kr((()=>{if(!r.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,n){const o=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&o.classList.remove(e)))}));n.split(/\s+/).forEach((e=>e&&o.classList.add(e))),o.style.display="none";const r=1===t.nodeType?t:t.parentNode;r.appendChild(o);const{hasTransform:i}=us(o);return r.removeChild(o),i}(r[0].el,n.vnode.el,t))return;r.forEach(_s),r.forEach(ys);const o=r.filter(bs);hs(),o.forEach((e=>{const n=e.el,o=n.style;is(n,t),o.transform=o.webkitTransform=o.transitionDuration="";const r=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,as(n,t))};n.addEventListener("transitionend",r)}))})),()=>{const a=xn(e),s=os(a);let c=a.tag||xi;r=i,i=t.default?Qo(t.default()):[];for(let e=0;e<i.length;e++){const t=i[e];null!=t.key&&Zo(t,Yo(t,s,o,n))}if(r)for(let e=0;e<r.length;e++){const t=r[e];Zo(t,Yo(t,s,o,n)),fs.set(t,t.el.getBoundingClientRect())}return Zi(c,null,i)}}},ms=vs;function _s(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function ys(e){gs.set(e,e.el.getBoundingClientRect())}function bs(e){const t=fs.get(e),n=gs.get(e),o=t.left-n.left,r=t.top-n.top;if(o||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${o}px,${r}px)`,t.transitionDuration="0s",e}}const Ms=e=>{const t=e.props["onUpdate:modelValue"]||!1;return T(t)?e=>K(t,e):t};function Cs(e){e.target.composing=!0}function ks(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ws={created(e,{modifiers:{lazy:t,trim:n,number:o}},r){e._assign=Ms(r);const i=o||r.props&&"number"===r.props.type;Va(e,t?"change":"input",(t=>{if(t.target.composing)return;let o=e.value;n&&(o=o.trim()),i&&(o=X(o)),e._assign(o)})),n&&Va(e,"change",(()=>{e.value=e.value.trim()})),t||(Va(e,"compositionstart",Cs),Va(e,"compositionend",ks),Va(e,"change",ks))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:o,number:r}},i){if(e._assign=Ms(i),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(o&&e.value.trim()===t)return;if((r||"number"===e.type)&&X(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}},Ts={deep:!0,created(e,t,n){e._assign=Ms(n),Va(e,"change",(()=>{const t=e._modelValue,n=As(e),o=e.checked,r=e._assign;if(T(t)){const e=d(t,n),i=-1!==e;if(o&&!i)r(t.concat(n));else if(!o&&i){const n=[...t];n.splice(e,1),r(n)}}else if(I(t)){const e=new Set(t);o?e.add(n):e.delete(n),r(e)}else r(Ls(e,o))}))},mounted:Ss,beforeUpdate(e,t,n){e._assign=Ms(n),Ss(e,t,n)}};function Ss(e,{value:t,oldValue:n},o){e._modelValue=t,T(t)?e.checked=d(t,o.props.value)>-1:I(t)?e.checked=t.has(o.props.value):t!==n&&(e.checked=u(t,Ls(e,!0)))}const Is={created(e,{value:t},n){e.checked=u(t,n.props.value),e._assign=Ms(n),Va(e,"change",(()=>{e._assign(As(e))}))},beforeUpdate(e,{value:t,oldValue:n},o){e._assign=Ms(o),t!==n&&(e.checked=u(t,o.props.value))}},Es={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const r=I(t);Va(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?X(As(e)):As(e)));e._assign(e.multiple?r?new Set(t):t:t[0])})),e._assign=Ms(o)},mounted(e,{value:t}){Ds(e,t)},beforeUpdate(e,t,n){e._assign=Ms(n)},updated(e,{value:t}){Ds(e,t)}};function Ds(e,t){const n=e.multiple;if(!n||T(t)||I(t)){for(let o=0,r=e.options.length;o<r;o++){const r=e.options[o],i=As(r);if(n)T(t)?r.selected=d(t,i)>-1:r.selected=t.has(i);else if(u(As(r),t))return void(e.selectedIndex!==o&&(e.selectedIndex=o))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function As(e){return"_value"in e?e._value:e.value}function Ls(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Rs={created(e,t,n){Os(e,t,n,null,"created")},mounted(e,t,n){Os(e,t,n,null,"mounted")},beforeUpdate(e,t,n,o){Os(e,t,n,o,"beforeUpdate")},updated(e,t,n,o){Os(e,t,n,o,"updated")}};function Os(e,t,n,o,r){const i=function(e,t){switch(e){case"SELECT":return Es;case"TEXTAREA":return ws;default:switch(t){case"checkbox":return Ts;case"radio":return Is;default:return ws}}}(e.tagName,n.props&&n.props.type)[r];i&&i(e,t,n,o)}const xs=["ctrl","shift","alt","meta"],Ns={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>xs.some((n=>e[`${n}Key`]&&!t.includes(n)))},Ps=(e,t)=>(n,...o)=>{for(let e=0;e<t.length;e++){const o=Ns[t[e]];if(o&&o(n,t))return}return e(n,...o)},Us={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Gs=(e,t)=>n=>{if(!("key"in n))return;const o=z(n.key);return t.some((e=>e===o||Us[e]===o))?e(n):void 0},Bs={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Fs(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Fs(e,!0),o.enter(e)):o.leave(e,(()=>{Fs(e,!1)})):Fs(e,t))},beforeUnmount(e,{value:t}){Fs(e,t)}};function Fs(e,t){e.style.display=t?e._vod:"none"}const qs=M({patchProp:(e,t,n,o,r=!1,i,a,s,u)=>{if(0===t.indexOf("change:"))return function(e,t,n,o=null){if(!n||!o)return;const r=t.replace("change:",""),{attrs:i}=o,a=i[r],s=(e.__wxsProps||(e.__wxsProps={}))[r];if(s===a)return;e.__wxsProps[r]=a;const c=o.proxy;po((()=>{n(a,s,c.$gcd(c,!0),c.$gcd(c,!1))}))}(e,t,o,a);"class"===t?function(e,t,n){const{__wxsAddClass:o,__wxsRemoveClass:r}=e;r&&r.length&&(t=(t||"").split(/\s+/).filter((e=>-1===r.indexOf(e))).join(" "),r.length=0),o&&o.length&&(t=(t||"")+" "+o.join(" "));const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,o,r):"style"===t?function(e,t,n){const o=e.style,r=A(n);if(n&&!r){if(t&&!A(t))for(const e in t)null==n[e]&&Aa(o,e,"");for(const e in n)Aa(o,e,n[e])}else{const i=o.display;r?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(o.display=i)}const{__wxsStyle:i}=e;if(i)for(const a in i)Aa(o,a,i[a])}(e,n,o):y(t)?b(t)||Ha(e,t,0,o,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,o){if(o)return"innerHTML"===t||"textContent"===t||!!(t in e&&Ya.test(t)&&D(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(Ya.test(t)&&A(n))return!1;return t in e}(e,t,o,r))?function(e,t,n,o,r,i,a){if("innerHTML"===t||"textContent"===t)return o&&a(o,r,i),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const o=null==n?"":n;return e.value===o&&"OPTION"!==e.tagName||(e.value=o),void(null==n&&e.removeAttribute(t))}let s=!1;if(""===n||null==n){const o=typeof e[t];"boolean"===o?n=l(n):null==n&&"string"===o?(n="",s=!0):"number"===o&&(n=0,s=!0)}try{e[t]=n}catch(gS){}s&&e.removeAttribute(t)}(e,t,o,i,a,s,u):("true-value"===t?e._trueValue=o:"false-value"===t&&(e._falseValue=o),function(e,t,n,o,r){if(o&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(qa,t.slice(6,t.length)):e.setAttributeNS(qa,t,n);else{const o=c(t);null==n||o&&!l(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}(e,t,o,r))},forcePatchProp:(e,t)=>0===t.indexOf("change:")||("class"===t&&e.__wxsClassChanged?(e.__wxsClassChanged=!1,!0):!("style"!==t||!e.__wxsStyleChanged)&&(e.__wxsStyleChanged=!1,!0))},Ea);let Vs;const Hs=(...e)=>{const t=(Vs||(Vs=wi(qs))).createApp(...e),{mount:n}=t;return t.mount=e=>{const o=function(e){if(A(e)){return document.querySelector(e)}return e}(e);if(!o)return;const r=t._component;D(r)||r.render||r.template||(r.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};const zs=["{","}"];const js=/^(?:\d)+/,$s=/^(?:\w)+/;const Ws="zh-Hans",Ks="zh-Hant",Ys="en",Xs="fr",Js="es",Zs=Object.prototype.hasOwnProperty,Qs=(e,t)=>Zs.call(e,t),ec=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,n=zs){if(!t)return[e];let o=this._caches[e];return o||(o=function(e,[t,n]){const o=[];let r=0,i="";for(;r<e.length;){let a=e[r++];if(a===t){i&&o.push({type:"text",value:i}),i="";let t="";for(a=e[r++];void 0!==a&&a!==n;)t+=a,a=e[r++];const s=a===n,c=js.test(t)?"list":s&&$s.test(t)?"named":"unknown";o.push({value:t,type:c})}else i+=a}return i&&o.push({type:"text",value:i}),o}(e,n),this._caches[e]=o),function(e,t){const n=[];let o=0;const r=Array.isArray(t)?"list":(i=t,null!==i&&"object"==typeof i?"named":"unknown");var i;if("unknown"===r)return n;for(;o<e.length;){const i=e[o];switch(i.type){case"text":n.push(i.value);break;case"list":n.push(t[parseInt(i.value,10)]);break;case"named":"named"===r&&n.push(t[i.value])}o++}return n}(o,t)}};function tc(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return Ws;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?Ws:e.indexOf("-hant")>-1?Ks:(n=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==n.indexOf(e)))?Ks:Ws);var n;let o=[Ys,Xs,Js];t&&Object.keys(t).length>0&&(o=Object.keys(t));const r=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,o);return r||void 0}class nc{constructor({locale:e,fallbackLocale:t,messages:n,watcher:o,formater:r}){this.locale=Ys,this.fallbackLocale=Ys,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=r||ec,this.messages=n||{},this.setLocale(e||Ys),o&&this.watchLocale(o)}setLocale(e){const t=this.locale;this.locale=tc(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,n=!0){const o=this.messages[e];o?n?Object.assign(o,t):Object.keys(t).forEach((e=>{Qs(o,e)||(o[e]=t[e])})):this.messages[e]=t}f(e,t,n){return this.formater.interpolate(e,t,n).join("")}t(e,t,n){let o=this.message;return"string"==typeof t?(t=tc(t,this.messages))&&(o=this.messages[t]):n=t,Qs(o,e)?this.formater.interpolate(o[e],n).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function oc(e,t={},n,o){"string"!=typeof e&&([e,t]=[t,e]),"string"!=typeof e&&(e="undefined"!=typeof uni&&xh?xh():"undefined"!=typeof global&&global.getLocale?global.getLocale():Ys),"string"!=typeof n&&(n="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||Ys);const r=new nc({locale:e,fallbackLocale:n,messages:t,watcher:o});let i=(e,t)=>{{let e=!1;i=function(t,n){const o=Pm().$vm;return o&&(o.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(o,r))),r.t(t,n)}}return i(e,t)};return{i18n:r,f:(e,t,n)=>r.f(e,t,n),t:(e,t)=>i(e,t),add:(e,t,n=!0)=>r.add(e,t,n),watch:e=>r.watchLocale(e),getLocale:()=>r.getLocale(),setLocale:e=>r.setLocale(e)}}function rc(e,t){return e.indexOf(t[0])>-1}
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ic="undefined"!=typeof window;const ac=Object.assign;function sc(e,t){const n={};for(const o in t){const r=t[o];n[o]=lc(r)?r.map(e):e(r)}return n}const cc=()=>{},lc=Array.isArray,uc=/\/$/,dc=e=>e.replace(uc,"");function pc(e,t,n="/"){let o,r={},i="",a="";const s=t.indexOf("#");let c=t.indexOf("?");return s<c&&s>=0&&(c=-1),c>-1&&(o=t.slice(0,c),i=t.slice(c+1,s>-1?s:t.length),r=e(i)),s>-1&&(o=o||t.slice(0,s),a=t.slice(s,t.length)),o=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/");let r,i,a=n.length-1;for(r=0;r<o.length;r++)if(i=o[r],"."!==i){if(".."!==i)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+o.slice(r-(r===o.length?1:0)).join("/")}(null!=o?o:t,n),{fullPath:o+(i&&"?")+i+a,path:o,query:r,hash:a}}function hc(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function fc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function gc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!vc(e[n],t[n]))return!1;return!0}function vc(e,t){return lc(e)?mc(e,t):lc(t)?mc(t,e):e===t}function mc(e,t){return lc(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}var _c,yc,bc,Mc;(yc=_c||(_c={})).pop="pop",yc.push="push",(Mc=bc||(bc={})).back="back",Mc.forward="forward",Mc.unknown="";const Cc=/^[^#]+#/;function kc(e,t){return e.replace(Cc,"#")+t}const wc=()=>({left:window.pageXOffset,top:window.pageYOffset});function Tc(e){let t;if("el"in e){const n=e.el,o="string"==typeof n&&n.startsWith("#"),r="string"==typeof n?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function Sc(e,t){return(history.state?history.state.position-t:-1)+e}const Ic=new Map;let Ec=()=>location.protocol+"//"+location.host;function Dc(e,t){const{pathname:n,search:o,hash:r}=t,i=e.indexOf("#");if(i>-1){let t=r.includes(e.slice(i))?e.slice(i).length:1,n=r.slice(t);return"/"!==n[0]&&(n="/"+n),hc(n,"")}return hc(n,e)+o+r}function Ac(e,t,n,o=!1,r=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:r?wc():null}}function Lc(e){const t=function(e){const{history:t,location:n}=window,o={value:Dc(e,n)},r={value:t.state};function i(o,i,a){const s=e.indexOf("#"),c=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+o:Ec()+e+o;try{t[a?"replaceState":"pushState"](i,"",c),r.value=i}catch(l){console.error(l),n[a?"replace":"assign"](c)}}return r.value||i(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:o,state:r,push:function(e,n){const a=ac({},r.value,t.state,{forward:e,scroll:wc()});i(a.current,a,!0),i(e,ac({},Ac(o.value,e,null),{position:a.position+1},n),!1),o.value=e},replace:function(e,n){i(e,ac({},t.state,Ac(r.value.back,e,r.value.forward,!0),n,{position:r.value.position}),!0),o.value=e}}}(e=function(e){if(!e)if(ic){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),dc(e)}(e)),n=function(e,t,n,o){let r=[],i=[],a=null;const s=({state:i})=>{const s=Dc(e,location),c=n.value,l=t.value;let u=0;if(i){if(n.value=s,t.value=i,a&&a===c)return void(a=null);u=l?i.position-l.position:0}else o(s);r.forEach((e=>{e(n.value,c,{delta:u,type:_c.pop,direction:u?u>0?bc.forward:bc.back:bc.unknown})}))};function c(){const{history:e}=window;e.state&&e.replaceState(ac({},e.state,{scroll:wc()}),"")}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:function(){a=n.value},listen:function(e){r.push(e);const t=()=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)};return i.push(t),t},destroy:function(){for(const e of i)e();i=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}}}(e,t.state,t.location,t.replace);const o=ac({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:kc.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Rc(e){return"string"==typeof e||"symbol"==typeof e}const Oc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},xc=Symbol("");var Nc,Pc;function Uc(e,t){return ac(new Error,{type:e,[xc]:!0},t)}function Gc(e,t){return e instanceof Error&&xc in e&&(null==t||!!(e.type&t))}(Pc=Nc||(Nc={}))[Pc.aborted=4]="aborted",Pc[Pc.cancelled=8]="cancelled",Pc[Pc.duplicated=16]="duplicated";const Bc="[^/]+?",Fc={sensitive:!1,strict:!1,start:!0,end:!0},qc=/[.+*?^${}()[\]/\\]/g;function Vc(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function Hc(e,t){let n=0;const o=e.score,r=t.score;for(;n<o.length&&n<r.length;){const e=Vc(o[n],r[n]);if(e)return e;n++}if(1===Math.abs(r.length-o.length)){if(zc(o))return 1;if(zc(r))return-1}return r.length-o.length}function zc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const jc={type:0,value:""},$c=/[a-zA-Z0-9_]/;function Wc(e,t,n){const o=function(e,t){const n=ac({},Fc,t),o=[];let r=n.start?"^":"";const i=[];for(const c of e){const e=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let t=0;t<c.length;t++){const o=c[t];let a=40+(n.sensitive?.25:0);if(0===o.type)t||(r+="/"),r+=o.value.replace(qc,"\\$&"),a+=40;else if(1===o.type){const{value:e,repeatable:n,optional:l,regexp:u}=o;i.push({name:e,repeatable:n,optional:l});const d=u||Bc;if(d!==Bc){a+=10;try{new RegExp(`(${d})`)}catch(s){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+s.message)}}let p=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(p=l&&c.length<2?`(?:/${p})`:"/"+p),l&&(p+="?"),r+=p,a+=20,l&&(a+=-8),n&&(a+=-20),".*"===d&&(a+=-50)}e.push(a)}o.push(e)}if(n.strict&&n.end){const e=o.length-1;o[e][o[e].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const a=new RegExp(r,n.sensitive?"":"i");return{re:a,score:o,keys:i,parse:function(e){const t=e.match(a),n={};if(!t)return null;for(let o=1;o<t.length;o++){const e=t[o]||"",r=i[o-1];n[r.name]=e&&r.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",o=!1;for(const r of e){o&&n.endsWith("/")||(n+="/"),o=!1;for(const e of r)if(0===e.type)n+=e.value;else if(1===e.type){const{value:i,repeatable:a,optional:s}=e,c=i in t?t[i]:"";if(lc(c)&&!a)throw new Error(`Provided param "${i}" is an array but it is not repeatable (* or + modifiers)`);const l=lc(c)?c.join("/"):c;if(!l){if(!s)throw new Error(`Missing required param "${i}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):o=!0)}n+=l}}return n||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[jc]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${l}": ${e}`)}let n=0,o=n;const r=[];let i;function a(){i&&r.push(i),i=[]}let s,c=0,l="",u="";function d(){l&&(0===n?i.push({type:0,value:l}):1===n||2===n||3===n?(i.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),l="")}function p(){l+=s}for(;c<e.length;)if(s=e[c++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(l&&d(),a()):":"===s?(d(),n=1):p();break;case 4:p(),n=o;break;case 1:"("===s?n=2:$c.test(s)?p():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&c--);break;case 2:")"===s?"\\"==u[u.length-1]?u=u.slice(0,-1)+s:n=3:u+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&c--,u="";break;default:t("Unknown state")}else o=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${l}"`),d(),a(),r}(e.path),n),r=ac(o,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Kc(e,t){const n=[],o=new Map;function r(e,n,o){const s=!o,c=function(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Xc(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}(e);c.aliasOf=o&&o.record;const l=Qc(t,e),u=[c];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(ac({},c,{components:o?o.record.components:c.components,path:e,aliasOf:o?o.record:c}))}let d,p;for(const t of u){const{path:u}=t;if(n&&"/"!==u[0]){const e=n.record.path,o="/"===e[e.length-1]?"":"/";t.path=n.record.path+(u&&o+u)}if(d=Wc(t,n,l),o?o.alias.push(d):(p=p||d,p!==d&&p.alias.push(d),s&&e.name&&!Jc(d)&&i(e.name)),c.children){const e=c.children;for(let t=0;t<e.length;t++)r(e[t],d,o&&o.children[t])}o=o||d,(d.record.components&&Object.keys(d.record.components).length||d.record.name||d.record.redirect)&&a(d)}return p?()=>{i(p)}:cc}function i(e){if(Rc(e)){const t=o.get(e);t&&(o.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(i),t.alias.forEach(i))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&o.delete(e.record.name),e.children.forEach(i),e.alias.forEach(i))}}function a(e){let t=0;for(;t<n.length&&Hc(e,n[t])>=0&&(e.record.path!==n[t].record.path||!el(e,n[t]));)t++;n.splice(t,0,e),e.record.name&&!Jc(e)&&o.set(e.record.name,e)}return t=Qc({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>r(e))),{addRoute:r,resolve:function(e,t){let r,i,a,s={};if("name"in e&&e.name){if(r=o.get(e.name),!r)throw Uc(1,{location:e});a=r.record.name,s=ac(Yc(t.params,r.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&Yc(e.params,r.keys.map((e=>e.name)))),i=r.stringify(s)}else if("path"in e)i=e.path,r=n.find((e=>e.re.test(i))),r&&(s=r.parse(i),a=r.record.name);else{if(r=t.name?o.get(t.name):n.find((e=>e.re.test(t.path))),!r)throw Uc(1,{location:e,currentLocation:t});a=r.record.name,s=ac({},t.params,e.params),i=r.stringify(s)}const c=[];let l=r;for(;l;)c.unshift(l.record),l=l.parent;return{name:a,path:i,params:s,matched:c,meta:Zc(c)}},removeRoute:i,getRoutes:function(){return n},getRecordMatcher:function(e){return o.get(e)}}}function Yc(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function Xc(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]="boolean"==typeof n?n:n[o];return t}function Jc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Zc(e){return e.reduce(((e,t)=>ac(e,t.meta)),{})}function Qc(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function el(e,t){return t.children.some((t=>t===e||el(e,t)))}const tl=/#/g,nl=/&/g,ol=/\//g,rl=/=/g,il=/\?/g,al=/\+/g,sl=/%5B/g,cl=/%5D/g,ll=/%5E/g,ul=/%60/g,dl=/%7B/g,pl=/%7C/g,hl=/%7D/g,fl=/%20/g;function gl(e){return encodeURI(""+e).replace(pl,"|").replace(sl,"[").replace(cl,"]")}function vl(e){return gl(e).replace(al,"%2B").replace(fl,"+").replace(tl,"%23").replace(nl,"%26").replace(ul,"`").replace(dl,"{").replace(hl,"}").replace(ll,"^")}function ml(e){return null==e?"":function(e){return gl(e).replace(tl,"%23").replace(il,"%3F")}(e).replace(ol,"%2F")}function _l(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function yl(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const e=n[o].replace(al," "),r=e.indexOf("="),i=_l(r<0?e:e.slice(0,r)),a=r<0?null:_l(e.slice(r+1));if(i in t){let e=t[i];lc(e)||(e=t[i]=[e]),e.push(a)}else t[i]=a}return t}function bl(e){let t="";for(let n in e){const o=e[n];if(n=vl(n).replace(rl,"%3D"),null==o){void 0!==o&&(t+=(t.length?"&":"")+n);continue}(lc(o)?o.map((e=>e&&vl(e))):[o&&vl(o)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function Ml(e){const t={};for(const n in e){const o=e[n];void 0!==o&&(t[n]=lc(o)?o.map((e=>null==e?null:""+e)):null==o?o:""+o)}return t}const Cl=Symbol(""),kl=Symbol(""),wl=Symbol(""),Tl=Symbol(""),Sl=Symbol("");function Il(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e,reset:function(){e=[]}}}function El(e,t,n,o,r){const i=o&&(o.enterCallbacks[r]=o.enterCallbacks[r]||[]);return()=>new Promise(((a,s)=>{const c=e=>{var c;!1===e?s(Uc(4,{from:n,to:t})):e instanceof Error?s(e):"string"==typeof(c=e)||c&&"object"==typeof c?s(Uc(2,{from:t,to:e})):(i&&o.enterCallbacks[r]===i&&"function"==typeof e&&i.push(e),a())},l=e.call(o&&o.instances[r],t,n,c);let u=Promise.resolve(l);e.length<3&&(u=u.then(c)),u.catch((e=>s(e)))}))}function Dl(e,t,n,o){const r=[];for(const a of e)for(const e in a.components){let s=a.components[e];if("beforeRouteEnter"===t||a.instances[e])if("object"==typeof(i=s)||"displayName"in i||"props"in i||"__vccOpts"in i){const i=(s.__vccOpts||s)[t];i&&r.push(El(i,n,o,a,e))}else{let i=s();r.push((()=>i.then((r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${a.path}"`));const i=(s=r).__esModule||"Module"===s[Symbol.toStringTag]?r.default:r;var s;a.components[e]=i;const c=(i.__vccOpts||i)[t];return c&&El(c,n,o,a,e)()}))))}}var i;return r}function Al(e){const t=Po(wl),n=Po(Tl),o=Ma((()=>t.resolve(jn(e.to)))),r=Ma((()=>{const{matched:e}=o.value,{length:t}=e,r=e[t-1],i=n.matched;if(!r||!i.length)return-1;const a=i.findIndex(fc.bind(null,r));if(a>-1)return a;const s=Rl(e[t-2]);return t>1&&Rl(r)===s&&i[i.length-1].path!==s?i.findIndex(fc.bind(null,e[t-2])):a})),i=Ma((()=>r.value>-1&&function(e,t){for(const n in t){const o=t[n],r=e[n];if("string"==typeof o){if(o!==r)return!1}else if(!lc(r)||r.length!==o.length||o.some(((e,t)=>e!==r[t])))return!1}return!0}(n.params,o.value.params))),a=Ma((()=>r.value>-1&&r.value===n.matched.length-1&&gc(n.params,o.value.params)));return{route:o,href:Ma((()=>o.value.href)),isActive:i,isExactActive:a,navigate:function(n={}){return function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(n)?t[jn(e.replace)?"replace":"push"](jn(e.to)).catch(cc):Promise.resolve()}}}const Ll=er({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Al,setup(e,{slots:t}){const n=In(Al(e)),{options:o}=Po(wl),r=Ma((()=>({[Ol(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Ol(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const o=t.default&&t.default(n);return e.custom?o:Ca("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},o)}}});function Rl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ol=(e,t,n)=>null!=e?e:null!=t?t:n;function xl(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const Nl=er({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=Po(Sl),r=Ma((()=>e.route||o.value)),i=Po(kl,0),a=Ma((()=>{let e=jn(i);const{matched:t}=r.value;let n;for(;(n=t[e])&&!n.components;)e++;return e})),s=Ma((()=>r.value.matched[a.value]));No(kl,Ma((()=>a.value+1))),No(Cl,s),No(Sl,r);const c=qn();return Bo((()=>[c.value,s.value,e.name]),(([e,t,n],[o,r,i])=>{t&&(t.instances[n]=e,r&&r!==t&&e&&e===o&&(t.leaveGuards.size||(t.leaveGuards=r.leaveGuards),t.updateGuards.size||(t.updateGuards=r.updateGuards))),!e||!t||r&&fc(t,r)&&o||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const o=r.value,i=e.name,a=s.value,l=a&&a.components[i];if(!l)return xl(n.default,{Component:l,route:o});const u=a.props[i],d=u?!0===u?o.params:"function"==typeof u?u(o):u:null,p=Ca(l,ac({},d,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(a.instances[i]=null)},ref:c}));return xl(n.default,{Component:p,route:o})||p}}});function Pl(e){const t=Kc(e.routes,e),n=e.parseQuery||yl,o=e.stringifyQuery||bl,r=e.history,i=Il(),a=Il(),s=Il(),c=Vn(Oc);let l=Oc;ic&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=sc.bind(null,(e=>""+e)),d=sc.bind(null,ml),p=sc.bind(null,_l);function h(e,i){if(i=ac({},i||c.value),"string"==typeof e){const o=pc(n,e,i.path),a=t.resolve({path:o.path},i),s=r.createHref(o.fullPath);return ac(o,a,{params:p(a.params),hash:_l(o.hash),redirectedFrom:void 0,href:s})}let a;if("path"in e)a=ac({},e,{path:pc(n,e.path,i.path).path});else{const t=ac({},e.params);for(const e in t)null==t[e]&&delete t[e];a=ac({},e,{params:d(e.params)}),i.params=d(i.params)}const s=t.resolve(a,i),l=e.hash||"";s.params=u(p(s.params));const h=function(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(o,ac({},e,{hash:(f=l,gl(f).replace(dl,"{").replace(hl,"}").replace(ll,"^")),path:s.path}));var f;const g=r.createHref(h);return ac({fullPath:h,hash:l,query:o===bl?Ml(e.query):e.query||{}},s,{redirectedFrom:void 0,href:g})}function f(e){return"string"==typeof e?pc(n,e,c.value.path):ac({},e)}function g(e,t){if(l!==e)return Uc(8,{from:t,to:e})}function v(e){return _(e)}function m(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let o="function"==typeof n?n(e):n;return"string"==typeof o&&(o=o.includes("?")||o.includes("#")?o=f(o):{path:o},o.params={}),ac({query:e.query,hash:e.hash,params:"path"in o?{}:e.params},o)}}function _(e,t){const n=l=h(e),r=c.value,i=e.state,a=e.force,s=!0===e.replace,u=m(n);if(u)return _(ac(f(u),{state:"object"==typeof u?ac({},i,u.state):i,force:a,replace:s}),t||n);const d=n;let p;return d.redirectedFrom=t,!a&&function(e,t,n){const o=t.matched.length-1,r=n.matched.length-1;return o>-1&&o===r&&fc(t.matched[o],n.matched[r])&&gc(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(o,r,n)&&(p=Uc(16,{to:d,from:r}),A(r,r,!0,!1)),(p?Promise.resolve(p):b(d,r)).catch((e=>Gc(e)?Gc(e,2)?e:D(e):E(e,d,r))).then((e=>{if(e){if(Gc(e,2))return _(ac({replace:s},f(e.to),{state:"object"==typeof e.to?ac({},i,e.to.state):i,force:a}),t||d)}else e=C(d,r,!0,s,i);return M(d,r,e),e}))}function y(e,t){const n=g(e,t);return n?Promise.reject(n):Promise.resolve()}function b(e,t){let n;const[o,r,s]=function(e,t){const n=[],o=[],r=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const i=t.matched[a];i&&(e.matched.find((e=>fc(e,i)))?o.push(i):n.push(i));const s=e.matched[a];s&&(t.matched.find((e=>fc(e,s)))||r.push(s))}return[n,o,r]}(e,t);n=Dl(o.reverse(),"beforeRouteLeave",e,t);for(const i of o)i.leaveGuards.forEach((o=>{n.push(El(o,e,t))}));const c=y.bind(null,e,t);return n.push(c),Ul(n).then((()=>{n=[];for(const o of i.list())n.push(El(o,e,t));return n.push(c),Ul(n)})).then((()=>{n=Dl(r,"beforeRouteUpdate",e,t);for(const o of r)o.updateGuards.forEach((o=>{n.push(El(o,e,t))}));return n.push(c),Ul(n)})).then((()=>{n=[];for(const o of e.matched)if(o.beforeEnter&&!t.matched.includes(o))if(lc(o.beforeEnter))for(const r of o.beforeEnter)n.push(El(r,e,t));else n.push(El(o.beforeEnter,e,t));return n.push(c),Ul(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=Dl(s,"beforeRouteEnter",e,t),n.push(c),Ul(n)))).then((()=>{n=[];for(const o of a.list())n.push(El(o,e,t));return n.push(c),Ul(n)})).catch((e=>Gc(e,8)?e:Promise.reject(e)))}function M(e,t,n){for(const o of s.list())o(e,t,n)}function C(e,t,n,o,i){const a=g(e,t);if(a)return a;const s=t===Oc,l=ic?history.state:{};n&&(o||s?r.replace(e.fullPath,ac({scroll:s&&l&&l.scroll},i)):r.push(e.fullPath,i)),c.value=e,A(e,t,n,s),D()}let k;function w(){k||(k=r.listen(((e,t,n)=>{if(!x.listening)return;const o=h(e),i=m(o);if(i)return void _(ac(i,{replace:!0}),o).catch(cc);l=o;const a=c.value;var s,u;ic&&(s=Sc(a.fullPath,n.delta),u=wc(),Ic.set(s,u)),b(o,a).catch((e=>Gc(e,12)?e:Gc(e,2)?(_(e.to,o).then((e=>{Gc(e,20)&&!n.delta&&n.type===_c.pop&&r.go(-1,!1)})).catch(cc),Promise.reject()):(n.delta&&r.go(-n.delta,!1),E(e,o,a)))).then((e=>{(e=e||C(o,a,!1))&&(n.delta&&!Gc(e,8)?r.go(-n.delta,!1):n.type===_c.pop&&Gc(e,20)&&r.go(-1,!1)),M(o,a,e)})).catch(cc)})))}let T,S=Il(),I=Il();function E(e,t,n){D(e);const o=I.list();return o.length?o.forEach((o=>o(e,t,n))):console.error(e),Promise.reject(e)}function D(e){return T||(T=!e,w(),S.list().forEach((([t,n])=>e?n(e):t())),S.reset()),e}function A(t,n,o,r){const{scrollBehavior:i}=e;if(!ic||!i)return Promise.resolve();const a=!o&&function(e){const t=Ic.get(e);return Ic.delete(e),t}(Sc(t.fullPath,0))||(r||!o)&&history.state&&history.state.scroll||null;return po().then((()=>i(t,n,a))).then((e=>e&&Tc(e))).catch((e=>E(e,t,n)))}const L=e=>r.go(e);let R;const O=new Set,x={currentRoute:c,listening:!0,addRoute:function(e,n){let o,r;return Rc(e)?(o=t.getRecordMatcher(e),r=n):r=e,t.addRoute(r,o)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:h,options:e,push:v,replace:function(e){return v(ac(f(e),{replace:!0}))},go:L,back:()=>L(-1),forward:()=>L(1),beforeEach:i.add,beforeResolve:a.add,afterEach:s.add,onError:I.add,isReady:function(){return T&&c.value!==Oc?Promise.resolve():new Promise(((e,t)=>{S.add([e,t])}))},install(e){e.component("RouterLink",Ll),e.component("RouterView",Nl),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>jn(c)}),ic&&!R&&c.value===Oc&&(R=!0,v(r.location).catch((e=>{})));const t={};for(const o in Oc)t[o]=Ma((()=>c.value[o]));e.provide(wl,this),e.provide(Tl,In(t)),e.provide(Sl,c);const n=e.unmount;O.add(e),e.unmount=function(){O.delete(e),O.size<1&&(l=Oc,k&&k(),k=null,c.value=Oc,R=!1,T=!1),n()}}};return x}function Ul(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function Gl(){return Po(Tl)}const Bl=$e((()=>"undefined"!=typeof __uniConfig&&__uniConfig.locales&&!!Object.keys(__uniConfig.locales).length));let Fl;function ql(e){return rc(e,ie)?zl().f(e,function(){const e=xh(),t=__uniConfig.locales;return t[e]||t[__uniConfig.fallbackLocale]||t.en||{}}(),ie):e}function Vl(e,t){if(1===t.length){if(e){const n=e=>A(e)&&rc(e,ie),o=t[0];let r=[];if(T(e)&&(r=e.filter((e=>n(e[o])))).length)return r;const i=e[t[0]];if(n(i))return e}return}const n=t.shift();return Vl(e&&e[n],t)}function Hl(e,t){const n=Vl(e,t);if(!n)return!1;const o=t[t.length-1];if(T(n))n.forEach((e=>Hl(e,[o])));else{let e=n[o];Object.defineProperty(n,o,{get:()=>ql(e),set(t){e=t}})}return!0}function zl(){if(!Fl){let e;if(e=navigator.cookieEnabled&&window.localStorage&&localStorage[re]||__uniConfig.locale||navigator.language,Fl=oc(e),Bl()){const t=Object.keys(__uniConfig.locales||{});t.length&&t.forEach((e=>Fl.add(e,__uniConfig.locales[e]))),Fl.setLocale(e)}}return Fl}function jl(e,t,n){return t.reduce(((t,o,r)=>(t[e+o]=n[r],t)),{})}const $l=$e((()=>{const e="uni.async.",t=["error"];zl().add(Ys,jl(e,t,["The connection timed out, click the screen to try again."]),!1),zl().add(Js,jl(e,t,["Se agotó el tiempo de conexión, haga clic en la pantalla para volver a intentarlo."]),!1),zl().add(Xs,jl(e,t,["La connexion a expiré, cliquez sur l'écran pour réessayer."]),!1),zl().add(Ws,jl(e,t,["连接服务器超时，点击屏幕重试"]),!1),zl().add(Ks,jl(e,t,["連接服務器超時，點擊屏幕重試"]),!1)})),Wl=$e((()=>{const e="uni.showActionSheet.",t=["cancel"];zl().add(Ys,jl(e,t,["Cancel"]),!1),zl().add(Js,jl(e,t,["Cancelar"]),!1),zl().add(Xs,jl(e,t,["Annuler"]),!1),zl().add(Ws,jl(e,t,["取消"]),!1),zl().add(Ks,jl(e,t,["取消"]),!1)})),Kl=$e((()=>{const e="uni.showToast.",t=["unpaired"];zl().add(Ys,jl(e,t,["Please note showToast must be paired with hideToast"]),!1),zl().add(Js,jl(e,t,["Tenga en cuenta que showToast debe estar emparejado con hideToast"]),!1),zl().add(Xs,jl(e,t,["Veuillez noter que showToast doit être associé à hideToast"]),!1),zl().add(Ws,jl(e,t,["请注意 showToast 与 hideToast 必须配对使用"]),!1),zl().add(Ks,jl(e,t,["請注意 showToast 與 hideToast 必須配對使用"]),!1)})),Yl=$e((()=>{const e="uni.showLoading.",t=["unpaired"];zl().add(Ys,jl(e,t,["Please note showLoading must be paired with hideLoading"]),!1),zl().add(Js,jl(e,t,["Tenga en cuenta que showLoading debe estar emparejado con hideLoading"]),!1),zl().add(Xs,jl(e,t,["Veuillez noter que showLoading doit être associé à hideLoading"]),!1),zl().add(Ws,jl(e,t,["请注意 showLoading 与 hideLoading 必须配对使用"]),!1),zl().add(Ks,jl(e,t,["請注意 showLoading 與 hideLoading 必須配對使用"]),!1)})),Xl=$e((()=>{const e="uni.showModal.",t=["cancel","confirm"];zl().add(Ys,jl(e,t,["Cancel","OK"]),!1),zl().add(Js,jl(e,t,["Cancelar","OK"]),!1),zl().add(Xs,jl(e,t,["Annuler","OK"]),!1),zl().add(Ws,jl(e,t,["取消","确定"]),!1),zl().add(Ks,jl(e,t,["取消","確定"]),!1)})),Jl=$e((()=>{const e="uni.chooseFile.",t=["notUserActivation"];zl().add(Ys,jl(e,t,["File chooser dialog can only be shown with a user activation"]),!1),zl().add(Js,jl(e,t,["El cuadro de diálogo del selector de archivos solo se puede mostrar con la activación del usuario"]),!1),zl().add(Xs,jl(e,t,["La boîte de dialogue du sélecteur de fichier ne peut être affichée qu'avec une activation par l'utilisateur"]),!1),zl().add(Ws,jl(e,t,["文件选择器对话框只能在用户激活时显示"]),!1),zl().add(Ks,jl(e,t,["文件選擇器對話框只能在用戶激活時顯示"]),!1)})),Zl=$e((()=>{const e="uni.setClipboardData.",t=["success","fail"];zl().add(Ys,jl(e,t,["Content copied","Copy failed, please copy manually"]),!1),zl().add(Js,jl(e,t,["Contenido copiado","Error al copiar, copie manualmente"]),!1),zl().add(Xs,jl(e,t,["Contenu copié","Échec de la copie, copiez manuellement"]),!1),zl().add(Ws,jl(e,t,["内容已复制","复制失败，请手动复制"]),!1),zl().add(Ks,jl(e,t,["內容已復制","復制失敗，請手動復製"]),!1)})),Ql=$e((()=>{const e="uni.picker.",t=["done","cancel"];zl().add(Ys,jl(e,t,["Done","Cancel"]),!1),zl().add(Js,jl(e,t,["OK","Cancelar"]),!1),zl().add(Xs,jl(e,t,["OK","Annuler"]),!1),zl().add(Ws,jl(e,t,["完成","取消"]),!1),zl().add(Ks,jl(e,t,["完成","取消"]),!1)})),eu=$e((()=>{const e="uni.video.",t=["danmu","volume"];zl().add(Ys,jl(e,t,["Danmu","Volume"]),!1),zl().add(Js,jl(e,t,["Danmu","Volumen"]),!1),zl().add(Xs,jl(e,t,["Danmu","Le Volume"]),!1),zl().add(Ws,jl(e,t,["弹幕","音量"]),!1),zl().add(Ks,jl(e,t,["彈幕","音量"]),!1)}));function tu(e){const t=new gt;return{on:(e,n)=>t.on(e,n),once:(e,n)=>t.once(e,n),off:(e,n)=>t.off(e,n),emit:(e,...n)=>t.emit(e,...n),subscribe(n,o,r=!1){t[r?"once":"on"](`${e}.${n}`,o)},unsubscribe(n,o){t.off(`${e}.${n}`,o)},subscribeHandler(n,o,r){t.emit(`${e}.${n}`,o,r)}}}const nu="invokeViewApi",ou="invokeServiceApi";let ru=1;const iu=Object.create(null);function au(e,t){return e+"."+t}function su(e,t,n){t=au(e,t),iu[t]||(iu[t]=n)}function cu({id:e,name:t,args:n},o){t=au(o,t);const r=t=>{e&&Fb.publishHandler(nu+"."+e,t)},i=iu[t];i?i(n,r):r({})}const lu=M(tu("service"),{invokeServiceMethod:(e,t,n)=>{const{subscribe:o,publishHandler:r}=Fb,i=n?ru++:0;n&&o(ou+"."+i,n,!0),r(ou,{id:i,name:e,args:t})}}),uu=350,du=10,pu=Qe(!0);let hu;function fu(){hu&&(clearTimeout(hu),hu=null)}let gu=0,vu=0;function mu(e){if(fu(),1!==e.touches.length)return;const{pageX:t,pageY:n}=e.touches[0];gu=t,vu=n,hu=setTimeout((function(){const t=new CustomEvent("longpress",{bubbles:!0,cancelable:!0,target:e.target,currentTarget:e.currentTarget});t.touches=e.touches,t.changedTouches=e.changedTouches,e.target.dispatchEvent(t)}),uu)}function _u(e){if(!hu)return;if(1!==e.touches.length)return fu();const{pageX:t,pageY:n}=e.touches[0];return Math.abs(t-gu)>du||Math.abs(n-vu)>du?fu():void 0}function yu(e,t){const n=Number(e);return isNaN(n)?t:n}function bu(){const e=__uniConfig.globalStyle||{},t=yu(e.rpxCalcMaxDeviceWidth,960),n=yu(e.rpxCalcBaseDeviceWidth,375);function o(){let e=function(){const e=/^Apple/.test(navigator.vendor)&&"number"==typeof window.orientation,t=e&&90===Math.abs(window.orientation);var n=e?Math[t?"max":"min"](screen.width,screen.height):screen.width;return Math.min(window.innerWidth,document.documentElement.clientWidth,n)||n}();e=e<=t?e:n,document.documentElement.style.fontSize=e/23.4375+"px"}o(),document.addEventListener("DOMContentLoaded",o),window.addEventListener("load",o),window.addEventListener("resize",o)}function Mu(){bu(),Xe(),window.addEventListener("touchstart",mu,pu),window.addEventListener("touchmove",_u,pu),window.addEventListener("touchend",fu,pu),window.addEventListener("touchcancel",fu,pu)}var Cu,ku,wu=["top","left","right","bottom"],Tu={};function Su(){return ku="CSS"in window&&"function"==typeof CSS.supports?CSS.supports("top: env(safe-area-inset-top)")?"env":CSS.supports("top: constant(safe-area-inset-top)")?"constant":"":""}function Iu(){if(ku="string"==typeof ku?ku:Su()){var e=[],t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t={passive:!0}}});window.addEventListener("test",null,n)}catch(gS){}var o=document.createElement("div");r(o,{position:"absolute",left:"0",top:"0",width:"0",height:"0",zIndex:"-1",overflow:"hidden",visibility:"hidden"}),wu.forEach((function(e){a(o,e)})),document.body.appendChild(o),i(),Cu=!0}else wu.forEach((function(e){Tu[e]=0}));function r(e,t){var n=e.style;Object.keys(t).forEach((function(e){var o=t[e];n[e]=o}))}function i(t){t?e.push(t):e.forEach((function(e){e()}))}function a(e,n){var o=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),c=document.createElement("div"),l={position:"absolute",width:"100px",height:"200px",boxSizing:"border-box",overflow:"hidden",paddingBottom:ku+"(safe-area-inset-"+n+")"};r(o,l),r(a,l),r(s,{transition:"0s",animation:"none",width:"400px",height:"400px"}),r(c,{transition:"0s",animation:"none",width:"250%",height:"250%"}),o.appendChild(s),a.appendChild(c),e.appendChild(o),e.appendChild(a),i((function(){o.scrollTop=a.scrollTop=1e4;var e=o.scrollTop,r=a.scrollTop;function i(){this.scrollTop!==(this===o?e:r)&&(o.scrollTop=a.scrollTop=1e4,e=o.scrollTop,r=a.scrollTop,function(e){Du.length||setTimeout((function(){var e={};Du.forEach((function(t){e[t]=Tu[t]})),Du.length=0,Au.forEach((function(t){t(e)}))}),0);Du.push(e)}(n))}o.addEventListener("scroll",i,t),a.addEventListener("scroll",i,t)}));var u=getComputedStyle(o);Object.defineProperty(Tu,n,{configurable:!0,get:function(){return parseFloat(u.paddingBottom)}})}}function Eu(e){return Cu||Iu(),Tu[e]}var Du=[];var Au=[];var Lu={get support(){return 0!=("string"==typeof ku?ku:Su()).length},get top(){return Eu("top")},get left(){return Eu("left")},get right(){return Eu("right")},get bottom(){return Eu("bottom")},onChange:function(e){Su()&&(Cu||Iu(),"function"==typeof e&&Au.push(e))},offChange:function(e){var t=Au.indexOf(e);t>=0&&Au.splice(t,1)}};const Ru=Ps((()=>{}),["prevent"]),Ou=Ps((()=>{}),["stop"]);function xu(e,t){return parseInt((e.getPropertyValue(t).match(/\d+/)||["0"])[0])}function Nu(){const e=xu(document.documentElement.style,"--window-top");return e?e+Lu.top:0}function Pu(){const e=document.documentElement.style,t=Nu(),n=xu(e,"--window-bottom"),o=xu(e,"--window-left"),r=xu(e,"--window-right"),i=xu(e,"--top-window-height");return{top:t,bottom:n?n+Lu.bottom:0,left:o?o+Lu.left:0,right:r?r+Lu.right:0,topWindowHeight:i||0}}function Uu(e){const t=document.documentElement.style;Object.keys(e).forEach((n=>{t.setProperty(n,e[n])}))}function Gu(e){return Uu(e)}function Bu(e){return Symbol(e)}function Fu(e){return-1!==(e+="").indexOf("rpx")||-1!==e.indexOf("upx")}function qu(e,t=!1){if(t)return function(e){if(!Fu(e))return e;return e.replace(/(\d+(\.\d+)?)[ru]px/g,((e,t)=>Jp(parseFloat(t))+"px"))}(e);if(A(e)){const t=parseInt(e)||0;return Fu(e)?Jp(t):t}return e}const Vu="M1.952 18.080q-0.32-0.352-0.416-0.88t0.128-0.976l0.16-0.352q0.224-0.416 0.64-0.528t0.8 0.176l6.496 4.704q0.384 0.288 0.912 0.272t0.88-0.336l17.312-14.272q0.352-0.288 0.848-0.256t0.848 0.352l-0.416-0.416q0.32 0.352 0.32 0.816t-0.32 0.816l-18.656 18.912q-0.32 0.352-0.8 0.352t-0.8-0.32l-7.936-8.064z",Hu="M15.808 0.16q-4.224 0-7.872 2.176-3.552 2.112-5.632 5.728-2.144 3.744-2.144 8.128 0 4.192 2.144 7.872 2.112 3.52 5.632 5.632 3.68 2.144 7.872 2.144 4.384 0 8.128-2.144 3.616-2.080 5.728-5.632 2.176-3.648 2.176-7.872 0-4.384-2.176-8.128-2.112-3.616-5.728-5.728-3.744-2.176-8.128-2.176zM15.136 8.672h1.728q0.128 0 0.224 0.096t0.096 0.256l-0.384 10.24q0 0.064-0.048 0.112t-0.112 0.048h-1.248q-0.096 0-0.144-0.048t-0.048-0.112l-0.384-10.24q0-0.16 0.096-0.256t0.224-0.096zM16 23.328q-0.48 0-0.832-0.352t-0.352-0.848 0.352-0.848 0.832-0.352 0.832 0.352 0.352 0.848-0.352 0.848-0.832 0.352z",zu="M21.781 7.844l-9.063 8.594 9.063 8.594q0.25 0.25 0.25 0.609t-0.25 0.578q-0.25 0.25-0.578 0.25t-0.578-0.25l-9.625-9.125q-0.156-0.125-0.203-0.297t-0.047-0.359q0-0.156 0.047-0.328t0.203-0.297l9.625-9.125q0.25-0.25 0.578-0.25t0.578 0.25q0.25 0.219 0.25 0.578t-0.25 0.578z";function ju(e,t="#000",n=27){return Zi("svg",{width:n,height:n,viewBox:"0 0 32 32"},[Zi("path",{d:e,fill:t},null,8,["d","fill"])],8,["width","height"])}function $u(){{const{$pageInstance:e}=da();return e&&e.proxy.$page.id}}function Wu(e){const t=Be(e);if(t.$page)return t.$page.id;if(t.$){const{$pageInstance:e}=t.$;return e&&e.proxy.$page.id}}function Ku(){const e=pm(),t=e.length;if(t)return e[t-1]}function Yu(){const e=Ku();if(e)return e.$page.meta}function Xu(){const e=Yu();return e?e.id:-1}function Ju(){const e=Ku();if(e)return e.$vm}const Zu=["navigationBar","pullToRefresh"];function Qu(e,t){const n=JSON.parse(JSON.stringify(__uniConfig.globalStyle||{})),o=M({id:t},n,e);Zu.forEach((t=>{o[t]=M({},n[t],e[t])}));const{navigationBar:r}=o;return r.titleText&&r.titleImage&&(r.titleText=""),o}function ed(e,t,n){if(A(e))n=t,t=e,e=Ju();else if("number"==typeof e){const t=pm().find((t=>t.$page.id===e));e=t?t.$vm:Ju()}if(!e)return;const o=e.$[t];return o&&je(o,n)}function td(e){e.preventDefault()}let nd,od=0;function rd({onPageScroll:e,onReachBottom:t,onReachBottomDistance:n}){let o=!1,r=!1,i=!0;const a=()=>{function a(){if((()=>{const{scrollHeight:e}=document.documentElement,t=window.innerHeight,o=window.scrollY,i=o>0&&e>t&&o+t+n>=e,a=Math.abs(e-od)>n;return!i||r&&!a?(!i&&r&&(r=!1),!1):(od=e,r=!0,!0)})())return t&&t(),i=!1,setTimeout((function(){i=!0}),350),!0}e&&e(window.pageYOffset),t&&i&&(a()||(nd=setTimeout(a,300))),o=!1};return function(){clearTimeout(nd),o||requestAnimationFrame(a),o=!0}}function id(e,t){if(0===t.indexOf("/"))return t;if(0===t.indexOf("./"))return id(e,t.slice(2));const n=t.split("/"),o=n.length;let r=0;for(;r<o&&".."===n[r];r++);n.splice(0,r),t=n.join("/");const i=e.length>0?e.split("/"):[];return i.splice(i.length-r-1,r+1),He(i.concat(n).join("/"))}function ad(e,t=!1){return t?__uniRoutes.find((t=>t.path===e||t.alias===e)):__uniRoutes.find((t=>t.path===e))}class sd{constructor(e){this.$bindClass=!1,this.$bindStyle=!1,this.$vm=e,this.$el=function(e,t=!1){const{vnode:n}=e;if(qe(n.el))return t?n.el?[n.el]:[]:n.el;const{subTree:o}=e;if(16&o.shapeFlag){const e=o.children.filter((e=>e.el&&qe(e.el)));if(e.length>0)return t?e.map((e=>e.el)):e[0].el}return t?n.el?[n.el]:[]:n.el}(e.$),this.$el.getAttribute&&(this.$bindClass=!!this.$el.getAttribute("class"),this.$bindStyle=!!this.$el.getAttribute("style"))}selectComponent(e){if(!this.$el||!e)return;const t=dd(this.$el.querySelector(e));return t?cd(t,!1):void 0}selectAllComponents(e){if(!this.$el||!e)return[];const t=[],n=this.$el.querySelectorAll(e);for(let o=0;o<n.length;o++){const e=dd(n[o]);e&&t.push(cd(e,!1))}return t}forceUpdate(e){"class"===e?this.$bindClass?(this.$el.__wxsClassChanged=!0,this.$vm.$forceUpdate()):this.updateWxsClass():"style"===e&&(this.$bindStyle?(this.$el.__wxsStyleChanged=!0,this.$vm.$forceUpdate()):this.updateWxsStyle())}updateWxsClass(){const{__wxsAddClass:e}=this.$el;e.length&&(this.$el.className=e.join(" "))}updateWxsStyle(){const{__wxsStyle:e}=this.$el;e&&this.$el.setAttribute("style",function(e){let t="";if(!e||A(e))return t;for(const n in e){const o=e[n],r=n.startsWith("--")?n:z(n);(A(o)||"number"==typeof o)&&(t+=`${r}:${o};`)}return t}(e))}setStyle(e){return this.$el&&e?(A(e)&&(e=i(e)),U(e)&&(this.$el.__wxsStyle=e,this.forceUpdate("style")),this):this}addClass(e){if(!this.$el||!e)return this;const t=this.$el.__wxsAddClass||(this.$el.__wxsAddClass=[]);return-1===t.indexOf(e)&&(t.push(e),this.forceUpdate("class")),this}removeClass(e){if(!this.$el||!e)return this;const{__wxsAddClass:t}=this.$el;if(t){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const n=this.$el.__wxsRemoveClass||(this.$el.__wxsRemoveClass=[]);return-1===n.indexOf(e)&&(n.push(e),this.forceUpdate("class")),this}hasClass(e){return this.$el&&this.$el.classList.contains(e)}getDataset(){return this.$el&&this.$el.dataset}callMethod(e,t={}){const n=this.$vm[e];D(n)?n(JSON.parse(JSON.stringify(t))):this.$vm.ownerId&&Fb.publishHandler("onWxsInvokeCallMethod",{nodeId:this.$el.__id,ownerId:this.$vm.ownerId,method:e,args:t})}requestAnimationFrame(e){return window.requestAnimationFrame(e)}getState(){return this.$el&&(this.$el.__wxsState||(this.$el.__wxsState={}))}triggerEvent(e,t={}){return this.$vm.$emit(e,t),this}getComputedStyle(e){if(this.$el){const t=window.getComputedStyle(this.$el);return e&&e.length?e.reduce(((e,n)=>(e[n]=t[n],e)),{}):t}return{}}setTimeout(e,t){return window.setTimeout(e,t)}clearTimeout(e){return window.clearTimeout(e)}getBoundingClientRect(){return this.$el.getBoundingClientRect()}}function cd(e,t=!0){if(t&&e&&(e=Fe(e.$)),e&&e.$el)return e.$el.__wxsComponentDescriptor||(e.$el.__wxsComponentDescriptor=new sd(e)),e.$el.__wxsComponentDescriptor}function ld(e,t){return cd(e,t)}function ud(e,t,n,o=!0){if(t){e.__instance||(e.__instance=!0,Object.defineProperty(e,"instance",{get:()=>ld(n.proxy,!1)}));const r=function(e,t,n=!0){if(!t)return!1;if(n&&e.length<2)return!1;const o=Fe(t);if(!o)return!1;const r=o.$.type;return!(!r.$wxs&&!r.$renderjs)&&o}(t,n,o);if(r)return[e,ld(r,!1)]}}function dd(e){if(e)return e.__vueParentComponent&&e.__vueParentComponent.proxy}function pd(e){for(;e&&0!==e.tagName.indexOf("UNI-");)e=e.parentElement;return e}function hd(e,t=!1){const{type:n,timeStamp:o,target:r,currentTarget:i}=e,a={type:n,timeStamp:o,target:et(t?r:pd(r)),detail:{},currentTarget:et(i)};return e._stopped&&(a._stopped=!0),e.type.startsWith("touch")&&(a.touches=e.touches,a.changedTouches=e.changedTouches),function(e,t){M(e,{preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation()})}(a,e),a}function fd(e,t){return{force:1,identifier:0,clientX:e.clientX,clientY:e.clientY-t,pageX:e.pageX,pageY:e.pageY-t}}function gd(e,t){const n=[];for(let o=0;o<e.length;o++){const{identifier:r,pageX:i,pageY:a,clientX:s,clientY:c,force:l}=e[o];n.push({identifier:r,pageX:i,pageY:a-t,clientX:s,clientY:c-t,force:l||0})}return n}const vd=Object.defineProperty({__proto__:null,$nne:function(e,t,n){const{currentTarget:o}=e;if(!(e instanceof Event&&o instanceof HTMLElement))return[e];const r=0!==o.tagName.indexOf("UNI-");if(r)return ud(e,t,n,!1)||[e];const i=hd(e,r);if("click"===e.type)!function(e,t){const{x:n,y:o}=t,r=Nu();e.detail={x:n,y:o-r},e.touches=e.changedTouches=[fd(t,r)]}(i,e);else if((e=>0===e.type.indexOf("mouse")||["contextmenu"].includes(e.type))(e))!function(e,t){const n=Nu();e.pageX=t.pageX,e.pageY=t.pageY-n,e.clientX=t.clientX,e.clientY=t.clientY-n,e.touches=e.changedTouches=[fd(t,n)]}(i,e);else if((e=>"undefined"!=typeof TouchEvent&&e instanceof TouchEvent||0===e.type.indexOf("touch")||["longpress"].indexOf(e.type)>=0)(e)){const t=Nu();i.touches=gd(e.touches,t),i.changedTouches=gd(e.changedTouches,t)}return ud(i,t,n)||[i]},createNativeEvent:hd},Symbol.toStringTag,{value:"Module"});function md(e){!function(e){const t=e.globalProperties;M(t,vd),t.$gcd=ld}(e._context.config)}let _d=1;function yd(){return Xu()+"."+nu}const bd=M(tu("view"),{invokeOnCallback:(e,t)=>qb.emit("api."+e,t),invokeViewMethod:(e,t,n,o)=>{const{subscribe:r,publishHandler:i}=qb,a=o?_d++:0;o&&r(nu+"."+a,o,!0),i(yd(),{id:a,name:e,args:t},n)},invokeViewMethodKeepAlive:(e,t,n,o)=>{const{subscribe:r,unsubscribe:i,publishHandler:a}=qb,s=_d++,c=nu+"."+s;return r(c,n),a(yd(),{id:s,name:e,args:t},o),()=>{i(c)}}});function Md(e){ed(Ku(),Me,e),qb.invokeOnCallback("onWindowResize",e)}function Cd(e){const t=Ku();ed(Pm(),ue,e),ed(t,ue)}function kd(){ed(Pm(),de),ed(Ku(),de)}const wd=[ke,Te];function Td(){wd.forEach((e=>qb.subscribe(e,function(e){return(t,n)=>{ed(parseInt(n),e,t)}}(e))))}function Sd(){!function(){const{on:e}=qb;e(Me,Md),e(Pe,Cd),e(Ue,kd)}(),Td()}function Id(){if(this.$route){const e=this.$route.meta;return e.eventChannel||(e.eventChannel=new st(this.$page.id)),e.eventChannel}}function Ed(e){e._context.config.globalProperties.getOpenerEventChannel=Id}function Dd(){return{path:"",query:{},scene:1001,referrerInfo:{appId:"",extraData:{}}}}function Ad(e){return/^-?\d+[ur]px$/i.test(e)?e.replace(/(^-?\d+)[ur]px$/i,((e,t)=>`${Jp(parseFloat(t))}px`)):/^-?[\d\.]+$/.test(e)?`${e}px`:e||""}function Ld(e){const t=e.animation;if(!t||!t.actions||!t.actions.length)return;let n=0;const o=t.actions,r=t.actions.length;function i(){const t=o[n],a=t.option.transition,s=function(e){const t=["matrix","matrix3d","scale","scale3d","rotate3d","skew","translate","translate3d"],n=["scaleX","scaleY","scaleZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","translateX","translateY","translateZ"],o=["opacity","background-color"],r=["width","height","left","right","top","bottom"],i=e.animates,a=e.option,s=a.transition,c={},l=[];return i.forEach((e=>{let i=e.type,a=[...e.args];if(t.concat(n).includes(i))i.startsWith("rotate")||i.startsWith("skew")?a=a.map((e=>parseFloat(e)+"deg")):i.startsWith("translate")&&(a=a.map(Ad)),n.indexOf(i)>=0&&(a.length=1),l.push(`${i}(${a.join(",")})`);else if(o.concat(r).includes(a[0])){i=a[0];const e=a[1];c[i]=r.includes(i)?Ad(e):e}})),c.transform=c.webkitTransform=l.join(" "),c.transition=c.webkitTransition=Object.keys(c).map((e=>`${function(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)).replace("webkit","-webkit")}(e)} ${s.duration}ms ${s.timingFunction} ${s.delay}ms`)).join(","),c.transformOrigin=c.webkitTransformOrigin=a.transformOrigin,c}(t);Object.keys(s).forEach((t=>{e.$el.style[t]=s[t]})),n+=1,n<r&&setTimeout(i,a.duration+a.delay)}setTimeout((()=>{i()}),0)}const Rd={props:["animation"],watch:{animation:{deep:!0,handler(){Ld(this)}}},mounted(){Ld(this)}},Od=e=>{e.__reserved=!0;const{props:t,mixins:n}=e;return t&&t.animation||(n||(e.mixins=[])).push(Rd),xd(e)},xd=e=>(e.__reserved=!0,e.compatConfig={MODE:3},er(e)),Nd={hoverClass:{type:String,default:"none"},hoverStopPropagation:{type:Boolean,default:!1},hoverStartTime:{type:[Number,String],default:50},hoverStayTime:{type:[Number,String],default:400}};function Pd(e){const t=qn(!1);let n,o,r=!1;function i(){requestAnimationFrame((()=>{clearTimeout(o),o=setTimeout((()=>{t.value=!1}),parseInt(e.hoverStayTime))}))}function a(o){o._hoverPropagationStopped||e.hoverClass&&"none"!==e.hoverClass&&!e.disabled&&(e.hoverStopPropagation&&(o._hoverPropagationStopped=!0),r=!0,n=setTimeout((()=>{t.value=!0,r||i()}),parseInt(e.hoverStartTime)))}function s(){r=!1,t.value&&i()}function c(){s(),window.removeEventListener("mouseup",c)}return{hovering:t,binding:{onTouchstartPassive:function(e){e.touches.length>1||a(e)},onMousedown:function(e){r||(a(e),window.addEventListener("mouseup",c))},onTouchend:function(){s()},onMouseup:function(){r&&c()},onTouchcancel:function(){r=!1,t.value=!1,clearTimeout(n)}}}}function Ud(e,t){return A(t)&&(t=[t]),t.reduce(((t,n)=>(e[n]&&(t[n]=!0),t)),Object.create(null))}function Gd(e){return e.__wwe=!0,e}function Bd(e,t){return(n,o,r)=>{e.value&&t(n,function(e,t,n,o){const r=et(n);return{type:o.type||e,timeStamp:t.timeStamp||0,target:r,currentTarget:r,detail:o}}(n,o,e.value,r||{}))}}const Fd=Bu("uf"),qd={for:{type:String,default:""}},Vd=Bu("ul");const Hd=Od({name:"Label",props:qd,setup(e,{slots:t}){const n=$u(),o=function(){const e=[];return No(Vd,{addHandler(t){e.push(t)},removeHandler(t){e.splice(e.indexOf(t),1)}}),e}(),r=Ma((()=>e.for||t.default&&t.default.length)),i=Gd((t=>{const r=t.target;let i=/^uni-(checkbox|radio|switch)-/.test(r.className);i||(i=/^uni-(checkbox|radio|switch|button)$|^(svg|path)$/i.test(r.tagName)),i||(e.for?Fb.emit("uni-label-click-"+n+"-"+e.for,t,!0):o.length&&o[0](t,!0))}));return()=>Zi("uni-label",{class:{"uni-label-pointer":r},onClick:i},[t.default&&t.default()],10,["onClick"])}});function zd(e,t,n){const o=$u();n&&!e||U(t)&&Object.keys(t).forEach((r=>{n?0!==r.indexOf("@")&&0!==r.indexOf("uni-")&&Fb.on(`uni-${r}-${o}-${e}`,t[r]):0===r.indexOf("uni-")?Fb.on(r,t[r]):e&&Fb.on(`uni-${r}-${o}-${e}`,t[r])}))}function $d(e,t,n){const o=$u();n&&!e||U(t)&&Object.keys(t).forEach((r=>{n?0!==r.indexOf("@")&&0!==r.indexOf("uni-")&&Fb.off(`uni-${r}-${o}-${e}`,t[r]):0===r.indexOf("uni-")?Fb.off(r,t[r]):e&&Fb.off(`uni-${r}-${o}-${e}`,t[r])}))}const Wd=Od({name:"Button",props:{id:{type:String,default:""},hoverClass:{type:String,default:"button-hover"},hoverStartTime:{type:[Number,String],default:20},hoverStayTime:{type:[Number,String],default:70},hoverStopPropagation:{type:Boolean,default:!1},disabled:{type:[Boolean,String],default:!1},formType:{type:String,default:""},openType:{type:String,default:""},loading:{type:[Boolean,String],default:!1},plain:{type:[Boolean,String],default:!1}},setup(e,{slots:t}){const n=qn(null),o=Po(Fd,!1),{hovering:r,binding:i}=Pd(e);zl();const a=Gd(((t,r)=>{if(e.disabled)return t.stopImmediatePropagation();r&&n.value.click();const i=e.formType;if(i){if(!o)return;"submit"===i?o.submit(t):"reset"===i&&o.reset(t)}else;})),s=Po(Vd,!1);return s&&(s.addHandler(a),wr((()=>{s.removeHandler(a)}))),function(e,t){zd(e.id,t),Bo((()=>e.id),((e,n)=>{$d(n,t,!0),zd(e,t,!0)})),Tr((()=>{$d(e.id,t)}))}(e,{"label-click":a}),()=>{const o=e.hoverClass,s=Ud(e,"disabled"),c=Ud(e,"loading"),l=Ud(e,"plain"),u=o&&"none"!==o;return Zi("uni-button",aa({ref:n,onClick:a,class:u&&r.value?o:""},u&&i,s,c,l),[t.default&&t.default()],16,["onClick"])}}});function Kd(e){return e.$el}function Yd(e){const{base:t}=__uniConfig.router;return 0===He(e).indexOf(t)?He(e):t+e}function Xd(e){const{base:t,assets:n}=__uniConfig.router;if("./"===t&&(0===e.indexOf("./static/")||n&&0===e.indexOf("./"+n+"/"))&&(e=e.slice(1)),0===e.indexOf("/")){if(0!==e.indexOf("//"))return Yd(e.slice(1));e="https:"+e}if(se.test(e)||ce.test(e)||0===e.indexOf("blob:"))return e;const o=pm();return o.length?Yd(id(o[o.length-1].$page.route,e).slice(1)):e}const Jd=navigator.userAgent,Zd=/android/i.test(Jd),Qd=/iphone|ipad|ipod/i.test(Jd),ep=Jd.match(/Windows NT ([\d|\d.\d]*)/i),tp=/Macintosh|Mac/i.test(Jd),np=/Linux|X11/i.test(Jd),op=tp&&navigator.maxTouchPoints>0;function rp(){return/^Apple/.test(navigator.vendor)&&"number"==typeof window.orientation}function ip(e){return e&&90===Math.abs(window.orientation)}function ap(e,t){return e?Math[t?"max":"min"](screen.width,screen.height):screen.width}function sp(e){return Math.min(window.innerWidth,document.documentElement.clientWidth,e)||e}function cp(e,t,n,o){qb.invokeViewMethod("video."+e,{videoId:e,type:n,data:o},t)}function lp(e,t){const n={},{top:o,topWindowHeight:r}=Pu();if(t.id&&(n.id=e.id),t.dataset&&(n.dataset=Je(e)),t.rect||t.size){const i=e.getBoundingClientRect();t.rect&&(n.left=i.left,n.right=i.right,n.top=i.top-o-r,n.bottom=i.bottom-o-r),t.size&&(n.width=i.width,n.height=i.height)}if(T(t.properties)&&t.properties.forEach((e=>{e=e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))})),t.scrollOffset)if("UNI-SCROLL-VIEW"===e.tagName){const t=e.children[0].children[0];n.scrollLeft=t.scrollLeft,n.scrollTop=t.scrollTop,n.scrollHeight=t.scrollHeight,n.scrollWidth=t.scrollWidth}else n.scrollLeft=0,n.scrollTop=0,n.scrollHeight=0,n.scrollWidth=0;if(T(t.computedStyle)){const o=getComputedStyle(e);t.computedStyle.forEach((e=>{n[e]=o[e]}))}return t.context&&(n.contextInfo=function(e){return e.__uniContextInfo}(e)),n}function up(e,t){return(e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){const t=this.parentElement.querySelectorAll(e);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1}).call(e,t)}function dp(e,t,n){const o=[];t.forEach((({component:t,selector:n,single:r,fields:i})=>{null===t?o.push(function(e){const t={};if(e.id&&(t.id=""),e.dataset&&(t.dataset={}),e.rect&&(t.left=0,t.right=0,t.top=0,t.bottom=0),e.size&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),e.scrollOffset){const e=document.documentElement,n=document.body;t.scrollLeft=e.scrollLeft||n.scrollLeft||0,t.scrollTop=e.scrollTop||n.scrollTop||0,t.scrollHeight=e.scrollHeight||n.scrollHeight||0,t.scrollWidth=e.scrollWidth||n.scrollWidth||0}return t}(i)):o.push(function(e,t,n,o,r){const i=function(e,t){return e?e.$el:t.$el}(t,e),a=i.parentElement;if(!a)return o?null:[];const{nodeType:s}=i,c=3===s||8===s;if(o){const e=c?a.querySelector(n):up(i,n)?i:i.querySelector(n);return e?lp(e,r):null}{let e=[];const t=(c?a:i).querySelectorAll(n);return t&&t.length&&[].forEach.call(t,(t=>{e.push(lp(t,r))})),!c&&up(i,n)&&e.unshift(lp(i,r)),e}}(e,t,n,r,i))})),n(o)}const pp=["original","compressed"],hp=["album","camera"],fp=["GET","OPTIONS","HEAD","POST","PUT","DELETE","TRACE","CONNECT","PATCH"];function gp(e,t){return e&&-1!==t.indexOf(e)?e:t[0]}function vp(e,t){return!T(e)||0===e.length||e.find((e=>-1===t.indexOf(e)))?t:e}function mp(e){return function(){try{return e.apply(e,arguments)}catch(gS){console.error(gS)}}}let _p=1;const yp={};function bp(e,t,n){if("number"==typeof e){const o=yp[e];if(o)return o.keepAlive||delete yp[e],o.callback(t,n)}return t}const Mp="success",Cp="fail",kp="complete";function wp(e,t={},{beforeAll:n,beforeSuccess:o}={}){U(t)||(t={});const{success:r,fail:i,complete:a}=function(e){const t={};for(const n in e){const o=e[n];D(o)&&(t[n]=mp(o),delete e[n])}return t}(t),s=D(r),c=D(i),l=D(a),u=_p++;return function(e,t,n,o=!1){yp[e]={name:t,keepAlive:o,callback:n}}(u,e,(u=>{(u=u||{}).errMsg=function(e,t){return e&&-1!==e.indexOf(":fail")?t+e.substring(e.indexOf(":fail")):t+":ok"}(u.errMsg,e),D(n)&&n(u),u.errMsg===e+":ok"?(D(o)&&o(u,t),s&&r(u)):c&&i(u),l&&a(u)})),u}const Tp="success",Sp="fail",Ip="complete",Ep={},Dp={};function Ap(e,t){return function(n){return e(n,t)||n}}function Lp(e,t,n){let o=!1;for(let r=0;r<e.length;r++){const i=e[r];if(o)o=Promise.resolve(Ap(i,n));else{const e=i(t,n);if(O(e)&&(o=Promise.resolve(e)),!1===e)return{then(){},catch(){}}}}return o||{then:e=>e(t),catch(){}}}function Rp(e,t={}){return[Tp,Sp,Ip].forEach((n=>{const o=e[n];if(!T(o))return;const r=t[n];t[n]=function(e){Lp(o,e,t).then((e=>D(r)&&r(e)||e))}})),t}function Op(e,t){const n=[];T(Ep.returnValue)&&n.push(...Ep.returnValue);const o=Dp[e];return o&&T(o.returnValue)&&n.push(...o.returnValue),n.forEach((e=>{t=e(t)||t})),t}function xp(e){const t=Object.create(null);Object.keys(Ep).forEach((e=>{"returnValue"!==e&&(t[e]=Ep[e].slice())}));const n=Dp[e];return n&&Object.keys(n).forEach((e=>{"returnValue"!==e&&(t[e]=(t[e]||[]).concat(n[e]))})),t}function Np(e,t,n,o){const r=xp(e);if(r&&Object.keys(r).length){if(T(r.invoke)){return Lp(r.invoke,n).then((n=>t(Rp(xp(e),n),...o)))}return t(Rp(r,n),...o)}return t(n,...o)}function Pp(e,t){return(n={},...o)=>function(e){return!(!U(e)||![Mp,Cp,kp].find((t=>D(e[t]))))}(n)?Op(e,Np(e,t,n,o)):Op(e,new Promise(((r,i)=>{Np(e,t,M(n,{success:r,fail:i}),o)})))}function Up(e,t,n,o){return bp(e,M({errMsg:t+":fail"+(n?" "+n:"")},o))}function Gp(e,t,n,o){if(o&&o.beforeInvoke){const e=o.beforeInvoke(t);if(A(e))return e}const r=function(e,t){const n=e[0];if(!t||!U(t.formatArgs)&&U(n))return;const o=t.formatArgs,r=Object.keys(o);for(let i=0;i<r.length;i++){const t=r[i],a=o[t];if(D(a)){const o=a(e[0][t],n);if(A(o))return o}else w(n,t)||(n[t]=a)}}(t,o);if(r)return r}function Bp(e,t,n,o){return n=>{const r=wp(e,n,o),i=Gp(0,[n],0,o);return i?Up(r,e,i):t(n,{resolve:t=>function(e,t,n){return bp(e,M(n||{},{errMsg:t+":ok"}))}(r,e,t),reject:(t,n)=>Up(r,e,function(e){return!e||A(e)?e:e.stack?(console.error(e.message+te+e.stack),e.message):e}(t),n)})}}function Fp(e,t,n,o){return Pp(e,Bp(e,t,0,o))}function qp(e,t,n,o){return function(e,t,n,o){return(...e)=>{const n=Gp(0,e,0,o);if(n)throw new Error(n);return t.apply(null,e)}}(0,t,0,o)}function Vp(e,t,n,o){return Pp(e,function(e,t,n,o){return Bp(e,t,0,o)}(e,t,0,o))}let Hp=!1,zp=0,jp=0,$p=960,Wp=375,Kp=750;function Yp(){const{platform:e,pixelRatio:t,windowWidth:n}=function(){const e=rp(),t=sp(ap(e,ip(e)));return{platform:Qd?"ios":"other",pixelRatio:window.devicePixelRatio,windowWidth:t}}();zp=n,jp=t,Hp="ios"===e}function Xp(e,t){const n=Number(e);return isNaN(n)?t:n}const Jp=qp(0,((e,t)=>{if(0===zp&&(Yp(),function(){const e=__uniConfig.globalStyle||{};$p=Xp(e.rpxCalcMaxDeviceWidth,960),Wp=Xp(e.rpxCalcBaseDeviceWidth,375),Kp=Xp(e.rpxCalcBaseDeviceWidth,750)}()),0===(e=Number(e)))return 0;let n=t||zp;n=e===Kp||n<=$p?n:Wp;let o=e/750*n;return o<0&&(o=-o),o=Math.floor(o+1e-4),0===o&&(o=1!==jp&&Hp?.5:1),e<0?-o:o}));function Zp(e,t){Object.keys(t).forEach((n=>{D(t[n])&&(e[n]=function(e,t){const n=t?e?e.concat(t):T(t)?t:[t]:e;return n?function(e){const t=[];for(let n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}(e[n],t[n]))}))}const Qp=qp(0,((e,t)=>{A(e)&&U(t)?Zp(Dp[e]||(Dp[e]={}),t):U(e)&&Zp(Ep,e)})),eh=new gt,th=qp(0,((e,t)=>(eh.on(e,t),()=>eh.off(e,t)))),nh=qp(0,((e,...t)=>{eh.emit(e,...t)})),oh=[.5,.8,1,1.25,1.5,2];class rh{constructor(e,t){this.id=e,this.pageId=t}play(){cp(this.id,this.pageId,"play")}pause(){cp(this.id,this.pageId,"pause")}stop(){cp(this.id,this.pageId,"stop")}seek(e){cp(this.id,this.pageId,"seek",{position:e})}sendDanmu(e){cp(this.id,this.pageId,"sendDanmu",e)}playbackRate(e){~oh.indexOf(e)||(e=1),cp(this.id,this.pageId,"playbackRate",{rate:e})}requestFullScreen(e={}){cp(this.id,this.pageId,"requestFullScreen",e)}exitFullScreen(){cp(this.id,this.pageId,"exitFullScreen")}showStatusBar(){cp(this.id,this.pageId,"showStatusBar")}hideStatusBar(){cp(this.id,this.pageId,"hideStatusBar")}}const ih=qp(0,((e,t)=>new rh(e,Wu(t||Ju())))),ah=(e,t,n,o)=>{!function(e,t,n,o,r){qb.invokeViewMethod("map."+e,{type:n,data:o},t,r)}(e,t,n,o,(e=>{o&&((e,t)=>{const n=t.errMsg||"";new RegExp("\\:\\s*fail").test(n)?e.fail&&e.fail(t):e.success&&e.success(t),e.complete&&e.complete(t)})(o,e)}))};var sh=["scale","rotate","translate","setTransform","transform"],ch=["drawImage","fillText","fill","stroke","fillRect","strokeRect","clearRect","strokeText"],lh=["setFillStyle","setTextAlign","setStrokeStyle","setGlobalAlpha","setShadow","setFontSize","setLineCap","setLineJoin","setLineWidth","setMiterLimit","setTextBaseline","setLineDash"];const uh={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"};function dh(e){var t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e=e||"#000000"))){return[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4),16),255]}if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){let e=t[1].slice(0,1),n=t[1].slice(1,2),o=t[1].slice(2,3);return e=parseInt(e+e,16),n=parseInt(n+n,16),o=parseInt(o+o,16),[e,n,o,255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim()))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim()))}));var n=e.toLowerCase();if(w(uh,n)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(uh[n]);const e=parseInt(t[1].slice(0,2),16),o=parseInt(t[1].slice(2,4),16),r=parseInt(t[1].slice(4,6),16);let i=parseInt(t[1].slice(6,8),16);return i=i>=0?i:255,[e,o,r,i]}return console.error("unsupported color:"+e),[0,0,0,255]}class ph{constructor(e,t){this.type=e,this.data=t,this.colorStop=[]}addColorStop(e,t){this.colorStop.push([e,dh(t)])}}class hh{constructor(e,t){this.type="pattern",this.data=e,this.colorStop=t}}class fh{constructor(e){this.width=e}}class gh{constructor(e,t){this.id=e,this.pageId=t,this.actions=[],this.path=[],this.subpath=[],this.drawingState=[],this.state={lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}draw(e=!1,t){var n=[...this.actions];this.actions=[],this.path=[],function(e,t,n,o,r){qb.invokeViewMethod(`canvas.${e}`,{type:n,data:o},t,(e=>{r&&r(e)}))}(this.id,this.pageId,"actionsChanged",{actions:n,reserve:e},t)}createLinearGradient(e,t,n,o){return new ph("linear",[e,t,n,o])}createCircularGradient(e,t,n){return new ph("radial",[e,t,n])}createPattern(e,t){if(void 0===t)console.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.");else{if(!(["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t)<0))return new hh(e,t);console.error("Failed to execute 'createPattern' on 'CanvasContext': The provided type ('"+t+"') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'.")}}measureText(e){let t=0;return t=function(e,t){const n=document.createElement("canvas").getContext("2d");return n.font=t,n.measureText(e).width||0}(e,this.state.font),new fh(t)}save(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}restore(){this.actions.push({method:"restore",data:[]}),this.state=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}beginPath(){this.path=[],this.subpath=[],this.path.push({method:"beginPath",data:[]})}moveTo(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}lineTo(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[e,t]}):this.path.push({method:"lineTo",data:[e,t]}),this.subpath.push([e,t])}quadraticCurveTo(e,t,n,o){this.path.push({method:"quadraticCurveTo",data:[e,t,n,o]}),this.subpath.push([n,o])}bezierCurveTo(e,t,n,o,r,i){this.path.push({method:"bezierCurveTo",data:[e,t,n,o,r,i]}),this.subpath.push([r,i])}arc(e,t,n,o,r,i=!1){this.path.push({method:"arc",data:[e,t,n,o,r,i]}),this.subpath.push([e,t])}rect(e,t,n,o){this.path.push({method:"rect",data:[e,t,n,o]}),this.subpath=[[e,t]]}arcTo(e,t,n,o,r){this.path.push({method:"arcTo",data:[e,t,n,o,r]}),this.subpath.push([n,o])}clip(){this.actions.push({method:"clip",data:[...this.path]})}closePath(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}clearActions(){this.actions=[],this.path=[],this.subpath=[]}getActions(){var e=[...this.actions];return this.clearActions(),e}set lineDashOffset(e){this.actions.push({method:"setLineDashOffset",data:[e]})}set globalCompositeOperation(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}set shadowBlur(e){this.actions.push({method:"setShadowBlur",data:[e]})}set shadowColor(e){this.actions.push({method:"setShadowColor",data:[e]})}set shadowOffsetX(e){this.actions.push({method:"setShadowOffsetX",data:[e]})}set shadowOffsetY(e){this.actions.push({method:"setShadowOffsetY",data:[e]})}set font(e){var t=this;this.state.font=e;var n=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(n){var o=n[1].trim().split(/\s/),r=parseFloat(n[3]),i=n[7],a=[];o.forEach((function(e,n){["italic","oblique","normal"].indexOf(e)>-1?(a.push({method:"setFontStyle",data:[e]}),t.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(a.push({method:"setFontWeight",data:[e]}),t.state.fontWeight=e):0===n?(a.push({method:"setFontStyle",data:["normal"]}),t.state.fontStyle="normal"):1===n&&s()})),1===o.length&&s(),o=a.map((function(e){return e.data[0]})).join(" "),this.state.fontSize=r,this.state.fontFamily=i,this.actions.push({method:"setFont",data:[`${o} ${r}px ${i}`]})}else console.warn("Failed to set 'font' on 'CanvasContext': invalid format.");function s(){a.push({method:"setFontWeight",data:["normal"]}),t.state.fontWeight="normal"}}get font(){return this.state.font}set fillStyle(e){this.setFillStyle(e)}set strokeStyle(e){this.setStrokeStyle(e)}set globalAlpha(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}set textAlign(e){this.actions.push({method:"setTextAlign",data:[e]})}set lineCap(e){this.actions.push({method:"setLineCap",data:[e]})}set lineJoin(e){this.actions.push({method:"setLineJoin",data:[e]})}set lineWidth(e){this.actions.push({method:"setLineWidth",data:[e]})}set miterLimit(e){this.actions.push({method:"setMiterLimit",data:[e]})}set textBaseline(e){this.actions.push({method:"setTextBaseline",data:[e]})}}const vh=$e((()=>{[...sh,...ch].forEach((function(e){gh.prototype[e]=function(e){switch(e){case"fill":case"stroke":return function(){this.actions.push({method:e+"Path",data:[...this.path]})};case"fillRect":return function(e,t,n,o){this.actions.push({method:"fillPath",data:[{method:"rect",data:[e,t,n,o]}]})};case"strokeRect":return function(e,t,n,o){this.actions.push({method:"strokePath",data:[{method:"rect",data:[e,t,n,o]}]})};case"fillText":case"strokeText":return function(t,n,o,r){var i=[t.toString(),n,o];"number"==typeof r&&i.push(r),this.actions.push({method:e,data:i})};case"drawImage":return function(t,n,o,r,i,a,s,c,l){var u;function d(e){return"number"==typeof e}void 0===l&&(a=n,s=o,c=r,l=i,n=void 0,o=void 0,r=void 0,i=void 0),u=d(n)&&d(o)&&d(r)&&d(i)?[t,a,s,c,l,n,o,r,i]:d(c)&&d(l)?[t,a,s,c,l]:[t,a,s],this.actions.push({method:e,data:u})};default:return function(...t){this.actions.push({method:e,data:t})}}}(e)})),lh.forEach((function(e){gh.prototype[e]=function(e){switch(e){case"setFillStyle":case"setStrokeStyle":return function(t){"object"!=typeof t?this.actions.push({method:e,data:["normal",dh(t)]}):this.actions.push({method:e,data:[t.type,t.data,t.colorStop]})};case"setGlobalAlpha":return function(t){t=Math.floor(255*parseFloat(t)),this.actions.push({method:e,data:[t]})};case"setShadow":return function(t,n,o,r){r=dh(r),this.actions.push({method:e,data:[t,n,o,r]}),this.state.shadowBlur=o,this.state.shadowColor=r,this.state.shadowOffsetX=t,this.state.shadowOffsetY=n};case"setLineDash":return function(t,n){t=t||[0,0],n=n||0,this.actions.push({method:e,data:[t,n]}),this.state.lineDash=t};case"setFontSize":return function(t){this.state.font=this.state.font.replace(/\d+\.?\d*px/,t+"px"),this.state.fontSize=t,this.actions.push({method:e,data:[t]})};default:return function(...t){this.actions.push({method:e,data:t})}}}(e)}))})),mh=qp(0,((e,t)=>{if(vh(),t)return new gh(e,Wu(t));const n=Wu(Ju());if(n)return new gh(e,n);qb.emit(pe,"createCanvasContext:fail")})),_h=["onCanplay","onPlay","onPause","onStop","onEnded","onTimeUpdate","onError","onWaiting","onSeeking","onSeeked"],yh=["offCanplay","offPlay","offPause","offStop","offEnded","offTimeUpdate","offError","offWaiting","offSeeking","offSeeked"],bh={thresholds:[0],initialRatio:0,observeAll:!1},Mh=["top","right","bottom","left"];let Ch=1;function kh(e={}){return Mh.map((t=>`${Number(e[t])||0}px`)).join(" ")}class wh{constructor(e,t){this._pageId=Wu(e),this._component=e,this._options=M({},bh,t)}relativeTo(e,t){return this._options.relativeToSelector=e,this._options.rootMargin=kh(t),this}relativeToViewport(e){return this._options.relativeToSelector=void 0,this._options.rootMargin=kh(e),this}observe(e,t){D(t)&&(this._options.selector=e,this._reqId=Ch++,function({reqId:e,component:t,options:n,callback:o},r){const i=Kd(t);(i.__io||(i.__io={}))[e]=function(e,t,n){xf();const o=t.relativeToSelector?e.querySelector(t.relativeToSelector):null,r=new IntersectionObserver((e=>{e.forEach((e=>{n({intersectionRatio:Pf(e),intersectionRect:Nf(e.intersectionRect),boundingClientRect:Nf(e.boundingClientRect),relativeRect:Nf(e.rootBounds),time:Date.now(),dataset:Je(e.target),id:e.target.id})}))}),{root:o,rootMargin:t.rootMargin,threshold:t.thresholds});if(t.observeAll){r.USE_MUTATION_OBSERVER=!0;const n=e.querySelectorAll(t.selector);for(let e=0;e<n.length;e++)r.observe(n[e])}else{r.USE_MUTATION_OBSERVER=!1;const n=e.querySelector(t.selector);n?r.observe(n):console.warn(`Node ${t.selector} is not found. Intersection observer will not trigger.`)}return r}(i,n,o)}({reqId:this._reqId,component:this._component,options:this._options,callback:t},this._pageId))}disconnect(){this._reqId&&function({reqId:e,component:t},n){const o=Kd(t),r=o.__io&&o.__io[e];r&&(r.disconnect(),delete o.__io[e])}({reqId:this._reqId,component:this._component},this._pageId)}}const Th=qp(0,((e,t)=>((e=Be(e))&&!Wu(e)&&(t=e,e=null),new wh(e||Ju(),t))));let Sh=0,Ih={};function Eh(e,t,n,o){const r={options:o},i=o&&("success"in o||"fail"in o||"complete"in o);if(i){const e=String(Sh++);r.callbackId=e,Ih[e]=o}qb.invokeViewMethod(`editor.${e}`,{type:n,data:r},t,(({callbackId:e,data:t})=>{i&&(!function(e,t){e=e||{},A(t)&&(t={errMsg:t}),/:ok$/.test(t.errMsg)?D(e.success)&&e.success(t):D(e.fail)&&e.fail(t),D(e.complete)&&e.complete(t)}(Ih[e],t),delete Ih[e])}))}const Dh={canvas:gh,map:class{constructor(e,t){this.id=e,this.pageId=t}getCenterLocation(e){ah(this.id,this.pageId,"getCenterLocation",e)}moveToLocation(e){ah(this.id,this.pageId,"moveToLocation",e)}getScale(e){ah(this.id,this.pageId,"getScale",e)}getRegion(e){ah(this.id,this.pageId,"getRegion",e)}includePoints(e){ah(this.id,this.pageId,"includePoints",e)}translateMarker(e){ah(this.id,this.pageId,"translateMarker",e)}$getAppMap(){}addCustomLayer(e){ah(this.id,this.pageId,"addCustomLayer",e)}removeCustomLayer(e){ah(this.id,this.pageId,"removeCustomLayer",e)}addGroundOverlay(e){ah(this.id,this.pageId,"addGroundOverlay",e)}removeGroundOverlay(e){ah(this.id,this.pageId,"removeGroundOverlay",e)}updateGroundOverlay(e){ah(this.id,this.pageId,"updateGroundOverlay",e)}initMarkerCluster(e){ah(this.id,this.pageId,"initMarkerCluster",e)}addMarkers(e){ah(this.id,this.pageId,"addMarkers",e)}removeMarkers(e){ah(this.id,this.pageId,"removeMarkers",e)}moveAlong(e){ah(this.id,this.pageId,"moveAlong",e)}setLocMarkerIcon(e){ah(this.id,this.pageId,"setLocMarkerIcon",e)}openMapApp(e){ah(this.id,this.pageId,"openMapApp",e)}on(e){ah(this.id,this.pageId,"on",e)}},video:rh,editor:class{constructor(e,t){this.id=e,this.pageId=t}format(e,t){this._exec("format",{name:e,value:t})}insertDivider(){this._exec("insertDivider")}insertImage(e){this._exec("insertImage",e)}insertText(e){this._exec("insertText",e)}setContents(e){this._exec("setContents",e)}getContents(e){this._exec("getContents",e)}clear(e){this._exec("clear",e)}removeFormat(e){this._exec("removeFormat",e)}undo(e){this._exec("undo",e)}redo(e){this._exec("redo",e)}blur(e){this._exec("blur",e)}getSelectionText(e){this._exec("getSelectionText",e)}scrollIntoView(e){this._exec("scrollIntoView",e)}_exec(e,t){Eh(this.id,this.pageId,e,t)}}};function Ah(e){if(e&&e.contextInfo){const{id:t,type:n,page:o}=e.contextInfo,r=Dh[n];e.context=new r(t,o),delete e.contextInfo}}class Lh{constructor(e,t,n,o){this._selectorQuery=e,this._component=t,this._selector=n,this._single=o}boundingClientRect(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,rect:!0,size:!0},e),this._selectorQuery}fields(e,t){return this._selectorQuery._push(this._selector,this._component,this._single,e,t),this._selectorQuery}scrollOffset(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,scrollOffset:!0},e),this._selectorQuery}context(e){return this._selectorQuery._push(this._selector,this._component,this._single,{context:!0},e),this._selectorQuery}node(e){return this._selectorQuery}}class Rh{constructor(e){this._component=void 0,this._page=e,this._queue=[],this._queueCb=[]}exec(e){return dp(this._page,this._queue,(t=>{const n=this._queueCb;t.forEach(((e,t)=>{T(e)?e.forEach(Ah):Ah(e);const o=n[t];D(o)&&o.call(this,e)})),D(e)&&e.call(this,t)})),this._nodesRef}in(e){return this._component=Be(e),this}select(e){return this._nodesRef=new Lh(this,this._component,e,!0)}selectAll(e){return this._nodesRef=new Lh(this,this._component,e,!1)}selectViewport(){return this._nodesRef=new Lh(this,null,"",!0)}_push(e,t,n,o,r){this._queue.push({component:t,selector:e,single:n,fields:o}),this._queueCb.push(r)}}const Oh=qp(0,(e=>((e=Be(e))&&!Wu(e)&&(e=null),new Rh(e||Ju())))),xh=qp(0,(()=>{const e=Pm();return e&&e.$vm?e.$vm.$locale:zl().getLocale()})),Nh={[ge]:[],[fe]:[],[pe]:[],[ue]:[],[de]:[]};function Ph(e,t){const n=Pm();if(n&&n.$vm)return _r(e,t,n.$vm.$);Nh[e].push(t)}const Uh=qp(0,(()=>M({},Vf)));let Gh,Bh,Fh;const qh=[];const Vh=Vp("getPushClientId",((e,{resolve:t,reject:n})=>{Promise.resolve().then((()=>{var e,o;void 0===Fh&&(Fh=!1,Gh="",Bh="uniPush is not enabled"),qh.push(((e,o)=>{e?t({cid:e}):n(o)})),void 0!==Gh&&(e=Gh,o=Bh,qh.forEach((t=>{t(e,o)})),qh.length=0)}))})),Hh=e=>{},zh=e=>{},jh={formatArgs:{showToast:!0},beforeInvoke(){Zl()},beforeSuccess(e,t){if(!t.showToast)return;const{t:n}=zl(),o=n("uni.setClipboardData.success");o&&Vy({title:o,icon:"success",mask:!1})}},$h=(Boolean,"removeStorage"),Wh=["wgs84","gcj02"],Kh={formatArgs:{type(e,t){e=(e||"").toLowerCase(),-1===Wh.indexOf(e)?t.type=Wh[0]:t.type=e},altitude(e,t){t.altitude=e||!1}}},Yh=(Boolean,{formatArgs:{count(e,t){(!e||e<=0)&&(t.count=9)},sizeType(e,t){t.sizeType=vp(e,pp)},sourceType(e,t){t.sourceType=vp(e,hp)},extension(e,t){if(e instanceof Array&&0===e.length)return"param extension should not be empty.";e||(t.extension=["*"])}}}),Xh={formatArgs:{sourceType(e,t){t.sourceType=vp(e,hp)},compressed:!0,maxDuration:60,camera:"back",extension(e,t){if(e instanceof Array&&0===e.length)return"param extension should not be empty.";e||(t.extension=["*"])}}},Jh=(Boolean,["all","image","video"]),Zh={formatArgs:{count(e,t){(!e||e<=0)&&(t.count=100)},sourceType(e,t){t.sourceType=vp(e,hp)},type(e,t){t.type=gp(e,Jh)},extension(e,t){if(e instanceof Array&&0===e.length)return"param extension should not be empty.";e||(t.extension=[""])}}},Qh={formatArgs:{src(e,t){t.src=Xd(e)}}},ef={formatArgs:{urls(e,t){t.urls=e.map((e=>A(e)&&e?Xd(e):""))},current(e,t){"number"==typeof e?t.current=e>0&&e<t.urls.length?e:0:A(e)&&e&&(t.current=Xd(e))}}},tf="json",nf=["text","arraybuffer"],of=encodeURIComponent;ArrayBuffer,Boolean;const rf={formatArgs:{method(e,t){t.method=gp((e||"").toUpperCase(),fp)},data(e,t){t.data=e||""},url(e,t){t.method===fp[0]&&U(t.data)&&Object.keys(t.data).length&&(t.url=function(e,t){let n=e.split("#");const o=n[1]||"";n=n[0].split("?");let r=n[1]||"";e=n[0];const i=r.split("&").filter((e=>e)),a={};i.forEach((e=>{const t=e.split("=");a[t[0]]=t[1]}));for(const s in t)if(w(t,s)){let e=t[s];null==e?e="":U(e)&&(e=JSON.stringify(e)),a[of(s)]=of(e)}return r=Object.keys(a).map((e=>`${e}=${a[e]}`)).join("&"),e+(r?"?"+r:"")+(o?"#"+o:"")}(e,t.data))},header(e,t){const n=t.header=e||{};t.method!==fp[0]&&(Object.keys(n).find((e=>"content-type"===e.toLowerCase()))||(n["Content-Type"]="application/json"))},dataType(e,t){t.dataType=(e||tf).toLowerCase()},responseType(e,t){t.responseType=(e||"").toLowerCase(),-1===nf.indexOf(t.responseType)&&(t.responseType="text")}}},af={formatArgs:{filePath(e,t){e&&(t.filePath=Xd(e))},header(e,t){t.header=e||{}},formData(e,t){t.formData=e||{}}}};const sf={url:{type:String,required:!0}},cf="navigateTo",lf="redirectTo",uf="reLaunch",df="switchTab",pf="preloadPage",hf="unPreloadPage",ff=(yf(["slide-in-right","slide-in-left","slide-in-top","slide-in-bottom","fade-in","zoom-out","zoom-fade-out","pop-in","none"]),yf(["slide-out-right","slide-out-left","slide-out-top","slide-out-bottom","fade-out","zoom-in","zoom-fade-in","pop-out","none"]),Cf(cf)),gf=Cf(lf),vf=Cf(uf),mf=Cf(df),_f={formatArgs:{delta(e,t){e=parseInt(e+"")||1,t.delta=Math.min(pm().length-1,e)}}};function yf(e){return{animationType:{type:String,validator(t){if(t&&-1===e.indexOf(t))return"`"+t+"` is not supported for `animationType` (supported values are: `"+e.join("`|`")+"`)"}},animationDuration:{type:Number}}}let bf;function Mf(){bf=""}function Cf(e){return{formatArgs:{url:kf(e)},beforeAll:Mf}}function kf(e){return function(t,n){if(!t)return'Missing required args: "url"';const o=(t=function(e){if(0===e.indexOf("/"))return e;let t="";const n=pm();return n.length&&(t=n[n.length-1].$page.route),id(t,e)}(t)).split("?")[0],r=ad(o,!0);if(!r)return"page `"+t+"` is not found";if(e===cf||e===lf){if(r.meta.isTabBar)return`can not ${e} a tabbar page`}else if(e===df&&!r.meta.isTabBar)return"can not switch to no-tabBar page";if(e!==df&&e!==pf||!r.meta.isTabBar||"appLaunch"===n.openType||(t=o),r.meta.isEntry&&(t=t.replace(r.alias,"/")),n.url=function(e){if(!A(e))return e;const t=e.indexOf("?");if(-1===t)return e;const n=e.slice(t+1).trim().replace(/^(\?|#|&)/,"");if(!n)return e;e=e.slice(0,t);const o=[];return n.split("&").forEach((e=>{const t=e.replace(/\+/g," ").split("="),n=t.shift(),r=t.length>0?t.join("="):"";o.push(n+"="+encodeURIComponent(r))})),o.length?e+"?"+o.join("&"):e}(t),e!==hf)if(e!==pf){if(bf===t&&"appLaunch"!==n.openType)return`${bf} locked`;__uniConfig.ready&&(bf=t)}else if(r.meta.isTabBar){const e=pm(),t=r.path.slice(1);if(e.find((e=>e.route===t)))return"tabBar page `"+t+"` already exists"}}}const wf="setNavigationBarTitle",Tf={formatArgs:{duration:300}},Sf={formatArgs:{itemColor:"#000"}},If=(Boolean,{formatArgs:{title:"",mask:!1}}),Ef=(Boolean,{beforeInvoke(){Xl()},formatArgs:{title:"",content:"",placeholderText:"",showCancel:!0,editable:!1,cancelText(e,t){if(!w(t,"cancelText")){const{t:e}=zl();t.cancelText=e("uni.showModal.cancel")}},cancelColor:"#000",confirmText(e,t){if(!w(t,"confirmText")){const{t:e}=zl();t.confirmText=e("uni.showModal.confirm")}},confirmColor:ae}}),Df=["success","loading","none","error"],Af=(Boolean,{formatArgs:{title:"",icon(e,t){t.icon=gp(e,Df)},image(e,t){t.image=e?Xd(e):""},duration:1500,mask:!1}}),Lf="startPullDownRefresh",Rf="stopPullDownRefresh",Of="hideTabBar",xf=function(){if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=r(t);n;)n=r(t=n.ownerDocument);return t}(),t=[],n=null,o=null;a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a._setupCrossOriginUpdater=function(){return n||(n=function(e,n){o=e&&n?d(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},a._resetCrossOriginUpdater=function(){n=null,o=null},a.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},a.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},a.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},a.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},a.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var o=this._checkForIntersections,i=null,a=null;this.POLL_INTERVAL?i=n.setInterval(o,this.POLL_INTERVAL):(s(n,"resize",o,!0),s(t,"scroll",o,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(a=new n.MutationObserver(o)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(i&&e.clearInterval(i),c(e,"resize",o,!0)),c(t,"scroll",o,!0),a&&a.disconnect()}));var l=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=l){var u=r(t);u&&this._monitorIntersections(u.ownerDocument)}}},a.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var o=this.root&&(this.root.ownerDocument||this.root)||e;if(!this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=o;){var i=r(n);if((n=i&&i.ownerDocument)==t)return!0}return!1}))){var i=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),i(),t!=o){var a=r(t);a&&this._unmonitorIntersections(a.ownerDocument)}}}},a.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},a.prototype._checkForIntersections=function(){if(this.root||!n||o){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(o){var r=o.element,a=l(r),s=this._rootContainsTarget(r),c=o.entry,u=e&&s&&this._computeTargetAndRootIntersection(r,a,t),d=null;this._rootContainsTarget(r)?n&&!this.root||(d=t):d={top:0,bottom:0,left:0,right:0,width:0,height:0};var p=o.entry=new i({time:window.performance&&performance.now&&performance.now(),target:r,boundingClientRect:a,rootBounds:d,intersectionRect:u});c?e&&s?this._hasCrossedThreshold(c,p)&&this._queuedEntries.push(p):c&&c.isIntersecting&&this._queuedEntries.push(p):this._queuedEntries.push(p)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},a.prototype._computeTargetAndRootIntersection=function(t,r,i){if("none"!=window.getComputedStyle(t).display){for(var a,s,c,u,p,f,g,v,m=r,_=h(t),y=!1;!y&&_;){var b=null,M=1==_.nodeType?window.getComputedStyle(_):{};if("none"==M.display)return null;if(_==this.root||9==_.nodeType)if(y=!0,_==this.root||_==e)n&&!this.root?!o||0==o.width&&0==o.height?(_=null,b=null,m=null):b=o:b=i;else{var C=h(_),k=C&&l(C),w=C&&this._computeTargetAndRootIntersection(C,k,i);k&&w?(_=C,b=d(k,w)):(_=null,m=null)}else{var T=_.ownerDocument;_!=T.body&&_!=T.documentElement&&"visible"!=M.overflow&&(b=l(_))}if(b&&(a=b,s=m,c=void 0,u=void 0,p=void 0,f=void 0,g=void 0,v=void 0,c=Math.max(a.top,s.top),u=Math.min(a.bottom,s.bottom),p=Math.max(a.left,s.left),f=Math.min(a.right,s.right),v=u-c,m=(g=f-p)>=0&&v>=0&&{top:c,bottom:u,left:p,right:f,width:g,height:v}||null),!m)break;_=_&&h(_)}return m}},a.prototype._getRootRect=function(){var t;if(this.root&&!f(this.root))t=l(this.root);else{var n=f(this.root)?this.root:e,o=n.documentElement,r=n.body;t={top:0,left:0,right:o.clientWidth||r.clientWidth,width:o.clientWidth||r.clientWidth,bottom:o.clientHeight||r.clientHeight,height:o.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},a.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},a.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==o)for(var r=0;r<this.thresholds.length;r++){var i=this.thresholds[r];if(i==n||i==o||i<n!=i<o)return!0}},a.prototype._rootIsInDom=function(){return!this.root||p(e,this.root)},a.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return p(n,t)&&(!this.root||n==t.ownerDocument)},a.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},a.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=a,window.IntersectionObserverEntry=i}function r(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(gS){return null}}function i(e){this.time=e.time,this.target=e.target,this.rootBounds=u(e.rootBounds),this.boundingClientRect=u(e.boundingClientRect),this.intersectionRect=u(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,o=this.intersectionRect,r=o.width*o.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function a(e,t){var n,o,r,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType&&9!=i.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout((function(){n(),r=null}),o))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function s(e,t,n,o){"function"==typeof e.addEventListener?e.addEventListener(t,n,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function c(e,t,n,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function l(e){var t;try{t=e.getBoundingClientRect()}catch(n){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function d(e,t){var n=t.top-e.top,o=t.left-e.left;return{top:n,left:o,height:t.height,width:t.width,bottom:n+t.height,right:o+t.width}}function p(e,t){for(var n=t;n;){if(n==e)return!0;n=h(n)}return!1}function h(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?r(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function f(e){return e&&9===e.nodeType}};function Nf(e){const{bottom:t,height:n,left:o,right:r,top:i,width:a}=e||{};return{bottom:t,height:n,left:o,right:r,top:i,width:a}}function Pf(e){const{intersectionRatio:t,boundingClientRect:{height:n,width:o},intersectionRect:{height:r,width:i}}=e;return 0!==t?t:r===n?i/o:r/n}const Uf={};function Gf(e,t){const n=Uf[e];return n?Promise.resolve(n):/^data:[a-z-]+\/[a-z-]+;base64,/.test(e)?Promise.resolve(function(e){const t=e.split(","),n=t[0].match(/:(.*?);/),o=n?n[1]:"",r=atob(t[1]);let i=r.length;const a=new Uint8Array(i);for(;i--;)a[i]=r.charCodeAt(i);return Bf(a,o)}(e)):t?Promise.reject(new Error("not find")):new Promise(((t,n)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){t(this.response)},o.onerror=n,o.send()}))}function Bf(e,t){let n;if(e instanceof File)n=e;else{t=t||e.type||"";const r=`${Date.now()}${function(e){const t=e.split("/")[1];return t?`.${t}`:""}(t)}`;try{n=new File([e],r,{type:t})}catch(o){n=e=e instanceof Blob?e:new Blob([e],{type:t}),n.name=n.name||r}}return n}function Ff(e){for(const n in Uf)if(w(Uf,n)){if(Uf[n]===e)return n}var t=(window.URL||window.webkitURL).createObjectURL(e);return Uf[t]=e,t}function qf(e){(window.URL||window.webkitURL).revokeObjectURL(e),delete Uf[e]}const Vf=Dd(),Hf=Dd();const zf=Od({name:"ResizeSensor",props:{initial:{type:Boolean,default:!1}},emits:["resize"],setup(e,{emit:t}){const n=qn(null),o=function(e){return()=>{const{firstElementChild:t,lastElementChild:n}=e.value;t.scrollLeft=1e5,t.scrollTop=1e5,n.scrollLeft=1e5,n.scrollTop=1e5}}(n),r=function(e,t,n){const o=In({width:-1,height:-1});return Bo((()=>M({},o)),(e=>t("resize",e))),()=>{const t=e.value;o.width=t.offsetWidth,o.height=t.offsetHeight,n()}}(n,t,o);return function(e,t,n,o){lr(o),Mr((()=>{t.initial&&po(n);const r=e.value;r.offsetParent!==r.parentElement&&(r.parentElement.style.position="relative"),"AnimationEvent"in window||o()}))}(n,e,r,o),()=>Zi("uni-resize-sensor",{ref:n,onAnimationstartOnce:r},[Zi("div",{onScroll:r},[Zi("div",null,null)],40,["onScroll"]),Zi("div",{onScroll:r},[Zi("div",null,null)],40,["onScroll"])],40,["onAnimationstartOnce"])}});let jf;function $f(){}const Wf={cursorSpacing:{type:[Number,String],default:0},showConfirmBar:{type:[Boolean,String],default:"auto"},adjustPosition:{type:[Boolean,String],default:!0},autoBlur:{type:[Boolean,String],default:!1}};function Kf(e,t,n){function o(e){const t=Ma((()=>0===String(navigator.vendor).indexOf("Apple")));e.addEventListener("focus",(()=>{clearTimeout(jf),document.addEventListener("click",$f,!1)}));e.addEventListener("blur",(()=>{t.value&&e.blur(),document.removeEventListener("click",$f,!1),t.value&&document.documentElement.scrollTo(document.documentElement.scrollLeft,document.documentElement.scrollTop)}))}Bo((()=>t.value),(e=>e&&o(e)))}var Yf=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,Xf=/^<\/([-A-Za-z0-9_]+)[^>]*>/,Jf=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,Zf=rg("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),Qf=rg("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),eg=rg("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),tg=rg("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),ng=rg("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),og=rg("script,style");function rg(e){for(var t={},n=e.split(","),o=0;o<n.length;o++)t[n[o]]=!0;return t}const ig={src:{type:String,default:""},mode:{type:String,default:"scaleToFill"},lazyLoad:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1}},ag={widthFix:["offsetWidth","height",(e,t)=>e/t],heightFix:["offsetHeight","width",(e,t)=>e*t]},sg={aspectFit:["center center","contain"],aspectFill:["center center","cover"],widthFix:[,"100% 100%"],heightFix:[,"100% 100%"],top:["center top"],bottom:["center bottom"],center:["center center"],left:["left center"],right:["right center"],"top left":["left top"],"top right":["right top"],"bottom left":["left bottom"],"bottom right":["right bottom"]},cg=Od({name:"Image",props:ig,setup(e,{emit:t}){const n=qn(null),o=function(e,t){const n=qn(""),o=Ma((()=>{let e="auto",o="";const r=sg[t.mode];return r?(r[0]&&(o=r[0]),r[1]&&(e=r[1])):(o="0% 0%",e="100% 100%"),`background-image:${n.value?'url("'+n.value+'")':"none"};background-position:${o};background-size:${e};`})),r=In({rootEl:e,src:Ma((()=>t.src?Xd(t.src):"")),origWidth:0,origHeight:0,origStyle:{width:"",height:""},modeStyle:o,imgSrc:n});return Mr((()=>{const t=e.value.style;r.origWidth=Number(t.width)||0,r.origHeight=Number(t.height)||0})),r}(n,e),r=Bd(n,t),{fixSize:i}=function(e,t,n){const o=()=>{const{mode:o}=t,r=ag[o];if(!r)return;const{origWidth:i,origHeight:a}=n,s=i&&a?i/a:0;if(!s)return;const c=e.value,l=c[r[0]];l&&(c.style[r[1]]=function(e){lg&&e>10&&(e=2*Math.round(e/2));return e}(r[2](l,s))+"px")},r=()=>{const{style:t}=e.value,{origStyle:{width:o,height:r}}=n;t.width=o,t.height=r};return Bo((()=>t.mode),((e,t)=>{ag[t]&&r(),ag[e]&&o()})),{fixSize:o,resetSize:r}}(n,e,o);return function(e,t,n,o,r){let i,a;const s=(t=0,n=0,o="")=>{e.origWidth=t,e.origHeight=n,e.imgSrc=o},c=c=>{if(!c)return l(),void s();i=i||new Image,i.onload=e=>{const{width:u,height:d}=i;s(u,d,c),o(),i.draggable=t.draggable,a&&a.remove(),a=i,n.value.appendChild(i),l(),r("load",e,{width:u,height:d})},i.onerror=t=>{s(),l(),r("error",t,{errMsg:`GET ${e.src} 404 (Not Found)`})},i.src=c},l=()=>{i&&(i.onload=null,i.onerror=null,i=null)};Bo((()=>e.src),(e=>c(e))),Bo((()=>e.imgSrc),(e=>{!e&&a&&(a.remove(),a=null)})),Mr((()=>c(e.src))),wr((()=>l()))}(o,e,n,i,r),()=>Zi("uni-image",{ref:n},[Zi("div",{style:o.modeStyle},null,4),ag[e.mode]?Zi(zf,{onResize:i},null,8,["onResize"]):Zi("span",null,null)],512)}});const lg="Google Inc."===navigator.vendor;const ug=Qe(!0),dg=[];let pg,hg=0;const fg=e=>dg.forEach((t=>t.userAction=e));function gg(e={userAction:!1}){if(!pg){["touchstart","touchmove","touchend","mousedown","mouseup"].forEach((e=>{document.addEventListener(e,(function(){!hg&&fg(!0),hg++,setTimeout((()=>{!--hg&&fg(!1)}),0)}),ug)})),pg=!0}dg.push(e)}const vg=()=>!!hg;function mg(){const e=In({userAction:!1});return Mr((()=>{gg(e)})),wr((()=>{!function(e){const t=dg.indexOf(e);t>=0&&dg.splice(t,1)}(e)})),{state:e}}function _g(){const e=In({attrs:{}});return Mr((()=>{let t=da();for(;t;){const n=t.type.__scopeId;n&&(e.attrs[n]=""),t=t.proxy&&"page"===t.proxy.$mpType?null:t.parent}})),{state:e}}function yg(e,t){const n=document.activeElement;if(!n)return t({});const o={};["input","textarea"].includes(n.tagName.toLowerCase())&&(o.start=n.selectionStart,o.end=n.selectionEnd),t(o)}function bg(e,t){return"number"===t&&isNaN(Number(e))&&(e=""),null===e?"":String(e)}const Mg=["none","text","decimal","numeric","tel","search","email","url"],Cg=M({},{name:{type:String,default:""},modelValue:{type:[String,Number],default:""},value:{type:[String,Number],default:""},disabled:{type:[Boolean,String],default:!1},autoFocus:{type:[Boolean,String],default:!1},focus:{type:[Boolean,String],default:!1},cursor:{type:[Number,String],default:-1},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},type:{type:String,default:"text"},password:{type:[Boolean,String],default:!1},placeholder:{type:String,default:""},placeholderStyle:{type:String,default:""},placeholderClass:{type:String,default:""},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},confirmHold:{type:Boolean,default:!1},ignoreCompositionEvent:{type:Boolean,default:!0},step:{type:String,default:"0.000000000000000001"},inputmode:{type:String,default:void 0,validator:e=>!!~Mg.indexOf(e)}},Wf),kg=["input","focus","blur","update:value","update:modelValue","update:focus","compositionstart","compositionupdate","compositionend","keyboardheightchange"];function wg(e,t,n,o){const r=at((n=>{t.value=bg(n,e.type)}),100,{setTimeout:setTimeout,clearTimeout:clearTimeout});Bo((()=>e.modelValue),r),Bo((()=>e.value),r);const i=function(e,t){let n,o,r=0;const i=function(...i){const a=Date.now();clearTimeout(n),o=()=>{o=null,r=a,e.apply(this,i)},a-r<t?n=setTimeout(o,t-(a-r)):o()};return i.cancel=function(){clearTimeout(n),o=null},i.flush=function(){clearTimeout(n),o&&o()},i}(((e,t)=>{r.cancel(),n("update:modelValue",t.value),n("update:value",t.value),o("input",e,t)}),100);return br((()=>{r.cancel(),i.cancel()})),{trigger:o,triggerInput:(e,t,n)=>{r.cancel(),i(e,t),n&&i.flush()}}}function Tg(e,t){mg();const n=Ma((()=>e.autoFocus||e.focus));function o(){if(!n.value)return;const e=t.value;e?e.focus():setTimeout(o,100)}Bo((()=>e.focus),(e=>{e?o():function(){const e=t.value;e&&e.blur()}()})),Mr((()=>{n.value&&po(o)}))}function Sg(e,t,n,o){su(Xu(),"getSelectedTextRange",yg);const{fieldRef:r,state:i,trigger:a}=function(e,t,n){const o=qn(null),r=Bd(t,n),i=Ma((()=>{const t=Number(e.selectionStart);return isNaN(t)?-1:t})),a=Ma((()=>{const t=Number(e.selectionEnd);return isNaN(t)?-1:t})),s=Ma((()=>{const t=Number(e.cursor);return isNaN(t)?-1:t})),c=Ma((()=>{var t=Number(e.maxlength);return isNaN(t)?140:t})),l=bg(e.modelValue,e.type)||bg(e.value,e.type),u=In({value:l,valueOrigin:l,maxlength:c,focus:e.focus,composing:!1,selectionStart:i,selectionEnd:a,cursor:s});return Bo((()=>u.focus),(e=>n("update:focus",e))),Bo((()=>u.maxlength),(e=>u.value=u.value.slice(0,e))),{fieldRef:o,state:u,trigger:r}}(e,t,n),{triggerInput:s}=wg(e,i,n,a);Tg(e,r),Kf(0,r);const{state:c}=_g();!function(e,t){const n=Po(Fd,!1);if(!n)return;const o=da(),r={submit(){const n=o.proxy;return[n[e],A(t)?n[t]:t.value]},reset(){A(t)?o.proxy[t]="":t.value=""}};n.addField(r),wr((()=>{n.removeField(r)}))}("name",i),function(e,t,n,o,r,i){function a(){const n=e.value;n&&t.focus&&t.selectionStart>-1&&t.selectionEnd>-1&&"number"!==n.type&&(n.selectionStart=t.selectionStart,n.selectionEnd=t.selectionEnd)}function s(){const n=e.value;n&&t.focus&&t.selectionStart<0&&t.selectionEnd<0&&t.cursor>-1&&"number"!==n.type&&(n.selectionEnd=n.selectionStart=t.cursor)}function c(e){return"number"===e.type?null:e.selectionEnd}Bo([()=>t.selectionStart,()=>t.selectionEnd],a),Bo((()=>t.cursor),s),Bo((()=>e.value),(function(){const l=e.value;if(!l)return;const u=function(e,o){e.stopPropagation(),D(i)&&!1===i(e,t)||(t.value=l.value,t.composing&&n.ignoreCompositionEvent||r(e,{value:l.value,cursor:c(l)},o))};function d(e){n.ignoreCompositionEvent||o(e.type,e,{value:e.data})}l.addEventListener("change",(e=>e.stopPropagation())),l.addEventListener("focus",(function(e){t.focus=!0,o("focus",e,{value:t.value}),a(),s()})),l.addEventListener("blur",(function(e){t.composing&&(t.composing=!1,u(e,!0)),t.focus=!1,o("blur",e,{value:t.value,cursor:c(e.target)})})),l.addEventListener("input",u),l.addEventListener("compositionstart",(e=>{e.stopPropagation(),t.composing=!0,d(e)})),l.addEventListener("compositionend",(e=>{e.stopPropagation(),t.composing&&(t.composing=!1,u(e)),d(e)})),l.addEventListener("compositionupdate",d)}))}(r,i,e,a,s,o);return{fieldRef:r,state:i,scopedAttrsState:c,fixDisabledColor:0===String(navigator.vendor).indexOf("Apple")&&CSS.supports("image-orientation:from-image"),trigger:a}}const Ig=Od({name:"Input",props:M({},Cg,{placeholderClass:{type:String,default:"input-placeholder"},textContentType:{type:String,default:""}}),emits:["confirm",...kg],setup(e,{emit:t}){const n=["text","number","idcard","digit","password","tel"],o=["off","one-time-code"],r=Ma((()=>{let t="";switch(e.type){case"text":"search"===e.confirmType&&(t="search");break;case"idcard":t="text";break;case"digit":t="number";break;default:t=~n.includes(e.type)?e.type:"text"}return e.password?"password":t})),i=Ma((()=>{const t=o.indexOf(e.textContentType),n=o.indexOf(z(e.textContentType));return o[-1!==t?t:-1!==n?n:0]}));let a,s=qn("");const c=qn(null),{fieldRef:l,state:u,scopedAttrsState:d,fixDisabledColor:p,trigger:h}=Sg(e,c,t,((e,t)=>{const n=e.target;if("number"===r.value){if(a&&(n.removeEventListener("blur",a),a=null),n.validity&&!n.validity.valid){if((!s.value||!n.value)&&"-"===e.data||"-"===s.value[0]&&"deleteContentBackward"===e.inputType)return s.value="-",t.value="",a=()=>{s.value=n.value=""},n.addEventListener("blur",a),!1;if(s.value)if(-1!==s.value.indexOf(".")){if("."!==e.data&&"deleteContentBackward"===e.inputType){const e=s.value.indexOf(".");return s.value=n.value=t.value=s.value.slice(0,e),!0}}else if("."===e.data)return s.value+=".",a=()=>{s.value=n.value=s.value.slice(0,-1)},n.addEventListener("blur",a),!1;return s.value=t.value=n.value="-"===s.value?"":s.value,!1}s.value=n.value;const o=t.maxlength;if(o>0&&n.value.length>o)return n.value=n.value.slice(0,o),t.value=n.value,!1}}));Bo((()=>u.value),(t=>{"number"!==e.type||"-"===s.value&&""===t||(s.value=t)}));const f=["number","digit"],g=Ma((()=>f.includes(e.type)?e.step:""));function v(t){if("Enter"!==t.key)return;const n=t.target;t.stopPropagation(),h("confirm",t,{value:n.value}),!e.confirmHold&&n.blur()}return()=>{let t=e.disabled&&p?Zi("input",{key:"disabled-input",ref:l,value:u.value,tabindex:"-1",readonly:!!e.disabled,type:r.value,maxlength:u.maxlength,step:g.value,class:"uni-input-input",onFocus:e=>e.target.blur()},null,40,["value","readonly","type","maxlength","step","onFocus"]):Ar(Zi("input",{key:"input",ref:l,"onUpdate:modelValue":e=>u.value=e,disabled:!!e.disabled,type:r.value,maxlength:u.maxlength,step:g.value,enterkeyhint:e.confirmType,pattern:"number"===e.type?"[0-9]*":void 0,class:"uni-input-input",autocomplete:i.value,onKeyup:v,inputmode:e.inputmode},null,40,["onUpdate:modelValue","disabled","type","maxlength","step","enterkeyhint","pattern","autocomplete","onKeyup","inputmode"]),[[Rs,u.value]]);return Zi("uni-input",{ref:c},[Zi("div",{class:"uni-input-wrapper"},[Ar(Zi("div",aa(d.attrs,{style:e.placeholderStyle,class:["uni-input-placeholder",e.placeholderClass]}),[e.placeholder],16),[[Bs,!(u.value.length||"-"===s.value)]]),"search"===e.confirmType?Zi("form",{action:"",onSubmit:e=>e.preventDefault(),class:"uni-input-form"},[t],40,["onSubmit"]):t])],512)}}});const Eg=["class","style"],Dg=/^on[A-Z]+/,Ag=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n=[]}=e,o=da(),r=Vn({}),i=Vn({}),a=Vn({}),s=n.concat(Eg);return o.attrs=In(o.attrs),Uo((()=>{const e=(n=o.attrs,Object.keys(n).map((e=>[e,n[e]]))).reduce(((e,[n,o])=>(s.includes(n)?e.exclude[n]=o:Dg.test(n)?(t||(e.attrs[n]=o),e.listeners[n]=o):e.attrs[n]=o,e)),{exclude:{},attrs:{},listeners:{}});var n;r.value=e.attrs,i.value=e.listeners,a.value=e.exclude})),{$attrs:r,$listeners:i,$excludeAttrs:a}};function Lg(e){const t=[];return T(e)&&e.forEach((e=>{$i(e)?e.type===xi?t.push(...Lg(e.children)):t.push(e):T(e)&&t.push(...Lg(e))})),t}const Rg=Od({inheritAttrs:!1,name:"MovableArea",props:{scaleArea:{type:Boolean,default:!1}},setup(e,{slots:t}){const n=qn(null),o=qn(!1);let{setContexts:r,events:i}=function(e,t){const n=qn(0),o=qn(0),r=In({x:null,y:null}),i=qn(null);let a=null,s=[];function c(t){t&&1!==t&&(e.scaleArea?s.forEach((function(e){e._setScale(t)})):a&&a._setScale(t))}function l(e,n=s){let o=t.value;function r(e){for(let t=0;t<n.length;t++){const o=n[t];if(e===o.rootRef.value)return o}return e===o||e===document.body||e===document?null:r(e.parentNode)}return r(e)}const u=Gd((t=>{let n=t.touches;if(n&&n.length>1){let t={x:n[1].pageX-n[0].pageX,y:n[1].pageY-n[0].pageY};if(i.value=Og(t),r.x=t.x,r.y=t.y,!e.scaleArea){let e=l(n[0].target),t=l(n[1].target);a=e&&e===t?e:null}}})),d=Gd((e=>{let t=e.touches;if(t&&t.length>1){e.preventDefault();let n={x:t[1].pageX-t[0].pageX,y:t[1].pageY-t[0].pageY};if(null!==r.x&&i.value&&i.value>0){c(Og(n)/i.value)}r.x=n.x,r.y=n.y}})),p=Gd((t=>{let n=t.touches;n&&n.length||t.changedTouches&&(r.x=0,r.y=0,i.value=null,e.scaleArea?s.forEach((function(e){e._endScale()})):a&&a._endScale())}));function h(){f(),s.forEach((function(e,t){e.setParent()}))}function f(){let e=window.getComputedStyle(t.value),r=t.value.getBoundingClientRect();n.value=r.width-["Left","Right"].reduce((function(t,n){const o="padding"+n;return t+parseFloat(e["border"+n+"Width"])+parseFloat(e[o])}),0),o.value=r.height-["Top","Bottom"].reduce((function(t,n){const o="padding"+n;return t+parseFloat(e["border"+n+"Width"])+parseFloat(e[o])}),0)}return No("movableAreaWidth",n),No("movableAreaHeight",o),{setContexts(e){s=e},events:{_onTouchstart:u,_onTouchmove:d,_onTouchend:p,_resize:h}}}(e,n);const{$listeners:a,$attrs:s,$excludeAttrs:c}=Ag(),l=a.value;["onTouchstart","onTouchmove","onTouchend"].forEach((e=>{let t=l[e],n=i[`_${e}`];l[e]=t?[].concat(t,n):n})),Mr((()=>{i._resize(),o.value=!0}));let u=[];const d=[];function p(){const e=[];for(let t=0;t<u.length;t++){let n=u[t];n=n.el;const o=d.find((e=>n===e.rootRef.value));o&&e.push(Nn(o))}r(e)}return No("_isMounted",o),No("movableAreaRootRef",n),No("addMovableViewContext",(e=>{d.push(e),p()})),No("removeMovableViewContext",(e=>{const t=d.indexOf(e);t>=0&&(d.splice(t,1),p())})),()=>{const e=t.default&&t.default();return u=Lg(e),Zi("uni-movable-area",aa({ref:n},s.value,c.value,l),[Zi(zf,{onResize:i._resize},null,8,["onResize"]),u],16)}}});function Og(e){return Math.sqrt(e.x*e.x+e.y*e.y)}const xg=function(e,t,n,o){e.addEventListener(t,(e=>{D(n)&&!1===n(e)&&((void 0===e.cancelable||e.cancelable)&&e.preventDefault(),e.stopPropagation())}),{passive:!1})};let Ng,Pg;function Ug(e,t,n){wr((()=>{document.removeEventListener("mousemove",Ng),document.removeEventListener("mouseup",Pg)}));let o=0,r=0,i=0,a=0;const s=function(e,n,s,c){if(!1===t({cancelable:e.cancelable,target:e.target,currentTarget:e.currentTarget,preventDefault:e.preventDefault.bind(e),stopPropagation:e.stopPropagation.bind(e),touches:e.touches,changedTouches:e.changedTouches,detail:{state:n,x:s,y:c,dx:s-o,dy:c-r,ddx:s-i,ddy:c-a,timeStamp:e.timeStamp}}))return!1};let c,l,u=null;xg(e,"touchstart",(function(e){if(c=!0,1===e.touches.length&&!u)return u=e,o=i=e.touches[0].pageX,r=a=e.touches[0].pageY,s(e,"start",o,r)})),xg(e,"mousedown",(function(e){if(l=!0,!c&&!u)return u=e,o=i=e.pageX,r=a=e.pageY,s(e,"start",o,r)})),xg(e,"touchmove",(function(e){if(1===e.touches.length&&u){const t=s(e,"move",e.touches[0].pageX,e.touches[0].pageY);return i=e.touches[0].pageX,a=e.touches[0].pageY,t}}));const d=Ng=function(e){if(!c&&l&&u){const t=s(e,"move",e.pageX,e.pageY);return i=e.pageX,a=e.pageY,t}};document.addEventListener("mousemove",d),xg(e,"touchend",(function(e){if(0===e.touches.length&&u)return c=!1,u=null,s(e,"end",e.changedTouches[0].pageX,e.changedTouches[0].pageY)}));const p=Pg=function(e){if(l=!1,!c&&u)return u=null,s(e,"end",e.pageX,e.pageY)};document.addEventListener("mouseup",p),xg(e,"touchcancel",(function(e){if(u){c=!1;const t=u;return u=null,s(e,n?"cancel":"end",t.touches[0].pageX,t.touches[0].pageY)}}))}function Gg(e,t,n){return e>t-n&&e<t+n}function Bg(e,t){return Gg(e,0,t)}function Fg(){}function qg(e,t){this._m=e,this._f=1e3*t,this._startTime=0,this._v=0}function Vg(e,t,n){this._m=e,this._k=t,this._c=n,this._solution=null,this._endPosition=0,this._startTime=0}function Hg(e,t,n){this._springX=new Vg(e,t,n),this._springY=new Vg(e,t,n),this._springScale=new Vg(e,t,n),this._startTime=0}Fg.prototype.x=function(e){return Math.sqrt(e)},qg.prototype.setV=function(e,t){const n=Math.pow(Math.pow(e,2)+Math.pow(t,2),.5);this._x_v=e,this._y_v=t,this._x_a=-this._f*this._x_v/n,this._y_a=-this._f*this._y_v/n,this._t=Math.abs(e/this._x_a)||Math.abs(t/this._y_a),this._lastDt=null,this._startTime=(new Date).getTime()},qg.prototype.setS=function(e,t){this._x_s=e,this._y_s=t},qg.prototype.s=function(e){void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),e>this._t&&(e=this._t,this._lastDt=e);let t=this._x_v*e+.5*this._x_a*Math.pow(e,2)+this._x_s,n=this._y_v*e+.5*this._y_a*Math.pow(e,2)+this._y_s;return(this._x_a>0&&t<this._endPositionX||this._x_a<0&&t>this._endPositionX)&&(t=this._endPositionX),(this._y_a>0&&n<this._endPositionY||this._y_a<0&&n>this._endPositionY)&&(n=this._endPositionY),{x:t,y:n}},qg.prototype.ds=function(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),e>this._t&&(e=this._t),{dx:this._x_v+this._x_a*e,dy:this._y_v+this._y_a*e}},qg.prototype.delta=function(){return{x:-1.5*Math.pow(this._x_v,2)/this._x_a||0,y:-1.5*Math.pow(this._y_v,2)/this._y_a||0}},qg.prototype.dt=function(){return-this._x_v/this._x_a},qg.prototype.done=function(){const e=Gg(this.s().x,this._endPositionX)||Gg(this.s().y,this._endPositionY)||this._lastDt===this._t;return this._lastDt=null,e},qg.prototype.setEnd=function(e,t){this._endPositionX=e,this._endPositionY=t},qg.prototype.reconfigure=function(e,t){this._m=e,this._f=1e3*t},Vg.prototype._solve=function(e,t){const n=this._c,o=this._m,r=this._k,i=n*n-4*o*r;if(0===i){const r=-n/(2*o),i=e,a=t/(r*e);return{x:function(e){return(i+a*e)*Math.pow(Math.E,r*e)},dx:function(e){const t=Math.pow(Math.E,r*e);return r*(i+a*e)*t+a*t}}}if(i>0){const r=(-n-Math.sqrt(i))/(2*o),a=(-n+Math.sqrt(i))/(2*o),s=(t-r*e)/(a-r),c=e-s;return{x:function(e){let t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,r*e)),n||(n=this._powER2T=Math.pow(Math.E,a*e)),c*t+s*n},dx:function(e){let t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,r*e)),n||(n=this._powER2T=Math.pow(Math.E,a*e)),c*r*t+s*a*n}}}const a=Math.sqrt(4*o*r-n*n)/(2*o),s=-n/2*o,c=e,l=(t-s*e)/a;return{x:function(e){return Math.pow(Math.E,s*e)*(c*Math.cos(a*e)+l*Math.sin(a*e))},dx:function(e){const t=Math.pow(Math.E,s*e),n=Math.cos(a*e),o=Math.sin(a*e);return t*(l*a*n-c*a*o)+s*t*(l*o+c*n)}}},Vg.prototype.x=function(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._endPosition+this._solution.x(e):0},Vg.prototype.dx=function(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._solution.dx(e):0},Vg.prototype.setEnd=function(e,t,n){if(n||(n=(new Date).getTime()),e!==this._endPosition||!Bg(t,.1)){t=t||0;let o=this._endPosition;this._solution&&(Bg(t,.1)&&(t=this._solution.dx((n-this._startTime)/1e3)),o=this._solution.x((n-this._startTime)/1e3),Bg(t,.1)&&(t=0),Bg(o,.1)&&(o=0),o+=this._endPosition),this._solution&&Bg(o-e,.1)&&Bg(t,.1)||(this._endPosition=e,this._solution=this._solve(o-this._endPosition,t),this._startTime=n)}},Vg.prototype.snap=function(e){this._startTime=(new Date).getTime(),this._endPosition=e,this._solution={x:function(){return 0},dx:function(){return 0}}},Vg.prototype.done=function(e){return e||(e=(new Date).getTime()),Gg(this.x(),this._endPosition,.1)&&Bg(this.dx(),.1)},Vg.prototype.reconfigure=function(e,t,n){this._m=e,this._k=t,this._c=n,this.done()||(this._solution=this._solve(this.x()-this._endPosition,this.dx()),this._startTime=(new Date).getTime())},Vg.prototype.springConstant=function(){return this._k},Vg.prototype.damping=function(){return this._c},Vg.prototype.configuration=function(){return[{label:"Spring Constant",read:this.springConstant.bind(this),write:function(e,t){e.reconfigure(1,t,e.damping())}.bind(this,this),min:100,max:1e3},{label:"Damping",read:this.damping.bind(this),write:function(e,t){e.reconfigure(1,e.springConstant(),t)}.bind(this,this),min:1,max:500}]},Hg.prototype.setEnd=function(e,t,n,o){const r=(new Date).getTime();this._springX.setEnd(e,o,r),this._springY.setEnd(t,o,r),this._springScale.setEnd(n,o,r),this._startTime=r},Hg.prototype.x=function(){const e=((new Date).getTime()-this._startTime)/1e3;return{x:this._springX.x(e),y:this._springY.x(e),scale:this._springScale.x(e)}},Hg.prototype.done=function(){const e=(new Date).getTime();return this._springX.done(e)&&this._springY.done(e)&&this._springScale.done(e)},Hg.prototype.reconfigure=function(e,t,n){this._springX.reconfigure(e,t,n),this._springY.reconfigure(e,t,n),this._springScale.reconfigure(e,t,n)};function zg(e,t){return+((1e3*e-1e3*t)/1e3).toFixed(1)}const jg=Od({name:"MovableView",props:{direction:{type:String,default:"none"},inertia:{type:[Boolean,String],default:!1},outOfBounds:{type:[Boolean,String],default:!1},x:{type:[Number,String],default:0},y:{type:[Number,String],default:0},damping:{type:[Number,String],default:20},friction:{type:[Number,String],default:2},disabled:{type:[Boolean,String],default:!1},scale:{type:[Boolean,String],default:!1},scaleMin:{type:[Number,String],default:.5},scaleMax:{type:[Number,String],default:10},scaleValue:{type:[Number,String],default:1},animation:{type:[Boolean,String],default:!0}},emits:["change","scale"],setup(e,{slots:t,emit:n}){const o=qn(null),r=Bd(o,n),{setParent:i}=function(e,t,n){const o=Po("_isMounted",qn(!1)),r=Po("addMovableViewContext",(()=>{})),i=Po("removeMovableViewContext",(()=>{}));let a,s,c=qn(1),l=qn(1),u=qn(!1),d=qn(0),p=qn(0),h=null,f=null,g=!1,v=null,m=null;const _=new Fg,y=new Fg,b={historyX:[0,0],historyY:[0,0],historyT:[0,0]},M=Ma((()=>{let t=Number(e.friction);return isNaN(t)||t<=0?2:t})),C=new qg(1,M.value);Bo((()=>e.disabled),(()=>{j()}));const{_updateOldScale:k,_endScale:w,_setScale:T,scaleValueSync:S,_updateBoundary:I,_updateOffset:E,_updateWH:D,_scaleOffset:A,minX:L,minY:R,maxX:O,maxY:x,FAandSFACancel:N,_getLimitXY:P,_setTransform:U,_revise:G,dampingNumber:B,xMove:F,yMove:q,xSync:V,ySync:H,_STD:z}=function(e,t,n,o,r,i,a,s,c,l){const u=Ma((()=>{let t=Number(e.scaleMin);return isNaN(t)?.5:t})),d=Ma((()=>{let t=Number(e.scaleMax);return isNaN(t)?10:t})),p=qn(Number(e.scaleValue)||1);Bo(p,(e=>{U(e)})),Bo(u,(()=>{P()})),Bo(d,(()=>{P()})),Bo((()=>e.scaleValue),(e=>{p.value=Number(e)||0}));const{_updateBoundary:h,_updateOffset:f,_updateWH:g,_scaleOffset:v,minX:m,minY:_,maxX:y,maxY:b}=function(e,t,n){const o=Po("movableAreaWidth",qn(0)),r=Po("movableAreaHeight",qn(0)),i=Po("movableAreaRootRef"),a={x:0,y:0},s={x:0,y:0},c=qn(0),l=qn(0),u=qn(0),d=qn(0),p=qn(0),h=qn(0);function f(){let e=0-a.x+s.x,t=o.value-c.value-a.x-s.x;u.value=Math.min(e,t),p.value=Math.max(e,t);let n=0-a.y+s.y,i=r.value-l.value-a.y-s.y;d.value=Math.min(n,i),h.value=Math.max(n,i)}function g(){a.x=Kg(e.value,i.value),a.y=Yg(e.value,i.value)}function v(o){o=o||t.value,o=n(o);let r=e.value.getBoundingClientRect();l.value=r.height/t.value,c.value=r.width/t.value;let i=l.value*o,a=c.value*o;s.x=(a-c.value)/2,s.y=(i-l.value)/2}return{_updateBoundary:f,_updateOffset:g,_updateWH:v,_scaleOffset:s,minX:u,minY:d,maxX:p,maxY:h}}(t,o,N),{FAandSFACancel:M,_getLimitXY:C,_animationTo:k,_setTransform:w,_revise:T,dampingNumber:S,xMove:I,yMove:E,xSync:D,ySync:A,_STD:L}=function(e,t,n,o,r,i,a,s,c,l,u,d,p,h){const f=Ma((()=>{let e=Number(t.damping);return isNaN(e)?20:e})),g=Ma((()=>"all"===t.direction||"horizontal"===t.direction)),v=Ma((()=>"all"===t.direction||"vertical"===t.direction)),m=qn(Jg(t.x)),_=qn(Jg(t.y));Bo((()=>t.x),(e=>{m.value=Jg(e)})),Bo((()=>t.y),(e=>{_.value=Jg(e)})),Bo(m,(e=>{T(e)})),Bo(_,(e=>{S(e)}));const y=new Hg(1,9*Math.pow(f.value,2)/40,f.value);function b(e,t){let n=!1;return e>r.value?(e=r.value,n=!0):e<a.value&&(e=a.value,n=!0),t>i.value?(t=i.value,n=!0):t<s.value&&(t=s.value,n=!0),{x:e,y:t,outOfBounds:n}}function M(){d&&d.cancel(),u&&u.cancel()}function C(e,n,r,i,a,s){M(),g.value||(e=c.value),v.value||(n=l.value),t.scale||(r=o.value);let d=b(e,n);e=d.x,n=d.y,t.animation?(y._springX._solution=null,y._springY._solution=null,y._springScale._solution=null,y._springX._endPosition=c.value,y._springY._endPosition=l.value,y._springScale._endPosition=o.value,y.setEnd(e,n,r,1),u=Xg(y,(function(){let e=y.x();k(e.x,e.y,e.scale,i,a,s)}),(function(){u.cancel()}))):k(e,n,r,i,a,s)}function k(r,i,a,s="",u,d){null!==r&&"NaN"!==r.toString()&&"number"==typeof r||(r=c.value||0),null!==i&&"NaN"!==i.toString()&&"number"==typeof i||(i=l.value||0),r=Number(r.toFixed(1)),i=Number(i.toFixed(1)),a=Number(a.toFixed(1)),c.value===r&&l.value===i||u||h("change",{},{x:zg(r,n.x),y:zg(i,n.y),source:s}),t.scale||(a=o.value),a=+(a=p(a)).toFixed(3),d&&a!==o.value&&h("scale",{},{x:r,y:i,scale:a});let f="translateX("+r+"px) translateY("+i+"px) translateZ(0px) scale("+a+")";e.value&&(e.value.style.transform=f,e.value.style.webkitTransform=f,c.value=r,l.value=i,o.value=a)}function w(e){let t=b(c.value,l.value),n=t.x,r=t.y,i=t.outOfBounds;return i&&C(n,r,o.value,e),i}function T(e){if(g.value){if(e+n.x===c.value)return c;u&&u.cancel(),C(e+n.x,_.value+n.y,o.value)}return e}function S(e){if(v.value){if(e+n.y===l.value)return l;u&&u.cancel(),C(m.value+n.x,e+n.y,o.value)}return e}return{FAandSFACancel:M,_getLimitXY:b,_animationTo:C,_setTransform:k,_revise:w,dampingNumber:f,xMove:g,yMove:v,xSync:m,ySync:_,_STD:y}}(t,e,v,o,y,b,m,_,a,s,c,l,N,n);function R(t,n){if(e.scale){t=N(t),g(t),h();const e=C(a.value,s.value),o=e.x,r=e.y;n?k(o,r,t,"",!0,!0):Wg((function(){w(o,r,t,"",!0,!0)}))}}function O(){i.value=!0}function x(e){r.value=e}function N(e){return e=Math.max(.5,u.value,e),e=Math.min(10,d.value,e)}function P(){if(!e.scale)return!1;R(o.value,!0),x(o.value)}function U(t){return!!e.scale&&(R(t=N(t),!0),x(t),t)}function G(){i.value=!1,x(o.value)}function B(e){e&&(e=r.value*e,O(),R(e))}return{_updateOldScale:x,_endScale:G,_setScale:B,scaleValueSync:p,_updateBoundary:h,_updateOffset:f,_updateWH:g,_scaleOffset:v,minX:m,minY:_,maxX:y,maxY:b,FAandSFACancel:M,_getLimitXY:C,_animationTo:k,_setTransform:w,_revise:T,dampingNumber:S,xMove:I,yMove:E,xSync:D,ySync:A,_STD:L}}(e,n,t,c,l,u,d,p,h,f);function j(){u.value||e.disabled||(N(),b.historyX=[0,0],b.historyY=[0,0],b.historyT=[0,0],F.value&&(a=d.value),q.value&&(s=p.value),n.value.style.willChange="transform",v=null,m=null,g=!0)}function $(t){if(!u.value&&!e.disabled&&g){let n=d.value,o=p.value;if(null===m&&(m=Math.abs(t.detail.dx/t.detail.dy)>1?"htouchmove":"vtouchmove"),F.value&&(n=t.detail.dx+a,b.historyX.shift(),b.historyX.push(n),q.value||null!==v||(v=Math.abs(t.detail.dx/t.detail.dy)<1)),q.value&&(o=t.detail.dy+s,b.historyY.shift(),b.historyY.push(o),F.value||null!==v||(v=Math.abs(t.detail.dy/t.detail.dx)<1)),b.historyT.shift(),b.historyT.push(t.detail.timeStamp),!v){t.preventDefault();let r="touch";n<L.value?e.outOfBounds?(r="touch-out-of-bounds",n=L.value-_.x(L.value-n)):n=L.value:n>O.value&&(e.outOfBounds?(r="touch-out-of-bounds",n=O.value+_.x(n-O.value)):n=O.value),o<R.value?e.outOfBounds?(r="touch-out-of-bounds",o=R.value-y.x(R.value-o)):o=R.value:o>x.value&&(e.outOfBounds?(r="touch-out-of-bounds",o=x.value+y.x(o-x.value)):o=x.value),Wg((function(){U(n,o,c.value,r)}))}}}function W(){if(!u.value&&!e.disabled&&g&&(n.value.style.willChange="auto",g=!1,!v&&!G("out-of-bounds")&&e.inertia)){const e=1e3*(b.historyX[1]-b.historyX[0])/(b.historyT[1]-b.historyT[0]),t=1e3*(b.historyY[1]-b.historyY[0])/(b.historyT[1]-b.historyT[0]),n=d.value,o=p.value;C.setV(e,t),C.setS(n,o);const r=C.delta().x,i=C.delta().y;let a=r+n,s=i+o;a<L.value?(a=L.value,s=o+(L.value-n)*i/r):a>O.value&&(a=O.value,s=o+(O.value-n)*i/r),s<R.value?(s=R.value,a=n+(R.value-o)*r/i):s>x.value&&(s=x.value,a=n+(x.value-o)*r/i),C.setEnd(a,s),f=Xg(C,(function(){let e=C.s(),t=e.x,n=e.y;U(t,n,c.value,"friction")}),(function(){f.cancel()}))}e.outOfBounds||e.inertia||N()}function K(){if(!o.value)return;N();let t=e.scale?S.value:1;E(),D(t),I();let n=P(V.value+A.x,H.value+A.y),r=n.x,i=n.y;U(r,i,t,"",!0),k(t)}return Mr((()=>{Ug(n.value,(e=>{switch(e.detail.state){case"start":j();break;case"move":$(e);break;case"end":W()}})),K(),C.reconfigure(1,M.value),z.reconfigure(1,9*Math.pow(B.value,2)/40,B.value),n.value.style.transformOrigin="center";const e={rootRef:n,setParent:K,_endScale:w,_setScale:T};r(e),Tr((()=>{i(e)}))})),Tr((()=>{N()})),{setParent:K}}(e,r,o);return()=>Zi("uni-movable-view",{ref:o},[Zi(zf,{onResize:i},null,8,["onResize"]),t.default&&t.default()],512)}});let $g=!1;function Wg(e){$g||($g=!0,requestAnimationFrame((function(){e(),$g=!1})))}function Kg(e,t){if(e===t)return 0;let n=e.offsetLeft;return e.offsetParent?n+=Kg(e.offsetParent,t):0}function Yg(e,t){if(e===t)return 0;let n=e.offsetTop;return e.offsetParent?n+=Yg(e.offsetParent,t):0}function Xg(e,t,n){let o={id:0,cancelled:!1};return function e(t,n,o,r){if(!t||!t.cancelled){o(n);let i=n.done();i||t.cancelled||(t.id=requestAnimationFrame(e.bind(null,t,n,o,r))),i&&r&&r(n)}}(o,e,t,n),{cancel:function(e){e&&e.id&&cancelAnimationFrame(e.id),e&&(e.cancelled=!0)}.bind(null,o),model:e}}function Jg(e){return/\d+[ur]px$/i.test(e)?Jp(parseFloat(e)):Number(e)||0}const Zg=["navigate","redirect","switchTab","reLaunch","navigateBack"],Qg=["slide-in-right","slide-in-left","slide-in-top","slide-in-bottom","fade-in","zoom-out","zoom-fade-out","pop-in","none"],ev=["slide-out-right","slide-out-left","slide-out-top","slide-out-bottom","fade-out","zoom-in","zoom-fade-in","pop-out","none"],tv={hoverClass:{type:String,default:"navigator-hover"},url:{type:String,default:""},openType:{type:String,default:"navigate",validator:e=>Boolean(~Zg.indexOf(e))},delta:{type:Number,default:1},hoverStartTime:{type:[Number,String],default:50},hoverStayTime:{type:[Number,String],default:600},exists:{type:String,default:""},hoverStopPropagation:{type:Boolean,default:!1},animationType:{type:String,default:"",validator:e=>!e||Qg.concat(ev).includes(e)},animationDuration:{type:[String,Number],default:300}};M({},tv,{renderLink:{type:Boolean,default:!0}});const nv=Od({name:"PickerView",props:{value:{type:Array,default:()=>[],validator:function(e){return T(e)&&e.filter((e=>"number"==typeof e)).length===e.length}},indicatorStyle:{type:String,default:""},indicatorClass:{type:String,default:""},maskStyle:{type:String,default:""},maskClass:{type:String,default:""}},emits:["change","pickstart","pickend","update:value"],setup(e,{slots:t,emit:n}){const o=qn(null),r=qn(null),i=Bd(o,n),a=function(e){const t=In([...e.value]),n=In({value:t,height:34});return Bo((()=>e.value),((e,t)=>{n.value.length=e.length,e.forEach(((e,t)=>{e!==n.value[t]&&n.value.splice(t,1,e)}))})),n}(e),s=qn(null);Mr((()=>{const e=s.value;e&&(a.height=e.$el.offsetHeight)}));let c=qn([]),l=qn([]);function u(e){let t=l.value;t=t.filter((e=>e.type!==Pi));let n=t.indexOf(e);return-1!==n?n:c.value.indexOf(e)}return No("getPickerViewColumn",(function(e){return Ma({get(){const t=u(e.vnode);return a.value[t]||0},set(t){const o=u(e.vnode);if(o<0)return;if(a.value[o]!==t){a.value[o]=t;const e=a.value.map((e=>e));n("update:value",e),i("change",{},{value:e})}}})})),No("pickerViewProps",e),No("pickerViewState",a),()=>{const e=t.default&&t.default();{const t=Lg(e);c.value=t,po((()=>{l.value=t}))}return Zi("uni-picker-view",{ref:o},[Zi(zf,{ref:s,onResize:({height:e})=>a.height=e},null,8,["onResize"]),Zi("div",{ref:r,class:"uni-picker-view-wrapper"},[e],512)],512)}}});class ov{constructor(e){this._drag=e,this._dragLog=Math.log(e),this._x=0,this._v=0,this._startTime=0}set(e,t){this._x=e,this._v=t,this._startTime=(new Date).getTime()}setVelocityByEnd(e){this._v=(e-this._x)*this._dragLog/(Math.pow(this._drag,100)-1)}x(e){void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3);const t=e===this._dt&&this._powDragDt?this._powDragDt:this._powDragDt=Math.pow(this._drag,e);return this._dt=e,this._x+this._v*t/this._dragLog-this._v/this._dragLog}dx(e){void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3);const t=e===this._dt&&this._powDragDt?this._powDragDt:this._powDragDt=Math.pow(this._drag,e);return this._dt=e,this._v*t}done(){return Math.abs(this.dx())<3}reconfigure(e){const t=this.x(),n=this.dx();this._drag=e,this._dragLog=Math.log(e),this.set(t,n)}configuration(){const e=this;return[{label:"Friction",read:function(){return e._drag},write:function(t){e.reconfigure(t)},min:.001,max:.1,step:.001}]}}function rv(e,t,n){return e>t-n&&e<t+n}function iv(e,t){return rv(e,0,t)}class av{constructor(e,t,n){this._m=e,this._k=t,this._c=n,this._solution=null,this._endPosition=0,this._startTime=0}_solve(e,t){const n=this._c,o=this._m,r=this._k,i=n*n-4*o*r;if(0===i){const r=-n/(2*o),i=e,a=t/(r*e);return{x:function(e){return(i+a*e)*Math.pow(Math.E,r*e)},dx:function(e){const t=Math.pow(Math.E,r*e);return r*(i+a*e)*t+a*t}}}if(i>0){const r=(-n-Math.sqrt(i))/(2*o),a=(-n+Math.sqrt(i))/(2*o),s=(t-r*e)/(a-r),c=e-s;return{x:function(e){let t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,r*e)),n||(n=this._powER2T=Math.pow(Math.E,a*e)),c*t+s*n},dx:function(e){let t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,r*e)),n||(n=this._powER2T=Math.pow(Math.E,a*e)),c*r*t+s*a*n}}}const a=Math.sqrt(4*o*r-n*n)/(2*o),s=-n/2*o,c=e,l=(t-s*e)/a;return{x:function(e){return Math.pow(Math.E,s*e)*(c*Math.cos(a*e)+l*Math.sin(a*e))},dx:function(e){const t=Math.pow(Math.E,s*e),n=Math.cos(a*e),o=Math.sin(a*e);return t*(l*a*n-c*a*o)+s*t*(l*o+c*n)}}}x(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._endPosition+this._solution.x(e):0}dx(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._solution.dx(e):0}setEnd(e,t,n){if(n||(n=(new Date).getTime()),e!==this._endPosition||!iv(t,.4)){t=t||0;let o=this._endPosition;this._solution&&(iv(t,.4)&&(t=this._solution.dx((n-this._startTime)/1e3)),o=this._solution.x((n-this._startTime)/1e3),iv(t,.4)&&(t=0),iv(o,.4)&&(o=0),o+=this._endPosition),this._solution&&iv(o-e,.4)&&iv(t,.4)||(this._endPosition=e,this._solution=this._solve(o-this._endPosition,t),this._startTime=n)}}snap(e){this._startTime=(new Date).getTime(),this._endPosition=e,this._solution={x:function(){return 0},dx:function(){return 0}}}done(e){return e||(e=(new Date).getTime()),rv(this.x(),this._endPosition,.4)&&iv(this.dx(),.4)}reconfigure(e,t,n){this._m=e,this._k=t,this._c=n,this.done()||(this._solution=this._solve(this.x()-this._endPosition,this.dx()),this._startTime=(new Date).getTime())}springConstant(){return this._k}damping(){return this._c}configuration(){return[{label:"Spring Constant",read:this.springConstant.bind(this),write:function(e,t){e.reconfigure(1,t,e.damping())}.bind(this,this),min:100,max:1e3},{label:"Damping",read:this.damping.bind(this),write:function(e,t){e.reconfigure(1,e.springConstant(),t)}.bind(this,this),min:1,max:500}]}}class sv{constructor(e,t,n){this._extent=e,this._friction=t||new ov(.01),this._spring=n||new av(1,90,20),this._startTime=0,this._springing=!1,this._springOffset=0}snap(e,t){this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(t)}set(e,t){this._friction.set(e,t),e>0&&t>=0?(this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(0)):e<-this._extent&&t<=0?(this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(-this._extent)):this._springing=!1,this._startTime=(new Date).getTime()}x(e){if(!this._startTime)return 0;if(e||(e=((new Date).getTime()-this._startTime)/1e3),this._springing)return this._spring.x()+this._springOffset;let t=this._friction.x(e),n=this.dx(e);return(t>0&&n>=0||t<-this._extent&&n<=0)&&(this._springing=!0,this._spring.setEnd(0,n),t<-this._extent?this._springOffset=-this._extent:this._springOffset=0,t=this._spring.x()+this._springOffset),t}dx(e){let t;return t=this._lastTime===e?this._lastDx:this._springing?this._spring.dx(e):this._friction.dx(e),this._lastTime=e,this._lastDx=t,t}done(){return this._springing?this._spring.done():this._friction.done()}setVelocityByEnd(e){this._friction.setVelocityByEnd(e)}configuration(){const e=this._friction.configuration();return e.push.apply(e,this._spring.configuration()),e}}class cv{constructor(e,t){t=t||{},this._element=e,this._options=t,this._enableSnap=t.enableSnap||!1,this._itemSize=t.itemSize||0,this._enableX=t.enableX||!1,this._enableY=t.enableY||!1,this._shouldDispatchScrollEvent=!!t.onScroll,this._enableX?(this._extent=(t.scrollWidth||this._element.offsetWidth)-this._element.parentElement.offsetWidth,this._scrollWidth=t.scrollWidth):(this._extent=(t.scrollHeight||this._element.offsetHeight)-this._element.parentElement.offsetHeight,this._scrollHeight=t.scrollHeight),this._position=0,this._scroll=new sv(this._extent,t.friction,t.spring),this._onTransitionEnd=this.onTransitionEnd.bind(this),this.updatePosition()}onTouchStart(){this._startPosition=this._position,this._lastChangePos=this._startPosition,this._startPosition>0?this._startPosition/=.5:this._startPosition<-this._extent&&(this._startPosition=(this._startPosition+this._extent)/.5-this._extent),this._animation&&(this._animation.cancel(),this._scrolling=!1),this.updatePosition()}onTouchMove(e,t){let n=this._startPosition;this._enableX?n+=e:this._enableY&&(n+=t),n>0?n*=.5:n<-this._extent&&(n=.5*(n+this._extent)-this._extent),this._position=n,this.updatePosition(),this.dispatchScroll()}onTouchEnd(e,t,n){if(this._enableSnap&&this._position>-this._extent&&this._position<0){if(this._enableY&&(Math.abs(t)<this._itemSize&&Math.abs(n.y)<300||Math.abs(n.y)<150))return void this.snap();if(this._enableX&&(Math.abs(e)<this._itemSize&&Math.abs(n.x)<300||Math.abs(n.x)<150))return void this.snap()}let o;if(this._enableX?this._scroll.set(this._position,n.x):this._enableY&&this._scroll.set(this._position,n.y),this._enableSnap){const e=this._scroll._friction.x(100),t=e%this._itemSize;o=Math.abs(t)>this._itemSize/2?e-(this._itemSize-Math.abs(t)):e-t,o<=0&&o>=-this._extent&&this._scroll.setVelocityByEnd(o)}this._lastTime=Date.now(),this._lastDelay=0,this._scrolling=!0,this._lastChangePos=this._position,this._lastIdx=Math.floor(Math.abs(this._position/this._itemSize)),this._animation=function(e,t,n){const o={id:0,cancelled:!1};return function e(t,n,o,r){if(!t||!t.cancelled){o(n);const i=n.done();i||t.cancelled||(t.id=requestAnimationFrame(e.bind(null,t,n,o,r))),i&&r&&r(n)}}(o,e,t,n),{cancel:function(e){e&&e.id&&cancelAnimationFrame(e.id),e&&(e.cancelled=!0)}.bind(null,o),model:e}}(this._scroll,(()=>{const e=Date.now(),t=(e-this._scroll._startTime)/1e3,n=this._scroll.x(t);this._position=n,this.updatePosition();const o=this._scroll.dx(t);this._shouldDispatchScrollEvent&&e-this._lastTime>this._lastDelay&&(this.dispatchScroll(),this._lastDelay=Math.abs(2e3/o),this._lastTime=e)}),(()=>{this._enableSnap&&(o<=0&&o>=-this._extent&&(this._position=o,this.updatePosition()),D(this._options.onSnap)&&this._options.onSnap(Math.floor(Math.abs(this._position)/this._itemSize))),this._shouldDispatchScrollEvent&&this.dispatchScroll(),this._scrolling=!1}))}onTransitionEnd(){this._element.style.webkitTransition="",this._element.style.transition="",this._element.removeEventListener("transitionend",this._onTransitionEnd),this._snapping&&(this._snapping=!1),this.dispatchScroll()}snap(){const e=this._itemSize,t=this._position%e,n=Math.abs(t)>this._itemSize/2?this._position-(e-Math.abs(t)):this._position-t;this._position!==n&&(this._snapping=!0,this.scrollTo(-n),D(this._options.onSnap)&&this._options.onSnap(Math.floor(Math.abs(this._position)/this._itemSize)))}scrollTo(e,t){this._animation&&(this._animation.cancel(),this._scrolling=!1),"number"==typeof e&&(this._position=-e),this._position<-this._extent?this._position=-this._extent:this._position>0&&(this._position=0);const n="transform "+(t||.2)+"s ease-out";this._element.style.webkitTransition="-webkit-"+n,this._element.style.transition=n,this.updatePosition(),this._element.addEventListener("transitionend",this._onTransitionEnd)}dispatchScroll(){if(D(this._options.onScroll)&&Math.round(Number(this._lastPos))!==Math.round(this._position)){this._lastPos=this._position;const e={target:{scrollLeft:this._enableX?-this._position:0,scrollTop:this._enableY?-this._position:0,scrollHeight:this._scrollHeight||this._element.offsetHeight,scrollWidth:this._scrollWidth||this._element.offsetWidth,offsetHeight:this._element.parentElement.offsetHeight,offsetWidth:this._element.parentElement.offsetWidth}};this._options.onScroll(e)}}update(e,t,n){let o=0;const r=this._position;this._enableX?(o=this._element.childNodes.length?(t||this._element.offsetWidth)-this._element.parentElement.offsetWidth:0,this._scrollWidth=t):(o=this._element.childNodes.length?(t||this._element.offsetHeight)-this._element.parentElement.offsetHeight:0,this._scrollHeight=t),"number"==typeof e&&(this._position=-e),this._position<-o?this._position=-o:this._position>0&&(this._position=0),this._itemSize=n||this._itemSize,this.updatePosition(),r!==this._position&&(this.dispatchScroll(),D(this._options.onSnap)&&this._options.onSnap(Math.floor(Math.abs(this._position)/this._itemSize))),this._extent=o,this._scroll._extent=o}updatePosition(){let e="";this._enableX?e="translateX("+this._position+"px) translateZ(0)":this._enableY&&(e="translateY("+this._position+"px) translateZ(0)"),this._element.style.webkitTransform=e,this._element.style.transform=e}isScrolling(){return this._scrolling||this._snapping}}function lv(e,t){const n={trackingID:-1,maxDy:0,maxDx:0},o=new cv(e,t);function r(e){const t=e,o=e;return"move"===t.detail.state||"end"===t.detail.state?{x:t.detail.dx,y:t.detail.dy}:{x:o.screenX-n.x,y:o.screenY-n.y}}return{scroller:o,handleTouchStart:function(e){const t=e,r=e;"start"===t.detail.state?(n.trackingID="touch",n.x=t.detail.x,n.y=t.detail.y):(n.trackingID="mouse",n.x=r.screenX,n.y=r.screenY),n.maxDx=0,n.maxDy=0,n.historyX=[0],n.historyY=[0],n.historyTime=[t.detail.timeStamp||r.timeStamp],n.listener=o,o.onTouchStart&&o.onTouchStart(),("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault()},handleTouchMove:function(e){const t=e,o=e;if(-1!==n.trackingID){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault();const i=r(e);if(i){for(n.maxDy=Math.max(n.maxDy,Math.abs(i.y)),n.maxDx=Math.max(n.maxDx,Math.abs(i.x)),n.historyX.push(i.x),n.historyY.push(i.y),n.historyTime.push(t.detail.timeStamp||o.timeStamp);n.historyTime.length>10;)n.historyTime.shift(),n.historyX.shift(),n.historyY.shift();n.listener&&n.listener.onTouchMove&&n.listener.onTouchMove(i.x,i.y)}}},handleTouchEnd:function(e){if(-1!==n.trackingID){e.preventDefault();const t=r(e);if(t){const e=n.listener;n.trackingID=-1,n.listener=null;const o={x:0,y:0};if(n.historyTime.length>2)for(let t=n.historyTime.length-1,r=n.historyTime[t],i=n.historyX[t],a=n.historyY[t];t>0;){t--;const e=r-n.historyTime[t];if(e>30&&e<50){o.x=(i-n.historyX[t])/(e/1e3),o.y=(a-n.historyY[t])/(e/1e3);break}}n.historyTime=[],n.historyX=[],n.historyY=[],e&&e.onTouchEnd&&e.onTouchEnd(t.x,t.y,o)}}}}}let uv=0;const dv=Od({name:"PickerViewColumn",setup(e,{slots:t,emit:n}){const o=qn(null),r=qn(null),i=Po("getPickerViewColumn"),a=da(),s=i?i(a):qn(0),c=Po("pickerViewProps"),l=Po("pickerViewState"),u=qn(34),d=qn(null);Mr((()=>{const e=d.value;u.value=e.$el.offsetHeight}));const p=Ma((()=>(l.height-u.value)/2)),{state:h}=_g(),f=function(e){const t="uni-picker-view-content-"+uv++;return Bo((()=>e.value),(function(){const n=document.createElement("style");n.innerText=`.uni-picker-view-content.${t}>*{height: ${e.value}px;overflow: hidden;}`,document.head.appendChild(n)})),t}(u);let g;const v=In({current:s.value,length:0});let m;function _(){g&&!m&&(m=!0,po((()=>{m=!1;let e=Math.min(v.current,v.length-1);e=Math.max(e,0),g.update(e*u.value,void 0,u.value)})))}Bo((()=>s.value),(e=>{e!==v.current&&(v.current=e,_())})),Bo((()=>v.current),(e=>s.value=e)),Bo([()=>u.value,()=>v.length,()=>l.height],_);let y=0;function b(e){const t=y+e.deltaY;if(Math.abs(t)>10){y=0;let e=Math.min(v.current+(t<0?-1:1),v.length-1);v.current=e=Math.max(e,0),g.scrollTo(e*u.value)}else y=t;e.preventDefault()}function M({clientY:e}){const t=o.value;if(!g.isScrolling()){const n=e-t.getBoundingClientRect().top-l.height/2,o=u.value/2;if(!(Math.abs(n)<=o)){const e=Math.ceil((Math.abs(n)-o)/u.value),t=n<0?-e:e;let r=Math.min(v.current+t,v.length-1);v.current=r=Math.max(r,0),g.scrollTo(r*u.value)}}}return Mr((()=>{const e=o.value,t=r.value,{scroller:n,handleTouchStart:i,handleTouchMove:a,handleTouchEnd:s}=lv(t,{enableY:!0,enableX:!1,enableSnap:!0,itemSize:u.value,friction:new ov(1e-4),spring:new av(2,90,20),onSnap:e=>{isNaN(e)||e===v.current||(v.current=e)}});g=n,Ug(e,(e=>{switch(e.detail.state){case"start":i(e);break;case"move":a(e),e.stopPropagation();break;case"end":case"cancel":s(e)}}),!0),function(e){let t=0,n=0;e.addEventListener("touchstart",(e=>{const o=e.changedTouches[0];t=o.clientX,n=o.clientY})),e.addEventListener("touchend",(e=>{const o=e.changedTouches[0];if(Math.abs(o.clientX-t)<20&&Math.abs(o.clientY-n)<20){const t={bubbles:!0,cancelable:!0,target:e.target,currentTarget:e.currentTarget},n=new CustomEvent("click",t);["screenX","screenY","clientX","clientY","pageX","pageY"].forEach((e=>{n[e]=o[e]})),e.target.dispatchEvent(n)}}))}(e),_()})),()=>{const e=t.default&&t.default();v.length=Lg(e).length;const n=`${p.value}px 0`;return Zi("uni-picker-view-column",{ref:o},[Zi("div",{onWheel:b,onClick:M,class:"uni-picker-view-group"},[Zi("div",aa(h.attrs,{class:["uni-picker-view-mask",c.maskClass],style:`background-size: 100% ${p.value}px;${c.maskStyle}`}),null,16),Zi("div",aa(h.attrs,{class:["uni-picker-view-indicator",c.indicatorClass],style:c.indicatorStyle}),[Zi(zf,{ref:d,onResize:({height:e})=>u.value=e},null,8,["onResize"])],16),Zi("div",{ref:r,class:["uni-picker-view-content",f],style:{padding:n}},[e],6)],40,["onWheel","onClick"])],512)}}}),pv={activeColor:ae,backgroundColor:"#EBEBEB",activeMode:"backwards"},hv=Od({name:"Progress",props:{percent:{type:[Number,String],default:0,validator:e=>!isNaN(parseFloat(e))},fontSize:{type:[String,Number],default:16},showInfo:{type:[Boolean,String],default:!1},strokeWidth:{type:[Number,String],default:6,validator:e=>!isNaN(parseFloat(e))},color:{type:String,default:pv.activeColor},activeColor:{type:String,default:pv.activeColor},backgroundColor:{type:String,default:pv.backgroundColor},active:{type:[Boolean,String],default:!1},activeMode:{type:String,default:pv.activeMode},duration:{type:[Number,String],default:30,validator:e=>!isNaN(parseFloat(e))},borderRadius:{type:[Number,String],default:0}},setup(e){const t=function(e){const t=qn(0),n=Ma((()=>`background-color: ${e.backgroundColor}; height: ${e.strokeWidth}px;`)),o=Ma((()=>{const n=e.color!==pv.activeColor&&e.activeColor===pv.activeColor?e.color:e.activeColor;return`width: ${t.value}%;background-color: ${n}`})),r=Ma((()=>{let t=parseFloat(e.percent);return t<0&&(t=0),t>100&&(t=100),t})),i=In({outerBarStyle:n,innerBarStyle:o,realPercent:r,currentPercent:t,strokeTimer:0,lastPercent:0});return i}(e);return fv(t,e),Bo((()=>t.realPercent),((n,o)=>{t.strokeTimer&&clearInterval(t.strokeTimer),t.lastPercent=o||0,fv(t,e)})),()=>{const{showInfo:n}=e,{outerBarStyle:o,innerBarStyle:r,currentPercent:i}=t;return Zi("uni-progress",{class:"uni-progress"},[Zi("div",{style:o,class:"uni-progress-bar"},[Zi("div",{style:r,class:"uni-progress-inner-bar"},null,4)],4),n?Zi("p",{class:"uni-progress-info"},[i+"%"]):""])}}});function fv(e,t){t.active?(e.currentPercent=t.activeMode===pv.activeMode?0:e.lastPercent,e.strokeTimer=setInterval((()=>{e.currentPercent+1>e.realPercent?(e.currentPercent=e.realPercent,e.strokeTimer&&clearInterval(e.strokeTimer)):e.currentPercent+=1}),parseFloat(t.duration))):e.currentPercent=e.realPercent}const gv={a:"",abbr:"",address:"",article:"",aside:"",b:"",bdi:"",bdo:["dir"],big:"",blockquote:"",br:"",caption:"",center:"",cite:"",code:"",col:["span","width"],colgroup:["span","width"],dd:"",del:"",div:"",dl:"",dt:"",em:"",fieldset:"",font:"",footer:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:"",header:"",hr:"",i:"",img:["alt","src","height","width"],ins:"",label:"",legend:"",li:"",mark:"",nav:"",ol:["start","type"],p:"",pre:"",q:"",rt:"",ruby:"",s:"",section:"",small:"",span:"",strong:"",sub:"",sup:"",table:["width"],tbody:"",td:["colspan","height","rowspan","width"],tfoot:"",th:["colspan","height","rowspan","width"],thead:"",tr:["colspan","height","rowspan","width"],tt:"",u:"",ul:""},vv={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"',apos:"'",ldquo:"“",rdquo:"”",yen:"￥",radic:"√",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",hellip:"…"};const mv=(e,t,n)=>!n||T(n)&&!n.length?[]:n.map((n=>{if(U(n)){if(!w(n,"type")||"node"===n.type){let o={[e]:""};const r=n.name.toLowerCase();if(!w(gv,r))return;return function(e,t){if(U(t))for(const n in t)if(w(t,n)){const o=t[n];"img"===e&&"src"===n&&(t[n]=Xd(o))}}(r,n.attrs),o=M(o,function(e,t){if(["a","img"].includes(e.name)&&t)return{onClick:n=>{t(n,{node:e}),n.stopPropagation(),n.preventDefault(),n.returnValue=!1}}}(n,t),n.attrs),Ca(n.name,o,mv(e,t,n.children))}return"text"===n.type&&A(n.text)&&""!==n.text?ta((n.text||"").replace(/&(([a-zA-Z]+)|(#x{0,1}[\da-zA-Z]+));/gi,(function(e,t){return w(vv,t)&&vv[t]?vv[t]:/^#[0-9]{1,4}$/.test(t)?String.fromCharCode(t.slice(1)):/^#x[0-9a-f]{1,4}$/i.test(t)?String.fromCharCode(0+t.slice(1)):e}))):void 0}}));function _v(e){e=function(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}(e);const t=[],n={node:"root",children:[]};return function(e,t){var n,o,r,i=[],a=e;for(i.last=function(){return this[this.length-1]};e;){if(o=!0,i.last()&&og[i.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+i.last()+"[^>]*>"),(function(e,n){return n=n.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(n),""})),l("",i.last());else if(0==e.indexOf("\x3c!--")?(n=e.indexOf("--\x3e"))>=0&&(t.comment&&t.comment(e.substring(4,n)),e=e.substring(n+3),o=!1):0==e.indexOf("</")?(r=e.match(Xf))&&(e=e.substring(r[0].length),r[0].replace(Xf,l),o=!1):0==e.indexOf("<")&&(r=e.match(Yf))&&(e=e.substring(r[0].length),r[0].replace(Yf,c),o=!1),o){var s=(n=e.indexOf("<"))<0?e:e.substring(0,n);e=n<0?"":e.substring(n),t.chars&&t.chars(s)}if(e==a)throw"Parse Error: "+e;a=e}function c(e,n,o,r){if(n=n.toLowerCase(),Qf[n])for(;i.last()&&eg[i.last()];)l("",i.last());if(tg[n]&&i.last()==n&&l("",n),(r=Zf[n]||!!r)||i.push(n),t.start){var a=[];o.replace(Jf,(function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:ng[t]?t:"";a.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(n,a,r)}}function l(e,n){if(n)for(o=i.length-1;o>=0&&i[o]!=n;o--);else var o=0;if(o>=0){for(var r=i.length-1;r>=o;r--)t.end&&t.end(i[r]);i.length=o}}l()}(e,{start:function(e,o,r){const i={name:e};if(0!==o.length&&(i.attrs=function(e){return e.reduce((function(e,t){let n=t.value;const o=t.name;return n.match(/ /)&&-1===["style","src"].indexOf(o)&&(n=n.split(" ")),e[o]?Array.isArray(e[o])?e[o].push(n):e[o]=[e[o],n]:e[o]=n,e}),{})}(o)),r){const e=t[0]||n;e.children||(e.children=[]),e.children.push(i)}else t.unshift(i)},end:function(e){const o=t.shift();if(o.name!==e&&console.error("invalid state: mismatch end tag"),0===t.length)n.children.push(o);else{const e=t[0];e.children||(e.children=[]),e.children.push(o)}},chars:function(e){const o={type:"text",text:e};if(0===t.length)n.children.push(o);else{const e=t[0];e.children||(e.children=[]),e.children.push(o)}},comment:function(e){const n={node:"comment",text:e},o=t[0];o.children||(o.children=[]),o.children.push(n)}}),n.children}const yv=Od({name:"RichText",compatConfig:{MODE:3},props:{nodes:{type:[Array,String],default:function(){return[]}}},emits:["click","touchstart","touchmove","touchcancel","touchend","longpress","itemclick"],setup(e,{emit:t}){const n=da(),o=n&&n.vnode.scopeId||"",r=qn(null),i=qn([]),a=Bd(r,t);function s(e,t={}){a("itemclick",e,t)}return Bo((()=>e.nodes),(function(){let t=e.nodes;A(t)&&(t=_v(e.nodes)),i.value=mv(o,s,t)}),{immediate:!0}),()=>Ca("uni-rich-text",{ref:r},Ca("div",{},i.value))}}),bv=Qe(!0),Mv=Od({name:"ScrollView",compatConfig:{MODE:3},props:{scrollX:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},upperThreshold:{type:[Number,String],default:50},lowerThreshold:{type:[Number,String],default:50},scrollTop:{type:[Number,String],default:0},scrollLeft:{type:[Number,String],default:0},scrollIntoView:{type:String,default:""},scrollWithAnimation:{type:[Boolean,String],default:!1},enableBackToTop:{type:[Boolean,String],default:!1},refresherEnabled:{type:[Boolean,String],default:!1},refresherThreshold:{type:Number,default:45},refresherDefaultStyle:{type:String,default:"back"},refresherBackground:{type:String,default:"#fff"},refresherTriggered:{type:[Boolean,String],default:!1}},emits:["scroll","scrolltoupper","scrolltolower","refresherrefresh","refresherrestore","refresherpulling","refresherabort","update:refresherTriggered"],setup(e,{emit:t,slots:n}){const o=qn(null),r=qn(null),i=qn(null),a=qn(null),s=qn(null),c=Bd(o,t),{state:l,scrollTopNumber:u,scrollLeftNumber:d}=function(e){const t=Ma((()=>Number(e.scrollTop)||0)),n=Ma((()=>Number(e.scrollLeft)||0)),o=In({lastScrollTop:t.value,lastScrollLeft:n.value,lastScrollToUpperTime:0,lastScrollToLowerTime:0,refresherHeight:0,refreshRotate:0,refreshState:""});return{state:o,scrollTopNumber:t,scrollLeftNumber:n}}(e);!function(e,t,n,o,r,i,a,s,c){let l=!1,u=0,d=!1,p=()=>{};const h=Ma((()=>{let t=Number(e.upperThreshold);return isNaN(t)?50:t})),f=Ma((()=>{let t=Number(e.lowerThreshold);return isNaN(t)?50:t}));function g(e,t){const n=a.value;let o=0,r="";if(e<0?e=0:"x"===t&&e>n.scrollWidth-n.offsetWidth?e=n.scrollWidth-n.offsetWidth:"y"===t&&e>n.scrollHeight-n.offsetHeight&&(e=n.scrollHeight-n.offsetHeight),"x"===t?o=n.scrollLeft-e:"y"===t&&(o=n.scrollTop-e),0===o)return;let i=s.value;i.style.transition="transform .3s ease-out",i.style.webkitTransition="-webkit-transform .3s ease-out","x"===t?r="translateX("+o+"px) translateZ(0)":"y"===t&&(r="translateY("+o+"px) translateZ(0)"),i.removeEventListener("transitionend",p),i.removeEventListener("webkitTransitionEnd",p),p=()=>b(e,t),i.addEventListener("transitionend",p),i.addEventListener("webkitTransitionEnd",p),"x"===t?n.style.overflowX="hidden":"y"===t&&(n.style.overflowY="hidden"),i.style.transform=r,i.style.webkitTransform=r}function v(n){const o=n.target;r("scroll",n,{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop,scrollHeight:o.scrollHeight,scrollWidth:o.scrollWidth,deltaX:t.lastScrollLeft-o.scrollLeft,deltaY:t.lastScrollTop-o.scrollTop}),e.scrollY&&(o.scrollTop<=h.value&&t.lastScrollTop-o.scrollTop>0&&n.timeStamp-t.lastScrollToUpperTime>200&&(r("scrolltoupper",n,{direction:"top"}),t.lastScrollToUpperTime=n.timeStamp),o.scrollTop+o.offsetHeight+f.value>=o.scrollHeight&&t.lastScrollTop-o.scrollTop<0&&n.timeStamp-t.lastScrollToLowerTime>200&&(r("scrolltolower",n,{direction:"bottom"}),t.lastScrollToLowerTime=n.timeStamp)),e.scrollX&&(o.scrollLeft<=h.value&&t.lastScrollLeft-o.scrollLeft>0&&n.timeStamp-t.lastScrollToUpperTime>200&&(r("scrolltoupper",n,{direction:"left"}),t.lastScrollToUpperTime=n.timeStamp),o.scrollLeft+o.offsetWidth+f.value>=o.scrollWidth&&t.lastScrollLeft-o.scrollLeft<0&&n.timeStamp-t.lastScrollToLowerTime>200&&(r("scrolltolower",n,{direction:"right"}),t.lastScrollToLowerTime=n.timeStamp)),t.lastScrollTop=o.scrollTop,t.lastScrollLeft=o.scrollLeft}function m(t){e.scrollY&&(e.scrollWithAnimation?g(t,"y"):a.value.scrollTop=t)}function _(t){e.scrollX&&(e.scrollWithAnimation?g(t,"x"):a.value.scrollLeft=t)}function y(t){if(t){if(!/^[_a-zA-Z][-_a-zA-Z0-9:]*$/.test(t))return void console.error(`id error: scroll-into-view=${t}`);let n=i.value.querySelector("#"+t);if(n){let t=a.value.getBoundingClientRect(),o=n.getBoundingClientRect();if(e.scrollX){let n=o.left-t.left,r=a.value.scrollLeft+n;e.scrollWithAnimation?g(r,"x"):a.value.scrollLeft=r}if(e.scrollY){let n=o.top-t.top,r=a.value.scrollTop+n;e.scrollWithAnimation?g(r,"y"):a.value.scrollTop=r}}}}function b(t,n){s.value.style.transition="",s.value.style.webkitTransition="",s.value.style.transform="",s.value.style.webkitTransform="";let o=a.value;"x"===n?(o.style.overflowX=e.scrollX?"auto":"hidden",o.scrollLeft=t):"y"===n&&(o.style.overflowY=e.scrollY?"auto":"hidden",o.scrollTop=t),s.value.removeEventListener("transitionend",p),s.value.removeEventListener("webkitTransitionEnd",p)}function M(n){if(e.refresherEnabled){switch(n){case"refreshing":t.refresherHeight=e.refresherThreshold,l||(l=!0,r("refresherrefresh",{},{}),c("update:refresherTriggered",!0));break;case"restore":case"refresherabort":l=!1,t.refresherHeight=u=0,"restore"===n&&(d=!1,r("refresherrestore",{},{})),"refresherabort"===n&&d&&(d=!1,r("refresherabort",{},{}))}t.refreshState=n}}Mr((()=>{po((()=>{m(n.value),_(o.value)})),y(e.scrollIntoView);let i=function(e){e.preventDefault(),e.stopPropagation(),v(e)},s={x:0,y:0},c=null,p=function(n){if(null===s)return;let o=n.touches[0].pageX,i=n.touches[0].pageY,p=a.value;if(Math.abs(o-s.x)>Math.abs(i-s.y))if(e.scrollX){if(0===p.scrollLeft&&o>s.x)return void(c=!1);if(p.scrollWidth===p.offsetWidth+p.scrollLeft&&o<s.x)return void(c=!1);c=!0}else c=!1;else if(e.scrollY)if(0===p.scrollTop&&i>s.y)c=!1,e.refresherEnabled&&!1!==n.cancelable&&n.preventDefault();else{if(p.scrollHeight===p.offsetHeight+p.scrollTop&&i<s.y)return void(c=!1);c=!0}else c=!1;if(c&&n.stopPropagation(),0===p.scrollTop&&1===n.touches.length&&M("pulling"),e.refresherEnabled&&"pulling"===t.refreshState){const o=i-s.y;0===u&&(u=i),l?(t.refresherHeight=o+e.refresherThreshold,d=!1):(t.refresherHeight=i-u,t.refresherHeight>0&&(d=!0,r("refresherpulling",n,{deltaY:o})));const a=t.refresherHeight/e.refresherThreshold;t.refreshRotate=360*(a>1?1:a)}},h=function(e){1===e.touches.length&&(s={x:e.touches[0].pageX,y:e.touches[0].pageY})},f=function(n){s=null,t.refresherHeight>=e.refresherThreshold?M("refreshing"):M("refresherabort")};a.value.addEventListener("touchstart",h,bv),a.value.addEventListener("touchmove",p,Qe(!1)),a.value.addEventListener("scroll",i,Qe(!1)),a.value.addEventListener("touchend",f,bv),wr((()=>{a.value.removeEventListener("touchstart",h),a.value.removeEventListener("touchmove",p),a.value.removeEventListener("scroll",i),a.value.removeEventListener("touchend",f)}))})),lr((()=>{e.scrollY&&(a.value.scrollTop=t.lastScrollTop),e.scrollX&&(a.value.scrollLeft=t.lastScrollLeft)})),Bo(n,(e=>{m(e)})),Bo(o,(e=>{_(e)})),Bo((()=>e.scrollIntoView),(e=>{y(e)})),Bo((()=>e.refresherTriggered),(e=>{!0===e?M("refreshing"):!1===e&&M("restore")}))}(e,l,u,d,c,o,r,a,t);const p=Ma((()=>{let t="";return e.scrollX?t+="overflow-x:auto;":t+="overflow-x:hidden;",e.scrollY?t+="overflow-y:auto;":t+="overflow-y:hidden;",t}));return()=>{const{refresherEnabled:t,refresherBackground:c,refresherDefaultStyle:u}=e,{refresherHeight:d,refreshState:h,refreshRotate:f}=l;return Zi("uni-scroll-view",{ref:o},[Zi("div",{ref:i,class:"uni-scroll-view"},[Zi("div",{ref:r,style:p.value,class:"uni-scroll-view"},[Zi("div",{ref:a,class:"uni-scroll-view-content"},[t?Zi("div",{ref:s,style:{backgroundColor:c,height:d+"px"},class:"uni-scroll-view-refresher"},["none"!==u?Zi("div",{class:"uni-scroll-view-refresh"},[Zi("div",{class:"uni-scroll-view-refresh-inner"},["pulling"==h?Zi("svg",{key:"refresh__icon",style:{transform:"rotate("+f+"deg)"},fill:"#2BD009",class:"uni-scroll-view-refresh__icon",width:"24",height:"24",viewBox:"0 0 24 24"},[Zi("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null),Zi("path",{d:"M0 0h24v24H0z",fill:"none"},null)],4):null,"refreshing"==h?Zi("svg",{key:"refresh__spinner",class:"uni-scroll-view-refresh__spinner",width:"24",height:"24",viewBox:"25 25 50 50"},[Zi("circle",{cx:"50",cy:"50",r:"20",fill:"none",style:"color: #2bd009","stroke-width":"3"},null)]):null])]):null,"none"==u?n.refresher&&n.refresher():null],4):null,n.default&&n.default()],512)],4)],512)],512)}}});function Cv(e,t,n,o,r,i){function a(){l&&(clearTimeout(l),l=null)}let s,c,l=null,u=!0,d=0,p=1,h=null,f=!1,g=0,v="";const m=Ma((()=>n.value.length>t.displayMultipleItems)),_=Ma((()=>e.circular&&m.value));function y(r){Math.floor(2*d)===Math.floor(2*r)&&Math.ceil(2*d)===Math.ceil(2*r)||_.value&&function(o){if(!u)for(let r=n.value,i=r.length,a=o+t.displayMultipleItems,s=0;s<i;s++){const t=r[s],n=Math.floor(o/i)*i+s,c=n+i,l=n-i,u=Math.max(o-(n+1),n-a,0),d=Math.max(o-(c+1),c-a,0),p=Math.max(o-(l+1),l-a,0),h=Math.min(u,d,p),f=[n,c,l][[u,d,p].indexOf(h)];t.updatePosition(f,e.vertical)}}(r);const a="translate("+(e.vertical?"0":100*-r*p+"%")+", "+(e.vertical?100*-r*p+"%":"0")+") translateZ(0)",c=o.value;if(c&&(c.style.webkitTransform=a,c.style.transform=a),d=r,!s){if(r%1==0)return;s=r}r-=Math.floor(s);const l=n.value;r<=-(l.length-1)?r+=l.length:r>=l.length&&(r-=l.length),r=s%1>.5||s<0?r-1:r,i("transition",{},{dx:e.vertical?0:r*c.offsetWidth,dy:e.vertical?r*c.offsetHeight:0})}function b(e){const o=n.value.length;if(!o)return-1;const r=(Math.round(e)%o+o)%o;if(_.value){if(o<=t.displayMultipleItems)return 0}else if(r>o-t.displayMultipleItems)return o-t.displayMultipleItems;return r}function M(){h=null}function C(){if(!h)return void(f=!1);const e=h,o=e.toPos,r=e.acc,a=e.endTime,l=e.source,u=a-Date.now();if(u<=0){y(o),h=null,f=!1,s=null;const e=n.value[t.current];if(e){const n=e.getItemId();i("animationfinish",{},{current:t.current,currentItemId:n,source:l})}return}y(o+r*u*u/2),c=requestAnimationFrame(C)}function k(e,o,r){M();const i=t.duration,a=n.value.length;let s=d;if(_.value)if(r<0){for(;s<e;)s+=a;for(;s-a>e;)s-=a}else if(r>0){for(;s>e;)s-=a;for(;s+a<e;)s+=a;s+a-e<e-s&&(s+=a)}else{for(;s+a<e;)s+=a;for(;s-a>e;)s-=a;s+a-e<e-s&&(s+=a)}else"click"===o&&(e=e+t.displayMultipleItems-1<a?e:0);h={toPos:e,acc:2*(s-e)/(i*i),endTime:Date.now()+i,source:o},f||(f=!0,c=requestAnimationFrame(C))}function w(){a();const e=n.value,o=function(){l=null,v="autoplay",_.value?t.current=b(t.current+1):t.current=t.current+t.displayMultipleItems<e.length?t.current+1:0,k(t.current,"autoplay",_.value?1:0),l=setTimeout(o,t.interval)};u||e.length<=t.displayMultipleItems||(l=setTimeout(o,t.interval))}function T(e){e?w():a()}return Bo([()=>e.current,()=>e.currentItemId,()=>[...n.value]],(()=>{let o=-1;if(e.currentItemId)for(let t=0,r=n.value;t<r.length;t++){if(r[t].getItemId()===e.currentItemId){o=t;break}}o<0&&(o=Math.round(e.current)||0),o=o<0?0:o,t.current!==o&&(v="",t.current=o)})),Bo([()=>e.vertical,()=>_.value,()=>t.displayMultipleItems,()=>[...n.value]],(function(){a(),h&&(y(h.toPos),h=null);const r=n.value;for(let t=0;t<r.length;t++)r[t].updatePosition(t,e.vertical);p=1;const i=o.value;if(1===t.displayMultipleItems&&r.length){const e=r[0].getBoundingClientRect(),t=i.getBoundingClientRect();p=e.width/t.width,p>0&&p<1||(p=1)}const s=d;d=-2;const c=t.current;c>=0?(u=!1,t.userTracking?(y(s+c-g),g=c):(y(c),e.autoplay&&w())):(u=!0,y(-t.displayMultipleItems-1))})),Bo((()=>t.interval),(()=>{l&&(a(),w())})),Bo((()=>t.current),((e,o)=>{!function(e,o){const r=v;v="";const a=n.value;if(!r){const t=a.length;k(e,"",_.value&&o+(t-e)%t>t/2?1:0)}const s=a[e];if(s){const e=t.currentItemId=s.getItemId();i("change",{},{current:t.current,currentItemId:e,source:r})}}(e,o),r("update:current",e)})),Bo((()=>t.currentItemId),(e=>{r("update:currentItemId",e)})),Bo((()=>e.autoplay&&!t.userTracking),T),T(e.autoplay&&!t.userTracking),Mr((()=>{let r=!1,i=0,s=0;function c(e){t.userTracking=!1;const n=i/Math.abs(i);let o=0;!e&&Math.abs(i)>.2&&(o=.5*n);const r=b(d+o);e?y(g):(v="touch",t.current=r,k(r,"touch",0!==o?o:0===r&&_.value&&d>=1?1:0))}Ug(o.value,(l=>{if(!e.disableTouch&&!u){if("start"===l.detail.state)return t.userTracking=!0,r=!1,a(),g=d,i=0,s=Date.now(),void M();if("end"===l.detail.state)return c(!1);if("cancel"===l.detail.state)return c(!0);if(t.userTracking){if(!r){r=!0;const n=Math.abs(l.detail.dx),o=Math.abs(l.detail.dy);if((n>=o&&e.vertical||n<=o&&!e.vertical)&&(t.userTracking=!1),!t.userTracking)return void(e.autoplay&&w())}return function(r){const a=s;s=Date.now();const c=n.value.length-t.displayMultipleItems;function l(e){return.5-.25/(e+.5)}function u(e,t){let n=g+e;i=.6*i+.4*t,_.value||(n<0||n>c)&&(n<0?n=-l(-n):n>c&&(n=c+l(n-c)),i=0),y(n)}const d=s-a||1,p=o.value;e.vertical?u(-r.dy/p.offsetHeight,-r.ddy/d):u(-r.dx/p.offsetWidth,-r.ddx/d)}(l.detail),!1}}}))})),Tr((()=>{a(),cancelAnimationFrame(c)})),{onSwiperDotClick:function(e){k(t.current=e,v="click",_.value?1:0)},circularEnabled:_,swiperEnabled:m}}const kv=Od({name:"Swiper",props:{indicatorDots:{type:[Boolean,String],default:!1},vertical:{type:[Boolean,String],default:!1},autoplay:{type:[Boolean,String],default:!1},circular:{type:[Boolean,String],default:!1},interval:{type:[Number,String],default:5e3},duration:{type:[Number,String],default:500},current:{type:[Number,String],default:0},indicatorColor:{type:String,default:""},indicatorActiveColor:{type:String,default:""},previousMargin:{type:String,default:""},nextMargin:{type:String,default:""},currentItemId:{type:String,default:""},skipHiddenItemLayout:{type:[Boolean,String],default:!1},displayMultipleItems:{type:[Number,String],default:1},disableTouch:{type:[Boolean,String],default:!1},navigation:{type:[Boolean,String],default:!1},navigationColor:{type:String,default:"#fff"},navigationActiveColor:{type:String,default:"rgba(53, 53, 53, 0.6)"}},emits:["change","transition","animationfinish","update:current","update:currentItemId"],setup(e,{slots:t,emit:n}){const o=qn(null),r=Bd(o,n),i=qn(null),a=qn(null),s=function(e){return In({interval:Ma((()=>{const t=Number(e.interval);return isNaN(t)?5e3:t})),duration:Ma((()=>{const t=Number(e.duration);return isNaN(t)?500:t})),displayMultipleItems:Ma((()=>{const t=Math.round(e.displayMultipleItems);return isNaN(t)?1:t})),current:Math.round(e.current)||0,currentItemId:e.currentItemId,userTracking:!1})}(e),c=Ma((()=>{let t={};return(e.nextMargin||e.previousMargin)&&(t=e.vertical?{left:0,right:0,top:qu(e.previousMargin,!0),bottom:qu(e.nextMargin,!0)}:{top:0,bottom:0,left:qu(e.previousMargin,!0),right:qu(e.nextMargin,!0)}),t})),l=Ma((()=>{const t=Math.abs(100/s.displayMultipleItems)+"%";return{width:e.vertical?"100%":t,height:e.vertical?t:"100%"}}));let u=[];const d=[],p=qn([]);function h(){const e=[];for(let t=0;t<u.length;t++){let n=u[t];n instanceof Element||(n=n.el);const o=d.find((e=>n===e.rootRef.value));o&&e.push(Nn(o))}p.value=e}No("addSwiperContext",(function(e){d.push(e),h()}));No("removeSwiperContext",(function(e){const t=d.indexOf(e);t>=0&&(d.splice(t,1),h())}));const{onSwiperDotClick:f,circularEnabled:g,swiperEnabled:v}=Cv(e,s,p,a,n,r);let m=()=>null;return m=wv(o,e,s,f,p,g,v),()=>{const n=t.default&&t.default();return u=Lg(n),Zi("uni-swiper",{ref:o},[Zi("div",{ref:i,class:"uni-swiper-wrapper"},[Zi("div",{class:"uni-swiper-slides",style:c.value},[Zi("div",{ref:a,class:"uni-swiper-slide-frame",style:l.value},[n],4)],4),e.indicatorDots&&Zi("div",{class:["uni-swiper-dots",e.vertical?"uni-swiper-dots-vertical":"uni-swiper-dots-horizontal"]},[p.value.map(((t,n,o)=>Zi("div",{onClick:()=>f(n),class:{"uni-swiper-dot":!0,"uni-swiper-dot-active":n<s.current+s.displayMultipleItems&&n>=s.current||n<s.current+s.displayMultipleItems-o.length},style:{background:n===s.current?e.indicatorActiveColor:e.indicatorColor}},null,14,["onClick"])))],2),m()],512)],512)}}}),wv=(e,t,n,o,r,i,a)=>{let s=!1,c=!1,l=!1,u=qn(!1);function d(e,n){const o=e.currentTarget;o&&(o.style.backgroundColor="over"===n?t.navigationActiveColor:"")}Uo((()=>{s="auto"===t.navigation,u.value=!0!==t.navigation||s,_()})),Uo((()=>{const e=r.value.length,t=!i.value;c=0===n.current&&t,l=n.current===e-1&&t||t&&n.current+n.displayMultipleItems>=e,a.value||(c=!0,l=!0,s&&(u.value=!0))}));const p={onMouseover:e=>d(e,"over"),onMouseout:e=>d(e,"out")};function h(e,t,a){if(e.stopPropagation(),a)return;const s=r.value.length;let c=n.current;switch(t){case"prev":c--,c<0&&i.value&&(c=s-1);break;case"next":c++,c>=s&&i.value&&(c=0)}o(c)}const f=()=>ju(zu,t.navigationColor,26);let g;const v=n=>{clearTimeout(g);const{clientX:o,clientY:r}=n,{left:i,right:a,top:s,bottom:c,width:l,height:d}=e.value.getBoundingClientRect();let p=!1;if(p=t.vertical?!(r-s<d/3||c-r<d/3):!(o-i<l/3||a-o<l/3),p)return g=setTimeout((()=>{u.value=p}),300);u.value=p},m=()=>{u.value=!0};function _(){e.value&&(e.value.removeEventListener("mousemove",v),e.value.removeEventListener("mouseleave",m),s&&(e.value.addEventListener("mousemove",v),e.value.addEventListener("mouseleave",m)))}return Mr(_),function(){const e={"uni-swiper-navigation-hide":u.value,"uni-swiper-navigation-vertical":t.vertical};return t.navigation?Zi(xi,null,[Zi("div",aa({class:["uni-swiper-navigation uni-swiper-navigation-prev",M({"uni-swiper-navigation-disabled":c},e)],onClick:e=>h(e,"prev",c)},p),[f()],16,["onClick"]),Zi("div",aa({class:["uni-swiper-navigation uni-swiper-navigation-next",M({"uni-swiper-navigation-disabled":l},e)],onClick:e=>h(e,"next",l)},p),[f()],16,["onClick"])]):null}},Tv=Od({name:"SwiperItem",props:{itemId:{type:String,default:""}},setup(e,{slots:t}){const n=qn(null),o={rootRef:n,getItemId:()=>e.itemId,getBoundingClientRect:()=>n.value.getBoundingClientRect(),updatePosition(e,t){const o=t?"0":100*e+"%",r=t?100*e+"%":"0",i=n.value,a=`translate(${o},${r}) translateZ(0)`;i&&(i.style.webkitTransform=a,i.style.transform=a)}};return Mr((()=>{const e=Po("addSwiperContext");e&&e(o)})),Tr((()=>{const e=Po("removeSwiperContext");e&&e(o)})),()=>Zi("uni-swiper-item",{ref:n,style:{position:"absolute",width:"100%",height:"100%"}},[t.default&&t.default()],512)}}),Sv={ensp:" ",emsp:" ",nbsp:" "};function Iv(e,t){return e.replace(/\\n/g,te).split(te).map((e=>function(e,{space:t,decode:n}){if(!e)return e;t&&Sv[t]&&(e=e.replace(/ /g,Sv[t]));if(!n)return e;return e.replace(/&nbsp;/g,Sv.nbsp).replace(/&ensp;/g,Sv.ensp).replace(/&emsp;/g,Sv.emsp).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}(e,t)))}const Ev=Od({name:"Text",props:{selectable:{type:[Boolean,String],default:!1},space:{type:String,default:""},decode:{type:[Boolean,String],default:!1}},setup:(e,{slots:t})=>()=>{const n=[];return t.default&&t.default().forEach((t=>{if(8&t.shapeFlag&&t.type!==Pi){const o=Iv(t.children,{space:e.space,decode:e.decode}),r=o.length-1;o.forEach(((e,t)=>{(0!==t||e)&&n.push(ta(e)),t!==r&&n.push(Zi("br"))}))}else n.push(t)})),Zi("uni-text",{selectable:!!e.selectable||null},[Zi("span",null,n)],8,["selectable"])}}),Dv=M({},Cg,{placeholderClass:{type:String,default:"input-placeholder"},autoHeight:{type:[Boolean,String],default:!1},confirmType:{type:String,default:"return",validator:e=>Lv.concat("return").includes(e)}});let Av=!1;const Lv=["done","go","next","search","send"];const Rv=Od({name:"Textarea",props:Dv,emits:["confirm","linechange",...kg],setup(e,{emit:t}){const n=qn(null),o=qn(null),{fieldRef:r,state:i,scopedAttrsState:a,fixDisabledColor:s,trigger:c}=Sg(e,n,t),l=Ma((()=>i.value.split(te))),u=Ma((()=>Lv.includes(e.confirmType))),d=qn(0),p=qn(null);function h({height:e}){d.value=e}function f(e){"Enter"===e.key&&u.value&&e.preventDefault()}function g(t){if("Enter"===t.key&&u.value){!function(e){c("confirm",e,{value:i.value})}(t);const n=t.target;!e.confirmHold&&n.blur()}}return Bo((()=>d.value),(t=>{const r=n.value,i=p.value,a=o.value;let s=parseFloat(getComputedStyle(r).lineHeight);isNaN(s)&&(s=i.offsetHeight);var l=Math.round(t/s);c("linechange",{},{height:t,heightRpx:750/window.innerWidth*t,lineCount:l}),e.autoHeight&&(r.style.height="auto",a.style.height=t+"px")})),function(){const e="(prefers-color-scheme: dark)";Av=0===String(navigator.platform).indexOf("iP")&&0===String(navigator.vendor).indexOf("Apple")&&window.matchMedia(e).media!==e}(),()=>{let t=e.disabled&&s?Zi("textarea",{key:"disabled-textarea",ref:r,value:i.value,tabindex:"-1",readonly:!!e.disabled,maxlength:i.maxlength,class:{"uni-textarea-textarea":!0,"uni-textarea-textarea-fix-margin":Av},style:{overflowY:e.autoHeight?"hidden":"auto"},onFocus:e=>e.target.blur()},null,46,["value","readonly","maxlength","onFocus"]):Zi("textarea",{key:"textarea",ref:r,value:i.value,disabled:!!e.disabled,maxlength:i.maxlength,enterkeyhint:e.confirmType,inputmode:e.inputmode,class:{"uni-textarea-textarea":!0,"uni-textarea-textarea-fix-margin":Av},style:{overflowY:e.autoHeight?"hidden":"auto"},onKeydown:f,onKeyup:g},null,46,["value","disabled","maxlength","enterkeyhint","inputmode","onKeydown","onKeyup"]);return Zi("uni-textarea",{ref:n},[Zi("div",{ref:o,class:"uni-textarea-wrapper"},[Ar(Zi("div",aa(a.attrs,{style:e.placeholderStyle,class:["uni-textarea-placeholder",e.placeholderClass]}),[e.placeholder],16),[[Bs,!i.value.length]]),Zi("div",{ref:p,class:"uni-textarea-line"},[" "],512),Zi("div",{class:"uni-textarea-compute"},[l.value.map((e=>Zi("div",null,[e.trim()?e:"."]))),Zi(zf,{initial:!0,onResize:h},null,8,["initial","onResize"])]),"search"===e.confirmType?Zi("form",{action:"",onSubmit:()=>!1,class:"uni-input-form"},[t],40,["onSubmit"]):t],512)],512)}}}),Ov=Od({name:"View",props:M({},Nd),setup(e,{slots:t}){const{hovering:n,binding:o}=Pd(e);return()=>{const r=e.hoverClass;return r&&"none"!==r?Zi("uni-view",aa({class:n.value?r:""},o),[t.default&&t.default()],16):Zi("uni-view",null,[t.default&&t.default()])}}});function xv(e,t){if(t||(t=e.id),t)return e.$options.name.toLowerCase()+"."+t}function Nv(e,t,n){e&&su(n||Xu(),e,(({type:e,data:n},o)=>{t(e,n,o)}))}function Pv(e,t){e&&function(e,t){t=au(e,t),delete iu[t]}(t||Xu(),e)}function Uv(e,t,n,o){const r=da().proxy;Mr((()=>{Nv(t||xv(r),e,o),!n&&t||Bo((()=>r.id),((t,n)=>{Nv(xv(r,t),e,o),Pv(n&&xv(r,n))}))})),wr((()=>{Pv(t||xv(r),o)}))}let Gv=0;function Bv(e,t,n,o){D(t)&&_r(e,t.bind(n),o)}function Fv(e,t,n){var o;const r=e.mpType||n.$mpType;if(r&&"component"!==r&&(Object.keys(e).forEach((o=>{if(function(e,t,n=!0){return!(n&&!D(t))&&(ut.indexOf(e)>-1||0===e.indexOf("on"))}(o,e[o],!1)){const r=e[o];T(r)?r.forEach((e=>Bv(o,e,n,t))):Bv(o,r,n,t)}})),"page"===r)){t.__isVisible=!0;try{ed(n,ve,t.attrs.__pageQuery),delete t.attrs.__pageQuery,"preloadPage"!==(null==(o=n.$page)?void 0:o.openType)&&ed(n,ue)}catch(gS){console.error(gS.message+te+gS.stack)}}}function qv(e,t,n){Fv(e,t,n)}function Vv(e,t,n){return e[t]=n}function Hv(e){return function(t,n,o){if(!n)throw t;const r=e._instance;if(!r||!r.proxy)throw t;ed(r.proxy,pe,t)}}function zv(e,t){return e?[...new Set([].concat(e,t))]:t}function jv(e){const t=e._context.config;var n;t.errorHandler=ht(e,Hv),n=t.optionMergeStrategies,ut.forEach((e=>{n[e]=zv}));const o=t.globalProperties;o.$set=Vv,o.$applyOptions=qv,function(e){dt=e,pt.forEach((t=>t(e)))}(e)}const $v=Bu("upm");function Wv(){return Po($v)}function Kv(e){const t=function(e){return In(function(e){{const{enablePullDownRefresh:t,navigationBar:n}=e;if(t){const t=function(e){return e.offset&&(e.offset=qu(e.offset)),e.height&&(e.height=qu(e.height)),e.range&&(e.range=qu(e.range)),e}(M({support:!0,color:"#2BD009",style:"circle",height:70,range:150,offset:0},e.pullToRefresh)),{type:o,style:r}=n;"custom"!==r&&"transparent"!==o&&(t.offset+=ne+Lu.top),e.pullToRefresh=t}}{const{navigationBar:t}=e,{titleSize:n,titleColor:o,backgroundColor:r}=t;t.titleText=t.titleText||"",t.type=t.type||"default",t.titleSize=n||"16px",t.titleColor=o||"#000000",t.backgroundColor=r||"#F8F8F8"}if(history.state){const t=history.state.__type__;"redirectTo"!==t&&"reLaunch"!==t||0!==pm().length||(e.isEntry=!0,e.isQuit=!0)}return e}(JSON.parse(JSON.stringify(Qu(Gl().meta,e)))))}(e);return No($v,t),t}function Yv(){return Gl()}function Xv(){return history.state&&history.state.__id__||1}let Jv;function Zv(){var e;return Jv||(Jv=__uniConfig.tabBar&&In((e=__uniConfig.tabBar,Bl()&&e.list&&e.list.forEach((e=>{Hl(e,["text"])})),e))),Jv}const Qv=window.CSS&&window.CSS.supports;function em(e){return Qv&&(Qv(e)||Qv.apply(window.CSS,e.split(":")))}const tm=em("--a:0"),nm=em("top:env(a)"),om=em("top:constant(a)"),rm=em("backdrop-filter:blur(10px)"),im={"css.var":tm,"css.env":nm,"css.constant":om,"css.backdrop-filter":rm},am=qp(0,(e=>!w(im,e)||im[e])),sm=(()=>nm?"env":om?"constant":"")();function cm(e){return sm?`calc(${e}px + ${sm}(safe-area-inset-bottom))`:`${e}px`}const lm="$$",um=new Map;function dm(){return um}function pm(){const e=[],t=um.values();for(const n of t)n.$.__isTabBar?n.$.__isActive&&e.push(n):e.push(n);return e}function hm(e,t=!0){const n=um.get(e);n.$.__isUnload=!0,ed(n,_e),um.delete(e),t&&function(e){const t=_m.get(e);t&&(_m.delete(e),ym.pruneCacheEntry(t))}(e)}let fm=Xv();function gm(e){const t=Wv();let n=e.fullPath;return e.meta.isEntry&&-1===n.indexOf(e.meta.route)&&(n="/"+e.meta.route+n.replace("/","")),function(e,t,n,o,r,i){const{id:a,route:s}=o,c=mt(o.navigationBar,__uniConfig.themeConfig,i).titleColor;return{id:a,path:He(s),route:s,fullPath:t,options:n,meta:o,openType:e,eventChannel:r,statusBarStyle:"#ffffff"===c?"light":"dark"}}("navigateTo",n,{},t)}function vm(e){const t=gm(e.$route);!function(e,t){e.route=t.route,e.$vm=e,e.$page=t,e.$mpType="page",t.meta.isTabBar&&(e.$.__isTabBar=!0,e.$.__isActive=!0)}(e,t),um.set(mm(t.path,t.id),e)}function mm(e,t){return e+lm+t}const _m=new Map,ym={get:e=>_m.get(e),set(e,t){!function(e){const t=parseInt(e.split(lm)[1]);if(!t)return;ym.forEach(((e,n)=>{const o=parseInt(n.split(lm)[1]);if(o&&o>t){if(function(e){return"tabBar"===e.props.type}(e))return;ym.delete(n),ym.pruneCacheEntry(e),po((()=>{um.forEach(((e,t)=>{e.$.isUnmounted&&um.delete(t)}))}))}}))}(e),_m.set(e,t)},delete(e){_m.get(e)&&_m.delete(e)},forEach(e){_m.forEach(e)}};function bm(e,t){!function(e){const t=Cm(e),{body:n}=document;km&&n.removeAttribute(km),t&&n.setAttribute(t,""),km=t}(e),function(e){let t=0,n=0;if("custom"!==e.navigationBar.style&&["default","float"].indexOf(e.navigationBar.type)>-1&&(t=ne),e.isTabBar){const e=Zv();e.shown&&(n=parseInt(e.height))}var o;Gu({"--window-top":(o=t,sm?`calc(${o}px + ${sm}(safe-area-inset-top))`:`${o}px`),"--window-bottom":cm(n)})}(t),function(e){const t="nvue-dir-"+__uniConfig.nvue["flex-direction"];e.isNVue?(document.body.setAttribute("nvue",""),document.body.setAttribute(t,"")):(document.body.removeAttribute("nvue"),document.body.removeAttribute(t))}(t),function(e,t){document.removeEventListener("touchmove",td),wm&&document.removeEventListener("scroll",wm);if(t.disableScroll)return document.addEventListener("touchmove",td);const{onPageScroll:n,onReachBottom:o}=e,r="transparent"===t.navigationBar.type;if(!n&&!o&&!r)return;const i={},a=e.proxy.$page.id;(n||r)&&(i.onPageScroll=function(e,t,n){return o=>{t&&Fb.publishHandler(ke,{scrollTop:o},e),n&&Fb.emit(e+"."+ke,{scrollTop:o})}}(a,n,r));o&&(i.onReachBottomDistance=t.onReachBottomDistance||oe,i.onReachBottom=()=>Fb.publishHandler(Te,{},a));wm=rd(i),requestAnimationFrame((()=>document.addEventListener("scroll",wm)))}(e,t)}function Mm(e){const t=Cm(e);t&&function(e){const t=document.querySelector("uni-page-body");t&&t.setAttribute(e,"")}(t)}function Cm(e){return e.type.__scopeId}let km,wm;function Tm(e){const t=Pl({history:Im(),strict:!!__uniConfig.router.strict,routes:__uniRoutes,scrollBehavior:Sm});e.router=t,e.use(t)}const Sm=(e,t,n)=>{if(n)return n};function Im(){let{routerBase:e}=__uniConfig.router;"/"===e&&(e="");const t=Lc(e);return t.listen(((e,t,n)=>{"back"===n.direction&&function(e=1){const t=pm(),n=t.length-1,o=n-e;for(let r=n;r>o;r--){const e=t[r].$page;hm(mm(e.path,e.id),!1)}}(Math.abs(n.delta))})),t}const Em={install(e){jv(e),md(e),Ed(e),e.config.warnHandler||(e.config.warnHandler=Dm),Tm(e)}};function Dm(e,t,n){if(t){if("PageMetaHead"===t.$.type.name)return;const e=t.$.parent;if(e&&"PageMeta"===e.type.name)return}const o=[`[Vue warn]: ${e}`];n.length&&o.push("\n",n),console.warn(...o)}const Am={class:"uni-async-loading"},Lm=Zi("i",{class:"uni-loading"},null,-1),Rm=xd({name:"AsyncLoading",render:()=>(Fi(),ji("div",Am,[Lm]))});function Om(){window.location.reload()}const xm=xd({name:"AsyncError",setup(){$l();const{t:e}=zl();return()=>Zi("div",{class:"uni-async-error",onClick:Om},[e("uni.async.error")],8,["onClick"])}});let Nm;function Pm(){return Nm}function Um(e){Nm=e,Object.defineProperty(Nm.$.ctx,"$children",{get:()=>pm().map((e=>e.$vm))});const t=Nm.$.appContext.app;t.component(Rm.name)||t.component(Rm.name,Rm),t.component(xm.name)||t.component(xm.name,xm),function(e){e.$vm=e,e.$mpType="app";const t=qn(zl().getLocale());Object.defineProperty(e,"$locale",{get:()=>t.value,set(e){t.value=e}})}(Nm),function(e,t){const n=e.$options||{};n.globalData=M(n.globalData||{},t),Object.defineProperty(e,"globalData",{get:()=>n.globalData,set(e){n.globalData=e}})}(Nm),Sd(),Mu()}function Gm(e,{clone:t,init:n,setup:o,before:r}){t&&(e=M({},e)),r&&r(e);const i=e.setup;return e.setup=(e,t)=>{const r=da();n(r.proxy);const a=o(r);if(i)return i(a||e,t)},e}function Bm(e,t){return e&&(e.__esModule||"Module"===e[Symbol.toStringTag])?Gm(e.default,t):Gm(e,t)}function Fm(e){return Bm(e,{clone:!0,init:vm,setup(e){e.$pageInstance=e;const t=Yv(),n=ot(t.query);e.attrs.__pageQuery=n,e.proxy.$page.options=n;const o=Wv();var r,i,a;return br((()=>{bm(e,o)})),Mr((()=>{Mm(e);const{onReady:n}=e;n&&K(n),zm(t)})),dr((()=>{if(!e.__isVisible){bm(e,o),e.__isVisible=!0;const{onShow:n}=e;n&&K(n),po((()=>{zm(t)}))}}),"ba",r),function(e,t){dr(e,"bda",t)}((()=>{if(e.__isVisible&&!e.__isUnload){e.__isVisible=!1;const{onHide:t}=e;t&&K(t)}})),i=o.id,Fb.subscribe(au(i,nu),a?a(cu):cu),wr((()=>{!function(e){Fb.unsubscribe(au(e,nu)),Object.keys(iu).forEach((t=>{0===t.indexOf(e+".")&&delete iu[t]}))}(o.id)})),n}})}function qm(){const{windowWidth:e,windowHeight:t,screenWidth:n,screenHeight:o}=k_(),r=90===Math.abs(Number(window.orientation))?"landscape":"portrait";qb.emit(Me,{deviceOrientation:r,size:{windowWidth:e,windowHeight:t,screenWidth:n,screenHeight:o}})}function Vm(e){U(e.data)&&e.data.type===le&&qb.emit(Ge,e.data.data,e.data.pageId)}function Hm(){const{emit:e}=qb;"visible"===document.visibilityState?e(Pe,M({},Hf)):e(Ue)}function zm(e){const{tabBarText:t,tabBarIndex:n,route:o}=e.meta;t&&ed("onTabItemTap",{index:n,text:t,pagePath:o})}function jm(e){e=e>0&&e<1/0?e:0;const t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60),r=(t<10?"0":"")+t;let i=(n<10?"0":"")+n+":"+((o<10?"0":"")+o);return"00"!==r&&(i=r+":"+i),i}function $m(e,t,n){const o=In({gestureType:"none",volumeOld:0,volumeNew:0,currentTimeOld:0,currentTimeNew:0}),r={x:0,y:0};return{state:o,onTouchstart:function(e){const t=e.targetTouches[0];r.x=t.pageX,r.y=t.pageY,o.gestureType="none",o.volumeOld=0,o.currentTimeOld=o.currentTimeNew=0},onTouchmove:function(i){function a(){i.stopPropagation(),i.preventDefault()}n.fullscreen&&a();const s=o.gestureType;if("stop"===s)return;const c=i.targetTouches[0],l=c.pageX,u=c.pageY,d=r,p=t.value;if("progress"===s?function(e){const n=t.value,r=n.duration;let i=e/600*r+o.currentTimeOld;i<0?i=0:i>r&&(i=r);o.currentTimeNew=i}(l-d.x):"volume"===s&&function(e){const n=t.value,r=o.volumeOld;let i;"number"==typeof r&&(i=r-e/200,i<0?i=0:i>1&&(i=1),n.volume=i,o.volumeNew=i)}(u-d.y),"none"===s)if(Math.abs(l-d.x)>Math.abs(u-d.y)){if(!e.enableProgressGesture)return void(o.gestureType="stop");o.gestureType="progress",o.currentTimeOld=o.currentTimeNew=p.currentTime,n.fullscreen||a()}else{if(!e.pageGesture)return void(o.gestureType="stop");o.gestureType="volume",o.volumeOld=p.volume,n.fullscreen||a()}},onTouchend:function(e){const n=t.value;"none"!==o.gestureType&&"stop"!==o.gestureType&&(e.stopPropagation(),e.preventDefault()),"progress"===o.gestureType&&o.currentTimeOld!==o.currentTimeNew&&(n.currentTime=o.currentTimeNew),o.gestureType="none"}}}function Wm(e,t,n,o,r,i,a){const s={play:e,pause:t,seek:n,sendDanmu:o,playbackRate:r,requestFullScreen:i,exitFullScreen:a};Uv(((e,t)=>{let n;switch(e){case"seek":n=t.position;break;case"sendDanmu":n=t;break;case"playbackRate":n=t.rate}e in s&&s[e](n)}),function(e){const t=$u(),n=da().proxy,o=n.$options.name.toLowerCase(),r=e||n.id||"context"+Gv++;return Mr((()=>{n.$el.__uniContextInfo={id:r,type:o,page:t}})),`${o}.${r}`}(),!0)}const Km=Od({name:"Video",props:{id:{type:String,default:""},src:{type:String,default:""},duration:{type:[Number,String],default:""},controls:{type:[Boolean,String],default:!0},danmuList:{type:Array,default:()=>[]},danmuBtn:{type:[Boolean,String],default:!1},enableDanmu:{type:[Boolean,String],default:!1},autoplay:{type:[Boolean,String],default:!1},loop:{type:[Boolean,String],default:!1},muted:{type:[Boolean,String],default:!1},objectFit:{type:String,default:"contain"},poster:{type:String,default:""},direction:{type:[String,Number],default:""},showProgress:{type:Boolean,default:!0},initialTime:{type:[String,Number],default:0},showFullscreenBtn:{type:[Boolean,String],default:!0},pageGesture:{type:[Boolean,String],default:!1},enableProgressGesture:{type:[Boolean,String],default:!0},showPlayBtn:{type:[Boolean,String],default:!0},showCenterPlayBtn:{type:[Boolean,String],default:!0}},emits:["fullscreenchange","progress","loadedmetadata","waiting","error","play","pause","ended","timeupdate"],setup(e,{emit:t,attrs:n,slots:o}){const r=qn(null),i=qn(null),a=Bd(r,t),{state:s}=mg(),{$attrs:c}=Ag({excludeListeners:!0}),{t:l}=zl();eu();const{videoRef:u,state:d,play:p,pause:h,seek:f,playbackRate:g,toggle:v,onDurationChange:m,onLoadedMetadata:_,onProgress:y,onWaiting:b,onVideoError:M,onPlay:C,onPause:k,onEnded:w,onTimeUpdate:S}=function(e,t,n){const o=qn(null),r=Ma((()=>Xd(e.src))),i=In({start:!1,src:r,playing:!1,currentTime:0,duration:0,progress:0,buffered:0});function a(e){const t=e.target,n=t.buffered;n.length&&(i.buffered=n.end(n.length-1)/t.duration*100)}return Bo((()=>r.value),(()=>{i.playing=!1,i.currentTime=0})),Bo((()=>i.buffered),(e=>{n("progress",{},{buffered:e})})),{videoRef:o,state:i,play:function(){const e=o.value;i.start=!0,e.play()},pause:function(){o.value.pause()},seek:function(e){const t=o.value;"number"!=typeof(e=Number(e))||isNaN(e)||(t.currentTime=e)},playbackRate:function(e){o.value.playbackRate=e},toggle:function(){const e=o.value;i.playing?e.pause():e.play()},onDurationChange:function({target:e}){i.duration=e.duration},onLoadedMetadata:function(t){const o=Number(e.initialTime)||0,r=t.target;o>0&&(r.currentTime=o),n("loadedmetadata",t,{width:r.videoWidth,height:r.videoHeight,duration:r.duration}),a(t)},onProgress:a,onWaiting:function(e){n("waiting",e,{})},onVideoError:function(e){i.playing=!1,n("error",e,{})},onPlay:function(e){i.start=!0,i.playing=!0,n("play",e,{})},onPause:function(e){i.playing=!1,n("pause",e,{})},onEnded:function(e){i.playing=!1,n("ended",e,{})},onTimeUpdate:function(e){const t=e.target,o=i.currentTime=t.currentTime;n("timeupdate",e,{currentTime:o,duration:t.duration})}}}(e,0,a),{state:I,danmuRef:E,updateDanmu:D,toggleDanmu:A,sendDanmu:L}=function(e,t){const n=qn(null),o=In({enable:Boolean(e.enableDanmu)});let r={time:0,index:-1};const i=T(e.danmuList)?JSON.parse(JSON.stringify(e.danmuList)):[];function a(e){const t=document.createElement("p");t.className="uni-video-danmu-item",t.innerText=e.text;let o=`bottom: ${100*Math.random()}%;color: ${e.color};`;t.setAttribute("style",o),n.value.appendChild(t),setTimeout((function(){o+="left: 0;-webkit-transform: translateX(-100%);transform: translateX(-100%);",t.setAttribute("style",o),setTimeout((function(){t.remove()}),4e3)}),17)}return i.sort((function(e,t){return(e.time||0)-(t.time||0)})),{state:o,danmuRef:n,updateDanmu:function(e){const n=e.target.currentTime,s=r,c={time:n,index:s.index};if(n>s.time)for(let r=s.index+1;r<i.length;r++){const e=i[r];if(!(n>=(e.time||0)))break;c.index=r,t.playing&&o.enable&&a(e)}else if(n<s.time)for(let t=s.index-1;t>-1&&n<=(i[t].time||0);t--)c.index=t-1;r=c},toggleDanmu:function(){o.enable=!o.enable},sendDanmu:function(e){i.splice(r.index+1,0,{text:String(e.text),color:e.color,time:t.currentTime||0})}}}(e,d),{state:R,onFullscreenChange:O,emitFullscreenChange:x,toggleFullscreen:N,requestFullScreen:P,exitFullScreen:U}=function(e,t,n,o,r){const i=In({fullscreen:!1}),a=/^Apple/.test(navigator.vendor);function s(t){i.fullscreen=t,e("fullscreenchange",{},{fullScreen:t,direction:"vertical"})}function c(e){const i=r.value,c=t.value,l=n.value;let u;e?!document.fullscreenEnabled&&!document.webkitFullscreenEnabled||a&&!o.userAction?l.webkitEnterFullScreen?l.webkitEnterFullScreen():(u=!0,c.remove(),c.classList.add("uni-video-type-fullscreen"),document.body.appendChild(c)):c[document.fullscreenEnabled?"requestFullscreen":"webkitRequestFullscreen"]():document.fullscreenEnabled||document.webkitFullscreenEnabled?document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen():l.webkitExitFullScreen?l.webkitExitFullScreen():(u=!0,c.remove(),c.classList.remove("uni-video-type-fullscreen"),i.appendChild(c)),u&&s(e)}function l(){c(!1)}return wr(l),{state:i,onFullscreenChange:function(e,t){t&&document.fullscreenEnabled||s(!(!document.fullscreenElement&&!document.webkitFullscreenElement))},emitFullscreenChange:s,toggleFullscreen:c,requestFullScreen:function(){c(!0)},exitFullScreen:l}}(a,i,u,s,r),{state:G,onTouchstart:B,onTouchend:F,onTouchmove:q}=$m(e,u,R),{state:V,progressRef:H,ballRef:z,clickProgress:j,toggleControls:$}=function(e,t,n){const o=qn(null),r=qn(null),i=Ma((()=>e.showCenterPlayBtn&&!t.start)),a=qn(!0),s=Ma((()=>!i.value&&e.controls&&a.value)),c=In({touching:!1,controlsTouching:!1,centerPlayBtnShow:i,controlsShow:s,controlsVisible:a});let l;function u(){l=setTimeout((()=>{c.controlsVisible=!1}),3e3)}function d(){l&&(clearTimeout(l),l=null)}return wr((()=>{l&&clearTimeout(l)})),Bo((()=>c.controlsShow&&t.playing&&!c.controlsTouching),(e=>{e?u():d()})),Bo([()=>t.currentTime,()=>{e.duration}],(function(){c.touching||(t.progress=t.currentTime/t.duration*100)})),Mr((()=>{const e=Qe(!1);let i,a,s,l=!0;const u=r.value;function d(e){const n=e.targetTouches[0],r=n.pageX,c=n.pageY;if(l&&Math.abs(r-i)<Math.abs(c-a))return void p(e);l=!1;const u=o.value.offsetWidth;let d=s+(r-i)/u*100;d<0?d=0:d>100&&(d=100),t.progress=d,e.preventDefault(),e.stopPropagation()}function p(o){c.controlsTouching=!1,c.touching&&(u.removeEventListener("touchmove",d,e),l||(o.preventDefault(),o.stopPropagation(),n(t.duration*t.progress/100)),c.touching=!1)}u.addEventListener("touchstart",(n=>{c.controlsTouching=!0;const o=n.targetTouches[0];i=o.pageX,a=o.pageY,s=t.progress,l=!0,c.touching=!0,u.addEventListener("touchmove",d,e)})),u.addEventListener("touchend",p),u.addEventListener("touchcancel",p)})),{state:c,progressRef:o,ballRef:r,clickProgress:function(e){const r=o.value;let i=e.target,a=e.offsetX;for(;i&&i!==r;)a+=i.offsetLeft,i=i.parentNode;const s=r.offsetWidth;let c=0;a>=0&&a<=s&&(c=a/s,n(t.duration*c))},toggleControls:function(){c.controlsVisible=!c.controlsVisible},autoHideStart:u,autoHideEnd:d}}(e,d,f);return Wm(p,h,f,L,g,P,U),()=>Zi("uni-video",{ref:r,id:e.id},[Zi("div",{ref:i,class:"uni-video-container",onTouchstart:B,onTouchend:F,onTouchmove:q,onFullscreenchange:Ps(O,["stop"]),onWebkitfullscreenchange:Ps((e=>O(e,!0)),["stop"])},[Zi("video",aa({ref:u,style:{"object-fit":e.objectFit},muted:!!e.muted,loop:!!e.loop,src:d.src,poster:e.poster,autoplay:!!e.autoplay},c.value,{class:"uni-video-video","webkit-playsinline":!0,playsinline:!0,onClick:$,onDurationchange:m,onLoadedmetadata:_,onProgress:y,onWaiting:b,onError:M,onPlay:C,onPause:k,onEnded:w,onTimeupdate:e=>{S(e),D(e)},onWebkitbeginfullscreen:()=>x(!0),onX5videoenterfullscreen:()=>x(!0),onWebkitendfullscreen:()=>x(!1),onX5videoexitfullscreen:()=>x(!1)}),null,16,["muted","loop","src","poster","autoplay","webkit-playsinline","playsinline","onClick","onDurationchange","onLoadedmetadata","onProgress","onWaiting","onError","onPlay","onPause","onEnded","onTimeupdate","onWebkitbeginfullscreen","onX5videoenterfullscreen","onWebkitendfullscreen","onX5videoexitfullscreen"]),Ar(Zi("div",{class:"uni-video-bar uni-video-bar-full",onClick:Ps((()=>{}),["stop"])},[Zi("div",{class:"uni-video-controls"},[Ar(Zi("div",{class:{"uni-video-control-button":!0,"uni-video-control-button-play":!d.playing,"uni-video-control-button-pause":d.playing},onClick:Ps(v,["stop"])},null,10,["onClick"]),[[Bs,e.showPlayBtn]]),Ar(Zi("div",{class:"uni-video-current-time"},[jm(d.currentTime)],512),[[Bs,e.showProgress]]),Ar(Zi("div",{ref:H,class:"uni-video-progress-container",onClick:Ps(j,["stop"])},[Zi("div",{class:"uni-video-progress"},[Zi("div",{style:{width:d.buffered+"%"},class:"uni-video-progress-buffered"},null,4),Zi("div",{ref:z,style:{left:d.progress+"%"},class:"uni-video-ball"},[Zi("div",{class:"uni-video-inner"},null)],4)])],8,["onClick"]),[[Bs,e.showProgress]]),Ar(Zi("div",{class:"uni-video-duration"},[jm(Number(e.duration)||d.duration)],512),[[Bs,e.showProgress]])]),Ar(Zi("div",{class:{"uni-video-danmu-button":!0,"uni-video-danmu-button-active":I.enable},onClick:Ps(A,["stop"])},[l("uni.video.danmu")],10,["onClick"]),[[Bs,e.danmuBtn]]),Ar(Zi("div",{class:{"uni-video-fullscreen":!0,"uni-video-type-fullscreen":R.fullscreen},onClick:Ps((()=>N(!R.fullscreen)),["stop"])},null,10,["onClick"]),[[Bs,e.showFullscreenBtn]])],8,["onClick"]),[[Bs,V.controlsShow]]),Ar(Zi("div",{ref:E,style:"z-index: 0;",class:"uni-video-danmu"},null,512),[[Bs,d.start&&I.enable]]),V.centerPlayBtnShow&&Zi("div",{class:"uni-video-cover",onClick:Ps((()=>{}),["stop"])},[Zi("div",{class:"uni-video-cover-play-button",onClick:Ps(p,["stop"])},null,8,["onClick"]),Zi("p",{class:"uni-video-cover-duration"},[jm(Number(e.duration)||d.duration)])],8,["onClick"]),Zi("div",{class:{"uni-video-toast":!0,"uni-video-toast-volume":"volume"===G.gestureType}},[Zi("div",{class:"uni-video-toast-title"},[l("uni.video.volume")]),Zi("svg",{class:"uni-video-toast-icon",width:"200px",height:"200px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[Zi("path",{d:"M475.400704 201.19552l0 621.674496q0 14.856192-10.856448 25.71264t-25.71264 10.856448-25.71264-10.856448l-190.273536-190.273536-149.704704 0q-14.856192 0-25.71264-10.856448t-10.856448-25.71264l0-219.414528q0-14.856192 10.856448-25.71264t25.71264-10.856448l149.704704 0 190.273536-190.273536q10.856448-10.856448 25.71264-10.856448t25.71264 10.856448 10.856448 25.71264zm219.414528 310.837248q0 43.425792-24.28416 80.851968t-64.2816 53.425152q-5.71392 2.85696-14.2848 2.85696-14.856192 0-25.71264-10.570752t-10.856448-25.998336q0-11.999232 6.856704-20.284416t16.570368-14.2848 19.427328-13.142016 16.570368-20.284416 6.856704-32.569344-6.856704-32.569344-16.570368-20.284416-19.427328-13.142016-16.570368-14.2848-6.856704-20.284416q0-15.427584 10.856448-25.998336t25.71264-10.570752q8.57088 0 14.2848 2.85696 39.99744 15.427584 64.2816 53.139456t24.28416 81.137664zm146.276352 0q0 87.422976-48.56832 161.41824t-128.5632 107.707392q-7.428096 2.85696-14.2848 2.85696-15.427584 0-26.284032-10.856448t-10.856448-25.71264q0-22.284288 22.284288-33.712128 31.997952-16.570368 43.425792-25.141248 42.283008-30.855168 65.995776-77.423616t23.712768-99.136512-23.712768-99.136512-65.995776-77.423616q-11.42784-8.57088-43.425792-25.141248-22.284288-11.42784-22.284288-33.712128 0-14.856192 10.856448-25.71264t25.71264-10.856448q7.428096 0 14.856192 2.85696 79.99488 33.712128 128.5632 107.707392t48.56832 161.41824zm146.276352 0q0 131.42016-72.566784 241.41312t-193.130496 161.989632q-7.428096 2.85696-14.856192 2.85696-14.856192 0-25.71264-10.856448t-10.856448-25.71264q0-20.570112 22.284288-33.712128 3.999744-2.285568 12.85632-5.999616t12.85632-5.999616q26.284032-14.2848 46.854144-29.140992 70.281216-51.996672 109.707264-129.705984t39.426048-165.132288-39.426048-165.132288-109.707264-129.705984q-20.570112-14.856192-46.854144-29.140992-3.999744-2.285568-12.85632-5.999616t-12.85632-5.999616q-22.284288-13.142016-22.284288-33.712128 0-14.856192 10.856448-25.71264t25.71264-10.856448q7.428096 0 14.856192 2.85696 120.563712 51.996672 193.130496 161.989632t72.566784 241.41312z"},null)]),Zi("div",{class:"uni-video-toast-value"},[Zi("div",{style:{width:100*G.volumeNew+"%"},class:"uni-video-toast-value-content"},[Zi("div",{class:"uni-video-toast-volume-grids"},[Fr(10,(()=>Zi("div",{class:"uni-video-toast-volume-grids-item"},null)))])],4)])],2),Zi("div",{class:{"uni-video-toast":!0,"uni-video-toast-progress":"progress"===G.gestureType}},[Zi("div",{class:"uni-video-toast-title"},[jm(G.currentTimeNew)," / ",jm(d.duration)])],2),Zi("div",{class:"uni-video-slots"},[o.default&&o.default()])],40,["onTouchstart","onTouchend","onTouchmove","onFullscreenchange","onWebkitfullscreenchange"])],8,["id"])}});let Ym=0;function Xm(e,t,n,o){var r,i=document.createElement("script"),a=t.callback||"callback",s="__uni_jsonp_callback_"+Ym++,c=t.timeout||3e4;function l(){clearTimeout(r),delete window[s],i.remove()}window[s]=e=>{D(n)&&n(e),l()},i.onerror=()=>{D(o)&&o(),l()},r=setTimeout((function(){D(o)&&o(),l()}),c),i.src=e+(e.indexOf("?")>=0?"&":"?")+a+"="+s,document.body.appendChild(i)}var Jm=(e=>(e.QQ="qq",e.GOOGLE="google",e.AMAP="AMap",e.UNKNOWN="",e))(Jm||{});function Zm(){return __uniConfig.qqMapKey?{type:"qq",key:__uniConfig.qqMapKey}:__uniConfig.googleMapKey?{type:"google",key:__uniConfig.googleMapKey}:__uniConfig.aMapKey?{type:"AMap",key:__uniConfig.aMapKey,securityJsCode:__uniConfig.aMapSecurityJsCode,serviceHost:__uniConfig.aMapServiceHost}:{type:"",key:""}}let Qm=!1,e_=!1;const t_=()=>e_?Qm:(e_=!0,Qm="AMap"===Zm().type);function n_(e){function t(){const e=this.div;this.getPanes().floatPane.appendChild(e)}function n(){const e=this.div.parentNode;e&&e.removeChild(this.div)}function o(){const t=this.option;this.Text=new e.Text({text:t.content,anchor:"bottom-center",offset:new e.Pixel(0,t.offsetY-16),style:{padding:(t.padding||8)+"px","line-height":(t.fontSize||14)+"px","border-radius":(t.borderRadius||0)+"px","border-color":`${t.bgColor||"#fff"} transparent transparent`,"background-color":t.bgColor||"#fff","box-shadow":"0 2px 6px 0 rgba(114, 124, 245, .5)","text-align":"center","font-size":(t.fontSize||14)+"px",color:t.color||"#000"},position:t.position});(e.event||e.Event).addListener(this.Text,"click",(()=>{this.callback()})),this.Text.setMap(t.map)}function r(){this.Text&&this.option.map.remove(this.Text)}class i{constructor(e={},i){this.createAMapText=o,this.removeAMapText=r,this.onAdd=t,this.construct=t,this.onRemove=n,this.destroy=n,this.option=e||{};const a=this.visible=this.alwaysVisible="ALWAYS"===e.display;if(t_())this.callback=i,this.visible&&this.createAMapText();else{const t=e.map;this.position=e.position,this.index=1;const n=this.div=document.createElement("div"),o=n.style;o.position="absolute",o.whiteSpace="nowrap",o.transform="translateX(-50%) translateY(-100%)",o.zIndex="1",o.boxShadow=e.boxShadow||"none",o.display=a?"block":"none";const r=this.triangle=document.createElement("div");r.setAttribute("style","position: absolute;white-space: nowrap;border-width: 4px;border-style: solid;border-color: #fff transparent transparent;border-image: initial;font-size: 12px;padding: 0px;background-color: transparent;width: 0px;height: 0px;transform: translate(-50%, 100%);left: 50%;bottom: 0;"),this.setStyle(e),n.appendChild(r),t&&this.setMap(t)}}set onclick(e){this.div.onclick=e}get onclick(){return this.div.onclick}setOption(e){this.option=e,"ALWAYS"===e.display?this.alwaysVisible=this.visible=!0:this.alwaysVisible=!1,t_()?this.visible&&this.createAMapText():(this.setPosition(e.position),this.setStyle(e))}setStyle(e){const t=this.div,n=t.style;t.innerText=e.content||"",n.lineHeight=(e.fontSize||14)+"px",n.fontSize=(e.fontSize||14)+"px",n.padding=(e.padding||8)+"px",n.color=e.color||"#000",n.borderRadius=(e.borderRadius||0)+"px",n.backgroundColor=e.bgColor||"#fff",n.marginTop="-"+((e.top||0)+5)+"px",this.triangle.style.borderColor=`${e.bgColor||"#fff"} transparent transparent`}setPosition(e){this.position=e,this.draw()}draw(){const e=this.getProjection();if(!this.position||!this.div||!e)return;const t=e.fromLatLngToDivPixel(this.position),n=this.div.style;n.left=t.x+"px",n.top=t.y+"px"}changed(){this.div.style.display=this.visible?"block":"none"}}if(!t_()){const t=new(e.OverlayView||e.Overlay);i.prototype.setMap=t.setMap,i.prototype.getMap=t.getMap,i.prototype.getPanes=t.getPanes,i.prototype.getProjection=t.getProjection,i.prototype.map_changed=t.map_changed,i.prototype.set=t.set,i.prototype.get=t.get,i.prototype.setOptions=t.setValues,i.prototype.bindTo=t.bindTo,i.prototype.bindsTo=t.bindsTo,i.prototype.notify=t.notify,i.prototype.setValues=t.setValues,i.prototype.unbind=t.unbind,i.prototype.unbindAll=t.unbindAll,i.prototype.addListener=t.addListener}return i}let o_;const r_={},i_="__map_callback__";function a_(e,t){const n=Zm();if(!n.key)return void console.error("Map key not configured.");const o=r_[n.type]=r_[n.type]||[];if(o_)t(o_);else if(window[n.type]&&window[n.type].maps)o_=t_()?window[n.type]:window[n.type].maps,o_.Callout=o_.Callout||n_(o_),t(o_);else if(o.length)o.push(t);else{o.push(t);const r=window,i=i_+n.type;r[i]=function(){delete r[i],o_=t_()?window[n.type]:window[n.type].maps,o_.Callout=n_(o_),o.forEach((e=>e(o_))),o.length=0},t_()&&function(e){window._AMapSecurityConfig={securityJsCode:e.securityJsCode||"",serviceHost:e.serviceHost||""}}(n);const a=document.createElement("script");let s=s_(n.type);n.type===Jm.QQ&&e.push("geometry"),e.length&&(s+=`libraries=${e.join("%2C")}&`),a.src=`${s}key=${n.key}&callback=${i}`,a.onerror=function(){console.error("Map load failed.")},document.body.appendChild(a)}}const s_=e=>({qq:"https://map.qq.com/api/js?v=2.exp&",google:"https://maps.googleapis.com/maps/api/js?",AMap:"https://webapi.amap.com/maps?v=2.0&"}[e]);const c_=$e((()=>{_h.forEach((e=>{l_.prototype[e]=function(t){D(t)&&this._events[e].push(t)}})),yh.forEach((e=>{l_.prototype[e]=function(t){var n=this._events[e.replace("off","on")],o=n.indexOf(t);o>=0&&n.splice(o,1)}}))}));class l_{constructor(){this._src="";var e=this._audio=new Audio;this._stoping=!1;["src","autoplay","loop","duration","currentTime","paused","volume"].forEach((t=>{Object.defineProperty(this,t,{set:"src"===t?t=>(e.src=Xd(t),this._src=t,t):n=>(e[t]=n,n),get:"src"===t?()=>this._src:()=>e[t]})})),this.startTime=0,Object.defineProperty(this,"obeyMuteSwitch",{set:()=>!1,get:()=>!1}),Object.defineProperty(this,"buffered",{get(){var t=e.buffered;return t.length?t.end(t.length-1):0}}),this._events={},_h.forEach((e=>{this._events[e]=[]})),e.addEventListener("loadedmetadata",(()=>{var t=Number(this.startTime)||0;t>0&&(e.currentTime=t)}));var t=["canplay","pause","seeking","seeked","timeUpdate"];t.concat(["play","ended","error","waiting"]).forEach((n=>{e.addEventListener(n.toLowerCase(),(()=>{if(this._stoping&&t.indexOf(n)>=0)return;const e=`on${n.slice(0,1).toUpperCase()}${n.slice(1)}`;this._events[e].forEach((e=>{e()}))}),!1)})),c_()}play(){this._stoping=!1,this._audio.play()}pause(){this._audio.pause()}stop(){this._stoping=!0,this._audio.pause(),this._audio.currentTime=0,this._events.onStop.forEach((e=>{e()}))}seek(e){this._stoping=!1,"number"!=typeof(e=Number(e))||isNaN(e)||(this._audio.currentTime=e)}destroy(){this.stop()}}const u_=qp(0,(()=>new l_)),d_="__DC_STAT_UUID",p_=navigator.cookieEnabled&&(window.localStorage||window.sessionStorage)||{};let h_;function f_(){if(h_=h_||p_[d_],!h_){h_=Date.now()+""+Math.floor(1e7*Math.random());try{p_[d_]=h_}catch(e){}}return h_}function g_(){if(!0!==__uniConfig.darkmode)return A(__uniConfig.darkmode)?__uniConfig.darkmode:"light";try{return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}catch(e){return"light"}}function v_(){let e,t="0",n="",o="phone";const r=navigator.language;if(Qd){e="iOS";const o=Jd.match(/OS\s([\w_]+)\slike/);o&&(t=o[1].replace(/_/g,"."));const r=Jd.match(/\(([a-zA-Z]+);/);r&&(n=r[1])}else if(Zd){e="Android";const o=Jd.match(/Android[\s/]([\w\.]+)[;\s]/);o&&(t=o[1]);const r=Jd.match(/\((.+?)\)/),i=r?r[1].split(";"):Jd.split(" "),a=[/\bAndroid\b/i,/\bLinux\b/i,/\bU\b/i,/^\s?[a-z][a-z]$/i,/^\s?[a-z][a-z]-[a-z][a-z]$/i,/\bwv\b/i,/\/[\d\.,]+$/,/^\s?[\d\.,]+$/,/\bBrowser\b/i,/\bMobile\b/i];for(let e=0;e<i.length;e++){const t=i[e];if(t.indexOf("Build")>0){n=t.split("Build")[0].trim();break}let o;for(let e=0;e<a.length;e++)if(a[e].test(t)){o=!0;break}if(!o){n=t.trim();break}}}else if(op)n="iPad",e="iOS",o="pad",t=D(window.BigInt)?"14.0":"13.0";else if(ep||tp||np){n="PC",e="PC",o="pc",t="0";let r=Jd.match(/\((.+?)\)/)[1];if(ep){switch(e="Windows",ep[1]){case"5.1":t="XP";break;case"6.0":t="Vista";break;case"6.1":t="7";break;case"6.2":t="8";break;case"6.3":t="8.1";break;case"10.0":t="10"}const n=r&&r.match(/[Win|WOW]([\d]+)/);n&&(t+=` x${n[1]}`)}else if(tp){e="macOS";const n=r&&r.match(/Mac OS X (.+)/)||"";t&&(t=n[1].replace(/_/g,"."),-1!==t.indexOf(";")&&(t=t.split(";")[0]))}else if(np){e="Linux";const n=r&&r.match(/Linux (.*)/)||"";n&&(t=n[1],-1!==t.indexOf(";")&&(t=t.split(";")[0]))}}else e="Other",t="0",o="unknown";const i=`${e} ${t}`,a=e.toLocaleLowerCase();let s="",c=String(function(){const e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Edge")>-1&&!t,o=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);const t=parseFloat(RegExp.$1);return t>6?t:6}return n?-1:o?11:-1}());if("-1"!==c)s="IE";else{const e=["Version","Firefox","Chrome","Edge{0,1}"],t=["Safari","Firefox","Chrome","Edge"];for(let n=0;n<e.length;n++){const o=e[n],r=new RegExp(`(${o})/(\\S*)\\b`);r.test(Jd)&&(s=t[n],c=Jd.match(r)[2])}}let l="portrait";const u=void 0===window.screen.orientation?window.orientation:window.screen.orientation.angle;return l=90===Math.abs(u)?"landscape":"portrait",{deviceBrand:void 0,brand:void 0,deviceModel:n,deviceOrientation:l,model:n,system:i,platform:a,browserName:s.toLocaleLowerCase(),browserVersion:c,language:r,deviceType:o,ua:Jd,osname:e,osversion:t,theme:g_()}}const m_=qp(0,(()=>{const e=window.devicePixelRatio,t=rp(),n=ip(t),o=ap(t,n),r=function(e,t){return e?Math[t?"min":"max"](screen.height,screen.width):screen.height}(t,n),i=sp(o);let a=window.innerHeight;const s=Lu.top,c={left:Lu.left,right:i-Lu.right,top:Lu.top,bottom:a-Lu.bottom,width:i-Lu.left-Lu.right,height:a-Lu.top-Lu.bottom},{top:l,bottom:u}=Pu();return a-=l,a-=u,{windowTop:l,windowBottom:u,windowWidth:i,windowHeight:a,pixelRatio:e,screenWidth:o,screenHeight:r,statusBarHeight:s,safeArea:c,safeAreaInsets:{top:Lu.top,right:Lu.right,bottom:Lu.bottom,left:Lu.left},screenTop:r-a}}));let __,y_=!0;function b_(){y_&&(__=v_())}const M_=qp(0,(()=>{b_();const{deviceBrand:e,deviceModel:t,brand:n,model:o,platform:r,system:i,deviceOrientation:a,deviceType:s}=__;return{brand:n,deviceBrand:e,deviceModel:t,devicePixelRatio:window.devicePixelRatio,deviceId:f_(),deviceOrientation:a,deviceType:s,model:o,platform:r,system:i}})),C_=qp(0,(()=>{b_();const{theme:e,language:t,browserName:n,browserVersion:o}=__;return{appId:__uniConfig.appId,appName:__uniConfig.appName,appVersion:__uniConfig.appVersion,appVersionCode:__uniConfig.appVersionCode,appLanguage:xh?xh():t,enableDebug:!1,hostSDKVersion:void 0,hostPackageName:void 0,hostFontSizeSetting:void 0,hostName:n,hostVersion:o,hostTheme:e,hostLanguage:t,language:t,SDKVersion:"",theme:e,version:""}})),k_=qp(0,(()=>{y_=!0,b_(),y_=!1;const e=m_(),t=M_(),n=C_();y_=!0;const{ua:o,browserName:r,browserVersion:i,osname:a,osversion:s}=__,c=M(e,t,n,{ua:o,browserName:r,browserVersion:i,uniPlatform:"web",uniCompileVersion:__uniConfig.compilerVersion,uniRuntimeVersion:__uniConfig.compilerVersion,fontSizeSetting:void 0,osName:a.toLocaleLowerCase(),osVersion:s,osLanguage:void 0,osTheme:void 0});return delete c.screenTop,delete c.enableDebug,__uniConfig.darkmode||delete c.theme,function(e){let t={};return U(e)&&Object.keys(e).sort().forEach((n=>{const o=n;t[o]=e[o]})),Object.keys(t)?t:e}(c)})),w_=Vp("getSystemInfo",((e,{resolve:t})=>t(k_())));const T_=Vp("getNetworkType",((e,{resolve:t})=>{const n=navigator.connection||navigator.webkitConnection||navigator.mozConnection;let o="unknown";return n?(o=n.type,"cellular"===o&&n.effectiveType?o=n.effectiveType.replace("slow-",""):["none","wifi"].includes(o)||(o="unknown")):!1===navigator.onLine&&(o="none"),t({networkType:o})}));const S_=Vp("setClipboardData",((e,t)=>{return n=void 0,o=[e,t],r=function*({data:e},{resolve:t,reject:n}){try{yield navigator.clipboard.writeText(e),t()}catch(o){!function(e,t,n){const o=document.getElementById("#clipboard");o&&o.remove();const r=document.createElement("textarea");r.id="#clipboard",r.style.position="fixed",r.style.top="-9999px",r.style.zIndex="-9999",document.body.appendChild(r),r.value=e,r.select(),r.setSelectionRange(0,r.value.length);const i=document.execCommand("Copy",!1);r.blur(),i?t():n()}(e,t,n)}},new Promise(((e,t)=>{var i=e=>{try{s(r.next(e))}catch(gS){t(gS)}},a=e=>{try{s(r.throw(e))}catch(gS){t(gS)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,a);s((r=r.apply(n,o)).next())}));var n,o,r}),0,jh);const I_=qp(0,((e,t)=>{const n=typeof t,o="string"===n?t:JSON.stringify({type:n,data:t});localStorage.setItem(e,o)})),E_=Vp("setStorage",(({key:e,data:t},{resolve:n,reject:o})=>{try{I_(e,t),n()}catch(r){o(r.message)}}));function D_(e){const t=localStorage&&localStorage.getItem(e);if(!A(t))throw new Error("data not found");let n=t;try{const e=function(e){const t=["object","string","number","boolean","undefined"];try{const n=A(e)?JSON.parse(e):e,o=n.type;if(t.indexOf(o)>=0){const e=Object.keys(n);if(2===e.length&&"data"in n){if(typeof n.data===o)return n.data;if("object"===o&&/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}\.\d{3}Z$/.test(n.data))return new Date(n.data)}else if(1===e.length)return""}}catch(n){}}(JSON.parse(t));void 0!==e&&(n=e)}catch(o){}return n}const A_=qp(0,(e=>{try{return D_(e)}catch(t){return""}})),L_=qp(0,(e=>{localStorage&&localStorage.removeItem(e)})),R_=Vp($h,(({key:e},{resolve:t})=>{L_(e),t()})),O_=qp(0,(()=>{localStorage&&localStorage.clear()})),x_=qp(0,(()=>{const e=localStorage&&localStorage.length||0,t=[];let n=0;for(let o=0;o<e;o++){const e=localStorage.key(o),r=localStorage.getItem(e)||"";n+=e.length+r.length,"uni-storage-keys"!==e&&t.push(e)}return{keys:t,currentSize:Math.ceil(2*n/1024),limitSize:Number.MAX_VALUE}})),N_=Vp("hideKeyboard",((e,{resolve:t,reject:n})=>{const o=document.activeElement;!o||"TEXTAREA"!==o.tagName&&"INPUT"!==o.tagName||(o.blur(),t())}));const P_=Vp("getImageInfo",(({src:e},{resolve:t,reject:n})=>{const o=new Image;o.onload=function(){t({width:o.naturalWidth,height:o.naturalHeight,path:0===e.indexOf("/")?window.location.protocol+"//"+window.location.host+e:e})},o.onerror=function(){n()},o.src=e}),0,Qh),U_={image:{jpg:"jpeg",jpe:"jpeg",pbm:"x-portable-bitmap",pgm:"x-portable-graymap",pnm:"x-portable-anymap",ppm:"x-portable-pixmap",psd:"vnd.adobe.photoshop",pic:"x-pict",rgb:"x-rgb",svg:"svg+xml",svgz:"svg+xml",tif:"tiff",xif:"vnd.xiff",wbmp:"vnd.wap.wbmp",wdp:"vnd.ms-photo",xbm:"x-xbitmap",ico:"x-icon"},video:{"3g2":"3gpp2","3gp":"3gpp",avi:"x-msvideo",f4v:"x-f4v",flv:"x-flv",jpgm:"jpm",jpgv:"jpeg",m1v:"mpeg",m2v:"mpeg",mpe:"mpeg",mpg:"mpeg",mpg4:"mpeg",m4v:"x-m4v",mkv:"x-matroska",mov:"quicktime",qt:"quicktime",movie:"x-sgi-movie",mp4v:"mp4",ogv:"ogg",smv:"x-smv",wm:"x-ms-wm",wmv:"x-ms-wmv",wmx:"x-ms-wmx",wvx:"x-ms-wvx"}};function G_({count:e,sourceType:t,type:n,extension:o}){const r=document.createElement("input");return r.type="file",function(e,t){for(const n in t)e.style[n]=t[n]}(r,{position:"absolute",visibility:"hidden",zIndex:"-999",width:"0",height:"0",top:"0",left:"0"}),r.accept=o.map((e=>{if("all"!==n){const t=e.replace(".","");return`${n}/${U_[n][t]||t}`}return function(){const e=window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i);return!(!e||"micromessenger"!==e[0])}()?".":0===e.indexOf(".")?e:`.${e}`})).join(","),e&&e>1&&(r.multiple=!0),"all"!==n&&t instanceof Array&&1===t.length&&"camera"===t[0]&&r.setAttribute("capture","camera"),r}gg();let B_=null;const F_=Vp("chooseFile",(({count:e,sourceType:t,type:n,extension:o},{resolve:r,reject:i})=>{Jl();const{t:a}=zl();B_&&(document.body.removeChild(B_),B_=null),B_=G_({count:e,sourceType:t,type:n,extension:o}),document.body.appendChild(B_),B_.addEventListener("change",(function(t){const n=t.target,o=[];if(n&&n.files){const t=n.files.length;for(let r=0;r<t;r++){const t=n.files[r];let i;Object.defineProperty(t,"path",{get:()=>(i=i||Ff(t),i)}),r<e&&o.push(t)}}r({get tempFilePaths(){return o.map((({path:e})=>e))},tempFiles:o})})),B_.click(),vg()||console.warn(a("uni.chooseFile.notUserActivation"))}),0,Zh);let q_=null;const V_=Vp("chooseImage",(({count:e,sourceType:t,extension:n},{resolve:o,reject:r})=>{Jl();const{t:i}=zl();q_&&(document.body.removeChild(q_),q_=null),q_=G_({count:e,sourceType:t,extension:n,type:"image"}),document.body.appendChild(q_),q_.addEventListener("change",(function(t){const n=t.target,r=[];if(n&&n.files){const t=n.files.length;for(let o=0;o<t;o++){const t=n.files[o];let i;Object.defineProperty(t,"path",{get:()=>(i=i||Ff(t),i)}),o<e&&r.push(t)}}o({get tempFilePaths(){return r.map((({path:e})=>e))},tempFiles:r})})),q_.click(),vg()||console.warn(i("uni.chooseFile.notUserActivation"))}),0,Yh),H_={esc:["Esc","Escape"],enter:["Enter"]},z_=Object.keys(H_);function j_(){const e=qn(""),t=qn(!1),n=n=>{if(t.value)return;const o=z_.find((e=>-1!==H_[e].indexOf(n.key)));o&&(e.value=o),po((()=>e.value=""))};return Mr((()=>{document.addEventListener("keyup",n)})),wr((()=>{document.removeEventListener("keyup",n)})),{key:e,disable:t}}const $_=Zi("div",{class:"uni-mask"},null,-1);function W_(e,t,n){return t.onClose=(...e)=>(t.visible=!1,n.apply(null,e)),Hs(er({setup:()=>()=>(Fi(),ji(e,t,null,16))}))}function K_(e){let t=document.getElementById(e);return t||(t=document.createElement("div"),t.id=e,document.body.append(t)),t}function Y_(e,{onEsc:t,onEnter:n}){const o=qn(e.visible),{key:r,disable:i}=j_();return Bo((()=>e.visible),(e=>o.value=e)),Bo((()=>o.value),(e=>i.value=!e)),Uo((()=>{const{value:e}=r;"esc"===e?t&&t():"enter"===e&&n&&n()})),o}let X_=0,J_="";function Z_(e){let t=X_;X_+=e?1:-1,X_=Math.max(0,X_),X_>0?0===t&&(J_=document.body.style.overflow,document.body.style.overflow="hidden"):(document.body.style.overflow=J_,J_="")}const Q_=xd({name:"ImageView",props:{src:{type:String,default:""}},setup(e){const t=In({direction:"none"});let n=1,o=0,r=0,i=0,a=0;function s({detail:e}){n=e.scale}function c(e){const t=e.target.getBoundingClientRect();o=t.width,r=t.height}function l(e){const t=e.target.getBoundingClientRect();i=t.width,a=t.height,d(e)}function u(e){const s=n*o>i,c=n*r>a;t.direction=s&&c?"all":s?"horizontal":c?"vertical":"none",d(e)}function d(e){"all"!==t.direction&&"horizontal"!==t.direction||e.stopPropagation()}return()=>{const n={position:"absolute",left:"0",top:"0",width:"100%",height:"100%"};return Zi(Rg,{style:n,onTouchstart:Gd(l),onTouchmove:Gd(d),onTouchend:Gd(u)},{default:()=>[Zi(jg,{style:n,direction:t.direction,inertia:!0,scale:!0,"scale-min":"1","scale-max":"4",onScale:s},{default:()=>[Zi("img",{src:e.src,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxHeight:"100%",maxWidth:"100%"},onLoad:c},null,40,["src","onLoad"])]},8,["style","direction","inertia","scale","onScale"])]},8,["style","onTouchstart","onTouchmove","onTouchend"])}}});function ey(e){let t="number"==typeof e.current?e.current:e.urls.indexOf(e.current);return t=t<0?0:t,t}const ty=xd({name:"ImagePreview",props:{urls:{type:Array,default:()=>[]},current:{type:[Number,String],default:0}},emits:["close"],setup(e,{emit:t}){Mr((()=>Z_(!0))),Tr((()=>Z_(!1)));const n=qn(null),o=qn(ey(e));let r;function i(){r||po((()=>{t("close")}))}function a(e){o.value=e.detail.current}Bo((()=>e.current),(()=>o.value=ey(e))),Mr((()=>{const e=n.value;let t=0,o=0;e.addEventListener("mousedown",(e=>{r=!1,t=e.clientX,o=e.clientY})),e.addEventListener("mouseup",(e=>{(Math.abs(e.clientX-t)>20||Math.abs(e.clientY-o)>20)&&(r=!0)}))}));const s={position:"absolute","box-sizing":"border-box",top:"0",right:"0",width:"60px",height:"44px",padding:"6px","line-height":"32px","font-size":"26px",color:"white","text-align":"center",cursor:"pointer"};return()=>{let t;return Zi("div",{ref:n,style:{display:"block",position:"fixed",left:"0",top:"0",width:"100%",height:"100%",zIndex:999,background:"rgba(0,0,0,0.8)"},onClick:i},[Zi(kv,{navigation:"auto",current:o.value,onChange:a,"indicator-dots":!1,autoplay:!1,style:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"}},(r=t=e.urls.map((e=>Zi(Tv,null,{default:()=>[Zi(Q_,{src:e},null,8,["src"])]}))),"function"==typeof r||"[object Object]"===Object.prototype.toString.call(r)&&!$i(r)?t:{default:()=>[t],_:1}),8,["current","onChange"]),Zi("div",{style:s},[ju("M17.25 16.156l7.375-7.313q0.281-0.281 0.281-0.641t-0.281-0.641q-0.25-0.25-0.625-0.25t-0.625 0.25l-7.375 7.344-7.313-7.344q-0.25-0.25-0.625-0.25t-0.625 0.25q-0.281 0.25-0.281 0.625t0.281 0.625l7.313 7.344-7.375 7.344q-0.281 0.25-0.281 0.625t0.281 0.625q0.125 0.125 0.281 0.188t0.344 0.063q0.156 0 0.328-0.063t0.297-0.188l7.375-7.344 7.375 7.406q0.125 0.156 0.297 0.219t0.328 0.063q0.188 0 0.344-0.078t0.281-0.203q0.281-0.25 0.281-0.609t-0.281-0.641l-7.375-7.406z","#ffffff",26)],4)],8,["onClick"]);var r}}});let ny,oy=null;const ry=()=>{oy=null,po((()=>{null==ny||ny.unmount(),ny=null}))},iy=Vp("previewImage",((e,{resolve:t})=>{oy?M(oy,e):(oy=In(e),po((()=>{ny=W_(ty,oy,ry),ny.mount(K_("u-a-p"))}))),t()}),0,ef);let ay=null;const sy=Vp("chooseVideo",(({sourceType:e,extension:t},{resolve:n,reject:o})=>{Jl();const{t:r}=zl();ay&&(document.body.removeChild(ay),ay=null),ay=G_({sourceType:e,extension:t,type:"video"}),document.body.appendChild(ay),ay.addEventListener("change",(function(e){const t=e.target.files[0];let o="";const r={tempFilePath:o,tempFile:t,size:t.size,duration:0,width:0,height:0,name:t.name};Object.defineProperty(r,"tempFilePath",{get(){return o=o||Ff(this.tempFile),o}});const i=document.createElement("video");if(void 0!==i.onloadedmetadata){const e=Ff(t);i.onloadedmetadata=function(){qf(e),n(M(r,{duration:i.duration||0,width:i.videoWidth||0,height:i.videoHeight||0}))},setTimeout((()=>{i.onloadedmetadata=null,qf(e),n(r)}),300),i.src=e}else n(r)})),ay.click(),vg()||console.warn(r("uni.chooseFile.notUserActivation"))}),0,Xh),cy=Fp("request",(({url:e,data:t,header:n,method:o,dataType:r,responseType:i,withCredentials:a,timeout:s=__uniConfig.networkTimeout.request},{resolve:c,reject:l})=>{let u=null;const d=function(e){const t=Object.keys(e).find((e=>"content-type"===e.toLowerCase()));if(!t)return;const n=e[t];if(0===n.indexOf("application/json"))return"json";if(0===n.indexOf("application/x-www-form-urlencoded"))return"urlencoded";return"string"}(n);if("GET"!==o)if(A(t)||t instanceof ArrayBuffer)u=t;else if("json"===d)try{u=JSON.stringify(t)}catch(g){u=t.toString()}else if("urlencoded"===d){const e=[];for(const n in t)w(t,n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));u=e.join("&")}else u=t.toString();const p=new XMLHttpRequest,h=new ly(p);p.open(o,e);for(const v in n)w(n,v)&&p.setRequestHeader(v,n[v]);const f=setTimeout((function(){p.onload=p.onabort=p.onerror=null,h.abort(),l("timeout")}),s);return p.responseType=i,p.onload=function(){clearTimeout(f);const e=p.status;let t="text"===i?p.responseText:p.response;if("text"===i&&"json"===r)try{t=JSON.parse(t)}catch(g){}c({data:t,statusCode:e,header:uy(p.getAllResponseHeaders()),cookies:[]})},p.onabort=function(){clearTimeout(f),l("abort")},p.onerror=function(){clearTimeout(f),l()},p.withCredentials=a,p.send(u),h}),0,rf);class ly{constructor(e){this._xhr=e}abort(){this._xhr&&(this._xhr.abort(),delete this._xhr)}onHeadersReceived(e){throw new Error("Method not implemented.")}offHeadersReceived(e){throw new Error("Method not implemented.")}}function uy(e){const t={};return e.split(te).forEach((e=>{const n=e.match(/(\S+\s*):\s*(.*)/);n&&3===n.length&&(t[n[1]]=n[2])})),t}class dy{constructor(e){this._callbacks=[],this._xhr=e}onProgressUpdate(e){D(e)&&this._callbacks.push(e)}offProgressUpdate(e){const t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}abort(){this._isAbort=!0,this._xhr&&(this._xhr.abort(),delete this._xhr)}onHeadersReceived(e){throw new Error("Method not implemented.")}offHeadersReceived(e){throw new Error("Method not implemented.")}}const py=Fp("uploadFile",(({url:e,file:t,filePath:n,name:o,files:r,header:i,formData:a,timeout:s=__uniConfig.networkTimeout.uploadFile},{resolve:c,reject:l})=>{var u=new dy;return T(r)&&r.length||(r=[{name:o,file:t,uri:n}]),Promise.all(r.map((({file:e,uri:t})=>e instanceof Blob?Promise.resolve(Bf(e)):Gf(t)))).then((function(t){var n,o=new XMLHttpRequest,d=new FormData;Object.keys(a).forEach((e=>{d.append(e,a[e])})),Object.values(r).forEach((({name:e},n)=>{const o=t[n];d.append(e||"file",o,o.name||`file-${Date.now()}`)})),o.open("POST",e),Object.keys(i).forEach((e=>{o.setRequestHeader(e,i[e])})),o.upload.onprogress=function(e){u._callbacks.forEach((t=>{var n=e.loaded,o=e.total;t({progress:Math.round(n/o*100),totalBytesSent:n,totalBytesExpectedToSend:o})}))},o.onerror=function(){clearTimeout(n),l()},o.onabort=function(){clearTimeout(n),l("abort")},o.onload=function(){clearTimeout(n);const e=o.status;c({statusCode:e,data:o.responseText||o.response})},u._isAbort?l("abort"):(n=setTimeout((function(){o.upload.onprogress=o.onload=o.onabort=o.onerror=null,u.abort(),l("timeout")}),s),o.send(d),u._xhr=o)})).catch((()=>{setTimeout((()=>{l("file error")}),0)})),u}),0,af),hy=Vp("getLocation",(({type:e,altitude:t,highAccuracyExpireTime:n,isHighAccuracy:o},{resolve:r,reject:i})=>{const a=Zm();new Promise(((e,r)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>e({coords:t.coords})),r,{enableHighAccuracy:o||t,timeout:n||1e5}):r(new Error("device nonsupport geolocation"))})).catch((e=>new Promise(((t,n)=>{a.type===Jm.QQ?Xm(`https://apis.map.qq.com/ws/location/v1/ip?output=jsonp&key=${a.key}`,{callback:"callback"},(e=>{if("result"in e&&e.result.location){const n=e.result.location;t({coords:{latitude:n.lat,longitude:n.lng},skip:!0})}else n(new Error(e.message||JSON.stringify(e)))}),(()=>n(new Error("network error")))):a.type===Jm.GOOGLE?cy({method:"POST",url:`https://www.googleapis.com/geolocation/v1/geolocate?key=${a.key}`,success(e){const o=e.data;"location"in o?t({coords:{latitude:o.location.lat,longitude:o.location.lng,accuracy:o.accuracy},skip:!0}):n(new Error(o.error&&o.error.message||JSON.stringify(e)))},fail(){n(new Error("network error"))}}):a.type===Jm.AMAP?a_([],(()=>{window.AMap.plugin("AMap.Geolocation",(()=>{new window.AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4}).getCurrentPosition(((e,o)=>{"complete"===e?t({coords:{latitude:o.position.lat,longitude:o.position.lng,accuracy:o.accuracy},skip:!0}):n(new Error(o.message))}))}))})):n(e)})))).then((({coords:t,skip:n})=>{(function(e,t,n){const o=Zm();return e&&"WGS84"===e.toUpperCase()||["google"].includes(o.type)||n?Promise.resolve(t):"qq"===o.type?new Promise((e=>{Xm(`https://apis.map.qq.com/jsapi?qt=translate&type=1&points=${t.longitude},${t.latitude}&key=${o.key}&output=jsonp&pf=jsapi&ref=jsapi`,{callback:"cb"},(n=>{if("detail"in n&&"points"in n.detail&&n.detail.points.length){const{lng:o,lat:r}=n.detail.points[0];e({longitude:o,latitude:r,altitude:t.altitude,accuracy:t.accuracy,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,speed:t.speed})}else e(t)}),(()=>e(t)))})):"AMap"===o.type?new Promise((e=>{a_([],(()=>{window.AMap.convertFrom([t.longitude,t.latitude],"gps",((n,o)=>{if("ok"===o.info&&o.locations.length){const{lat:n,lng:r}=o.locations[0];e({longitude:r,latitude:n,altitude:t.altitude,accuracy:t.accuracy,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,speed:t.speed})}else e(t)}))}))})):Promise.reject(new Error("translate coordinate system faild"))})(e,t,n).then((e=>{r({latitude:e.latitude,longitude:e.longitude,accuracy:e.accuracy,speed:e.altitude||0,altitude:e.altitude||0,verticalAccuracy:e.altitudeAccuracy||0,horizontalAccuracy:e.accuracy||0})})).catch((e=>{i(e.message)}))})).catch((e=>{i(e.message||JSON.stringify(e))}))}),0,Kh),fy=Vp("navigateBack",((e,{resolve:t,reject:n})=>{let o=!0;return!0===ed(Ce,{from:e.from||"navigateBack"})&&(o=!1),o?(Pm().$router.go(-e.delta),t()):n(Ce)}),0,_f);function gy({type:e,url:t,tabBarText:n,events:o},r){const i=Pm().$router,{path:a,query:s}=function(e){const[t,n]=e.split("?",2);return{path:t,query:it(n||"")}}(t);return new Promise(((t,c)=>{const l=function(e,t){return{__id__:t||++fm,__type__:e}}(e,r);i["navigateTo"===e?"push":"replace"]({path:a,query:s,state:l,force:!0}).then((r=>{if(Gc(r))return c(r.message);if("switchTab"===e&&(i.currentRoute.value.meta.tabBarText=n),"navigateTo"===e){const e=i.currentRoute.value.meta;return e.eventChannel?o&&(Object.keys(o).forEach((t=>{e.eventChannel._addListener(t,"on",o[t])})),e.eventChannel._clearCache()):e.eventChannel=new st(l.__id__,o),t({eventChannel:e.eventChannel})}return t()}))}))}const vy=Vp(cf,(({url:e,events:t},{resolve:n,reject:o})=>gy({type:cf,url:e,events:t}).then(n).catch(o)),0,ff);const _y=Vp(lf,(({url:e},{resolve:t,reject:n})=>(function(){const e=Ku();if(!e)return;const t=e.$page;hm(mm(t.path,t.id))}(),gy({type:lf,url:e}).then(t).catch(n))),0,gf);const yy=Vp(uf,(({url:e},{resolve:t,reject:n})=>(function(){const e=dm().keys();for(const t of e)hm(t)}(),gy({type:uf,url:e}).then(t).catch(n))),0,vf);function by(e,t){return e===t.fullPath||"/"===e&&t.meta.isEntry}const My=Vp(df,(({url:e,tabBarText:t},{resolve:n,reject:o})=>(function(){const e=Ju();if(!e)return;const t=dm(),n=t.keys();for(const o of n){const e=t.get(o);e.$.__isTabBar?e.$.__isActive=!1:hm(o)}e.$.__isTabBar&&(e.$.__isVisible=!1,ed(e,de))}(),gy({type:df,url:e,tabBarText:t},function(e){const t=dm().values();for(const n of t){const t=n.$page;if(by(e,t))return n.$.__isActive=!0,t.id}}(e)).then(n).catch(o))),0,mf);function Cy(e){__uniConfig.darkmode&&qb.on(he,e)}function ky(e){qb.off(he,e)}function wy(e){let t={};return __uniConfig.darkmode&&(t=mt(e,__uniConfig.themeConfig,g_())),__uniConfig.darkmode?t:e}const Ty={light:{cancelColor:"#000000"},dark:{cancelColor:"rgb(170, 170, 170)"}},Sy=er({props:{title:{type:String,default:""},content:{type:String,default:""},showCancel:{type:Boolean,default:!0},cancelText:{type:String,default:"Cancel"},cancelColor:{type:String,default:"#000000"},confirmText:{type:String,default:"OK"},confirmColor:{type:String,default:"#007aff"},visible:{type:Boolean},editable:{type:Boolean,default:!1},placeholderText:{type:String,default:""}},setup(e,{emit:t}){const n=qn(""),o=()=>a.value=!1,r=()=>(o(),t("close","cancel")),i=()=>(o(),t("close","confirm",n.value)),a=Y_(e,{onEsc:r,onEnter:()=>{!e.editable&&i()}}),s=function(e){const t=qn(e.cancelColor),n=({theme:e})=>{((e,t)=>{t.value=Ty[e].cancelColor})(e,t)};return Uo((()=>{e.visible?(t.value=e.cancelColor,"#000"===e.cancelColor&&("dark"===g_()&&n({theme:"dark"}),Cy(n))):ky(n)})),t}(e);return()=>{const{title:t,content:o,showCancel:c,confirmText:l,confirmColor:u,editable:d,placeholderText:p}=e;return n.value=o,Zi(Za,{name:"uni-fade"},{default:()=>[Ar(Zi("uni-modal",{onTouchmove:Ru},[$_,Zi("div",{class:"uni-modal"},[t&&Zi("div",{class:"uni-modal__hd"},[Zi("strong",{class:"uni-modal__title",textContent:t},null,8,["textContent"])]),d?Zi("textarea",{class:"uni-modal__textarea",rows:"1",placeholder:p,value:o,onInput:e=>n.value=e.target.value},null,40,["placeholder","value","onInput"]):Zi("div",{class:"uni-modal__bd",onTouchmovePassive:Ou,textContent:o},null,40,["onTouchmovePassive","textContent"]),Zi("div",{class:"uni-modal__ft"},[c&&Zi("div",{style:{color:s.value},class:"uni-modal__btn uni-modal__btn_default",onClick:r},[e.cancelText],12,["onClick"]),Zi("div",{style:{color:u},class:"uni-modal__btn uni-modal__btn_primary",onClick:i},[l],12,["onClick"])])])],40,["onTouchmove"]),[[Bs,a.value]])]})}}});let Iy;const Ey=$e((()=>{qb.on("onHidePopup",(()=>Iy.visible=!1))}));let Dy;function Ay(e,t){const n="confirm"===e,o={confirm:n,cancel:"cancel"===e};n&&Iy.editable&&(o.content=t),Dy&&Dy(o)}const Ly=Vp("showModal",((e,{resolve:t})=>{Ey(),Dy=t,Iy?(M(Iy,e),Iy.visible=!0):(Iy=In(e),po((()=>(W_(Sy,Iy,Ay).mount(K_("u-a-m")),po((()=>Iy.visible=!0))))))}),0,Ef),Ry={title:{type:String,default:""},icon:{default:"success",validator:e=>-1!==Df.indexOf(e)},image:{type:String,default:""},duration:{type:Number,default:1500},mask:{type:Boolean,default:!1},visible:{type:Boolean}},Oy="uni-toast__icon",xy={light:"#fff",dark:"rgba(255,255,255,0.9)"},Ny=e=>xy[e],Py=er({name:"Toast",props:Ry,setup(e){Kl(),Yl();const{Icon:t}=function(e){const t=qn(Ny(g_())),n=({theme:e})=>t.value=Ny(e);Uo((()=>{e.visible?Cy(n):ky(n)}));const o=Ma((()=>{switch(e.icon){case"success":return Zi(ju(Vu,t.value,38),{class:Oy});case"error":return Zi(ju(Hu,t.value,38),{class:Oy});case"loading":return Zi("i",{class:[Oy,"uni-loading"]},null,2);default:return null}}));return{Icon:o}}(e),n=Y_(e,{});return()=>{const{mask:o,duration:r,title:i,image:a}=e;return Zi(Za,{name:"uni-fade"},{default:()=>[Ar(Zi("uni-toast",{"data-duration":r},[o?Zi("div",{class:"uni-mask",style:"background: transparent;",onTouchmove:Ru},null,40,["onTouchmove"]):"",a||t.value?Zi("div",{class:"uni-toast"},[a?Zi("img",{src:a,class:Oy},null,10,["src"]):t.value,Zi("p",{class:"uni-toast__content"},[i])]):Zi("div",{class:"uni-sample-toast"},[Zi("p",{class:"uni-simple-toast__text"},[i])])],8,["data-duration"]),[[Bs,n.value]])]})}}});let Uy,Gy,By="";const Fy=bt();function qy(e){Uy?M(Uy,e):(Uy=In(M(e,{visible:!1})),po((()=>{Fy.run((()=>{Bo([()=>Uy.visible,()=>Uy.duration],(([e,t])=>{if(e){if(Gy&&clearTimeout(Gy),"onShowLoading"===By)return;Gy=setTimeout((()=>{$y("onHideToast")}),t)}else Gy&&clearTimeout(Gy)}))})),qb.on("onHidePopup",(()=>$y("onHidePopup"))),W_(Py,Uy,(()=>{})).mount(K_("u-a-t"))}))),setTimeout((()=>{Uy.visible=!0}),10)}const Vy=Vp("showToast",((e,{resolve:t,reject:n})=>{qy(e),By="onShowToast",t()}),0,Af),Hy={icon:"loading",duration:1e8,image:""},zy=Vp("showLoading",((e,{resolve:t,reject:n})=>{M(e,Hy),qy(e),By="onShowLoading",t()}),0,If),jy=Vp("hideLoading",((e,{resolve:t,reject:n})=>{$y("onHideLoading"),t()}));function $y(e){const{t:t}=zl();if(!By)return;let n="";if("onHideToast"===e&&"onShowToast"!==By?n=t("uni.showToast.unpaired"):"onHideLoading"===e&&"onShowLoading"!==By&&(n=t("uni.showLoading.unpaired")),n)return console.warn(n);By="",setTimeout((()=>{Uy.visible=!1}),10)}function Wy(e){const t=qn(0),n=qn(0),o=Ma((()=>t.value>=500&&n.value>=500)),r=Ma((()=>{const t={content:{transform:"",left:"",top:"",bottom:""},triangle:{left:"",top:"",bottom:"","border-width":"","border-color":""}},r=t.content,i=t.triangle,a=e.popover;function s(e){return Number(e)||0}if(o.value&&a){M(i,{position:"absolute",width:"0",height:"0","margin-left":"-6px","border-style":"solid"});const e=s(a.left),t=s(a.width),o=s(a.top),c=s(a.height),l=e+t/2;r.transform="none !important";const u=Math.max(0,l-150);r.left=`${u}px`;let d=Math.max(12,l-u);d=Math.min(288,d),i.left=`${d}px`;const p=n.value/2;o+c-p>p-o?(r.top="auto",r.bottom=n.value-o+6+"px",i.bottom="-6px",i["border-width"]="6px 6px 0 6px",i["border-color"]="#fcfcfd transparent transparent transparent"):(r.top=`${o+c+6}px`,i.top="-6px",i["border-width"]="0 6px 6px 6px",i["border-color"]="transparent transparent #fcfcfd transparent")}return t}));return Mr((()=>{const e=()=>{const{windowWidth:e,windowHeight:o,windowTop:r}=k_();t.value=e,n.value=o+(r||0)};window.addEventListener("resize",e),e(),Tr((()=>{window.removeEventListener("resize",e)}))})),{isDesktop:o,popupStyle:r}}const Ky={light:{listItemColor:"#000000",cancelItemColor:"#000000"},dark:{listItemColor:"rgba(255, 255, 255, 0.8)",cancelItemColor:"rgba(255, 255, 255)"}};const Yy=er({name:"ActionSheet",props:{title:{type:String,default:""},itemList:{type:Array,default:()=>[]},itemColor:{type:String,default:"#000000"},popover:{type:Object,default:null},visible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){Wl();const n=qn(260),o=qn(0),r=qn(0),i=qn(0),a=qn(0),s=qn(null),c=qn(null),{t:l}=zl(),{_close:u}=function(e,t){function n(e){t("close",e)}const{key:o,disable:r}=j_();return Bo((()=>e.visible),(e=>r.value=!e)),Uo((()=>{const{value:e}=o;"esc"===e&&n&&n(-1)})),{_close:n}}(e,t),{popupStyle:d}=Wy(e);let p;function h(e){const t=i.value+e.deltaY;Math.abs(t)>10?(a.value+=t/3,a.value=a.value>=o.value?o.value:a.value<=0?0:a.value,p.scrollTo(a.value)):i.value=t,e.preventDefault()}Mr((()=>{const{scroller:e,handleTouchStart:t,handleTouchMove:n,handleTouchEnd:o}=lv(s.value,{enableY:!0,friction:new ov(1e-4),spring:new av(2,90,20),onScroll:e=>{a.value=e.target.scrollTop}});p=e,Ug(s.value,(r=>{if(e)switch(r.detail.state){case"start":t(r);break;case"move":n(r);break;case"end":case"cancel":o(r)}}),!0)})),Bo((()=>e.visible),(()=>{po((()=>{e.title&&(r.value=document.querySelector(".uni-actionsheet__title").offsetHeight),p.update(),s.value&&(o.value=s.value.clientHeight-n.value),document.querySelectorAll(".uni-actionsheet__cell").forEach((e=>{!function(e){const t=20;let n=0,o=0;e.addEventListener("touchstart",(e=>{const t=e.changedTouches[0];n=t.clientX,o=t.clientY})),e.addEventListener("touchend",(e=>{const r=e.changedTouches[0];if(Math.abs(r.clientX-n)<t&&Math.abs(r.clientY-o)<t){const t=e.target,n=e.currentTarget,o=new CustomEvent("click",{bubbles:!0,cancelable:!0,target:t,currentTarget:n});["screenX","screenY","clientX","clientY","pageX","pageY"].forEach((e=>{o[e]=r[e]})),e.target.dispatchEvent(o)}}))}(e)}))}))}));const f=function(e){const t=In({listItemColor:"#000",cancelItemColor:"#000"}),n=({theme:e})=>{!function(e,t){["listItemColor","cancelItemColor"].forEach((n=>{t[n]=Ky[e][n]}))}(e,t)};return Uo((()=>{e.visible?(t.listItemColor=t.cancelItemColor=e.itemColor,"#000"===e.itemColor&&(n({theme:g_()}),Cy(n))):ky(n)})),t}(e);return()=>Zi("uni-actionsheet",{onTouchmove:Ru},[Zi(Za,{name:"uni-fade"},{default:()=>[Ar(Zi("div",{class:"uni-mask uni-actionsheet__mask",onClick:()=>u(-1)},null,8,["onClick"]),[[Bs,e.visible]])]}),Zi("div",{class:["uni-actionsheet",{"uni-actionsheet_toggle":e.visible}],style:d.value.content},[Zi("div",{ref:c,class:"uni-actionsheet__menu",onWheel:h},[e.title?Zi(xi,null,[Zi("div",{class:"uni-actionsheet__cell",style:{height:`${r.value}px`}},null),Zi("div",{class:"uni-actionsheet__title"},[e.title])]):"",Zi("div",{style:{maxHeight:`${n.value}px`,overflow:"hidden"}},[Zi("div",{ref:s},[e.itemList.map(((e,t)=>Zi("div",{key:t,style:{color:f.listItemColor},class:"uni-actionsheet__cell",onClick:()=>u(t)},[e],12,["onClick"])))],512)])],40,["onWheel"]),Zi("div",{class:"uni-actionsheet__action"},[Zi("div",{style:{color:f.cancelItemColor},class:"uni-actionsheet__cell",onClick:()=>u(-1)},[l("uni.showActionSheet.cancel")],12,["onClick"])]),Zi("div",{style:d.value.triangle},null,4)],6)],40,["onTouchmove"])}});let Xy,Jy,Zy;const Qy=$e((()=>{qb.on("onHidePopup",(()=>Zy.visible=!1))}));function eb(e){-1===e?Jy&&Jy("cancel"):Xy&&Xy({tapIndex:e})}const tb=Vp("showActionSheet",((e,{resolve:t,reject:n})=>{Qy(),Xy=t,Jy=n,Zy?(M(Zy,e),Zy.visible=!0):(Zy=In(e),po((()=>(W_(Yy,Zy,eb).mount(K_("u-s-a-s")),po((()=>Zy.visible=!0))))))}),0,Sf),nb=Vp("loadFontFace",(({family:e,source:t,desc:n},{resolve:o,reject:r})=>{(function(e,t,n){const o=document.fonts;if(o){const r=new FontFace(e,t,n);return r.load().then((()=>{o.add&&o.add(r)}))}return new Promise((o=>{const r=document.createElement("style"),i=[];if(n){const{style:e,weight:t,stretch:o,unicodeRange:r,variant:a,featureSettings:s}=n;e&&i.push(`font-style:${e}`),t&&i.push(`font-weight:${t}`),o&&i.push(`font-stretch:${o}`),r&&i.push(`unicode-range:${r}`),a&&i.push(`font-variant:${a}`),s&&i.push(`font-feature-settings:${s}`)}r.innerText=`@font-face{font-family:"${e}";src:${t};${i.join(";")}}`,document.head.appendChild(r),o()}))})(e,t,n).then((()=>{o()})).catch((e=>{r(`loadFontFace:fail ${e}`)}))}));function ob(e){function t(){var t;t=e.navigationBar.titleText,document.title=t,qb.emit(Le,{titleText:t})}Uo(t),lr(t)}const rb=Vp(wf,((e,{resolve:t,reject:n})=>{!function(e,t,n,o,r){if(!e)return r("page not found");const{navigationBar:i}=e;switch(t){case"setNavigationBarColor":const{frontColor:e,backgroundColor:t,animation:o}=n,{duration:r,timingFunc:a}=o;e&&(i.titleColor="#000000"===e?"#000000":"#ffffff"),t&&(i.backgroundColor=t),i.duration=r+"ms",i.timingFunc=a;break;case"showNavigationBarLoading":i.loading=!0;break;case"hideNavigationBarLoading":i.loading=!1;break;case wf:const{title:s}=n;i.titleText=s}o()}(Yu(),wf,e,t,n)})),ib=Vp("pageScrollTo",(({scrollTop:e,selector:t,duration:n},{resolve:o})=>{!function(e,t,n){if(A(e)){const t=document.querySelector(e);if(t){const{height:o,top:r}=t.getBoundingClientRect();e=r+window.pageYOffset,n&&(e-=o)}}e<0&&(e=0);const o=document.documentElement,{clientHeight:r,scrollHeight:i}=o;if(e=Math.min(e,i-r),0===t)return void(o.scrollTop=document.body.scrollTop=e);if(window.scrollY===e)return;const a=t=>{if(t<=0)return void window.scrollTo(0,e);const n=e-window.scrollY;requestAnimationFrame((function(){window.scrollTo(0,window.scrollY+n/t*10),a(t-10)}))};a(t)}(t||e||0,n,!0),o()}),0,Tf),ab=Vp(Lf,((e,{resolve:t})=>{qb.invokeViewMethod(Lf,{},Xu()),t()})),sb=Vp(Rf,((e,{resolve:t})=>{qb.invokeViewMethod(Rf,{},Xu()),t()})),cb=["text","iconPath","iconfont","selectedIconPath","visible"],lb=["color","selectedColor","backgroundColor","borderStyle","midButton"],ub=["badge","redDot"];function db(e,t,n){t.forEach((function(t){w(n,t)&&(e[t]=n[t])}))}function pb(e,t,n){const o=Zv();switch(e){case"showTabBar":o.shown=!0;break;case Of:o.shown=!1;break;case"setTabBarItem":const{index:e}=t,n=o.list[e],r=n.pagePath;db(n,cb,t);const{pagePath:i}=t;if(i){const t=He(i);t!==r&&function(e,t,n){const o=ad(He(t));if(o){const{meta:e}=o;delete e.tabBarIndex,e.isQuit=e.isTabBar=!1}const r=ad(He(n));if(r){const{meta:t}=r;t.tabBarIndex=e,t.isQuit=t.isTabBar=!0;const o=__uniConfig.tabBar;o&&o.list&&o.list[e]&&(o.list[e].pagePath=ze(n))}}(e,r,t)}break;case"setTabBarStyle":db(o,lb,t);break;case"showTabBarRedDot":db(o.list[t.index],ub,{badge:"",redDot:!0});break;case"setTabBarBadge":db(o.list[t.index],ub,{badge:t.text,redDot:!0});break;case"hideTabBarRedDot":case"removeTabBarBadge":db(o.list[t.index],ub,{badge:"",redDot:!1})}n()}const hb=Vp(Of,((e,{resolve:t})=>{pb(Of,e||{},t)})),fb=xd({name:"TabBar",setup(){const e=qn([]),t=Zv(),n=In(wy(t));!function(e,t){function n(){let n=[];n=e.list.filter((e=>!1!==e.visible)),t.value=n}qn(M({type:"midButton"},e.midButton)),Uo(n)}(n,e),function(e){Bo((()=>e.shown),(t=>{Gu({"--window-bottom":cm(t?parseInt(e.height):0)})}))}(n);const o=function(e,t,n){return Uo((()=>{const o=e.meta;if(o.isTabBar){const e=o.route,r=n.value.findIndex((t=>t.pagePath===e));t.selectedIndex=r}})),(t,n)=>()=>{const{pagePath:o,text:r}=t;let i=He(o);i===__uniRoutes[0].alias&&(i="/"),e.path!==i?My({from:"tabBar",url:i,tabBarText:r}):ed("onTabItemTap",{index:n,text:r,pagePath:o})}}(Gl(),n,e),{style:r,borderStyle:i,placeholderStyle:a}=function(e){const t=Ma((()=>{let t=e.backgroundColor;const n=e.blurEffect;return t||rm&&n&&"none"!==n&&(t=_b[n]),{backgroundColor:t||gb,backdropFilter:"none"!==n?"blur(10px)":n}})),n=Ma((()=>{const{borderStyle:t}=e;return{backgroundColor:yb[t]||t}})),o=Ma((()=>({height:e.height})));return{style:t,borderStyle:n,placeholderStyle:o}}(n);return Cy((()=>{const e=wy(t);n.backgroundColor=e.backgroundColor,n.borderStyle=e.borderStyle,n.color=e.color,n.selectedColor=e.selectedColor,n.blurEffect=e.blurEffect,e.list&&e.list.length&&e.list.forEach(((e,t)=>{n.list[t].iconPath=e.iconPath,n.list[t].selectedIconPath=e.selectedIconPath}))})),Mr((()=>{n.iconfontSrc&&nb({family:"UniTabbarIconFont",source:`url("${n.iconfontSrc}")`})})),()=>{const t=function(e,t,n){const{selectedIndex:o,selectedColor:r,color:i}=e;return n.value.map(((n,a)=>{const s=o===a;return function(e,t,n,o,r,i,a,s){return Zi("div",{key:a,class:"uni-tabbar__item",onClick:s(r,a)},[bb(e,t||"",n,o,r,i)],8,["onClick"])}(s?r:i,s&&n.selectedIconPath||n.iconPath||"",n.iconfont?s&&n.iconfont.selectedText||n.iconfont.text:void 0,n.iconfont?s&&n.iconfont.selectedColor||n.iconfont.color:void 0,n,e,a,t)}))}(n,o,e);return Zi("uni-tabbar",{class:"uni-tabbar-"+n.position},[Zi("div",{class:"uni-tabbar",style:r.value},[Zi("div",{class:"uni-tabbar-border",style:i.value},null,4),t],4),Zi("div",{class:"uni-placeholder",style:a.value},null,4)],2)}}});const gb="#f7f7fa",vb="rgb(0, 0, 0, 0.8)",mb="rgb(250, 250, 250, 0.8)",_b={dark:vb,light:mb,extralight:mb},yb={white:"rgba(255, 255, 255, 0.33)",black:"rgba(0, 0, 0, 0.33)"};function bb(e,t,n,o,r,i){const{height:a}=i;return Zi("div",{class:"uni-tabbar__bd",style:{height:a}},[n?Cb(n,o||vb,r,i):t&&Mb(t,r,i),r.text&&kb(e,r,i),r.redDot&&wb(r.badge)],4)}function Mb(e,t,n){const{type:o,text:r}=t,{iconWidth:i}=n;return Zi("div",{class:"uni-tabbar__icon"+(r?" uni-tabbar__icon__diff":""),style:{width:i,height:i}},["midButton"!==o&&Zi("img",{src:Xd(e)},null,8,["src"])],6)}function Cb(e,t,n,o){var r;const{type:i,text:a}=n,{iconWidth:s}=o,c="uni-tabbar__icon"+(a?" uni-tabbar__icon__diff":""),l={width:s,height:s},u={fontSize:(null==(r=n.iconfont)?void 0:r.fontSize)||s,color:t};return Zi("div",{class:c,style:l},["midButton"!==i&&Zi("div",{class:"uni-tabbar__iconfont",style:u},[e],4)],6)}function kb(e,t,n){const{iconPath:o,text:r}=t,{fontSize:i,spacing:a}=n;return Zi("div",{class:"uni-tabbar__label",style:{color:e,fontSize:i,lineHeight:o?"normal":1.8,marginTop:o?a:"inherit"}},[r],4)}function wb(e){return Zi("div",{class:"uni-tabbar__reddot"+(e?" uni-tabbar__badge":"")},[e],2)}const Tb="0px",Sb=xd({name:"Layout",setup(e,{emit:t}){const n=qn(null);Uu({"--status-bar-height":Tb,"--top-window-height":Tb,"--window-left":Tb,"--window-right":Tb,"--window-margin":Tb,"--tab-bar-height":Tb});const o=function(){const e=Gl();return{routeKey:Ma((()=>mm("/"+e.meta.route,Xv()))),isTabBar:Ma((()=>e.meta.isTabBar)),routeCache:ym}}(),{layoutState:r,windowState:i}=function(){Yv();{const e=In({marginWidth:0,leftWindowWidth:0,rightWindowWidth:0});return Bo((()=>e.marginWidth),(e=>Uu({"--window-margin":e+"px"}))),Bo((()=>e.leftWindowWidth+e.marginWidth),(e=>{Uu({"--window-left":e+"px"})})),Bo((()=>e.rightWindowWidth+e.marginWidth),(e=>{Uu({"--window-right":e+"px"})})),{layoutState:e,windowState:Ma((()=>({})))}}}();!function(e,t){const n=Yv();function o(){const o=document.body.clientWidth,r=pm();let i={};if(r.length>0){i=r[r.length-1].$page.meta}else{const e=ad(n.path,!0);e&&(i=e.meta)}const a=parseInt(String((w(i,"maxWidth")?i.maxWidth:__uniConfig.globalStyle.maxWidth)||Number.MAX_SAFE_INTEGER));let s=!1;s=o>a,s&&a?(e.marginWidth=(o-a)/2,po((()=>{const e=t.value;e&&e.setAttribute("style","max-width:"+a+"px;margin:0 auto;")}))):(e.marginWidth=0,po((()=>{const e=t.value;e&&e.removeAttribute("style")})))}Bo([()=>n.path],o),Mr((()=>{o(),window.addEventListener("resize",o)}))}(r,n);const a=function(e){const t=Yv(),n=Zv(),o=Ma((()=>t.meta.isTabBar&&n.shown));return Uu({"--tab-bar-height":n.height}),o}(),s=function(e){const t=qn(!1);return Ma((()=>({"uni-app--showtabbar":e&&e.value,"uni-app--maxwidth":t.value})))}(a);return()=>{const e=function(e,t,n,o,r,i){const a=function({routeKey:e,isTabBar:t,routeCache:n}){return Zi(Nl,null,{default:Do((({Component:o})=>[(Fi(),ji(sr,{matchBy:"key",cache:n},[(Fi(),ji(Pr(o),{type:t.value?"tabBar":"",key:e.value}))],1032,["cache"]))])),_:1})}(e);return a}(o),t=function(e){return Ar(Zi(fb,null,null,512),[[Bs,e.value]])}(a);return Zi("uni-app",{ref:n,class:s.value},[e,t],2)}}});const Ib=Od({name:"CoverView",compatConfig:{MODE:3},props:{scrollTop:{type:[String,Number],default:0}},setup(e,{slots:t}){const n=qn(null);function o(e){let t=n.value;"scroll"===getComputedStyle(t).overflowY&&(t.scrollTop=function(e){let t=String(e);/\d+[ur]px$/i.test(t)&&t.replace(/\d+[ur]px$/i,(e=>String(Jp(parseFloat(e)))));return parseFloat(t)||0}(e))}return Bo((()=>e.scrollTop),(e=>{o(e)})),Mr((()=>{o(e.scrollTop)})),()=>Zi("uni-cover-view",{"scroll-top":e.scrollTop},[Zi("div",{ref:n,class:"uni-cover-view"},[t.default&&t.default()],512)],8,["scroll-top"])}}),Eb=Od({name:"CoverImage",compatConfig:{MODE:3},props:{src:{type:String,default:""}},emits:["load","error"],setup(e,{emit:t}){const n=qn(null),o=Bd(n,t);function r(e){o("load",e)}function i(e){o("error",e)}return()=>{const{src:t}=e;return Zi("uni-cover-image",{ref:n,src:t},[Zi("div",{class:"uni-cover-image"},[t?Zi("img",{src:Xd(t),onLoad:r,onError:i},null,40,["src","onLoad","onError"]):null])],8,["src"])}}});function Db(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!$i(e)}function Ab(e){if(e.mode===Ob.TIME)return"00:00";if(e.mode===Ob.DATE){const t=(new Date).getFullYear()-150;switch(e.fields){case xb.YEAR:return t.toString();case xb.MONTH:return t+"-01";default:return t+"-01-01"}}return""}function Lb(e){if(e.mode===Ob.TIME)return"23:59";if(e.mode===Ob.DATE){const t=(new Date).getFullYear()+150;switch(e.fields){case xb.YEAR:return t.toString();case xb.MONTH:return t+"-12";default:return t+"-12-31"}}return""}function Rb(e,t,n,o){const r=e.mode===Ob.DATE?"-":":",i=e.mode===Ob.DATE?t.dateArray:t.timeArray;let a;if(e.mode===Ob.TIME)a=2;else switch(e.fields){case xb.YEAR:a=1;break;case xb.MONTH:a=2;break;default:a=3}const s=String(n).split(r);let c=[];for(let l=0;l<a;l++){const e=s[l];c.push(i[l].indexOf(e))}return c.indexOf(-1)>=0&&(c=o?Rb(e,t,o):c.map((()=>0))),c}const Ob={SELECTOR:"selector",MULTISELECTOR:"multiSelector",TIME:"time",DATE:"date"},xb={YEAR:"year",MONTH:"month",DAY:"day"},Nb={PICKER:"picker",SELECT:"select"},Pb=Od({name:"Picker",compatConfig:{MODE:3},props:{name:{type:String,default:""},range:{type:Array,default:()=>[]},rangeKey:{type:String,default:""},value:{type:[Number,String,Array],default:0},mode:{type:String,default:Ob.SELECTOR,validator:e=>Object.values(Ob).includes(e)},fields:{type:String,default:""},start:{type:String,default:e=>Ab(e)},end:{type:String,default:e=>Lb(e)},disabled:{type:[Boolean,String],default:!1},selectorType:{type:String,default:""}},emits:["change","cancel","columnchange"],setup(e,{emit:t,slots:n}){Ql();const{t:o}=zl(),r=qn(null),i=qn(null),a=qn(null),s=qn(null),c=qn(!1),{state:l,rangeArray:u}=function(e){const t=In({valueSync:void 0,visible:!1,contentVisible:!1,popover:null,valueChangeSource:"",timeArray:[],dateArray:[],valueArray:[],oldValueArray:[],isDesktop:!1,popupStyle:{content:{},triangle:{}}}),n=Ma((()=>{let n=e.range;switch(e.mode){case Ob.SELECTOR:return[n];case Ob.MULTISELECTOR:return n;case Ob.TIME:return t.timeArray;case Ob.DATE:{const n=t.dateArray;switch(e.fields){case xb.YEAR:return[n[0]];case xb.MONTH:return[n[0],n[1]];default:return[n[0],n[1],n[2]]}}}return[]}));return{state:t,rangeArray:n}}(e),d=Bd(r,t),{system:p,selectorTypeComputed:h,_show:f,_l10nColumn:g,_l10nItem:v,_input:m,_fixInputPosition:_,_pickerViewChange:y,_cancel:b,_change:M,_resetFormData:C,_getFormData:k,_createTime:w,_createDate:S,_setValueSync:I}=function(e,t,n,o,r,i,a){const s=function(){const e=qn(!1);return e.value=Ub(),e}(),c=function(){const e=qn("");return e.value=Gb(),e}(),l=Ma((()=>{const t=e.selectorType;return Object.values(Nb).includes(t)?t:s.value?Nb.PICKER:Nb.SELECT})),u=Ma((()=>e.mode===Ob.DATE&&!Object.values(xb).includes(e.fields)&&t.isDesktop?c.value:"")),d=Ma((()=>Rb(e,t,e.start,Ab(e)))),p=Ma((()=>Rb(e,t,e.end,Lb(e))));function h(n){if(e.disabled)return;t.valueChangeSource="";let o=r.value,i=n.currentTarget;o.remove(),(document.querySelector("uni-app")||document.body).appendChild(o),o.style.display="block";const a=i.getBoundingClientRect();t.popover={top:a.top,left:a.left,width:a.width,height:a.height},setTimeout((()=>{t.visible=!0}),20)}function f(){return{value:t.valueSync,key:e.name}}function g(){switch(e.mode){case Ob.SELECTOR:t.valueSync=0;break;case Ob.MULTISELECTOR:t.valueSync=e.value.map((e=>0));break;case Ob.DATE:case Ob.TIME:t.valueSync=""}}function v(){let e=[],n=[];for(let t=0;t<24;t++)e.push((t<10?"0":"")+t);for(let t=0;t<60;t++)n.push((t<10?"0":"")+t);t.timeArray.push(e,n)}function m(){let t=(new Date).getFullYear(),n=t-150,o=t+150;if(e.start){const t=new Date(e.start).getFullYear();!isNaN(t)&&t<n&&(n=t)}if(e.end){const t=new Date(e.end).getFullYear();!isNaN(t)&&t>o&&(o=t)}return{start:n,end:o}}function _(){let e=[];const n=m();for(let t=n.start,i=n.end;t<=i;t++)e.push(String(t));let o=[];for(let t=1;t<=12;t++)o.push((t<10?"0":"")+t);let r=[];for(let t=1;t<=31;t++)r.push((t<10?"0":"")+t);t.dateArray.push(e,o,r)}function y(e){return 60*e[0]+e[1]}function b(e){const t=31;return e[0]*t*12+(e[1]||0)*t+(e[2]||0)}function M(e,t){for(let n=0;n<e.length&&n<t.length;n++)e[n]=t[n]}function C(){let n=e.value;switch(e.mode){case Ob.MULTISELECTOR:{T(n)||(n=t.valueArray),T(t.valueSync)||(t.valueSync=[]);const o=t.valueSync.length=Math.max(n.length,e.range.length);for(let r=0;r<o;r++){const o=Number(n[r]),i=Number(t.valueSync[r]),a=isNaN(o)?isNaN(i)?0:i:o,s=e.range[r]?e.range[r].length-1:0;t.valueSync.splice(r,1,a<0||a>s?0:a)}}break;case Ob.TIME:case Ob.DATE:t.valueSync=String(n);break;default:{const e=Number(n);t.valueSync=e<0?0:e;break}}}function k(){let n,o=t.valueSync;switch(e.mode){case Ob.MULTISELECTOR:n=[...o];break;case Ob.TIME:n=Rb(e,t,o,Ke({mode:Ob.TIME}));break;case Ob.DATE:n=Rb(e,t,o,Ke({mode:Ob.DATE}));break;default:n=[o]}t.oldValueArray=[...n],t.valueArray=[...n]}function w(){let n=t.valueArray;switch(e.mode){case Ob.SELECTOR:return n[0];case Ob.MULTISELECTOR:return n.map((e=>e));case Ob.TIME:return t.valueArray.map(((e,n)=>t.timeArray[n][e])).join(":");case Ob.DATE:return t.valueArray.map(((e,n)=>t.dateArray[n][e])).join("-")}}function S(){E(),t.valueChangeSource="click";const e=w();t.valueSync=T(e)?e.map((e=>e)):e,n("change",{},{value:e})}function I(e){if("firefox"===u.value&&e){const{top:n,left:o,width:r,height:i}=t.popover,{pageX:a,pageY:s}=e;if(a>o&&a<o+r&&s>n&&s<n+i)return}E(),n("cancel",{},{})}function E(){t.visible=!1,setTimeout((()=>{let e=r.value;e.remove(),o.value.prepend(e),e.style.display="none"}),260)}function D(){e.mode===Ob.SELECTOR&&l.value===Nb.SELECT&&(i.value.scrollTop=34*t.valueArray[0])}function A(e){const n=e.target;t.valueSync=n.value,po((()=>{S()}))}function L(e){if("chrome"===u.value){const t=o.value.getBoundingClientRect(),n=32;a.value.style.left=e.clientX-t.left-1.5*n+"px",a.value.style.top=e.clientY-t.top-.5*n+"px"}}function R(e){t.valueArray=O(e.detail.value,!0)}function O(t,n){const{getLocale:o}=zl();if(e.mode===Ob.DATE){const r=o();if(!r.startsWith("zh"))switch(e.fields){case xb.YEAR:return t;case xb.MONTH:return[t[1],t[0]];default:switch(r){case"es":case"fr":return[t[2],t[1],t[0]];default:return n?[t[2],t[0],t[1]]:[t[1],t[2],t[0]]}}}return t}function x(t,n){const{getLocale:o}=zl();if(e.mode===Ob.DATE){const r=o();if(r.startsWith("zh")){return t+["年","月","日"][n]}if(e.fields!==xb.YEAR&&n===(e.fields===xb.MONTH||"es"!==r&&"fr"!==r?0:1)){let e;switch(r){case"es":e=["enero","febrero","marzo","abril","mayo","junio","​​julio","agosto","septiembre","octubre","noviembre","diciembre"];break;case"fr":e=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"];break;default:e=["January","February","March","April","May","June","July","August","September","October","November","December"]}return e[Number(t)-1]}}return t}return Bo((()=>t.visible),(e=>{e?(clearTimeout(Bb),t.contentVisible=e,D()):Bb=setTimeout((()=>{t.contentVisible=e}),300)})),Bo([()=>e.mode,()=>e.value,()=>e.range],C,{deep:!0}),Bo((()=>t.valueSync),k,{deep:!0}),Bo((()=>t.valueArray),(o=>{if(e.mode===Ob.TIME||e.mode===Ob.DATE){const n=e.mode===Ob.TIME?y:b,o=t.valueArray,r=d.value,i=p.value;if(e.mode===Ob.DATE){const e=t.dateArray,n=e[2].length,r=Number(e[2][o[2]])||1,i=new Date(`${e[0][o[0]]}/${e[1][o[1]]}/${r}`).getDate();i<r&&(o[2]-=i+n-r)}n(o)<n(r)?M(o,r):n(o)>n(i)&&M(o,i)}o.forEach(((o,r)=>{o!==t.oldValueArray[r]&&(t.oldValueArray[r]=o,e.mode===Ob.MULTISELECTOR&&n("columnchange",{},{column:r,value:o}))}))})),{selectorTypeComputed:l,system:u,_show:h,_cancel:I,_change:S,_l10nColumn:O,_l10nItem:x,_input:A,_resetFormData:g,_getFormData:f,_createTime:v,_createDate:_,_setValueSync:C,_fixInputPosition:L,_pickerViewChange:R}}(e,l,d,r,i,a,s);!function(e,t,n){const{key:o,disable:r}=j_();Uo((()=>{r.value=!e.visible})),Bo(o,(e=>{"esc"===e?t():"enter"===e&&n()}))}(l,b,M),function(e,t){const n=Po(Fd,!1);if(n){const o={reset:e,submit:()=>{const e=["",null],{key:n,value:o}=t();return""!==n&&(e[0]=n,e[1]=o),e}};n.addField(o),wr((()=>{n.removeField(o)}))}}(C,k),w(),S(),I();const E=Wy(l);return Uo((()=>{l.isDesktop=E.isDesktop.value,l.popupStyle=E.popupStyle.value})),wr((()=>{i.value&&i.value.remove()})),Mr((()=>{c.value=!0})),()=>{let t;const{visible:d,contentVisible:C,valueArray:k,popupStyle:w,valueSync:T}=l,{rangeKey:S,mode:I,start:E,end:D}=e,A=Ud(e,"disabled");return Zi("uni-picker",aa({ref:r},A,{onClick:Gd(f)}),[c.value?Zi("div",{ref:i,class:["uni-picker-container",`uni-${I}-${h.value}`],onWheel:Ru,onTouchmove:Ru},[Zi(Za,{name:"uni-fade"},{default:()=>[Ar(Zi("div",{class:"uni-mask uni-picker-mask",onClick:Gd(b),onMousemove:_},null,40,["onClick","onMousemove"]),[[Bs,d]])]}),p.value?null:Zi("div",{class:[{"uni-picker-toggle":d},"uni-picker-custom"],style:w.content},[Zi("div",{class:"uni-picker-header",onClick:Ou},[Zi("div",{class:"uni-picker-action uni-picker-action-cancel",onClick:Gd(b)},[o("uni.picker.cancel")],8,["onClick"]),Zi("div",{class:"uni-picker-action uni-picker-action-confirm",onClick:M},[o("uni.picker.done")],8,["onClick"])],8,["onClick"]),C?Zi(nv,{value:g(k),class:"uni-picker-content",onChange:y},Db(t=Fr(g(u.value),((e,t)=>{let n;return Zi(dv,{key:t},Db(n=Fr(e,((e,n)=>Zi("div",{key:n,class:"uni-picker-item"},["object"==typeof e?e[S]||"":v(e,t)]))))?n:{default:()=>[n],_:1})})))?t:{default:()=>[t],_:1},8,["value","onChange"]):null,Zi("div",{ref:a,class:"uni-picker-select",onWheel:Ou,onTouchmove:Ou},[Fr(u.value[0],((e,t)=>Zi("div",{key:t,class:["uni-picker-item",{selected:k[0]===t}],onClick:()=>{k[0]=t,M()}},["object"==typeof e?e[S]||"":e],10,["onClick"])))],40,["onWheel","onTouchmove"]),Zi("div",{style:w.triangle},null,4)],6)],40,["onWheel","onTouchmove"]):null,Zi("div",null,[n.default&&n.default()]),p.value?Zi("div",{class:"uni-picker-system",onMousemove:Gd(_)},[Zi("input",{class:["uni-picker-system_input",p.value],ref:s,value:T,type:I,tabindex:"-1",min:E,max:D,onChange:e=>{m(e),Ou(e)}},null,42,["value","type","min","max","onChange"])],40,["onMousemove"]):null],16,["onClick"])}}});const Ub=()=>0===String(navigator.vendor).indexOf("Apple")&&navigator.maxTouchPoints>0;const Gb=()=>{if(/win|mac/i.test(navigator.platform)){if("Google Inc."===navigator.vendor)return"chrome";if(/Firefox/.test(navigator.userAgent))return"firefox"}return""};let Bb;const Fb=M(lu,{publishHandler(e,t,n){qb.subscribeHandler(e,t,n)}}),qb=M(bd,{publishHandler(e,t,n){Fb.subscribeHandler(e,t,n)}}),Vb=xd({name:"PageHead",setup(){const e=qn(null),t=Wv(),n=In(wy(t.navigationBar)),{clazz:o,style:r}=function(e){const t=Ma((()=>{const{type:t,titlePenetrate:n,shadowColorType:o}=e,r={"uni-page-head":!0,"uni-page-head-transparent":"transparent"===t,"uni-page-head-titlePenetrate":"YES"===n,"uni-page-head-shadow":!!o};return o&&(r[`uni-page-head-shadow-${o}`]=!0),r})),n=Ma((()=>({backgroundColor:e.backgroundColor,color:e.titleColor,transitionDuration:e.duration,transitionTimingFunction:e.timingFunc})));return{clazz:t,style:n}}(n);return Cy((()=>{const e=wy(t.navigationBar);n.backgroundColor=e.backgroundColor,n.titleColor=e.titleColor})),()=>{const i=function(e,t){if(!t)return Zi("div",{class:"uni-page-head-btn",onClick:zb},[ju(zu,"transparent"===e.type?"#fff":e.titleColor,27)],8,["onClick"])}(n,t.isQuit),a=n.type||"default",s="transparent"!==a&&"float"!==a&&Zi("div",{class:{"uni-placeholder":!0,"uni-placeholder-titlePenetrate":n.titlePenetrate}},null,2);return Zi("uni-page-head",{"uni-page-head-type":a},[Zi("div",{ref:e,class:o.value,style:r.value},[Zi("div",{class:"uni-page-head-hd"},[i]),Hb(n),Zi("div",{class:"uni-page-head-ft"},[])],6),s],8,["uni-page-head-type"])}}});function Hb(e,t){return function({type:e,loading:t,titleSize:n,titleText:o,titleImage:r}){return Zi("div",{class:"uni-page-head-bd"},[Zi("div",{style:{fontSize:n,opacity:"transparent"===e?0:1},class:"uni-page-head__title"},[t?Zi("i",{class:"uni-loading"},null):r?Zi("img",{src:r,class:"uni-page-head__title_image"},null,8,["src"]):o],4)])}(e)}function zb(){1===pm().length?yy({url:"/"}):fy({from:"backbutton",success(){}})}const jb={name:"PageRefresh",setup(){const{pullToRefresh:e}=Wv();return{offset:e.offset,color:e.color}}},$b=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Wb={class:"uni-page-refresh-inner"},Kb=["fill"],Yb=[Ji("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1),Ji("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1)],Xb={class:"uni-page-refresh__spinner",width:"24",height:"24",viewBox:"25 25 50 50"},Jb=["stroke"];const Zb=$b(jb,[["render",function(e,n,o,r,i,a){return Fi(),zi("uni-page-refresh",null,[Ji("div",{style:t({"margin-top":r.offset+"px"}),class:"uni-page-refresh"},[Ji("div",Wb,[(Fi(),zi("svg",{fill:r.color,class:"uni-page-refresh__icon",width:"24",height:"24",viewBox:"0 0 24 24"},Yb,8,Kb)),(Fi(),zi("svg",Xb,[Ji("circle",{stroke:r.color,class:"uni-page-refresh__path",cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"4","stroke-miterlimit":"10"},null,8,Jb)]))])],4)])}]]);function Qb(e,t,n){const o=Array.prototype.slice.call(e.changedTouches).filter((e=>e.identifier===t))[0];return!!o&&(e.deltaY=o.pageY-n,!0)}const eM="pulling",tM="reached",nM="aborting",oM="refreshing",rM="restoring";function iM(e){const{id:t,pullToRefresh:n}=Wv(),{range:o,height:r}=n;let i,a,s,c,l,u,d,p;Uv((()=>{p||(p=oM,v(),setTimeout((()=>{M()}),50))}),Lf,!1,t),Uv((()=>{p===oM&&(m(),p=rM,v(),function(e){if(!a)return;s.transition="-webkit-transform 0.3s",s.transform+=" scale(0.01)";const t=function(){n&&clearTimeout(n),a.removeEventListener("webkitTransitionEnd",t),s.transition="",s.transform="translate3d(-50%, 0, 0)",e()};a.addEventListener("webkitTransitionEnd",t);const n=setTimeout(t,350)}((()=>{m(),p=h=f=null})))}),Rf,!1,t),Mr((()=>{i=e.value.$el,a=i.querySelector(".uni-page-refresh"),s=a.style,c=a.querySelector(".uni-page-refresh-inner").style}));let h=null,f=null;function g(e){p&&i&&i.classList[e]("uni-page-refresh--"+p)}function v(){g("add")}function m(){g("remove")}const _=Gd((e=>{const t=e.changedTouches[0];l=t.identifier,u=t.pageY,d=!([nM,oM,rM].indexOf(p)>=0)})),y=Gd((e=>{if(!d)return;if(!Qb(e,l,u))return;let{deltaY:t}=e;if(0!==(document.documentElement.scrollTop||document.body.scrollTop))return void(l=null);if(t<0&&!p)return;e.preventDefault(),null===h&&(f=t,p=eM,v()),t-=f,t<0&&(t=0),h=t;(t>=o&&p!==tM||t<o&&p!==eM)&&(m(),p=p===tM?eM:tM,v()),function(e){if(!a)return;let t=e/o;t>1?t=1:t*=t*t;const n=Math.round(e/(o/r))||0;c.transform="rotate("+360*t+"deg)",s.clip="rect("+(45-n)+"px,45px,45px,-5px)",s.transform="translate3d(-50%, "+n+"px, 0)"}(t)})),b=Gd((e=>{Qb(e,l,u)&&null!==p&&(p===eM?(m(),p=nM,v(),function(e){if(!a)return;if(s.transform){s.transition="-webkit-transform 0.3s",s.transform="translate3d(-50%, 0, 0)";const t=function(){n&&clearTimeout(n),a.removeEventListener("webkitTransitionEnd",t),s.transition="",e()};a.addEventListener("webkitTransitionEnd",t);const n=setTimeout(t,350)}else e()}((()=>{m(),p=h=f=null}))):p===tM&&(m(),p=oM,v(),M()))}));function M(){a&&(s.transition="-webkit-transform 0.2s",s.transform="translate3d(-50%, "+r+"px, 0)",ed(t,Se))}return{onTouchstartPassive:_,onTouchmove:y,onTouchend:b,onTouchcancel:b}}const aM=xd({name:"PageBody",setup(e,t){const n=Wv(),o=qn(null),r=n.enablePullDownRefresh?iM(o):null;return()=>{const e=function(e,t){if(!t.enablePullDownRefresh)return null;return Zi(Zb,{ref:e},null,512)}(o,n);return Zi(xi,null,[e,Zi("uni-page-wrapper",r,[Zi("uni-page-body",null,[qr(t.slots,"default")])],16)])}}});const sM=xd({name:"Page",setup(e,t){const n=Kv(Xv()),o=n.navigationBar;return ob(n),()=>Zi("uni-page",{"data-page":n.route},"custom"!==o.style?[Zi(Vb),cM(t)]:[cM(t)])}});function cM(e){return Fi(),ji(aM,{key:0},{default:Do((()=>[qr(e.slots,"page")])),_:3})}const lM={},uM=function(e,t,n){if(!t||0===t.length)return e();const o=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in lM)return;lM[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(!!n)for(let n=o.length-1;n>=0;n--){const r=o[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},dM={loading:"AsyncLoading",error:"AsyncError",delay:200,timeout:6e4,suspensible:!0};window.uni={},window.wx={},window.rpx2px=Jp;const pM=Object.assign({}),hM=Object.assign;window.__uniConfig=hM({globalStyle:{backgroundColor:"#F8F8F8",navigationBar:{backgroundColor:"#F8F8F8",titleText:"uni-app",type:"default",titleColor:"#000000"},isNVue:!1},uniIdRouter:{},tabBar:{position:"bottom",color:"#8E92A4",selectedColor:"#F0222C",borderStyle:"black",blurEffect:"none",fontSize:"10px",iconWidth:"22px",spacing:"4px",height:"50px",custom:!0,backgroundColor:"#FFFFFF",list:[{pagePath:"pages/rateView/index",iconPath:"/static/image/myview/unss.png",selectedIconPath:"/static/image/myview/ss.png",text:"赛事"},{pagePath:"pages/advice/index",iconPath:"/static/image/myview/unzx.png",selectedIconPath:"/static/image/myview/zx.png",text:"资讯"},{pagePath:"pages/liveView/index",iconPath:"/static/image/myview/unzb.png",selectedIconPath:"/static/image/myview/zb.png",text:"直播"},{pagePath:"pages/TUIKit/TUIPages/TUIConversation/index",iconPath:"/static/image/myview/unlt.png",selectedIconPath:"/static/image/myview/lt.png",text:"聊天"},{pagePath:"pages/myView/index",iconPath:"/static/image/myview/unwd.png",selectedIconPath:"/static/image/myview/wd.png",text:"我的"}],selectedIndex:0,shown:!0},condition:{current:0,list:[{name:"",path:"",query:""}]},compilerVersion:"3.8.4"},{appId:"__UNI__F15C802",appName:"欢呼吧",appVersion:"1.0.0",appVersionCode:110,async:dM,debug:!1,networkTimeout:{request:6e4,connectSocket:6e4,uploadFile:6e4,downloadFile:6e4},sdkConfigs:{},qqMapKey:void 0,googleMapKey:void 0,aMapKey:void 0,aMapSecurityJsCode:void 0,aMapServiceHost:void 0,nvue:{"flex-direction":"column"},locale:"",fallbackLocale:"",locales:Object.keys(pM).reduce(((e,t)=>{const n=t.replace(/\.\/locale\/(uni-app.)?(.*).json/,"$2");return hM(e[n]||(e[n]={}),pM[t].default),e}),{}),router:{mode:"history",base:"/",assets:"assets",routerBase:"/"},darkmode:!1,themeConfig:{}}),window.__uniLayout=window.__uniLayout||{};const fM={delay:dM.delay,timeout:dM.timeout,suspensible:dM.suspensible};dM.loading&&(fM.loadingComponent={name:"SystemAsyncLoading",render:()=>Zi(xr(dM.loading))}),dM.error&&(fM.errorComponent={name:"SystemAsyncError",render:()=>Zi(xr(dM.error))});const gM=()=>uM((()=>import("./pages-liveView-index.ac8f5d25.js")),["assets/pages-liveView-index.ac8f5d25.js","assets/m-tabbar.18a875e0.js","assets/pages.af45dffb.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/m-tabbar-dea06783.css","assets/uni-app.es.d136296e.js","assets/lodash.bbce98da.js","assets/search.384cbe7f.js","assets/noqd.d6c99c19.js","assets/gfire.3276cf50.js","assets/sckong.f3fd5d2c.js","assets/nezbb.b6e59509.js","assets/index-731ead3d.css"]).then((e=>Fm(e.default||e))),vM=nr(hM({loader:gM},fM)),mM=()=>uM((()=>import("./pages-firing2-index.795d9cc2.js")),["assets/pages-firing2-index.795d9cc2.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-cb53de4e.css"]).then((e=>Fm(e.default||e))),_M=nr(hM({loader:mM},fM)),yM=()=>uM((()=>import("./pages-liveView-broadcast-index.f997e299.js")),["assets/pages-liveView-broadcast-index.f997e299.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/emojiMap.0d0f2d67.js","assets/l-svga.24cdebff.js","assets/l-svga-bc893c6f.css","assets/uni-app.es.d136296e.js","assets/iM.bd32fb6a.js","assets/index.befce884.js","assets/yinbi.8b2e5659.js","assets/send.492c39d2.js","assets/gfire.3276cf50.js","assets/sckong.f3fd5d2c.js","assets/noqd.d6c99c19.js","assets/back.cf07a20b.js","assets/index-7383b203.css"]).then((e=>Fm(e.default||e))),bM=nr(hM({loader:yM},fM)),MM=()=>uM((()=>import("./pages-liveView-accomplishedperson-accomplishedperson.3a2456c5.js")),["assets/pages-liveView-accomplishedperson-accomplishedperson.3a2456c5.js","assets/yui-tabs.ea4dbfdb.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/yui-tabs-b18c637a.css","assets/uni-app.es.d136296e.js","assets/lodash.bbce98da.js","assets/newback.d745f51c.js","assets/accomplishedperson-5f346b4a.css"]).then((e=>Fm(e.default||e))),CM=nr(hM({loader:MM},fM)),kM=()=>uM((()=>import("./pages-advice-index.665abf62.js")),["assets/pages-advice-index.665abf62.js","assets/m-tabbar.18a875e0.js","assets/pages.af45dffb.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/m-tabbar-dea06783.css","assets/uni-app.es.d136296e.js","assets/index-367898e7.css"]).then((e=>Fm(e.default||e))),wM=nr(hM({loader:kM},fM)),TM=()=>uM((()=>import("./pages-rateView-index.7c4f16a0.js")),["assets/pages-rateView-index.7c4f16a0.js","assets/yui-tabs.ea4dbfdb.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/yui-tabs-b18c637a.css","assets/uni-app.es.d136296e.js","assets/m-tabbar.18a875e0.js","assets/pages.af45dffb.js","assets/m-tabbar-dea06783.css","assets/lodash.bbce98da.js","assets/xin2.ab47a951.js","assets/noqd.d6c99c19.js","assets/bzb2.bc98be11.js","assets/sckong.f3fd5d2c.js","assets/index-f31d47a6.css"]).then((e=>Fm(e.default||e))),SM=nr(hM({loader:TM},fM)),IM=()=>uM((()=>import("./pages-chatView-index.decc12b8.js")),["assets/pages-chatView-index.decc12b8.js","assets/head-sculpture.d2b27887.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-b5109c6f.css"]).then((e=>Fm(e.default||e))),EM=nr(hM({loader:IM},fM)),DM=()=>uM((()=>import("./pages-myView-index.61d025fe.js")),["assets/pages-myView-index.61d025fe.js","assets/l-svga.24cdebff.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/l-svga-bc893c6f.css","assets/uni-app.es.d136296e.js","assets/m-tabbar.18a875e0.js","assets/pages.af45dffb.js","assets/m-tabbar-dea06783.css","assets/yinbi.8b2e5659.js","assets/bigyin.a1be06e2.js","assets/index-f6ecf84d.css"]).then((e=>Fm(e.default||e))),AM=nr(hM({loader:DM},fM)),LM=()=>uM((()=>import("./pages-login-index.31612883.js")),["assets/pages-login-index.31612883.js","assets/index.befce884.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-27750b8a.css"]).then((e=>Fm(e.default||e))),RM=nr(hM({loader:LM},fM)),OM=()=>uM((()=>import("./pages-myView-shop-shop.f1018195.js")),["assets/pages-myView-shop-shop.f1018195.js","assets/yinbi.8b2e5659.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/shop-1f0e6359.css"]).then((e=>Fm(e.default||e))),xM=nr(hM({loader:OM},fM)),NM=()=>uM((()=>import("./pages-myView-shop-shopRecord.fc5a3ca2.js")),["assets/pages-myView-shop-shopRecord.fc5a3ca2.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/shopRecord-66fb9b2e.css"]).then((e=>Fm(e.default||e))),PM=nr(hM({loader:NM},fM)),UM=()=>uM((()=>import("./pages-messagecontent-index.4c6b8eb6.js")),["assets/pages-messagecontent-index.4c6b8eb6.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/uni-app.es.d136296e.js","assets/index-ec4cfe00.css"]).then((e=>Fm(e.default||e))),GM=nr(hM({loader:UM},fM)),BM=()=>uM((()=>import("./pages-chatView-chatcontent-chatcontent.cf18e050.js")),["assets/pages-chatView-chatcontent-chatcontent.cf18e050.js","assets/left-arrowhead.3f5dbe7a.js","assets/head-sculpture.d2b27887.js","assets/pink-triangle.3397c37c.js","assets/send.492c39d2.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/chatcontent-23110be2.css"]).then((e=>Fm(e.default||e))),FM=nr(hM({loader:BM},fM)),qM=()=>uM((()=>import("./pages-myView-recharge-recharge.bfe03351.js")),["assets/pages-myView-recharge-recharge.bfe03351.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/recharge-9e4d8d32.css"]).then((e=>Fm(e.default||e))),VM=nr(hM({loader:qM},fM)),HM=()=>uM((()=>import("./pages-search-index.a4f5247c.js")),["assets/pages-search-index.a4f5247c.js","assets/lodash.bbce98da.js","assets/search.384cbe7f.js","assets/nezbb.b6e59509.js","assets/sckong.f3fd5d2c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-7d18e10e.css"]).then((e=>Fm(e.default||e))),zM=nr(hM({loader:HM},fM)),jM=()=>uM((()=>import("./pages-myView-anchor-anchor.865ab14e.js")),["assets/pages-myView-anchor-anchor.865ab14e.js","assets/pages.af45dffb.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/uni-app.es.d136296e.js","assets/phoneNum.90d59672.js","assets/index.52fd992b.js","assets/newback.d745f51c.js","assets/yuan1.0bcd4b3a.js","assets/anchor-bd0657e5.css"]).then((e=>Fm(e.default||e))),$M=nr(hM({loader:jM},fM)),WM=()=>uM((()=>import("./pages-myView-profile-index.014759db.js")),["assets/pages-myView-profile-index.014759db.js","assets/newback.52388a60.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-22cb541a.css"]).then((e=>Fm(e.default||e))),KM=nr(hM({loader:WM},fM)),YM=()=>uM((()=>import("./pages-myView-profile-pwd_modify.6fad71b9.js")),["assets/pages-myView-profile-pwd_modify.6fad71b9.js","assets/phoneNum.90d59672.js","assets/newback.52388a60.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/pwd_modify-9d26b2ff.css"]).then((e=>Fm(e.default||e))),XM=nr(hM({loader:YM},fM)),JM=()=>uM((()=>import("./pages-myView-profile-user_modify.2f8ad4bf.js")),["assets/pages-myView-profile-user_modify.2f8ad4bf.js","assets/newback.52388a60.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/user_modify-a92c4a0b.css"]).then((e=>Fm(e.default||e))),ZM=nr(hM({loader:JM},fM)),QM=()=>uM((()=>import("./pages-myView-profile-level.f02c264f.js")),["assets/pages-myView-profile-level.f02c264f.js","assets/newback.d745f51c.js","assets/suo.ecd7441d.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/level-953809bb.css"]).then((e=>Fm(e.default||e))),eC=nr(hM({loader:QM},fM)),tC=()=>uM((()=>import("./pages-chatView-chatcontent-two-chatcontent-two.7e5b0b56.js")),["assets/pages-chatView-chatcontent-two-chatcontent-two.7e5b0b56.js","assets/left-arrowhead.3f5dbe7a.js","assets/head-sculpture.d2b27887.js","assets/pink-triangle.3397c37c.js","assets/send.492c39d2.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/chatcontent-two-4c2ac384.css"]).then((e=>Fm(e.default||e))),nC=nr(hM({loader:tC},fM)),oC=()=>uM((()=>import("./pages-chatView-set-set.99c20000.js")),["assets/pages-chatView-set-set.99c20000.js","assets/left-arrowhead.3f5dbe7a.js","assets/head-sculpture.d2b27887.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/set-7936f08f.css"]).then((e=>Fm(e.default||e))),rC=nr(hM({loader:oC},fM)),iC=()=>uM((()=>import("./pages-chatView-member-member.c7165907.js")),["assets/pages-chatView-member-member.c7165907.js","assets/left-arrowhead.3f5dbe7a.js","assets/head-sculpture.d2b27887.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/member-498db79e.css"]).then((e=>Fm(e.default||e))),aC=nr(hM({loader:iC},fM)),sC=()=>uM((()=>import("./pages-cMoney-index.b117dcf8.js")),["assets/pages-cMoney-index.b117dcf8.js","assets/_plugin-vue_export-helper.1b428a4d.js"]).then((e=>Fm(e.default||e))),cC=nr(hM({loader:sC},fM)),lC=()=>uM((()=>import("./pages-zbCenter-index.fa91e413.js")),["assets/pages-zbCenter-index.fa91e413.js","assets/_plugin-vue_export-helper.1b428a4d.js"]).then((e=>Fm(e.default||e))),uC=nr(hM({loader:lC},fM)),dC=()=>uM((()=>import("./pages-msgCenter-index.a5f4a4dd.js")),["assets/pages-msgCenter-index.a5f4a4dd.js","assets/newback.d745f51c.js","assets/sckong.f3fd5d2c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-6e86c4d9.css"]).then((e=>Fm(e.default||e))),pC=nr(hM({loader:dC},fM)),hC=()=>uM((()=>import("./pages-msgCenter-messages.a8254ca9.js")),["assets/pages-msgCenter-messages.a8254ca9.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/messages-59284cea.css"]).then((e=>Fm(e.default||e))),fC=nr(hM({loader:hC},fM)),gC=()=>uM((()=>import("./pages-helpCenter-index.5ebc6010.js")),["assets/pages-helpCenter-index.5ebc6010.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-cf011819.css"]).then((e=>Fm(e.default||e))),vC=nr(hM({loader:gC},fM)),mC=()=>uM((()=>import("./pages-lookHistory-index.6ef64ae3.js")),["assets/pages-lookHistory-index.6ef64ae3.js","assets/newback.d745f51c.js","assets/xin2.ab47a951.js","assets/clear.f3fd5d2c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-5d6ecddc.css"]).then((e=>Fm(e.default||e))),_C=nr(hM({loader:mC},fM)),yC=()=>uM((()=>import("./pages-reCenter-index.2d1a7422.js")),["assets/pages-reCenter-index.2d1a7422.js","assets/newback.52388a60.js","assets/suo.ecd7441d.js","assets/experience.bf9b1d7e.js","assets/bigyin.a1be06e2.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-6bae6ec4.css"]).then((e=>Fm(e.default||e))),bC=nr(hM({loader:yC},fM)),MC=()=>uM((()=>import("./pages-yjFk-index.e294b1dc.js")),["assets/pages-yjFk-index.e294b1dc.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-192563d9.css"]).then((e=>Fm(e.default||e))),CC=nr(hM({loader:MC},fM)),kC=()=>uM((()=>import("./pages-zxkf-index.8b996cf1.js")),["assets/pages-zxkf-index.8b996cf1.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-8136761f.css"]).then((e=>Fm(e.default||e))),wC=nr(hM({loader:kC},fM)),TC=()=>uM((()=>import("./pages-onlineKf-index.07435ad9.js")),["assets/pages-onlineKf-index.07435ad9.js","assets/_plugin-vue_export-helper.1b428a4d.js"]).then((e=>Fm(e.default||e))),SC=nr(hM({loader:TC},fM)),IC=()=>uM((()=>import("./pages-userXy-index.38110804.js")),["assets/pages-userXy-index.38110804.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-b13aac7a.css"]).then((e=>Fm(e.default||e))),EC=nr(hM({loader:IC},fM)),DC=()=>uM((()=>import("./pages-ysXy-index.e746a409.js")),["assets/pages-ysXy-index.e746a409.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-404f5f41.css"]).then((e=>Fm(e.default||e))),AC=nr(hM({loader:DC},fM)),LC=()=>uM((()=>import("./pages-myView-privilege-privilege.827254d1.js")),["assets/pages-myView-privilege-privilege.827254d1.js","assets/l-svga.24cdebff.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/l-svga-bc893c6f.css","assets/uni-app.es.d136296e.js","assets/lodash.bbce98da.js","assets/back.cf07a20b.js","assets/privilege-b60bb84b.css"]).then((e=>Fm(e.default||e))),RC=nr(hM({loader:LC},fM)),OC=()=>uM((()=>import("./pages-mygz-index.c4bc8d26.js")),["assets/pages-mygz-index.c4bc8d26.js","assets/newback.d745f51c.js","assets/gfire.3276cf50.js","assets/sckong.f3fd5d2c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-25b6a948.css"]).then((e=>Fm(e.default||e))),xC=nr(hM({loader:OC},fM)),NC=()=>uM((()=>import("./pages-mygz-gzdetail-index.d521d25b.js")),["assets/pages-mygz-gzdetail-index.d521d25b.js","assets/index.befce884.js","assets/lodash.bbce98da.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-46b934e6.css"]).then((e=>Fm(e.default||e))),PC=nr(hM({loader:NC},fM)),UC=()=>uM((()=>import("./pages-lingrecord-index.919d109f.js")),["assets/pages-lingrecord-index.919d109f.js","assets/newback.d745f51c.js","assets/experience.bf9b1d7e.js","assets/get--y.e84a6973.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-3ea11d1a.css"]).then((e=>Fm(e.default||e))),GC=nr(hM({loader:UC},fM)),BC=()=>uM((()=>import("./pages-myView-recharge-details-details.0c89e5a0.js")),["assets/pages-myView-recharge-details-details.0c89e5a0.js","assets/yui-tabs.ea4dbfdb.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/yui-tabs-b18c637a.css","assets/uni-app.es.d136296e.js","assets/newback.d745f51c.js","assets/rl.dda35283.js","assets/get--y.e84a6973.js","assets/details-e887ee87.css"]).then((e=>Fm(e.default||e))),FC=nr(hM({loader:BC},fM)),qC=()=>uM((()=>import("./pages-login-verification.0083bd6d.js")),["assets/pages-login-verification.0083bd6d.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index.befce884.js","assets/verification-c4310728.css"]).then((e=>Fm(e.default||e))),VC=nr(hM({loader:qC},fM)),HC=()=>uM((()=>import("./pages-myView-setting-setting.45dd45c2.js")),["assets/pages-myView-setting-setting.45dd45c2.js","assets/iM.bd32fb6a.js","assets/index.befce884.js","assets/newback.52388a60.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/setting-ec3a5912.css"]).then((e=>Fm(e.default||e))),zC=nr(hM({loader:HC},fM)),jC=()=>uM((()=>import("./pages-myView-setting-notice.fb4eebd5.js")),["assets/pages-myView-setting-notice.fb4eebd5.js","assets/newback.52388a60.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/notice-00ea6a6b.css"]).then((e=>Fm(e.default||e))),$C=nr(hM({loader:jC},fM)),WC=()=>uM((()=>import("./pages-myView-setting-edition.dc380723.js")),["assets/pages-myView-setting-edition.dc380723.js","assets/newback.52388a60.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/edition-52a3d7f2.css"]).then((e=>Fm(e.default||e))),KC=nr(hM({loader:WC},fM)),YC=()=>uM((()=>import("./pages-chatView-addgroup-addgroup.8cef32c7.js")),["assets/pages-chatView-addgroup-addgroup.8cef32c7.js","assets/index.52fd992b.js","assets/iM.bd32fb6a.js","assets/index.befce884.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/addgroup-f535c3cd.css"]).then((e=>Fm(e.default||e))),XC=nr(hM({loader:YC},fM)),JC=()=>uM((()=>import("./pages-rateView-search-search.892334c1.js")),["assets/pages-rateView-search-search.892334c1.js","assets/lodash.bbce98da.js","assets/search.384cbe7f.js","assets/xin2.ab47a951.js","assets/bzb2.bc98be11.js","assets/sckong.f3fd5d2c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/search-11de4185.css"]).then((e=>Fm(e.default||e))),ZC=nr(hM({loader:JC},fM)),QC=()=>uM((()=>import("./pages-rateView-sift-sift.85d0f6d1.js")),["assets/pages-rateView-sift-sift.85d0f6d1.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/uni-app.es.d136296e.js","assets/newback.d745f51c.js","assets/yuan1.0bcd4b3a.js","assets/sift-04d356c1.css"]).then((e=>Fm(e.default||e))),ek=nr(hM({loader:QC},fM)),tk=()=>uM((()=>import("./pages-fans-index.5e9859c6.js")),["assets/pages-fans-index.5e9859c6.js","assets/newback.d745f51c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-1d826a0b.css"]).then((e=>Fm(e.default||e))),nk=nr(hM({loader:tk},fM)),ok=()=>uM((()=>import("./pages-record-index.7931d3da.js")),["assets/pages-record-index.7931d3da.js","assets/newback.d745f51c.js","assets/rl.dda35283.js","assets/clear.f3fd5d2c.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/index-f5035580.css"]).then((e=>Fm(e.default||e))),rk=nr(hM({loader:ok},fM)),ik=()=>uM((()=>import("./pages-myView-recharge-rechargexy-rechargexy.986ec109.js")),["assets/pages-myView-recharge-rechargexy-rechargexy.986ec109.js","assets/left-arrowhead.3f5dbe7a.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/rechargexy-5c714368.css"]).then((e=>Fm(e.default||e))),ak=nr(hM({loader:ik},fM)),sk=()=>uM((()=>import("./pages-TUIKit-TUIPages-TUIConversation-index.2d5ec42f.js")),["assets/pages-TUIKit-TUIPages-TUIConversation-index.2d5ec42f.js","assets/m-tabbar.18a875e0.js","assets/pages.af45dffb.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/m-tabbar-dea06783.css","assets/uni-app.es.d136296e.js","assets/date.8f6fd309.js","assets/sckong.f3fd5d2c.js","assets/index.befce884.js","assets/IComponentServer.e3f3b233.js","assets/index-5a6f552f.css"]).then((e=>Fm(e.default||e))),ck=nr(hM({loader:sk},fM)),lk=()=>uM((()=>import("./pages-TUIKit-TUIPages-TUIConversation-create.5c987e7c.js")),["assets/pages-TUIKit-TUIPages-TUIConversation-create.5c987e7c.js","assets/index.befce884.js","assets/uni-app.es.d136296e.js","assets/selected.51ceb6f0.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/create-044f80d5.css"]).then((e=>Fm(e.default||e))),uk=nr(hM({loader:lk},fM)),dk=()=>uM((()=>import("./pages-TUIKit-TUIPages-TUIChat-index.e985f23a.js")),["assets/pages-TUIKit-TUIPages-TUIChat-index.e985f23a.js","assets/uni-app.es.d136296e.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/date.8f6fd309.js","assets/emojiMap.0d0f2d67.js","assets/index.befce884.js","assets/IComponentServer.e3f3b233.js","assets/newback.d745f51c.js","assets/index-0c1eb49e.css"]).then((e=>Fm(e.default||e))),pk=nr(hM({loader:dk},fM)),hk=()=>uM((()=>import("./pages-TUIKit-TUIPages-TUIChat-components-message-elements-video-play.9e0723d1.js")),["assets/pages-TUIKit-TUIPages-TUIChat-components-message-elements-video-play.9e0723d1.js","assets/uni-app.es.d136296e.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/video-play-03ec310c.css"]).then((e=>Fm(e.default||e))),fk=nr(hM({loader:hk},fM)),gk=()=>uM((()=>import("./pages-TUIKit-TUIPages-TUIGroup-index.58554468.js")),["assets/pages-TUIKit-TUIPages-TUIGroup-index.58554468.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/uni-app.es.d136296e.js","assets/index.befce884.js","assets/IComponentServer.e3f3b233.js","assets/newback.d745f51c.js","assets/index-6859f845.css"]).then((e=>Fm(e.default||e))),vk=nr(hM({loader:gk},fM)),mk=()=>uM((()=>import("./pages-TUIKit-TUIPages-TUIGroup-memberOperate.890e4f80.js")),["assets/pages-TUIKit-TUIPages-TUIGroup-memberOperate.890e4f80.js","assets/index.befce884.js","assets/uni-app.es.d136296e.js","assets/selected.51ceb6f0.js","assets/_plugin-vue_export-helper.1b428a4d.js","assets/memberOperate-6dd60669.css"]).then((e=>Fm(e.default||e))),_k=nr(hM({loader:mk},fM));function yk(e,t){return Fi(),ji(sM,null,{page:Do((()=>[Zi(e,hM({},t,{ref:"page"}),null,512)])),_:1})}window.__uniRoutes=[{path:"/",alias:"/pages/liveView/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(vM,t)}},loader:gM,meta:{isQuit:!0,isEntry:!0,isTabBar:!0,tabBarIndex:2,enablePullDownRefresh:!0,pullToRefresh:{style:"circle",color:"#F0222C",offset:"290rpx"},bounce:"none",navigationBar:{titleText:"直播",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/firing2/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(_M,t)}},loader:mM,meta:{disableSwipeBack:!0,animationType:"fade-in",bounce:"none",popGesture:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/liveView/broadcast/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(bM,t)}},loader:yM,meta:{softinputMode:"adjustResize",bounce:"none",subNVues:[{path:"pages/liveView/broadcast/uvue/danm",id:"subNvue",type:"popup",style:{position:"absolute",top:"0px",width:"100%",height:"100rpx",background:"transparent","z-index":"999999999999"}}],navigationBar:{titleText:"直播-聊天",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/liveView/accomplishedperson/accomplishedperson",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(CM,t)}},loader:MM,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/advice/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(wM,t)}},loader:kM,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:1,onReachBottomDistance:40,enablePullDownRefresh:!0,pullToRefresh:{style:"circle",color:"#F0222C",offset:"204rpx"},bounce:"none",navigationBar:{titleText:"资讯",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/rateView/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(SM,t)}},loader:TM,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:0,onReachBottomDistance:40,enablePullDownRefresh:!0,pullToRefresh:{style:"circle",color:"#F0222C",offset:"240rpx"},bounce:"none",navigationBar:{titleText:"赛事",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/chatView/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(EM,t)}},loader:IM,meta:{bounce:"none",navigationBar:{titleText:"聊天",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(AM,t)}},loader:DM,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:4,bounce:"none",navigationBar:{titleText:"我的",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/login/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(RM,t)}},loader:LM,meta:{bounce:"none",navigationBar:{titleText:"登录",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/shop/shop",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(xM,t)}},loader:OM,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/shop/shopRecord",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(PM,t)}},loader:NM,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/messagecontent/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(GM,t)}},loader:UM,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/chatView/chatcontent/chatcontent",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(FM,t)}},loader:BM,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/recharge/recharge",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(VM,t)}},loader:qM,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/search/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(zM,t)}},loader:HM,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/anchor/anchor",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk($M,t)}},loader:jM,meta:{enablePullDownRefresh:!1,bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/profile/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(KM,t)}},loader:WM,meta:{bounce:"none",navigationBar:{titleText:"个人资料",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/profile/pwd_modify",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(XM,t)}},loader:YM,meta:{bounce:"none",navigationBar:{titleText:"密码修改",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/profile/user_modify",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(ZM,t)}},loader:JM,meta:{bounce:"none",navigationBar:{titleText:"昵称修改",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/profile/level",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(eC,t)}},loader:QM,meta:{bounce:"none",navigationBar:{titleText:"我的等级",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/chatView/chatcontent-two/chatcontent-two",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(nC,t)}},loader:tC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/chatView/set/set",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(rC,t)}},loader:oC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/chatView/member/member",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(aC,t)}},loader:iC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/cMoney/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(cC,t)}},loader:sC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/zbCenter/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(uC,t)}},loader:lC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/msgCenter/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(pC,t)}},loader:dC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/msgCenter/messages",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(fC,t)}},loader:hC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/helpCenter/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(vC,t)}},loader:gC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/lookHistory/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(_C,t)}},loader:mC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/reCenter/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(bC,t)}},loader:yC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/yjFk/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(CC,t)}},loader:MC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/zxkf/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(wC,t)}},loader:kC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/onlineKf/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(SC,t)}},loader:TC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/userXy/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(EC,t)}},loader:IC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/ysXy/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(AC,t)}},loader:DC,meta:{bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/privilege/privilege",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(RC,t)}},loader:LC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/mygz/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(xC,t)}},loader:OC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/mygz/gzdetail/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(PC,t)}},loader:NC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/lingrecord/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(GC,t)}},loader:UC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/recharge/details/details",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(FC,t)}},loader:BC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/login/verification",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(VC,t)}},loader:qC,meta:{bounce:"none",navigationBar:{titleText:"",type:"default"},isNVue:!1}},{path:"/pages/myView/setting/setting",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(zC,t)}},loader:HC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/setting/notice",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk($C,t)}},loader:jC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/setting/edition",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(KC,t)}},loader:WC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/chatView/addgroup/addgroup",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(XC,t)}},loader:YC,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/rateView/search/search",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(ZC,t)}},loader:JC,meta:{enablePullDownRefresh:!1,bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/rateView/sift/sift",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(ek,t)}},loader:QC,meta:{enablePullDownRefresh:!1,bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/fans/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(nk,t)}},loader:tk,meta:{enablePullDownRefresh:!1,bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/record/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(rk,t)}},loader:ok,meta:{enablePullDownRefresh:!1,bounce:"none",navigationBar:{titleText:"",style:"custom",type:"default"},isNVue:!1}},{path:"/pages/myView/recharge/rechargexy/rechargexy",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(ak,t)}},loader:ik,meta:{bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/TUIKit/TUIPages/TUIConversation/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(ck,t)}},loader:sk,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:3,navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/TUIKit/TUIPages/TUIConversation/create",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(uk,t)}},loader:lk,meta:{scrollIndicator:"none",navigationBar:{titleText:"选择联系人",type:"default"},isNVue:!1}},{path:"/pages/TUIKit/TUIPages/TUIChat/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(pk,t)}},loader:dk,meta:{scrollIndicator:"none",softinputNavBar:"none",bounce:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/TUIKit/TUIPages/TUIChat/components/message-elements/video-play",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(fk,t)}},loader:hk,meta:{navigationBar:{titleText:"云通信 IM",type:"default"},isNVue:!1}},{path:"/pages/TUIKit/TUIPages/TUIGroup/index",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(vk,t)}},loader:gk,meta:{scrollIndicator:"none",navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/TUIKit/TUIPages/TUIGroup/memberOperate",component:{setup(){const e=Pm(),t=e&&e.$route&&e.$route.query||{};return()=>yk(_k,t)}},loader:mk,meta:{navigationBar:{},isNVue:!1}}].map((e=>(e.meta.route=(e.alias||e.path).slice(1),e)));const bk={color:"#8E92A4",selectedColor:"#ED5E2C",backgroundColor:"#FFFFFF",fontSize:"10px",spacing:"4px",boxShadow:" 0px -8px 8px 2px #F6F6F6",iconWidth:"22px",list:[{pagePath:"/pages/rateView/index",iconPath:"/static/image/myView/unss.png",selectedIconPath:"/static/image/myView/ss.png",text:"赛事"},{pagePath:"/pages/advice/index",iconPath:"/static/image/myView/unzx.png",selectedIconPath:"/static/image/myView/zx.png",text:"资讯"},{pagePath:"/pages/liveView/index",iconPath:"/static/image/myView/unzb.png",selectedIconPath:"/static/image/myView/zb.png",text:"直播"},{pagePath:"/pages/TUIKit/TUIPages/TUIConversation/index",iconPath:"/static/image/myView/unlt.png",selectedIconPath:"/static/image/myView/lt.png",text:"聊天"},{pagePath:"/pages/myView/index",iconPath:"/static/image/myView/unwd.png",selectedIconPath:"/static/image/myView/wd.png",text:"我的"}]};const Mk=function(e,t,n="POST"){return new Promise(((o,r)=>{console.log(uni.$Crypto.encrypt(JSON.stringify(t)),"加密参数"),cy({url:"https://api.dltkh.top"+e,data:{data:uni.$Crypto.encrypt(JSON.stringify(t))},method:n,header:{"Content-Type":"application/x-www-form-urlencoded"},success:e=>{const t=JSON.parse(uni.$Crypto.decrypt(e.data));console.log(t),o(t)},fail:e=>{r(e)}})}))};function Ck(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}const kk="function"==typeof Proxy,wk="devtools-plugin:setup";class Tk{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const i in e.settings){const t=e.settings[i];n[i]=t.defaultValue}const o=`__vue-devtools-plugin-settings__${e.id}`;let r={...n};try{const e=localStorage.getItem(o),t=JSON.parse(e);Object.assign(r,t)}catch(gS){}this.fallbacks={getSettings:()=>r,setSettings(e){try{localStorage.setItem(o,JSON.stringify(e))}catch(gS){}r=e}},t.on("plugin:settings:set",((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function Sk(e,t){const n=Ck(),o=Ck().__VUE_DEVTOOLS_GLOBAL_HOOK__,r=kk&&e.enableEarlyProxy;if(!o||!n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&r){const i=r?new Tk(e,o):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:i}),i&&t(i.proxiedTarget)}else o.emit(wk,e,t)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Ik="store";function Ek(e){return void 0===e&&(e=null),Po(null!==e?e:Ik)}function Dk(e,t){if(void 0===t&&(t=[]),null===e||"object"!=typeof e)return e;var n,o=(n=function(t){return t.original===e},t.filter(n)[0]);if(o)return o.copy;var r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((function(n){r[n]=Dk(e[n],t)})),r}function Ak(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function Lk(e){return null!==e&&"object"==typeof e}function Rk(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Ok(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;Nk(e,n,[],e._modules.root,!0),xk(e,n,t)}function xk(e,t,n){var o=e._state,r=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,a={},s={},c=bt(!0);c.run((function(){Ak(i,(function(t,n){a[n]=function(e,t){return function(){return e(t)}}(t,e),s[n]=Ma((function(){return a[n]()})),Object.defineProperty(e.getters,n,{get:function(){return s[n].value},enumerable:!0})}))})),e._state=In({data:t}),e._scope=c,e.strict&&function(e){Bo((function(){return e._state.data}),(function(){}),{deep:!0,flush:"sync"})}(e),o&&n&&e._withCommit((function(){o.data=null})),r&&r.stop()}function Nk(e,t,n,o,r){var i=!n.length,a=e._modules.getNamespace(n);if(o.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=o),!i&&!r){var s=Uk(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){s[c]=o.state}))}var l=o.context=function(e,t,n){var o=""===t,r={dispatch:o?e.dispatch:function(n,o,r){var i=Gk(n,o,r),a=i.payload,s=i.options,c=i.type;return s&&s.root||(c=t+c),e.dispatch(c,a)},commit:o?e.commit:function(n,o,r){var i=Gk(n,o,r),a=i.payload,s=i.options,c=i.type;s&&s.root||(c=t+c),e.commit(c,a,s)}};return Object.defineProperties(r,{getters:{get:o?function(){return e.getters}:function(){return Pk(e,t)}},state:{get:function(){return Uk(e.state,n)}}}),r}(e,a,n);o.forEachMutation((function(t,n){!function(e,t,n,o){var r=e._mutations[t]||(e._mutations[t]=[]);r.push((function(t){n.call(e,o.state,t)}))}(e,a+n,t,l)})),o.forEachAction((function(t,n){var o=t.root?n:a+n,r=t.handler||t;!function(e,t,n,o){var r=e._actions[t]||(e._actions[t]=[]);r.push((function(t){var r,i=n.call(e,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:e.getters,rootState:e.state},t);return(r=i)&&"function"==typeof r.then||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))}(e,o,r,l)})),o.forEachGetter((function(t,n){!function(e,t,n,o){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return n(o.state,o.getters,e.state,e.getters)}}(e,a+n,t,l)})),o.forEachChild((function(o,i){Nk(e,t,n.concat(i),o,r)}))}function Pk(e,t){if(!e._makeLocalGettersCache[t]){var n={},o=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,o)===t){var i=r.slice(o);Object.defineProperty(n,i,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function Uk(e,t){return t.reduce((function(e,t){return e[t]}),e)}function Gk(e,t,n){return Lk(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Bk="vuex:mutations",Fk="vuex:actions",qk="vuex",Vk=0;function Hk(e,t){Sk({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:["vuex bindings"]},(function(n){n.addTimelineLayer({id:Bk,label:"Vuex Mutations",color:zk}),n.addTimelineLayer({id:Fk,label:"Vuex Actions",color:zk}),n.addInspector({id:qk,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===qk)if(n.filter){var o=[];Kk(o,t._modules.root,n.filter,""),n.rootNodes=o}else n.rootNodes=[Wk(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===qk){var o=n.nodeId;Pk(t,o),n.state=function(e,t,n){t="root"===n?t:t[n];var o=Object.keys(t),r={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(o.length){var i=function(e){var t={};return Object.keys(e).forEach((function(n){var o=n.split("/");if(o.length>1){var r=t,i=o.pop();o.forEach((function(e){r[e]||(r[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),r=r[e]._custom.value})),r[i]=Yk((function(){return e[n]}))}else t[n]=Yk((function(){return e[n]}))})),t}(t);r.getters=Object.keys(i).map((function(e){return{key:e.endsWith("/")?$k(e):e,editable:!1,value:Yk((function(){return i[e]}))}}))}return r}((r=t._modules,(a=(i=o).split("/").filter((function(e){return e}))).reduce((function(e,t,n){var o=e[t];if(!o)throw new Error('Missing module "'+t+'" for path "'+i+'".');return n===a.length-1?o:o._children}),"root"===i?r:r.root._children)),"root"===o?t.getters:t._makeLocalGettersCache,o)}var r,i,a})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===qk){var o=n.nodeId,r=n.path;"root"!==o&&(r=o.split("/").filter(Boolean).concat(r)),t._withCommit((function(){n.set(t._state.data,r,n.state.value)}))}})),t.subscribe((function(e,t){var o={};e.payload&&(o.payload=e.payload),o.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(qk),n.sendInspectorState(qk),n.addTimelineEvent({layerId:Bk,event:{time:Date.now(),title:e.type,data:o}})})),t.subscribeAction({before:function(e,t){var o={};e.payload&&(o.payload=e.payload),e._id=Vk++,e._time=Date.now(),o.state=t,n.addTimelineEvent({layerId:Fk,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:o}})},after:function(e,t){var o={},r=Date.now()-e._time;o.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},e.payload&&(o.payload=e.payload),o.state=t,n.addTimelineEvent({layerId:Fk,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:o}})}})}))}var zk=8702998,jk={label:"namespaced",textColor:16777215,backgroundColor:6710886};function $k(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function Wk(e,t){return{id:t||"root",label:$k(t),tags:e.namespaced?[jk]:[],children:Object.keys(e._children).map((function(n){return Wk(e._children[n],t+n+"/")}))}}function Kk(e,t,n,o){o.includes(n)&&e.push({id:o||"root",label:o.endsWith("/")?o.slice(0,o.length-1):o||"Root",tags:t.namespaced?[jk]:[]}),Object.keys(t._children).forEach((function(r){Kk(e,t._children[r],n,o+r+"/")}))}function Yk(e){try{return e()}catch(gS){return gS}}var Xk=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},Jk={namespaced:{configurable:!0}};Jk.namespaced.get=function(){return!!this._rawModule.namespaced},Xk.prototype.addChild=function(e,t){this._children[e]=t},Xk.prototype.removeChild=function(e){delete this._children[e]},Xk.prototype.getChild=function(e){return this._children[e]},Xk.prototype.hasChild=function(e){return e in this._children},Xk.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},Xk.prototype.forEachChild=function(e){Ak(this._children,e)},Xk.prototype.forEachGetter=function(e){this._rawModule.getters&&Ak(this._rawModule.getters,e)},Xk.prototype.forEachAction=function(e){this._rawModule.actions&&Ak(this._rawModule.actions,e)},Xk.prototype.forEachMutation=function(e){this._rawModule.mutations&&Ak(this._rawModule.mutations,e)},Object.defineProperties(Xk.prototype,Jk);var Zk=function(e){this.register([],e,!1)};function Qk(e,t,n){if(t.update(n),n.modules)for(var o in n.modules){if(!t.getChild(o))return;Qk(e.concat(o),t.getChild(o),n.modules[o])}}function ew(e){return new tw(e)}Zk.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},Zk.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},Zk.prototype.update=function(e){Qk([],this.root,e)},Zk.prototype.register=function(e,t,n){var o=this;void 0===n&&(n=!0);var r=new Xk(t,n);0===e.length?this.root=r:this.get(e.slice(0,-1)).addChild(e[e.length-1],r);t.modules&&Ak(t.modules,(function(t,r){o.register(e.concat(r),t,n)}))},Zk.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],o=t.getChild(n);o&&o.runtime&&t.removeChild(n)},Zk.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var tw=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var o=e.strict;void 0===o&&(o=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Zk(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var i=this,a=this.dispatch,s=this.commit;this.dispatch=function(e,t){return a.call(i,e,t)},this.commit=function(e,t,n){return s.call(i,e,t,n)},this.strict=o;var c=this._modules.root.state;Nk(this,c,[],this._modules.root),xk(this,c),n.forEach((function(e){return e(t)}))},nw={state:{configurable:!0}};tw.prototype.install=function(e,t){e.provide(t||Ik,this),e.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&Hk(e,this)},nw.state.get=function(){return this._state.data},nw.state.set=function(e){},tw.prototype.commit=function(e,t,n){var o=this,r=Gk(e,t,n),i=r.type,a=r.payload,s={type:i,payload:a},c=this._mutations[i];c&&(this._withCommit((function(){c.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(s,o.state)})))},tw.prototype.dispatch=function(e,t){var n=this,o=Gk(e,t),r=o.type,i=o.payload,a={type:r,payload:i},s=this._actions[r];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(gS){}var c=s.length>1?Promise.all(s.map((function(e){return e(i)}))):s[0](i);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(gS){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,n.state,e)}))}catch(gS){}t(e)}))}))}},tw.prototype.subscribe=function(e,t){return Rk(e,this._subscribers,t)},tw.prototype.subscribeAction=function(e,t){return Rk("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},tw.prototype.watch=function(e,t,n){var o=this;return Bo((function(){return e(o.state,o.getters)}),t,Object.assign({},n))},tw.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},tw.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),Nk(this,this.state,e,this._modules.get(e),n.preserveState),xk(this,this.state)},tw.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete Uk(t.state,e.slice(0,-1))[e[e.length-1]]})),Ok(this)},tw.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},tw.prototype.hotUpdate=function(e){this._modules.update(e),Ok(this,!0)},tw.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(tw.prototype,nw);var ow=cw((function(e,t){var n={};return sw(t).forEach((function(t){var o=t.key,r=t.val;n[o]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var o=lw(this.$store,"mapState",e);if(!o)return;t=o.context.state,n=o.context.getters}return"function"==typeof r?r.call(this,t,n):t[r]},n[o].vuex=!0})),n})),rw=cw((function(e,t){var n={};return sw(t).forEach((function(t){var o=t.key,r=t.val;n[o]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var o=this.$store.commit;if(e){var i=lw(this.$store,"mapMutations",e);if(!i)return;o=i.context.commit}return"function"==typeof r?r.apply(this,[o].concat(t)):o.apply(this.$store,[r].concat(t))}})),n})),iw=cw((function(e,t){var n={};return sw(t).forEach((function(t){var o=t.key,r=t.val;r=e+r,n[o]=function(){if(!e||lw(this.$store,"mapGetters",e))return this.$store.getters[r]},n[o].vuex=!0})),n})),aw=cw((function(e,t){var n={};return sw(t).forEach((function(t){var o=t.key,r=t.val;n[o]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var o=this.$store.dispatch;if(e){var i=lw(this.$store,"mapActions",e);if(!i)return;o=i.context.dispatch}return"function"==typeof r?r.apply(this,[o].concat(t)):o.apply(this.$store,[r].concat(t))}})),n}));function sw(e){return function(e){return Array.isArray(e)||Lk(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function cw(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function lw(e,t,n){return e._modulesNamespaceMap[n]}function uw(e,t,n){var o=n?e.groupCollapsed:e.group;try{o.call(e,t)}catch(gS){e.log(t)}}function dw(e){try{e.groupEnd()}catch(gS){e.log("—— log end ——")}}function pw(){var e=new Date;return" @ "+hw(e.getHours(),2)+":"+hw(e.getMinutes(),2)+":"+hw(e.getSeconds(),2)+"."+hw(e.getMilliseconds(),3)}function hw(e,t){return n="0",o=t-e.toString().length,new Array(o+1).join(n)+e;var n,o}var fw={version:"4.1.0",Store:tw,storeKey:Ik,createStore:ew,useStore:Ek,mapState:ow,mapMutations:rw,mapGetters:iw,mapActions:aw,createNamespacedHelpers:function(e){return{mapState:ow.bind(null,e),mapGetters:iw.bind(null,e),mapMutations:rw.bind(null,e),mapActions:aw.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var o=e.transformer;void 0===o&&(o=function(e){return e});var r=e.mutationTransformer;void 0===r&&(r=function(e){return e});var i=e.actionFilter;void 0===i&&(i=function(e,t){return!0});var a=e.actionTransformer;void 0===a&&(a=function(e){return e});var s=e.logMutations;void 0===s&&(s=!0);var c=e.logActions;void 0===c&&(c=!0);var l=e.logger;return void 0===l&&(l=console),function(e){var u=Dk(e.state);void 0!==l&&(s&&e.subscribe((function(e,i){var a=Dk(i);if(n(e,u,a)){var s=pw(),c=r(e),d="mutation "+e.type+s;uw(l,d,t),l.log("%c prev state","color: #9E9E9E; font-weight: bold",o(u)),l.log("%c mutation","color: #03A9F4; font-weight: bold",c),l.log("%c next state","color: #4CAF50; font-weight: bold",o(a)),dw(l)}u=a})),c&&e.subscribeAction((function(e,n){if(i(e,n)){var o=pw(),r=a(e),s="action "+e.type+o;uw(l,s,t),l.log("%c action","color: #03A9F4; font-weight: bold",r),dw(l)}})))}}};const gw="user_Id";const vw=ew({state:{userInfo:{},user_Id:A_(gw)||"",chatAnchoer:{}},mutations:{CHANGE_USER_ID(e,t){e.user_Id=t,E_({key:gw,data:t})},CHANGE_USER_INFO(e,t){e.userInfo=t}},actions:{getUserInfo({commit:e,state:t}){t.user_Id&&uni.$api("/User/GetUserInfoByUserId",{User_Id:t.user_Id}).then((t=>{200!==t.Code?(e("CHANGE_USER_ID",""),R_({key:gw})):(e("CHANGE_USER_INFO",t.Result),console.log(this.state.userInfo,3543564))}))}},getters:{is_login:e=>!!e.userInfo.User_Id}});var mw="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_w=[],yw=[],bw="undefined"!=typeof Uint8Array?Uint8Array:Array,Mw=!1;function Cw(){Mw=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)_w[t]=e[t],yw[e.charCodeAt(t)]=t;yw["-".charCodeAt(0)]=62,yw["_".charCodeAt(0)]=63}function kw(e,t,n){for(var o,r,i=[],a=t;a<n;a+=3)o=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(_w[(r=o)>>18&63]+_w[r>>12&63]+_w[r>>6&63]+_w[63&r]);return i.join("")}function ww(e){var t;Mw||Cw();for(var n=e.length,o=n%3,r="",i=[],a=0,s=n-o;a<s;a+=16383)i.push(kw(e,a,a+16383>s?s:a+16383));return 1===o?(t=e[n-1],r+=_w[t>>2],r+=_w[t<<4&63],r+="=="):2===o&&(t=(e[n-2]<<8)+e[n-1],r+=_w[t>>10],r+=_w[t>>4&63],r+=_w[t<<2&63],r+="="),i.push(r),i.join("")}function Tw(e,t,n,o,r){var i,a,s=8*r-o-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?r-1:0,p=n?-1:1,h=e[t+d];for(d+=p,i=h&(1<<-u)-1,h>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=p,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=o;u>0;a=256*a+e[t+d],d+=p,u-=8);if(0===i)i=1-l;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,o),i-=l}return(h?-1:1)*a*Math.pow(2,i-o)}function Sw(e,t,n,o,r,i){var a,s,c,l=8*i-r-1,u=(1<<l)-1,d=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:i-1,f=o?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,r),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;e[n+h]=255&s,h+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;e[n+h]=255&a,h+=f,a/=256,l-=8);e[n+h-f]|=128*g}var Iw={}.toString,Ew=Array.isArray||function(e){return"[object Array]"==Iw.call(e)};function Dw(){return Lw.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Aw(e,t){if(Dw()<t)throw new RangeError("Invalid typed array length");return Lw.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Lw.prototype:(null===e&&(e=new Lw(t)),e.length=t),e}function Lw(e,t,n){if(!(Lw.TYPED_ARRAY_SUPPORT||this instanceof Lw))return new Lw(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return xw(this,e)}return Rw(this,e,t,n)}function Rw(e,t,n,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o),Lw.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Lw.prototype:e=Nw(e,t),e}(e,t,n,o):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Lw.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|Gw(t,n),r=(e=Aw(e,o)).write(t,n);return r!==o&&(e=e.slice(0,r)),e}(e,t,n):function(e,t){if(Uw(t)){var n=0|Pw(t.length);return 0===(e=Aw(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(o=t.length)!=o?Aw(e,0):Nw(e,t);if("Buffer"===t.type&&Ew(t.data))return Nw(e,t.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Ow(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function xw(e,t){if(Ow(t),e=Aw(e,t<0?0:0|Pw(t)),!Lw.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Nw(e,t){var n=t.length<0?0:0|Pw(t.length);e=Aw(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function Pw(e){if(e>=Dw())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Dw().toString(16)+" bytes");return 0|e}function Uw(e){return!(null==e||!e._isBuffer)}function Gw(e,t){if(Uw(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return dT(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return pT(e).length;default:if(o)return dT(e).length;t=(""+t).toLowerCase(),o=!0}}function Bw(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return eT(this,t,n);case"utf8":case"utf-8":return Xw(this,t,n);case"ascii":return Zw(this,t,n);case"latin1":case"binary":return Qw(this,t,n);case"base64":return Yw(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tT(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function Fw(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function qw(e,t,n,o,r){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=Lw.from(t,o)),Uw(t))return 0===t.length?-1:Vw(e,t,n,o,r);if("number"==typeof t)return t&=255,Lw.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Vw(e,[t],n,o,r);throw new TypeError("val must be string, number or Buffer")}function Vw(e,t,n,o,r){var i,a=1,s=e.length,c=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var u=-1;for(i=n;i<s;i++)if(l(e,i)===l(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*a}else-1!==u&&(i-=i-u),u=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var d=!0,p=0;p<c;p++)if(l(e,i+p)!==l(t,p)){d=!1;break}if(d)return i}return-1}function Hw(e,t,n,o){n=Number(n)||0;var r=e.length-n;o?(o=Number(o))>r&&(o=r):o=r;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var a=0;a<o;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function zw(e,t,n,o){return hT(dT(t,e.length-n),e,n,o)}function jw(e,t,n,o){return hT(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function $w(e,t,n,o){return jw(e,t,n,o)}function Ww(e,t,n,o){return hT(pT(t),e,n,o)}function Kw(e,t,n,o){return hT(function(e,t){for(var n,o,r,i=[],a=0;a<e.length&&!((t-=2)<0);++a)o=(n=e.charCodeAt(a))>>8,r=n%256,i.push(r),i.push(o);return i}(t,e.length-n),e,n,o)}function Yw(e,t,n){return 0===t&&n===e.length?ww(e):ww(e.slice(t,n))}function Xw(e,t,n){n=Math.min(e.length,n);for(var o=[],r=t;r<n;){var i,a,s,c,l=e[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(i=e[r+1]))&&(c=(31&l)<<6|63&i)>127&&(u=c);break;case 3:i=e[r+1],a=e[r+2],128==(192&i)&&128==(192&a)&&(c=(15&l)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:i=e[r+1],a=e[r+2],s=e[r+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),r+=d}return function(e){var t=e.length;if(t<=Jw)return String.fromCharCode.apply(String,e);for(var n="",o=0;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=Jw));return n}(o)}Lw.TYPED_ARRAY_SUPPORT=void 0===mw.TYPED_ARRAY_SUPPORT||mw.TYPED_ARRAY_SUPPORT,Lw.poolSize=8192,Lw._augment=function(e){return e.__proto__=Lw.prototype,e},Lw.from=function(e,t,n){return Rw(null,e,t,n)},Lw.TYPED_ARRAY_SUPPORT&&(Lw.prototype.__proto__=Uint8Array.prototype,Lw.__proto__=Uint8Array),Lw.alloc=function(e,t,n){return o=null,i=t,a=n,Ow(r=e),r<=0?Aw(o,r):void 0!==i?"string"==typeof a?Aw(o,r).fill(i,a):Aw(o,r).fill(i):Aw(o,r);var o,r,i,a},Lw.allocUnsafe=function(e){return xw(null,e)},Lw.allocUnsafeSlow=function(e){return xw(null,e)},Lw.isBuffer=fT,Lw.compare=function(e,t){if(!Uw(e)||!Uw(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,r=0,i=Math.min(n,o);r<i;++r)if(e[r]!==t[r]){n=e[r],o=t[r];break}return n<o?-1:o<n?1:0},Lw.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Lw.concat=function(e,t){if(!Ew(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Lw.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=Lw.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var i=e[n];if(!Uw(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(o,r),r+=i.length}return o},Lw.byteLength=Gw,Lw.prototype._isBuffer=!0,Lw.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Fw(this,t,t+1);return this},Lw.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Fw(this,t,t+3),Fw(this,t+1,t+2);return this},Lw.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Fw(this,t,t+7),Fw(this,t+1,t+6),Fw(this,t+2,t+5),Fw(this,t+3,t+4);return this},Lw.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Xw(this,0,e):Bw.apply(this,arguments)},Lw.prototype.equals=function(e){if(!Uw(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Lw.compare(this,e)},Lw.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Lw.prototype.compare=function(e,t,n,o,r){if(!Uw(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),t<0||n>e.length||o<0||r>this.length)throw new RangeError("out of range index");if(o>=r&&t>=n)return 0;if(o>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(r>>>=0)-(o>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),c=this.slice(o,r),l=e.slice(t,n),u=0;u<s;++u)if(c[u]!==l[u]){i=c[u],a=l[u];break}return i<a?-1:a<i?1:0},Lw.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Lw.prototype.indexOf=function(e,t,n){return qw(this,e,t,n,!0)},Lw.prototype.lastIndexOf=function(e,t,n){return qw(this,e,t,n,!1)},Lw.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return Hw(this,e,t,n);case"utf8":case"utf-8":return zw(this,e,t,n);case"ascii":return jw(this,e,t,n);case"latin1":case"binary":return $w(this,e,t,n);case"base64":return Ww(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kw(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},Lw.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Jw=4096;function Zw(e,t,n){var o="";n=Math.min(e.length,n);for(var r=t;r<n;++r)o+=String.fromCharCode(127&e[r]);return o}function Qw(e,t,n){var o="";n=Math.min(e.length,n);for(var r=t;r<n;++r)o+=String.fromCharCode(e[r]);return o}function eT(e,t,n){var o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var r="",i=t;i<n;++i)r+=uT(e[i]);return r}function tT(e,t,n){for(var o=e.slice(t,n),r="",i=0;i<o.length;i+=2)r+=String.fromCharCode(o[i]+256*o[i+1]);return r}function nT(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function oT(e,t,n,o,r,i){if(!Uw(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<i)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function rT(e,t,n,o){t<0&&(t=65535+t+1);for(var r=0,i=Math.min(e.length-n,2);r<i;++r)e[n+r]=(t&255<<8*(o?r:1-r))>>>8*(o?r:1-r)}function iT(e,t,n,o){t<0&&(t=4294967295+t+1);for(var r=0,i=Math.min(e.length-n,4);r<i;++r)e[n+r]=t>>>8*(o?r:3-r)&255}function aT(e,t,n,o,r,i){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function sT(e,t,n,o,r){return r||aT(e,0,n,4),Sw(e,t,n,o,23,4),n+4}function cT(e,t,n,o,r){return r||aT(e,0,n,8),Sw(e,t,n,o,52,8),n+8}Lw.prototype.slice=function(e,t){var n,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(t=void 0===t?o:~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),t<e&&(t=e),Lw.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Lw.prototype;else{var r=t-e;n=new Lw(r,void 0);for(var i=0;i<r;++i)n[i]=this[i+e]}return n},Lw.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||nT(e,t,this.length);for(var o=this[e],r=1,i=0;++i<t&&(r*=256);)o+=this[e+i]*r;return o},Lw.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||nT(e,t,this.length);for(var o=this[e+--t],r=1;t>0&&(r*=256);)o+=this[e+--t]*r;return o},Lw.prototype.readUInt8=function(e,t){return t||nT(e,1,this.length),this[e]},Lw.prototype.readUInt16LE=function(e,t){return t||nT(e,2,this.length),this[e]|this[e+1]<<8},Lw.prototype.readUInt16BE=function(e,t){return t||nT(e,2,this.length),this[e]<<8|this[e+1]},Lw.prototype.readUInt32LE=function(e,t){return t||nT(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Lw.prototype.readUInt32BE=function(e,t){return t||nT(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Lw.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||nT(e,t,this.length);for(var o=this[e],r=1,i=0;++i<t&&(r*=256);)o+=this[e+i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},Lw.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||nT(e,t,this.length);for(var o=t,r=1,i=this[e+--o];o>0&&(r*=256);)i+=this[e+--o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},Lw.prototype.readInt8=function(e,t){return t||nT(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Lw.prototype.readInt16LE=function(e,t){t||nT(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Lw.prototype.readInt16BE=function(e,t){t||nT(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Lw.prototype.readInt32LE=function(e,t){return t||nT(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Lw.prototype.readInt32BE=function(e,t){return t||nT(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Lw.prototype.readFloatLE=function(e,t){return t||nT(e,4,this.length),Tw(this,e,!0,23,4)},Lw.prototype.readFloatBE=function(e,t){return t||nT(e,4,this.length),Tw(this,e,!1,23,4)},Lw.prototype.readDoubleLE=function(e,t){return t||nT(e,8,this.length),Tw(this,e,!0,52,8)},Lw.prototype.readDoubleBE=function(e,t){return t||nT(e,8,this.length),Tw(this,e,!1,52,8)},Lw.prototype.writeUIntLE=function(e,t,n,o){e=+e,t|=0,n|=0,o||oT(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,i=0;for(this[t]=255&e;++i<n&&(r*=256);)this[t+i]=e/r&255;return t+n},Lw.prototype.writeUIntBE=function(e,t,n,o){e=+e,t|=0,n|=0,o||oT(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,i=1;for(this[t+r]=255&e;--r>=0&&(i*=256);)this[t+r]=e/i&255;return t+n},Lw.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,1,255,0),Lw.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Lw.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,2,65535,0),Lw.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):rT(this,e,t,!0),t+2},Lw.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,2,65535,0),Lw.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):rT(this,e,t,!1),t+2},Lw.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,4,4294967295,0),Lw.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):iT(this,e,t,!0),t+4},Lw.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,4,4294967295,0),Lw.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):iT(this,e,t,!1),t+4},Lw.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var r=Math.pow(2,8*n-1);oT(this,e,t,n,r-1,-r)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},Lw.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var r=Math.pow(2,8*n-1);oT(this,e,t,n,r-1,-r)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},Lw.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,1,127,-128),Lw.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Lw.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,2,32767,-32768),Lw.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):rT(this,e,t,!0),t+2},Lw.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,2,32767,-32768),Lw.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):rT(this,e,t,!1),t+2},Lw.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,4,2147483647,-2147483648),Lw.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):iT(this,e,t,!0),t+4},Lw.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||oT(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Lw.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):iT(this,e,t,!1),t+4},Lw.prototype.writeFloatLE=function(e,t,n){return sT(this,e,t,!0,n)},Lw.prototype.writeFloatBE=function(e,t,n){return sT(this,e,t,!1,n)},Lw.prototype.writeDoubleLE=function(e,t,n){return cT(this,e,t,!0,n)},Lw.prototype.writeDoubleBE=function(e,t,n){return cT(this,e,t,!1,n)},Lw.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var r,i=o-n;if(this===e&&n<t&&t<o)for(r=i-1;r>=0;--r)e[r+t]=this[r+n];else if(i<1e3||!Lw.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},Lw.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!Lw.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=Uw(e)?e:dT(new Lw(e,o).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var lT=/[^+\/0-9A-Za-z-_]/g;function uT(e){return e<16?"0"+e.toString(16):e.toString(16)}function dT(e,t){var n;t=t||1/0;for(var o=e.length,r=null,i=[],a=0;a<o;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===o){(t-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function pT(e){return function(e){var t,n,o,r,i,a;Mw||Cw();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[s-2]?2:"="===e[s-1]?1:0,a=new bw(3*s/4-i),o=i>0?s-4:s;var c=0;for(t=0,n=0;t<o;t+=4,n+=3)r=yw[e.charCodeAt(t)]<<18|yw[e.charCodeAt(t+1)]<<12|yw[e.charCodeAt(t+2)]<<6|yw[e.charCodeAt(t+3)],a[c++]=r>>16&255,a[c++]=r>>8&255,a[c++]=255&r;return 2===i?(r=yw[e.charCodeAt(t)]<<2|yw[e.charCodeAt(t+1)]>>4,a[c++]=255&r):1===i&&(r=yw[e.charCodeAt(t)]<<10|yw[e.charCodeAt(t+1)]<<4|yw[e.charCodeAt(t+2)]>>2,a[c++]=r>>8&255,a[c++]=255&r),a}(function(e){if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(lT,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function hT(e,t,n,o){for(var r=0;r<o&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function fT(e){return null!=e&&(!!e._isBuffer||gT(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&gT(t.slice(0,0)));var t}function gT(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function vT(e,t){return e(t={exports:{}},t.exports),t.exports}var mT=vT((function(e,t){var n,o,r,i,a,s,c,l,u,d,p,h,f;e.exports=(n=n||(o=Math,r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a=(i={}).lib={},s=a.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,r=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<r;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=a<<24-(o+i)%4*8}else for(i=0;i<r;i+=4)t[o+i>>>2]=n[i>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=o.ceil(t/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,n=[],r=function(e){var t=987654321,n=4294967295;return function(){var r=((t=36969*(65535&t)+(t>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n;return r/=4294967296,(r+=.5)*(o.random()>.5?1:-1)}},i=0;i<e;i+=4){var a=r(4294967296*(t||o.random()));t=987654071*a(),n.push(4294967296*a()|0)}return new c.init(n,e)}}),l=i.enc={},u=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var i=t[r>>>2]>>>24-r%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new c.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var i=t[r>>>2]>>>24-r%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new c.init(n,t)}},p=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,a=r/(4*i),s=(a=e?o.ceil(a):o.max((0|a)-this._minBufferSize,0))*i,l=o.min(4*s,r);if(s){for(var u=0;u<s;u+=i)this._doProcessBlock(n,u);var d=n.splice(0,s);t.sigBytes-=l}return new c.init(d,l)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),a.Hasher=h.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),f=i.algo={},i),n)})),_T=(vT((function(e,t){var n,o,r,i,a,s;e.exports=(r=(o=n=mT).lib,i=r.Base,a=r.WordArray,(s=o.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],o=0;o<t;o++){var r=e[o];n.push(r.high),n.push(r.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}}),n)})),vT((function(e,t){var n;e.exports=(n=mT,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,o=[],r=0;r<n;r++)o[r>>>2]|=e[r]<<24-r%4*8;t.call(this,o,n)}else t.apply(this,arguments)}).prototype=e}}(),n.lib.WordArray)})),vT((function(e,t){var n;e.exports=(n=mT,function(){var e=n,t=e.lib.WordArray,o=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r+=2){var i=t[r>>>2]>>>16-r%4*8&65535;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var n=e.length,o=[],r=0;r<n;r++)o[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return t.create(o,2*n)}},o.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i+=2){var a=r(t[i>>>2]>>>16-i%4*8&65535);o.push(String.fromCharCode(a))}return o.join("")},parse:function(e){for(var n=e.length,o=[],i=0;i<n;i++)o[i>>>1]|=r(e.charCodeAt(i)<<16-i%2*16);return t.create(o,2*n)}}}(),n.enc.Utf16)})),vT((function(e,t){var n,o,r;e.exports=(r=(o=n=mT).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var r=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)r.push(o.charAt(a>>>6*(3-s)&63));var c=o.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,n){for(var o=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=(s|c)<<24-i%4*8,i++}return r.create(o,i)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)})),vT((function(e,t){var n;e.exports=(n=mT,function(e){var t=n,o=t.lib,r=o.WordArray,i=o.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,r=e[o];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i=this._hash.words,a=e[t+0],c=e[t+1],h=e[t+2],f=e[t+3],g=e[t+4],v=e[t+5],m=e[t+6],_=e[t+7],y=e[t+8],b=e[t+9],M=e[t+10],C=e[t+11],k=e[t+12],w=e[t+13],T=e[t+14],S=e[t+15],I=i[0],E=i[1],D=i[2],A=i[3];I=l(I,E,D,A,a,7,s[0]),A=l(A,I,E,D,c,12,s[1]),D=l(D,A,I,E,h,17,s[2]),E=l(E,D,A,I,f,22,s[3]),I=l(I,E,D,A,g,7,s[4]),A=l(A,I,E,D,v,12,s[5]),D=l(D,A,I,E,m,17,s[6]),E=l(E,D,A,I,_,22,s[7]),I=l(I,E,D,A,y,7,s[8]),A=l(A,I,E,D,b,12,s[9]),D=l(D,A,I,E,M,17,s[10]),E=l(E,D,A,I,C,22,s[11]),I=l(I,E,D,A,k,7,s[12]),A=l(A,I,E,D,w,12,s[13]),D=l(D,A,I,E,T,17,s[14]),I=u(I,E=l(E,D,A,I,S,22,s[15]),D,A,c,5,s[16]),A=u(A,I,E,D,m,9,s[17]),D=u(D,A,I,E,C,14,s[18]),E=u(E,D,A,I,a,20,s[19]),I=u(I,E,D,A,v,5,s[20]),A=u(A,I,E,D,M,9,s[21]),D=u(D,A,I,E,S,14,s[22]),E=u(E,D,A,I,g,20,s[23]),I=u(I,E,D,A,b,5,s[24]),A=u(A,I,E,D,T,9,s[25]),D=u(D,A,I,E,f,14,s[26]),E=u(E,D,A,I,y,20,s[27]),I=u(I,E,D,A,w,5,s[28]),A=u(A,I,E,D,h,9,s[29]),D=u(D,A,I,E,_,14,s[30]),I=d(I,E=u(E,D,A,I,k,20,s[31]),D,A,v,4,s[32]),A=d(A,I,E,D,y,11,s[33]),D=d(D,A,I,E,C,16,s[34]),E=d(E,D,A,I,T,23,s[35]),I=d(I,E,D,A,c,4,s[36]),A=d(A,I,E,D,g,11,s[37]),D=d(D,A,I,E,_,16,s[38]),E=d(E,D,A,I,M,23,s[39]),I=d(I,E,D,A,w,4,s[40]),A=d(A,I,E,D,a,11,s[41]),D=d(D,A,I,E,f,16,s[42]),E=d(E,D,A,I,m,23,s[43]),I=d(I,E,D,A,b,4,s[44]),A=d(A,I,E,D,k,11,s[45]),D=d(D,A,I,E,S,16,s[46]),I=p(I,E=d(E,D,A,I,h,23,s[47]),D,A,a,6,s[48]),A=p(A,I,E,D,_,10,s[49]),D=p(D,A,I,E,T,15,s[50]),E=p(E,D,A,I,v,21,s[51]),I=p(I,E,D,A,k,6,s[52]),A=p(A,I,E,D,f,10,s[53]),D=p(D,A,I,E,M,15,s[54]),E=p(E,D,A,I,c,21,s[55]),I=p(I,E,D,A,y,6,s[56]),A=p(A,I,E,D,S,10,s[57]),D=p(D,A,I,E,m,15,s[58]),E=p(E,D,A,I,w,21,s[59]),I=p(I,E,D,A,g,6,s[60]),A=p(A,I,E,D,C,10,s[61]),D=p(D,A,I,E,h,15,s[62]),E=p(E,D,A,I,b,21,s[63]),i[0]=i[0]+I|0,i[1]=i[1]+E|0,i[2]=i[2]+D|0,i[3]=i[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var i=e.floor(o/4294967296),a=o;n[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,o,r,i,a){var s=e+(t&n|~t&o)+r+a;return(s<<i|s>>>32-i)+t}function u(e,t,n,o,r,i,a){var s=e+(t&o|n&~o)+r+a;return(s<<i|s>>>32-i)+t}function d(e,t,n,o,r,i,a){var s=e+(t^n^o)+r+a;return(s<<i|s>>>32-i)+t}function p(e,t,n,o,r,i,a){var s=e+(n^(t|~o))+r+a;return(s<<i|s>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),n.MD5)})),vT((function(e,t){var n,o,r,i,a,s,c,l;e.exports=(r=(o=n=mT).lib,i=r.WordArray,a=r.Hasher,s=o.algo,c=[],l=s.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],i=n[2],a=n[3],s=n[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var d=(o<<5|o>>>27)+s+c[l];d+=l<20?1518500249+(r&i|~r&a):l<40?1859775393+(r^i^a):l<60?(r&i|r&a|i&a)-1894007588:(r^i^a)-899497514,s=a,a=i,i=r<<30|r>>>2,r=o,o=d}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),o.SHA1=a._createHelper(l),o.HmacSHA1=a._createHmacHelper(l),n.SHA1)})),vT((function(e,t){var n;e.exports=(n=mT,function(e){var t=n,o=t.lib,r=o.WordArray,i=o.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),o=2;o<=n;o++)if(!(t%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var o=2,r=0;r<64;)t(o)&&(r<8&&(s[r]=n(e.pow(o,.5))),c[r]=n(e.pow(o,1/3)),r++),o++}();var l=[],u=a.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],i=n[2],a=n[3],s=n[4],u=n[5],d=n[6],p=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var f=l[h-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,v=l[h-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[h]=g+l[h-7]+m+l[h-16]}var _=o&r^o&i^r&i,y=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),b=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+c[h]+l[h];p=d,d=u,u=s,s=a+b|0,a=i,i=r,r=o,o=b+(y+_)|0}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(o/4294967296),n[15+(r+64>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(u),t.HmacSHA256=i._createHmacHelper(u)}(Math),n.SHA256)})),vT((function(e,t){var n,o,r,i,a,s;e.exports=(r=(o=n=mT).lib.WordArray,i=o.algo,a=i.SHA256,s=i.SHA224=a.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),o.SHA224=a._createHelper(s),o.HmacSHA224=a._createHmacHelper(s),n.SHA224)})),vT((function(e,t){var n;e.exports=(n=mT,function(){var e=n,t=e.lib.Hasher,o=e.x64,r=o.Word,i=o.WordArray,a=e.algo;function s(){return r.create.apply(r,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var u=a.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],i=n[2],a=n[3],s=n[4],u=n[5],d=n[6],p=n[7],h=o.high,f=o.low,g=r.high,v=r.low,m=i.high,_=i.low,y=a.high,b=a.low,M=s.high,C=s.low,k=u.high,w=u.low,T=d.high,S=d.low,I=p.high,E=p.low,D=h,A=f,L=g,R=v,O=m,x=_,N=y,P=b,U=M,G=C,B=k,F=w,q=T,V=S,H=I,z=E,j=0;j<80;j++){var $=l[j];if(j<16)var W=$.high=0|e[t+2*j],K=$.low=0|e[t+2*j+1];else{var Y=l[j-15],X=Y.high,J=Y.low,Z=(X>>>1|J<<31)^(X>>>8|J<<24)^X>>>7,Q=(J>>>1|X<<31)^(J>>>8|X<<24)^(J>>>7|X<<25),ee=l[j-2],te=ee.high,ne=ee.low,oe=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,re=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=l[j-7],ae=ie.high,se=ie.low,ce=l[j-16],le=ce.high,ue=ce.low;W=(W=(W=Z+ae+((K=Q+se)>>>0<Q>>>0?1:0))+oe+((K+=re)>>>0<re>>>0?1:0))+le+((K+=ue)>>>0<ue>>>0?1:0),$.high=W,$.low=K}var de,pe=U&B^~U&q,he=G&F^~G&V,fe=D&L^D&O^L&O,ge=A&R^A&x^R&x,ve=(D>>>28|A<<4)^(D<<30|A>>>2)^(D<<25|A>>>7),me=(A>>>28|D<<4)^(A<<30|D>>>2)^(A<<25|D>>>7),_e=(U>>>14|G<<18)^(U>>>18|G<<14)^(U<<23|G>>>9),ye=(G>>>14|U<<18)^(G>>>18|U<<14)^(G<<23|U>>>9),be=c[j],Me=be.high,Ce=be.low,ke=H+_e+((de=z+ye)>>>0<z>>>0?1:0),we=me+ge;H=q,z=V,q=B,V=F,B=U,F=G,U=N+(ke=(ke=(ke=ke+pe+((de+=he)>>>0<he>>>0?1:0))+Me+((de+=Ce)>>>0<Ce>>>0?1:0))+W+((de+=K)>>>0<K>>>0?1:0))+((G=P+de|0)>>>0<P>>>0?1:0)|0,N=O,P=x,O=L,x=R,L=D,R=A,D=ke+(ve+fe+(we>>>0<me>>>0?1:0))+((A=de+we|0)>>>0<de>>>0?1:0)|0}f=o.low=f+A,o.high=h+D+(f>>>0<A>>>0?1:0),v=r.low=v+R,r.high=g+L+(v>>>0<R>>>0?1:0),_=i.low=_+x,i.high=m+O+(_>>>0<x>>>0?1:0),b=a.low=b+P,a.high=y+N+(b>>>0<P>>>0?1:0),C=s.low=C+G,s.high=M+U+(C>>>0<G>>>0?1:0),w=u.low=w+F,u.high=k+B+(w>>>0<F>>>0?1:0),S=d.low=S+V,d.high=T+q+(S>>>0<V>>>0?1:0),E=p.low=E+z,p.high=I+H+(E>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(o+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),n.SHA512)})),vT((function(e,t){var n,o,r,i,a,s,c,l;e.exports=(r=(o=n=mT).x64,i=r.Word,a=r.WordArray,s=o.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),o.SHA384=c._createHelper(l),o.HmacSHA384=c._createHmacHelper(l),n.SHA384)})),vT((function(e,t){var n;e.exports=(n=mT,function(e){var t=n,o=t.lib,r=o.WordArray,i=o.Hasher,a=t.x64.Word,s=t.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var o=(2*e+3*t)%5;e=t%5,t=o}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,i=0;i<24;i++){for(var s=0,d=0,p=0;p<7;p++){if(1&r){var h=(1<<p)-1;h<32?d^=1<<h:s^=1<<h-32}128&r?r=r<<1^113:r<<=1}u[i]=a.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var p=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,o=this.blockSize/2,r=0;r<o;r++){var i=e[t+2*r],a=e[t+2*r+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(E=n[r]).high^=a,E.low^=i}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var h=0,f=0,g=0;g<5;g++)h^=(E=n[p+5*g]).high,f^=E.low;var v=d[p];v.high=h,v.low=f}for(p=0;p<5;p++){var m=d[(p+4)%5],_=d[(p+1)%5],y=_.high,b=_.low;for(h=m.high^(y<<1|b>>>31),f=m.low^(b<<1|y>>>31),g=0;g<5;g++)(E=n[p+5*g]).high^=h,E.low^=f}for(var M=1;M<25;M++){var C=(E=n[M]).high,k=E.low,w=c[M];w<32?(h=C<<w|k>>>32-w,f=k<<w|C>>>32-w):(h=k<<w-32|C>>>64-w,f=C<<w-32|k>>>64-w);var T=d[l[M]];T.high=h,T.low=f}var S=d[0],I=n[0];for(S.high=I.high,S.low=I.low,p=0;p<5;p++)for(g=0;g<5;g++){var E=n[M=p+5*g],D=d[M],A=d[(p+1)%5+5*g],L=d[(p+2)%5+5*g];E.high=D.high^~A.high&L.high,E.low=D.low^~A.low&L.low}E=n[0];var R=u[s];E.high^=R.high,E.low^=R.low}},_doFinalize:function(){var t=this._data,n=t.words,o=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize;n[o>>>5]|=1<<24-o%32,n[(e.ceil((o+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var d=a[u],p=d.high,h=d.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),l.push(h),l.push(p)}return new r.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=i._createHelper(p),t.HmacSHA3=i._createHmacHelper(p)}(Math),n.SHA3)})),vT((function(e,t){var n;e.exports=(n=mT,function(e){var t=n,o=t.lib,r=o.WordArray,i=o.Hasher,a=t.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=r.create([0,1518500249,1859775393,2400959708,2840853838]),p=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,r=e[o];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i,a,h,b,M,C,k,w,T,S,I,E=this._hash.words,D=d.words,A=p.words,L=s.words,R=c.words,O=l.words,x=u.words;for(C=i=E[0],k=a=E[1],w=h=E[2],T=b=E[3],S=M=E[4],n=0;n<80;n+=1)I=i+e[t+L[n]]|0,I+=n<16?f(a,h,b)+D[0]:n<32?g(a,h,b)+D[1]:n<48?v(a,h,b)+D[2]:n<64?m(a,h,b)+D[3]:_(a,h,b)+D[4],I=(I=y(I|=0,O[n]))+M|0,i=M,M=b,b=y(h,10),h=a,a=I,I=C+e[t+R[n]]|0,I+=n<16?_(k,w,T)+A[0]:n<32?m(k,w,T)+A[1]:n<48?v(k,w,T)+A[2]:n<64?g(k,w,T)+A[3]:f(k,w,T)+A[4],I=(I=y(I|=0,x[n]))+S|0,C=S,S=T,T=y(w,10),w=k,k=I;I=E[1]+h+T|0,E[1]=E[2]+b+S|0,E[2]=E[3]+M+C|0,E[3]=E[4]+i+k|0,E[4]=E[0]+a+w|0,E[0]=I},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,i=r.words,a=0;a<5;a++){var s=i[a];i[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return r},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function v(e,t,n){return(e|~t)^n}function m(e,t,n){return e&n|t&~n}function _(e,t,n){return e^(t|~n)}function y(e,t){return e<<t|e>>>32-t}t.RIPEMD160=i._createHelper(h),t.HmacRIPEMD160=i._createHmacHelper(h)}(),n.RIPEMD160)})),vT((function(e,t){var n,o,r,i;e.exports=(o=(n=mT).lib.Base,r=n.enc,i=r.Utf8,void(n.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;r.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))})),vT((function(e,t){var n,o,r,i,a,s,c,l,u;e.exports=(i=(r=(o=n=mT).lib).Base,a=r.WordArray,c=(s=o.algo).SHA1,l=s.HMAC,u=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=l.create(n.hasher,e),r=a.create(),i=a.create([1]),s=r.words,c=i.words,u=n.keySize,d=n.iterations;s.length<u;){var p=o.update(t).finalize(i);o.reset();for(var h=p.words,f=h.length,g=p,v=1;v<d;v++){g=o.finalize(g),o.reset();for(var m=g.words,_=0;_<f;_++)h[_]^=m[_]}r.concat(p),c[0]++}return r.sigBytes=4*u,r}}),o.PBKDF2=function(e,t,n){return u.create(n).compute(e,t)},n.PBKDF2)})),vT((function(e,t){var n,o,r,i,a,s,c,l;e.exports=(i=(r=(o=n=mT).lib).Base,a=r.WordArray,c=(s=o.algo).MD5,l=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=n.hasher.create(),r=a.create(),i=r.words,s=n.keySize,c=n.iterations;i.length<s;){l&&o.update(l);var l=o.update(e).finalize(t);o.reset();for(var u=1;u<c;u++)l=o.finalize(l),o.reset();r.concat(l)}return r.sigBytes=4*s,r}}),o.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)},n.EvpKDF)})),vT((function(e,t){var n,o,r,i,a,s,c,l,u,d,p,h,f,g,v,m,_,y,b,M,C,k,w;e.exports=void((n=mT).lib.Cipher||(o=n,r=o.lib,i=r.Base,a=r.WordArray,s=r.BufferedBlockAlgorithm,c=o.enc,c.Utf8,l=c.Base64,u=o.algo,d=u.EvpKDF,p=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:M}return function(t){return{encrypt:function(n,o,r){return e(o).encrypt(t,n,o,r)},decrypt:function(n,o,r){return e(o).decrypt(t,n,o,r)}}}}()}),r.StreamCipher=p.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=o.mode={},f=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=h.CBC=function(){var e=f.extend();function t(e,t,n){var o=this._iv;if(o){var r=o;this._iv=undefined}else r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize;t.call(this,e,n,r),o.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize,i=e.slice(n,n+r);o.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=i}}),e}(),v=o.pad={},m=v.Pkcs7={pad:function(e,t){for(var n=4*t,o=n-e.sigBytes%n,r=o<<24|o<<16|o<<8|o,i=[],s=0;s<o;s+=4)i.push(r);var c=a.create(i,o);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.BlockCipher=p.extend({cfg:p.cfg.extend({mode:g,padding:m}),reset:function(){p.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=n.createEncryptor;else{o=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==o?this._mode.init(this,t&&t.words):(this._mode=o.call(n,this,t&&t.words),this._mode.__creator=o)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),_=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),y=o.format={},b=y.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var o=a.create([1398893684,1701076831]).concat(n).concat(t);else o=t;return o.toString(l)},parse:function(e){var t=l.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var o=a.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return _.create({ciphertext:t,salt:o})}},M=r.SerializableCipher=i.extend({cfg:i.extend({format:b}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var r=e.createEncryptor(n,o),i=r.finalize(t),a=r.cfg;return _.create({ciphertext:i,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(n,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),C=o.kdf={},k=C.OpenSSL={execute:function(e,t,n,o){o||(o=a.random(8));var r=d.create({keySize:t+n}).compute(e,o),i=a.create(r.words.slice(t),4*n);return r.sigBytes=4*t,_.create({key:r,iv:i,salt:o})}},w=r.PasswordBasedCipher=M.extend({cfg:M.cfg.extend({kdf:k}),encrypt:function(e,t,n,o){var r=(o=this.cfg.extend(o)).kdf.execute(n,e.keySize,e.ivSize);o.iv=r.iv;var i=M.encrypt.call(this,e,t,r.key,o);return i.mixIn(r),i},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var r=o.kdf.execute(n,e.keySize,e.ivSize,t.salt);return o.iv=r.iv,M.decrypt.call(this,e,t,r.key,o)}})))})),vT((function(e,t){var n;e.exports=((n=mT).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,n,o){var r=this._iv;if(r){var i=r.slice(0);this._iv=void 0}else i=this._prevBlock;o.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize;t.call(this,e,n,r,o),this._prevBlock=e.slice(n,n+r)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize,i=e.slice(n,n+r);t.call(this,e,n,r,o),this._prevBlock=i}}),e}(),n.mode.CFB)})),vT((function(e,t){var n,o,r;e.exports=((n=mT).mode.CTR=(r=(o=n.lib.BlockCipherMode.extend()).Encryptor=o.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,i=this._counter;r&&(i=this._counter=r.slice(0),this._iv=void 0);var a=i.slice(0);n.encryptBlock(a,0),i[o-1]=i[o-1]+1|0;for(var s=0;s<o;s++)e[t+s]^=a[s]}}),o.Decryptor=r,o),n.mode.CTR)})),vT((function(e,t){var n;e.exports=((n=mT).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,o=255&e;255===t?(t=0,255===n?(n=0,255===o?o=0:++o):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=o}else e+=1<<24;return e}var o=e.Encryptor=e.extend({processBlock:function(e,n){var o,r=this._cipher,i=r.blockSize,a=this._iv,s=this._counter;a&&(s=this._counter=a.slice(0),this._iv=void 0),0===((o=s)[0]=t(o[0]))&&(o[1]=t(o[1]));var c=s.slice(0);r.encryptBlock(c,0);for(var l=0;l<i;l++)e[n+l]^=c[l]}});return e.Decryptor=o,e}(),n.mode.CTRGladman)})),vT((function(e,t){var n,o,r;e.exports=((n=mT).mode.OFB=(r=(o=n.lib.BlockCipherMode.extend()).Encryptor=o.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,i=this._keystream;r&&(i=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<o;a++)e[t+a]^=i[a]}}),o.Decryptor=r,o),n.mode.OFB)})),vT((function(e,t){var n,o;e.exports=((n=mT).mode.ECB=((o=n.lib.BlockCipherMode.extend()).Encryptor=o.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),o.Decryptor=o.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),o),n.mode.ECB)})),vT((function(e,t){var n;e.exports=((n=mT).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,o=4*t,r=o-n%o,i=n+r-1;e.clamp(),e.words[i>>>2]|=r<<24-i%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)})),vT((function(e,t){var n;e.exports=((n=mT).pad.Iso10126={pad:function(e,t){var o=4*t,r=o-e.sigBytes%o;e.concat(n.lib.WordArray.random(r-1)).concat(n.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)})),vT((function(e,t){var n;e.exports=((n=mT).pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)})),vT((function(e,t){var n;e.exports=((n=mT).pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},n.pad.ZeroPadding)})),vT((function(e,t){var n;e.exports=((n=mT).pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)})),vT((function(e,t){var n,o,r,i;e.exports=(r=(o=n=mT).lib.CipherParams,i=o.enc.Hex,o.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return r.create({ciphertext:t})}},n.format.Hex)})),vT((function(e,t){var n;e.exports=(n=mT,function(){var e=n,t=e.lib.BlockCipher,o=e.algo,r=[],i=[],a=[],s=[],c=[],l=[],u=[],d=[],p=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var f=o^o<<1^o<<2^o<<3^o<<4;f=f>>>8^255&f^99,r[n]=f,i[f]=n;var g=e[n],v=e[g],m=e[v],_=257*e[f]^16843008*f;a[n]=_<<24|_>>>8,s[n]=_<<16|_>>>16,c[n]=_<<8|_>>>24,l[n]=_,_=16843009*m^65537*v^257*g^16843008*n,u[f]=_<<24|_>>>8,d[f]=_<<16|_>>>16,p[f]=_<<8|_>>>24,h[f]=_,n?(n=g^e[e[e[m^g]]],o^=e[e[o]]):n=o=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,o=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<o;a++)if(a<n)i[a]=t[a];else{var s=i[a-1];a%n?n>6&&a%n==4&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=f[a/n|0]<<24),i[a]=i[a-n]^s}for(var c=this._invKeySchedule=[],l=0;l<o;l++)a=o-l,s=l%4?i[a]:i[a-4],c[l]=l<4||a<=4?s:u[r[s>>>24]]^d[r[s>>>16&255]]^p[r[s>>>8&255]]^h[r[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,l,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,p,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,r,i,a,s){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],p=e[t+3]^n[3],h=4,f=1;f<c;f++){var g=o[l>>>24]^r[u>>>16&255]^i[d>>>8&255]^a[255&p]^n[h++],v=o[u>>>24]^r[d>>>16&255]^i[p>>>8&255]^a[255&l]^n[h++],m=o[d>>>24]^r[p>>>16&255]^i[l>>>8&255]^a[255&u]^n[h++],_=o[p>>>24]^r[l>>>16&255]^i[u>>>8&255]^a[255&d]^n[h++];l=g,u=v,d=m,p=_}g=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&p])^n[h++],v=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^n[h++],m=(s[d>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[h++],_=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[h++],e[t]=g,e[t+1]=v,e[t+2]=m,e[t+3]=_},keySize:8});e.AES=t._createHelper(g)}(),n.AES)})),vT((function(e,t){var n;e.exports=(n=mT,function(){var e=n,t=e.lib,o=t.WordArray,r=t.BlockCipher,i=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var o=a[n]-1;t[n]=e[o>>>5]>>>31-o%32&1}for(var r=this._subKeys=[],i=0;i<16;i++){var l=r[i]=[],u=c[i];for(n=0;n<24;n++)l[n/6|0]|=t[(s[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(s[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=r[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),p.call(this,1,1431655765);for(var o=0;o<16;o++){for(var r=n[o],i=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((a^r[c])&u[c])>>>0];this._lBlock=a,this._rBlock=i^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,p.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=r._createHelper(d);var f=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=d.createEncryptor(o.create(e.slice(0,2))),this._des2=d.createEncryptor(o.create(e.slice(2,4))),this._des3=d.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(f)}(),n.TripleDES)})),vT((function(e,t){var n;e.exports=(n=mT,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,r=o.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,o=this._S=[],r=0;r<256;r++)o[r]=r;r=0;for(var i=0;r<256;r++){var a=r%n,s=t[a>>>2]>>>24-a%4*8&255;i=(i+o[r]+s)%256;var c=o[r];o[r]=o[i],o[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,o=0,r=0;r<4;r++){n=(n+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[n],e[n]=i,o|=e[(e[t]+e[n])%256]<<24-8*r}return this._i=t,this._j=n,o}e.RC4=t._createHelper(r);var a=o.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(a)}(),n.RC4)})),vT((function(e,t){var n;e.exports=(n=mT,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,r=[],i=[],a=[],s=o.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)r[n]^=o[n+4&7];if(t){var i=t.words,a=i[0],s=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,p=u<<16|65535&l;for(r[0]^=l,r[1]^=d,r[2]^=u,r[3]^=p,r[4]^=l,r[5]^=d,r[6]^=u,r[7]^=p,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),e[t+o]^=r[o]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],r=65535&o,s=o>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&o)*o|0)+((65535&o)*o|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(s)}(),n.Rabbit)})),vT((function(e,t){var n;e.exports=(n=mT,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,r=[],i=[],a=[],s=o.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)o[r]^=n[r+4&7];if(t){var i=t.words,a=i[0],s=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,p=u<<16|65535&l;for(o[0]^=l,o[1]^=d,o[2]^=u,o[3]^=p,o[4]^=l,o[5]^=d,o[6]^=u,o[7]^=p,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),e[t+o]^=r[o]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],r=65535&o,s=o>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&o)*o|0)+((65535&o)*o|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(s)}(),n.RabbitLegacy)})),vT((function(e,t){e.exports=mT})));function yT(){throw new Error("setTimeout has not been defined")}function bT(){throw new Error("clearTimeout has not been defined")}var MT=yT,CT=bT;function kT(e){if(MT===setTimeout)return setTimeout(e,0);if((MT===yT||!MT)&&setTimeout)return MT=setTimeout,setTimeout(e,0);try{return MT(e,0)}catch(t){try{return MT.call(null,e,0)}catch(n){return MT.call(this,e,0)}}}"function"==typeof mw.setTimeout&&(MT=setTimeout),"function"==typeof mw.clearTimeout&&(CT=clearTimeout);var wT,TT=[],ST=!1,IT=-1;function ET(){ST&&wT&&(ST=!1,wT.length?TT=wT.concat(TT):IT=-1,TT.length&&DT())}function DT(){if(!ST){var e=kT(ET);ST=!0;for(var t=TT.length;t;){for(wT=TT,TT=[];++IT<t;)wT&&wT[IT].run();IT=-1,t=TT.length}wT=null,ST=!1,function(e){if(CT===clearTimeout)return clearTimeout(e);if((CT===bT||!CT)&&clearTimeout)return CT=clearTimeout,clearTimeout(e);try{CT(e)}catch(t){try{return CT.call(null,e)}catch(n){return CT.call(this,e)}}}(e)}}function AT(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];TT.push(new LT(e,t)),1!==TT.length||ST||kT(DT)}function LT(e,t){this.fun=e,this.array=t}LT.prototype.run=function(){this.fun.apply(null,this.array)};var RT=mw.performance||{};function OT(){}function xT(){xT.init.call(this)}function NT(e){return void 0===e._maxListeners?xT.defaultMaxListeners:e._maxListeners}function PT(e,t,n,o){var r,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=new OT,e._eventsCount=0),a){if("function"==typeof a?a=i[t]=o?[n,a]:[a,n]:o?a.unshift(n):a.push(n),!a.warned&&(r=NT(e))&&r>0&&a.length>r){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[t]=n,++e._eventsCount;return e}function UT(e,t,n){var o=!1;function r(){e.removeListener(t,r),o||(o=!0,n.apply(e,arguments))}return r.listener=n,r}function GT(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function BT(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}RT.now||RT.mozNow||RT.msNow||RT.oNow||RT.webkitNow,OT.prototype=Object.create(null),xT.EventEmitter=xT,xT.usingDomains=!1,xT.prototype.domain=void 0,xT.prototype._events=void 0,xT.prototype._maxListeners=void 0,xT.defaultMaxListeners=10,xT.init=function(){this.domain=null,xT.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new OT,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},xT.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},xT.prototype.getMaxListeners=function(){return NT(this)},xT.prototype.emit=function(e){var t,n,o,r,i,a,s,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(t=arguments[1],!s){if(t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=a[e]))return!1;var u="function"==typeof n;switch(o=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var o=e.length,r=BT(e,o),i=0;i<o;++i)r[i].call(n)}(n,u,this);break;case 2:!function(e,t,n,o){if(t)e.call(n,o);else for(var r=e.length,i=BT(e,r),a=0;a<r;++a)i[a].call(n,o)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,o,r){if(t)e.call(n,o,r);else for(var i=e.length,a=BT(e,i),s=0;s<i;++s)a[s].call(n,o,r)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,o,r,i){if(t)e.call(n,o,r,i);else for(var a=e.length,s=BT(e,a),c=0;c<a;++c)s[c].call(n,o,r,i)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(o-1),i=1;i<o;i++)r[i-1]=arguments[i];!function(e,t,n,o){if(t)e.apply(n,o);else for(var r=e.length,i=BT(e,r),a=0;a<r;++a)i[a].apply(n,o)}(n,u,this,r)}return!0},xT.prototype.addListener=function(e,t){return PT(this,e,t,!1)},xT.prototype.on=xT.prototype.addListener,xT.prototype.prependListener=function(e,t){return PT(this,e,t,!0)},xT.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,UT(this,e,t)),this},xT.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,UT(this,e,t)),this},xT.prototype.removeListener=function(e,t){var n,o,r,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(n=o[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new OT:(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,i=n.length;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){a=n[i].listener,r=i;break}if(r<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new OT,this;delete o[e]}else!function(e,t){for(var n=t,o=n+1,r=e.length;o<r;n+=1,o+=1)e[n]=e[o];e.pop()}(n,r);o.removeListener&&this.emit("removeListener",e,a||t)}return this},xT.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new OT,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new OT:delete n[e]),this;if(0===arguments.length){for(var o,r=Object.keys(n),i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new OT,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},xT.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},xT.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):GT.call(e,t)},xT.prototype.listenerCount=GT,xT.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var FT="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},qT=/%[sdj%]/g;function VT(e){if(!eS(e)){for(var t=[],n=0;n<arguments.length;n++)t.push($T(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,r=o.length,i=String(e).replace(qT,(function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}})),a=o[n];n<r;a=o[++n])QT(a)||!oS(a)?i+=" "+a:i+=" "+$T(a);return i}function HT(e,t){if(tS(mw.process))return function(){return HT(e,t).apply(this,arguments)};var n=!1;return function(){return n||(console.error(t),n=!0),e.apply(this,arguments)}}var zT,jT={};function $T(e,t){var n={seen:[],stylize:KT};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),ZT(t)?n.showHidden=t:t&&function(e,t){if(!t||!oS(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]]}(n,t),tS(n.showHidden)&&(n.showHidden=!1),tS(n.depth)&&(n.depth=2),tS(n.colors)&&(n.colors=!1),tS(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=WT),YT(n,e,n.depth)}function WT(e,t){var n=$T.styles[t];return n?"["+$T.colors[n][0]+"m"+e+"["+$T.colors[n][1]+"m":e}function KT(e,t){return e}function YT(e,t,n){if(e.customInspect&&t&&aS(t.inspect)&&t.inspect!==$T&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return eS(o)||(o=YT(e,o,n)),o}var r=function(e,t){if(tS(t))return e.stylize("undefined","undefined");if(eS(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return"number"==typeof t?e.stylize(""+t,"number"):ZT(t)?e.stylize(""+t,"boolean"):QT(t)?e.stylize("null","null"):void 0}(e,t);if(r)return r;var i,a=Object.keys(t),s=(i={},a.forEach((function(e,t){i[e]=!0})),i);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),iS(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return XT(t);if(0===a.length){if(aS(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(nS(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(rS(t))return e.stylize(Date.prototype.toString.call(t),"date");if(iS(t))return XT(t)}var l,u,d="",p=!1,h=["{","}"];return l=t,Array.isArray(l)&&(p=!0,h=["[","]"]),aS(t)&&(d=" [Function"+(t.name?": "+t.name:"")+"]"),nS(t)&&(d=" "+RegExp.prototype.toString.call(t)),rS(t)&&(d=" "+Date.prototype.toUTCString.call(t)),iS(t)&&(d=" "+XT(t)),0!==a.length||p&&0!=t.length?n<0?nS(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=p?function(e,t,n,o,r){for(var i=[],a=0,s=t.length;a<s;++a)cS(t,String(a))?i.push(JT(e,t,n,o,String(a),!0)):i.push("");return r.forEach((function(r){r.match(/^\d+$/)||i.push(JT(e,t,n,o,r,!0))})),i}(e,t,n,s,a):a.map((function(o){return JT(e,t,n,s,o,p)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,d,h)):h[0]+d+h[1]}function XT(e){return"["+Error.prototype.toString.call(e)+"]"}function JT(e,t,n,o,r,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),cS(o,r)||(a="["+r+"]"),s||(e.seen.indexOf(c.value)<0?(s=QT(n)?YT(e,c.value,null):YT(e,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),tS(a)){if(i&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function ZT(e){return"boolean"==typeof e}function QT(e){return null===e}function eS(e){return"string"==typeof e}function tS(e){return void 0===e}function nS(e){return oS(e)&&"[object RegExp]"===sS(e)}function oS(e){return"object"==typeof e&&null!==e}function rS(e){return oS(e)&&"[object Date]"===sS(e)}function iS(e){return oS(e)&&("[object Error]"===sS(e)||e instanceof Error)}function aS(e){return"function"==typeof e}function sS(e){return Object.prototype.toString.call(e)}function cS(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function lS(){this.head=null,this.tail=null,this.length=0}$T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},$T.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},lS.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},lS.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},lS.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},lS.prototype.clear=function(){this.head=this.tail=null,this.length=0},lS.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},lS.prototype.concat=function(e){if(0===this.length)return Lw.alloc(0);if(1===this.length)return this.head.data;for(var t=Lw.allocUnsafe(e>>>0),n=this.head,o=0;n;)n.data.copy(t,o),o+=n.data.length,n=n.next;return t};var uS=Lw.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function dS(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!uS(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=hS;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=fS;break;default:return void(this.write=pS)}this.charBuffer=new Lw(6),this.charReceived=0,this.charLength=0}function pS(e){return e.toString(this.encoding)}function hS(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function fS(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}dS.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((o=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&o<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var o,r=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),r=(t+=e.toString(this.encoding,0,r)).length-1,(o=t.charCodeAt(r))>=55296&&o<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,r)}return t},dS.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},dS.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,o=this.charBuffer,r=this.encoding;t+=o.slice(0,n).toString(r)}return t},_S.ReadableState=mS;var gS,vS=(gS="stream",tS(zT)&&(zT=""),gS=gS.toUpperCase(),jT[gS]||(new RegExp("\\b"+gS+"\\b","i").test(zT)?jT[gS]=function(){var e=VT.apply(null,arguments);console.error("%s %d: %s",gS,0,e)}:jT[gS]=function(){}),jT[gS]);function mS(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof $S&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=~~this.highWaterMark,this.buffer=new lS,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new dS(e.encoding),this.encoding=e.encoding)}function _S(e){if(!(this instanceof _S))return new _S(e);this._readableState=new mS(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),xT.call(this)}function yS(e,t,n,o,r){var i,a,s,c=(i=t,s=null,fT(a=n)||"string"==typeof a||null==a||i.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s);if(c)e.emit("error",c);else if(null===n)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,CS(e)}}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var l=new Error("stream.push() after EOF");e.emit("error",l)}else if(t.endEmitted&&r){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var d;!t.decoder||r||o||(n=t.decoder.write(n),d=!t.objectMode&&0===n.length),r||(t.reading=!1),d||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&CS(e))),function(e,t){t.readingMore||(t.readingMore=!0,AT(wS,e,t))}(e,t)}else r||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}FT(_S,xT),_S.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=Lw.from(e,t),t=""),yS(this,n,e,t,!1)},_S.prototype.unshift=function(e){return yS(this,this._readableState,e,"",!0)},_S.prototype.isPaused=function(){return!1===this._readableState.flowing},_S.prototype.setEncoding=function(e){return this._readableState.decoder=new dS(e),this._readableState.encoding=e,this};var bS=8388608;function MS(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=((n=e)>=bS?n=bS:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function CS(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(vS("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?AT(kS,e):kS(e))}function kS(e){vS("emit readable"),e.emit("readable"),IS(e)}function wS(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(vS("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function TS(e){vS("readable nexttick read 0"),e.read(0)}function SS(e,t){t.reading||(vS("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),IS(e),t.flowing&&!t.reading&&e.read(0)}function IS(e){var t=e._readableState;for(vS("flow",t.flowing);t.flowing&&null!==e.read(););}function ES(e,t){return 0===t.length?null:(t.objectMode?a=t.buffer.shift():!e||e>=t.length?(a=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):(n=e,o=t.buffer,r=t.decoder,n<o.head.data.length?(i=o.head.data.slice(0,n),o.head.data=o.head.data.slice(n)):i=n===o.head.data.length?o.shift():r?function(e,t){var n=t.head,o=1,r=n.data;for(e-=r.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(a===i.length?r+=i:r+=i.slice(0,e),0==(e-=a)){a===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(a));break}++o}return t.length-=o,r}(n,o):function(e,t){var n=Lw.allocUnsafe(e),o=t.head,r=1;for(o.data.copy(n),e-=o.data.length;o=o.next;){var i=o.data,a=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,a),0==(e-=a)){a===i.length?(++r,o.next?t.head=o.next:t.head=t.tail=null):(t.head=o,o.data=i.slice(a));break}++r}return t.length-=r,n}(n,o),a=i),a);var n,o,r,i,a}function DS(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,AT(AS,t,e))}function AS(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function LS(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function RS(){}function OS(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function xS(e,t){Object.defineProperty(this,"buffer",{get:HT((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof $S&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=!1===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n,o=e._writableState,r=o.sync,i=o.writecb;if((n=o).writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t)!function(e,t,n,o,r){--t.pendingcb,n?AT(r,o):r(o),e._writableState.errorEmitted=!0,e.emit("error",o)}(e,o,r,t,i);else{var a=BS(o);a||o.corked||o.bufferProcessing||!o.bufferedRequest||GS(e,o),r?AT(US,e,o,a,i):US(e,o,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new VS(this)}function NS(e){if(!(this instanceof NS||this instanceof $S))return new NS(e);this._writableState=new xS(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),xT.call(this)}function PS(e,t,n,o,r,i,a){t.writelen=o,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,i,t.onwrite),t.sync=!1}function US(e,t,n,o){var r,i;n||(r=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,r.emit("drain"))),t.pendingcb--,o(),qS(e,t)}function GS(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var o=t.bufferedRequestCount,r=new Array(o),i=t.corkedRequestsFree;i.entry=n;for(var a=0;n;)r[a]=n,n=n.next,a+=1;PS(e,t,!0,t.length,r,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new VS(t)}else{for(;n;){var s=n.chunk,c=n.encoding,l=n.callback;if(PS(e,t,!1,t.objectMode?1:s.length,s,c,l),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function BS(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function FS(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function qS(e,t){var n=BS(t);return n&&(0===t.pendingcb?(FS(e,t),t.finished=!0,e.emit("finish")):FS(e,t)),n}function VS(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var o=t.entry;for(t.entry=null;o;){var r=o.callback;e.pendingcb--,r(n),o=o.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}_S.prototype.read=function(e){vS("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return vS("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?DS(this):CS(this),null;if(0===(e=MS(e,t))&&t.ended)return 0===t.length&&DS(this),null;var o,r=t.needReadable;return vS("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&vS("length less than watermark",r=!0),t.ended||t.reading?vS("reading or ended",r=!1):r&&(vS("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=MS(n,t))),null===(o=e>0?ES(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&DS(this)),null!==o&&this.emit("data",o),o},_S.prototype._read=function(e){this.emit("error",new Error("not implemented"))},_S.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,vS("pipe count=%d opts=%j",o.pipesCount,t);var r=t&&!1===t.end?u:a;function i(e){vS("onunpipe"),e===n&&u()}function a(){vS("onend"),e.end()}o.endEmitted?AT(r):n.once("end",r),e.on("unpipe",i);var s,c=(s=n,function(){var e=s._readableState;vS("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s.listeners("data").length&&(e.flowing=!0,IS(s))});e.on("drain",c);var l=!1;function u(){vS("cleanup"),e.removeListener("close",f),e.removeListener("finish",g),e.removeListener("drain",c),e.removeListener("error",h),e.removeListener("unpipe",i),n.removeListener("end",a),n.removeListener("end",u),n.removeListener("data",p),l=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||c()}var d=!1;function p(t){vS("ondata"),d=!1,!1!==e.write(t)||d||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==LS(o.pipes,e))&&!l&&(vS("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function h(t){vS("onerror",t),v(),e.removeListener("error",h),0===("error",e.listeners("error").length)&&e.emit("error",t)}function f(){e.removeListener("finish",g),v()}function g(){vS("onfinish"),e.removeListener("close",f),v()}function v(){vS("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",f),e.once("finish",g),e.emit("pipe",n),o.flowing||(vS("pipe resume"),n.resume()),e},_S.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this);return this}var i=LS(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},_S.prototype.on=function(e,t){var n=xT.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&CS(this):AT(TS,this))}return n},_S.prototype.addListener=_S.prototype.on,_S.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(vS("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,AT(SS,e,t))),this},_S.prototype.pause=function(){return vS("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(vS("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_S.prototype.wrap=function(e){var t=this._readableState,n=!1,o=this;for(var r in e.on("end",(function(){if(vS("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&o.push(e)}o.push(null)})),e.on("data",(function(r){vS("wrapped data"),t.decoder&&(r=t.decoder.write(r)),t.objectMode&&null==r||(t.objectMode||r&&r.length)&&(o.push(r)||(n=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));return function(e,t){for(var n=0,o=e.length;n<o;n++)t(e[n])}(["error","close","destroy","pause","resume"],(function(t){e.on(t,o.emit.bind(o,t))})),o._read=function(t){vS("wrapped _read",t),n&&(n=!1,e.resume())},o},_S._fromList=ES,NS.WritableState=xS,FT(NS,xT),xS.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},NS.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},NS.prototype.write=function(e,t,n){var o,r,i,a=this._writableState,s=!1;return"function"==typeof t&&(n=t,t=null),Lw.isBuffer(e)?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=RS),a.ended?(o=this,r=n,i=new Error("write after end"),o.emit("error",i),AT(r,i)):function(e,t,n,o){var r=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):Lw.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),AT(o,i),r=!1),r}(this,a,e,n)&&(a.pendingcb++,s=function(e,t,n,o,r){var i,a,s;a=n,s=o,(i=t).objectMode||!1===i.decodeStrings||"string"!=typeof a||(a=Lw.from(a,s)),n=a,Lw.isBuffer(n)&&(o="buffer");var c=t.objectMode?1:n.length;t.length+=c;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new OS(n,o,r),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else PS(e,t,!1,c,n,o,r);return l}(this,a,e,t,n)),s},NS.prototype.cork=function(){this._writableState.corked++},NS.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||GS(this,e))},NS.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},NS.prototype._write=function(e,t,n){n(new Error("not implemented"))},NS.prototype._writev=null,NS.prototype.end=function(e,t,n){var o,r,i,a=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||a.finished||(o=this,i=n,(r=a).ending=!0,qS(o,r),i&&(r.finished?AT(i):o.once("finish",i)),r.ended=!0,o.writable=!1)},FT($S,_S);for(var HS=Object.keys(NS.prototype),zS=0;zS<HS.length;zS++){var jS=HS[zS];$S.prototype[jS]||($S.prototype[jS]=NS.prototype[jS])}function $S(e){if(!(this instanceof $S))return new $S(e);_S.call(this,e),NS.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",WS)}function WS(){this.allowHalfOpen||this._writableState.ended||AT(KS,this)}function KS(e){e.end()}function YS(e){this.afterTransform=function(t,n){return function(e,t,n){var o=e._transformState;o.transforming=!1;var r=o.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,null!=n&&e.push(n),r(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function XS(e){if(!(this instanceof XS))return new XS(e);$S.call(this,e),this._transformState=new YS(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){JS(t,e)})):JS(t)}))}function JS(e,t){if(t)return e.emit("error",t);var n=e._writableState,o=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function ZS(e){if(!(this instanceof ZS))return new ZS(e);XS.call(this,e)}function QS(){xT.call(this)}FT(XS,$S),XS.prototype.push=function(e,t){return this._transformState.needTransform=!1,$S.prototype.push.call(this,e,t)},XS.prototype._transform=function(e,t,n){throw new Error("Not implemented")},XS.prototype._write=function(e,t,n){var o=this._transformState;if(o.writecb=n,o.writechunk=e,o.writeencoding=t,!o.transforming){var r=this._readableState;(o.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},XS.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},FT(ZS,XS),ZS.prototype._transform=function(e,t,n){n(null,e)},FT(QS,xT),QS.Readable=_S,QS.Writable=NS,QS.Duplex=$S,QS.Transform=XS,QS.PassThrough=ZS,QS.Stream=QS,QS.prototype.pipe=function(e,t){var n=this;function o(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",o),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",s));var i=!1;function a(){i||(i=!0,e.end())}function s(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===xT.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",o),e.removeListener("drain",r),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",c),e.on("error",c),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e};var eI={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function tI(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function nI(e,t,n,o,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+o),r);else for(var i=0;i<o;i++)e[r+i]=t[n+i]}var oI=Uint8Array,rI=Uint16Array,iI=Int32Array,aI=4,sI=0,cI=1,lI=2;function uI(e){for(var t=e.length;--t>=0;)e[t]=0}var dI=0,pI=1,hI=2,fI=29,gI=256,vI=gI+1+fI,mI=30,_I=19,yI=2*vI+1,bI=15,MI=16,CI=7,kI=256,wI=16,TI=17,SI=18,II=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],EI=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],DI=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],AI=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],LI=new Array(2*(vI+2));uI(LI);var RI=new Array(2*mI);uI(RI);var OI=new Array(512);uI(OI);var xI=new Array(256);uI(xI);var NI=new Array(fI);uI(NI);var PI,UI,GI,BI=new Array(mI);function FI(e,t,n,o,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=o,this.max_length=r,this.has_stree=e&&e.length}function qI(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function VI(e){return e<256?OI[e]:OI[256+(e>>>7)]}function HI(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function zI(e,t,n){e.bi_valid>MI-n?(e.bi_buf|=t<<e.bi_valid&65535,HI(e,e.bi_buf),e.bi_buf=t>>MI-e.bi_valid,e.bi_valid+=n-MI):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function jI(e,t,n){zI(e,n[2*t],n[2*t+1])}function $I(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function WI(e,t,n){var o,r,i=new Array(bI+1),a=0;for(o=1;o<=bI;o++)i[o]=a=a+n[o-1]<<1;for(r=0;r<=t;r++){var s=e[2*r+1];0!==s&&(e[2*r]=$I(i[s]++,s))}}function KI(e){var t;for(t=0;t<vI;t++)e.dyn_ltree[2*t]=0;for(t=0;t<mI;t++)e.dyn_dtree[2*t]=0;for(t=0;t<_I;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*kI]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function YI(e){e.bi_valid>8?HI(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function XI(e,t,n,o){var r=2*t,i=2*n;return e[r]<e[i]||e[r]===e[i]&&o[t]<=o[n]}function JI(e,t,n){for(var o=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&XI(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!XI(t,o,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=o}function ZI(e,t,n){var o,r,i,a,s=0;if(0!==e.last_lit)do{o=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],r=e.pending_buf[e.l_buf+s],s++,0===o?jI(e,r,t):(jI(e,(i=xI[r])+gI+1,t),0!==(a=II[i])&&zI(e,r-=NI[i],a),jI(e,i=VI(--o),n),0!==(a=EI[i])&&zI(e,o-=BI[i],a))}while(s<e.last_lit);jI(e,kI,t)}function QI(e,t){var n,o,r,i=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=yI,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(r=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=a[2*r+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)JI(e,i,n);r=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],JI(e,i,1),o=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=o,i[2*r]=i[2*n]+i[2*o],e.depth[r]=(e.depth[n]>=e.depth[o]?e.depth[n]:e.depth[o])+1,i[2*n+1]=i[2*o+1]=r,e.heap[1]=r++,JI(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,o,r,i,a,s,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,f=t.stat_desc.max_length,g=0;for(i=0;i<=bI;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<yI;n++)(i=c[2*c[2*(o=e.heap[n])+1]+1]+1)>f&&(i=f,g++),c[2*o+1]=i,o>l||(e.bl_count[i]++,a=0,o>=h&&(a=p[o-h]),s=c[2*o],e.opt_len+=s*(i+a),d&&(e.static_len+=s*(u[2*o+1]+a)));if(0!==g){do{for(i=f-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[f]--,g-=2}while(g>0);for(i=f;0!==i;i--)for(o=e.bl_count[i];0!==o;)(r=e.heap[--n])>l||(c[2*r+1]!==i&&(e.opt_len+=(i-c[2*r+1])*c[2*r],c[2*r+1]=i),o--)}}(e,t),WI(i,l,e.bl_count)}function eE(e,t,n){var o,r,i=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(n+1)+1]=65535,o=0;o<=n;o++)r=a,a=t[2*(o+1)+1],++s<c&&r===a||(s<l?e.bl_tree[2*r]+=s:0!==r?(r!==i&&e.bl_tree[2*r]++,e.bl_tree[2*wI]++):s<=10?e.bl_tree[2*TI]++:e.bl_tree[2*SI]++,s=0,i=r,0===a?(c=138,l=3):r===a?(c=6,l=3):(c=7,l=4))}function tE(e,t,n){var o,r,i=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),o=0;o<=n;o++)if(r=a,a=t[2*(o+1)+1],!(++s<c&&r===a)){if(s<l)do{jI(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==i&&(jI(e,r,e.bl_tree),s--),jI(e,wI,e.bl_tree),zI(e,s-3,2)):s<=10?(jI(e,TI,e.bl_tree),zI(e,s-3,3)):(jI(e,SI,e.bl_tree),zI(e,s-11,7));s=0,i=r,0===a?(c=138,l=3):r===a?(c=6,l=3):(c=7,l=4)}}uI(BI);var nE=!1;function oE(e,t,n,o){var r,i,a;zI(e,(dI<<1)+(o?1:0),3),i=t,a=n,YI(r=e),HI(r,a),HI(r,~a),nI(r.pending_buf,r.window,i,a,r.pending),r.pending+=a}function rE(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(xI[n]+gI+1)]++,e.dyn_dtree[2*VI(t)]++),e.last_lit===e.lit_bufsize-1}function iE(e,t,n,o){for(var r=65535&e|0,i=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{i=i+(r=r+t[o++]|0)|0}while(--a);r%=65521,i%=65521}return r|i<<16|0}var aE=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function sE(e,t,n,o){var r=aE,i=o+n;e^=-1;for(var a=o;a<i;a++)e=e>>>8^r[255&(e^t[a])];return-1^e}var cE,lE=-2,uE=3,dE=258,pE=dE+uE+1,hE=42,fE=69,gE=73,vE=91,mE=103,_E=113,yE=666;function bE(e,t){return e.msg=eI[t],t}function ME(e){return(e<<1)-(e>4?9:0)}function CE(e){for(var t=e.length;--t>=0;)e[t]=0}function kE(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(nI(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function wE(e,t){(function(e,t,n,o){var r,i,a=0;e.level>0?(e.strm.data_type===lI&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return sI;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return cI;for(t=32;t<gI;t++)if(0!==e.dyn_ltree[2*t])return cI;return sI}(e)),QI(e,e.l_desc),QI(e,e.d_desc),a=function(e){var t;for(eE(e,e.dyn_ltree,e.l_desc.max_code),eE(e,e.dyn_dtree,e.d_desc.max_code),QI(e,e.bl_desc),t=_I-1;t>=3&&0===e.bl_tree[2*AI[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=r&&(r=i)):r=i=n+5,n+4<=r&&-1!==t?oE(e,t,n,o):e.strategy===aI||i===r?(zI(e,(pI<<1)+(o?1:0),3),ZI(e,LI,RI)):(zI(e,(hI<<1)+(o?1:0),3),function(e,t,n,o){var r;for(zI(e,t-257,5),zI(e,n-1,5),zI(e,o-4,4),r=0;r<o;r++)zI(e,e.bl_tree[2*AI[r]+1],3);tE(e,e.dyn_ltree,t-1),tE(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),ZI(e,e.dyn_ltree,e.dyn_dtree)),KI(e),o&&YI(e)})(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,kE(e.strm)}function TE(e,t){e.pending_buf[e.pending++]=t}function SE(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function IE(e,t){var n,o,r=e.max_chain_length,i=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-pE?e.strstart-(e.w_size-pE):0,l=e.window,u=e.w_mask,d=e.prev,p=e.strstart+dE,h=l[i+a-1],f=l[i+a];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+a]===f&&l[n+a-1]===h&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<p);if(o=dE-(p-i),i=p-dE,o>a){if(e.match_start=t,a=o,o>=s)break;h=l[i+a-1],f=l[i+a]}}}while((t=d[t&u])>c&&0!=--r);return a<=e.lookahead?a:e.lookahead}function EE(e){var t,n,o,r,i,a,s,c,l,u,d=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-pE)){nI(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=n=e.hash_size;do{o=e.head[--t],e.head[t]=o>=d?o-d:0}while(--n);t=n=d;do{o=e.prev[--t],e.prev[t]=o>=d?o-d:0}while(--n);r+=d}if(0===e.strm.avail_in)break;if(a=e.strm,s=e.window,c=e.strstart+e.lookahead,l=r,u=void 0,(u=a.avail_in)>l&&(u=l),n=0===u?0:(a.avail_in-=u,nI(s,a.input,a.next_in,u,c),1===a.state.wrap?a.adler=iE(a.adler,s,u,c):2===a.state.wrap&&(a.adler=sE(a.adler,s,u,c)),a.next_in+=u,a.total_in+=u,u),e.lookahead+=n,e.lookahead+e.insert>=uE)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+uE-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<uE)););}while(e.lookahead<pE&&0!==e.strm.avail_in)}function DE(e,t){for(var n,o;;){if(e.lookahead<pE){if(EE(e),e.lookahead<pE&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=uE&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+uE-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-pE&&(e.match_length=IE(e,n)),e.match_length>=uE)if(o=rE(e,e.strstart-e.match_start,e.match_length-uE),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=uE){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+uE-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else o=rE(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(wE(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<uE-1?e.strstart:uE-1,4===t?(wE(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(wE(e,!1),0===e.strm.avail_out)?1:2}function AE(e,t){for(var n,o,r;;){if(e.lookahead<pE){if(EE(e),e.lookahead<pE&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=uE&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+uE-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=uE-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-pE&&(e.match_length=IE(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===uE&&e.strstart-e.match_start>4096)&&(e.match_length=uE-1)),e.prev_length>=uE&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-uE,o=rE(e,e.strstart-1-e.prev_match,e.prev_length-uE),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+uE-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=uE-1,e.strstart++,o&&(wE(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((o=rE(e,0,e.window[e.strstart-1]))&&wE(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=rE(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<uE-1?e.strstart:uE-1,4===t?(wE(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(wE(e,!1),0===e.strm.avail_out)?1:2}function LE(e,t,n,o,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=o,this.func=r}function RE(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new rI(1146),this.dyn_dtree=new rI(122),this.bl_tree=new rI(78),CE(this.dyn_ltree),CE(this.dyn_dtree),CE(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new rI(16),this.heap=new rI(573),CE(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new rI(573),CE(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function OE(e){var t,n,o,r=(n=e)&&n.state?(n.total_in=n.total_out=0,n.data_type=2,(o=n.state).pending=0,o.pending_out=0,o.wrap<0&&(o.wrap=-o.wrap),o.status=o.wrap?hE:_E,n.adler=2===o.wrap?0:1,o.last_flush=0,function(e){nE||(function(){var e,t,n,o,r,i=new Array(bI+1);for(n=0,o=0;o<fI-1;o++)for(NI[o]=n,e=0;e<1<<II[o];e++)xI[n++]=o;for(xI[n-1]=o,r=0,o=0;o<16;o++)for(BI[o]=r,e=0;e<1<<EI[o];e++)OI[r++]=o;for(r>>=7;o<mI;o++)for(BI[o]=r<<7,e=0;e<1<<EI[o]-7;e++)OI[256+r++]=o;for(t=0;t<=bI;t++)i[t]=0;for(e=0;e<=143;)LI[2*e+1]=8,e++,i[8]++;for(;e<=255;)LI[2*e+1]=9,e++,i[9]++;for(;e<=279;)LI[2*e+1]=7,e++,i[7]++;for(;e<=287;)LI[2*e+1]=8,e++,i[8]++;for(WI(LI,vI+1,i),e=0;e<mI;e++)RI[2*e+1]=5,RI[2*e]=$I(e,5);PI=new FI(LI,II,gI+1,vI,bI),UI=new FI(RI,EI,0,mI,bI),GI=new FI(new Array(0),DI,0,_I,CI)}(),nE=!0),e.l_desc=new qI(e.dyn_ltree,PI),e.d_desc=new qI(e.dyn_dtree,UI),e.bl_desc=new qI(e.bl_tree,GI),e.bi_buf=0,e.bi_valid=0,KI(e)}(o),0):bE(n,lE);return 0===r&&((t=e.state).window_size=2*t.w_size,CE(t.head),t.max_lazy_match=cE[t.level].max_lazy,t.good_match=cE[t.level].good_length,t.nice_match=cE[t.level].nice_length,t.max_chain_length=cE[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=uE-1,t.match_available=0,t.ins_h=0),r}function xE(e,t){var n,o,r,i;if(!e||!e.state||t>5||t<0)return e?bE(e,lE):lE;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===yE&&4!==t)return bE(e,0===e.avail_out?-5:lE);if(o.strm=e,n=o.last_flush,o.last_flush=t,o.status===hE)if(2===o.wrap)e.adler=0,TE(o,31),TE(o,139),TE(o,8),o.gzhead?(TE(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),TE(o,255&o.gzhead.time),TE(o,o.gzhead.time>>8&255),TE(o,o.gzhead.time>>16&255),TE(o,o.gzhead.time>>24&255),TE(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),TE(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(TE(o,255&o.gzhead.extra.length),TE(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=sE(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=fE):(TE(o,0),TE(o,0),TE(o,0),TE(o,0),TE(o,0),TE(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),TE(o,3),o.status=_E);else{var a=8+(o.w_bits-8<<4)<<8;a|=(o.strategy>=2||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(a|=32),a+=31-a%31,o.status=_E,SE(o,a),0!==o.strstart&&(SE(o,e.adler>>>16),SE(o,65535&e.adler)),e.adler=1}if(o.status===fE)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>r&&(e.adler=sE(e.adler,o.pending_buf,o.pending-r,r)),kE(e),r=o.pending,o.pending!==o.pending_buf_size));)TE(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(e.adler=sE(e.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=gE)}else o.status=gE;if(o.status===gE)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=sE(e.adler,o.pending_buf,o.pending-r,r)),kE(e),r=o.pending,o.pending===o.pending_buf_size)){i=1;break}i=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,TE(o,i)}while(0!==i);o.gzhead.hcrc&&o.pending>r&&(e.adler=sE(e.adler,o.pending_buf,o.pending-r,r)),0===i&&(o.gzindex=0,o.status=vE)}else o.status=vE;if(o.status===vE)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=sE(e.adler,o.pending_buf,o.pending-r,r)),kE(e),r=o.pending,o.pending===o.pending_buf_size)){i=1;break}i=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,TE(o,i)}while(0!==i);o.gzhead.hcrc&&o.pending>r&&(e.adler=sE(e.adler,o.pending_buf,o.pending-r,r)),0===i&&(o.status=mE)}else o.status=mE;if(o.status===mE&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&kE(e),o.pending+2<=o.pending_buf_size&&(TE(o,255&e.adler),TE(o,e.adler>>8&255),e.adler=0,o.status=_E)):o.status=_E),0!==o.pending){if(kE(e),0===e.avail_out)return o.last_flush=-1,0}else if(0===e.avail_in&&ME(t)<=ME(n)&&4!==t)return bE(e,-5);if(o.status===yE&&0!==e.avail_in)return bE(e,-5);if(0!==e.avail_in||0!==o.lookahead||0!==t&&o.status!==yE){var s=2===o.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(EE(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=rE(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(wE(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(wE(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(wE(e,!1),0===e.strm.avail_out)?1:2}(o,t):3===o.strategy?function(e,t){for(var n,o,r,i,a=e.window;;){if(e.lookahead<=dE){if(EE(e),e.lookahead<=dE&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=uE&&e.strstart>0&&(o=a[r=e.strstart-1])===a[++r]&&o===a[++r]&&o===a[++r]){i=e.strstart+dE;do{}while(o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&r<i);e.match_length=dE-(i-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=uE?(n=rE(e,1,e.match_length-uE),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=rE(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(wE(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(wE(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(wE(e,!1),0===e.strm.avail_out)?1:2}(o,t):cE[o.level].func(o,t);if(3!==s&&4!==s||(o.status=yE),1===s||3===s)return 0===e.avail_out&&(o.last_flush=-1),0;if(2===s&&(1===t?function(e){var t;zI(e,pI<<1,3),jI(e,kI,LI),16===(t=e).bi_valid?(HI(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(o):5!==t&&(oE(o,0,0,!1),3===t&&(CE(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),kE(e),0===e.avail_out))return o.last_flush=-1,0}return 4!==t?0:o.wrap<=0?1:(2===o.wrap?(TE(o,255&e.adler),TE(o,e.adler>>8&255),TE(o,e.adler>>16&255),TE(o,e.adler>>24&255),TE(o,255&e.total_in),TE(o,e.total_in>>8&255),TE(o,e.total_in>>16&255),TE(o,e.total_in>>24&255)):(SE(o,e.adler>>>16),SE(o,65535&e.adler)),kE(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?0:1)}cE=[new LE(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(EE(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var o=e.block_start+n;if((0===e.strstart||e.strstart>=o)&&(e.lookahead=e.strstart-o,e.strstart=o,wE(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-pE&&(wE(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(wE(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(wE(e,!1),e.strm.avail_out),1)})),new LE(4,4,8,4,DE),new LE(4,5,16,8,DE),new LE(4,6,32,32,DE),new LE(4,4,16,16,AE),new LE(8,16,32,32,AE),new LE(8,16,128,128,AE),new LE(8,32,128,256,AE),new LE(32,128,258,1024,AE),new LE(32,258,258,4096,AE)];var NE=30,PE=12;function UE(e,t){var n,o,r,i,a,s,c,l,u,d,p,h,f,g,v,m,_,y,b,M,C,k,w,T,S;n=e.state,o=e.next_in,T=e.input,r=o+(e.avail_in-5),i=e.next_out,S=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,d=n.wnext,p=n.window,h=n.hold,f=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;e:do{f<15&&(h+=T[o++]<<f,f+=8,h+=T[o++]<<f,f+=8),y=g[h&m];t:for(;;){if(h>>>=b=y>>>24,f-=b,0==(b=y>>>16&255))S[i++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=g[(65535&y)+(h&(1<<b)-1)];continue t}if(32&b){n.mode=PE;break e}e.msg="invalid literal/length code",n.mode=NE;break e}M=65535&y,(b&=15)&&(f<b&&(h+=T[o++]<<f,f+=8),M+=h&(1<<b)-1,h>>>=b,f-=b),f<15&&(h+=T[o++]<<f,f+=8,h+=T[o++]<<f,f+=8),y=v[h&_];n:for(;;){if(h>>>=b=y>>>24,f-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=v[(65535&y)+(h&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=NE;break e}if(C=65535&y,f<(b&=15)&&(h+=T[o++]<<f,(f+=8)<b&&(h+=T[o++]<<f,f+=8)),(C+=h&(1<<b)-1)>c){e.msg="invalid distance too far back",n.mode=NE;break e}if(h>>>=b,f-=b,C>(b=i-a)){if((b=C-b)>u&&n.sane){e.msg="invalid distance too far back",n.mode=NE;break e}if(k=0,w=p,0===d){if(k+=l-b,b<M){M-=b;do{S[i++]=p[k++]}while(--b);k=i-C,w=S}}else if(d<b){if(k+=l+d-b,(b-=d)<M){M-=b;do{S[i++]=p[k++]}while(--b);if(k=0,d<M){M-=b=d;do{S[i++]=p[k++]}while(--b);k=i-C,w=S}}}else if(k+=d-b,b<M){M-=b;do{S[i++]=p[k++]}while(--b);k=i-C,w=S}for(;M>2;)S[i++]=w[k++],S[i++]=w[k++],S[i++]=w[k++],M-=3;M&&(S[i++]=w[k++],M>1&&(S[i++]=w[k++]))}else{k=i-C;do{S[i++]=S[k++],S[i++]=S[k++],S[i++]=S[k++],M-=3}while(M>2);M&&(S[i++]=S[k++],M>1&&(S[i++]=S[k++]))}break}}break}}while(o<r&&i<s);o-=M=f>>3,h&=(1<<(f-=M<<3))-1,e.next_in=o,e.next_out=i,e.avail_in=o<r?r-o+5:5-(o-r),e.avail_out=i<s?s-i+257:257-(i-s),n.hold=h,n.bits=f}var GE=15,BE=852,FE=592,qE=0,VE=1,HE=2,zE=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],jE=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],$E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],WE=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function KE(e,t,n,o,r,i,a,s){var c,l,u,d,p,h,f,g,v,m=s.bits,_=0,y=0,b=0,M=0,C=0,k=0,w=0,T=0,S=0,I=0,E=null,D=0,A=new rI(GE+1),L=new rI(GE+1),R=null,O=0;for(_=0;_<=GE;_++)A[_]=0;for(y=0;y<o;y++)A[t[n+y]]++;for(C=m,M=GE;M>=1&&0===A[M];M--);if(C>M&&(C=M),0===M)return r[i++]=20971520,r[i++]=20971520,s.bits=1,0;for(b=1;b<M&&0===A[b];b++);for(C<b&&(C=b),T=1,_=1;_<=GE;_++)if(T<<=1,(T-=A[_])<0)return-1;if(T>0&&(e===qE||1!==M))return-1;for(L[1]=0,_=1;_<GE;_++)L[_+1]=L[_]+A[_];for(y=0;y<o;y++)0!==t[n+y]&&(a[L[t[n+y]]++]=y);if(e===qE?(E=R=a,h=19):e===VE?(E=zE,D-=257,R=jE,O-=257,h=256):(E=$E,R=WE,h=-1),I=0,y=0,_=b,p=i,k=C,w=0,u=-1,d=(S=1<<C)-1,e===VE&&S>BE||e===HE&&S>FE)return 1;for(;;){f=_-w,a[y]<h?(g=0,v=a[y]):a[y]>h?(g=R[O+a[y]],v=E[D+a[y]]):(g=96,v=0),c=1<<_-w,b=l=1<<k;do{r[p+(I>>w)+(l-=c)]=f<<24|g<<16|v|0}while(0!==l);for(c=1<<_-1;I&c;)c>>=1;if(0!==c?(I&=c-1,I+=c):I=0,y++,0==--A[_]){if(_===M)break;_=t[n+a[y]]}if(_>C&&(I&d)!==u){for(0===w&&(w=C),p+=b,T=1<<(k=_-w);k+w<M&&!((T-=A[k+w])<=0);)k++,T<<=1;if(S+=1<<k,e===VE&&S>BE||e===HE&&S>FE)return 1;r[u=I&d]=C<<24|k<<16|p-i|0}}return 0!==I&&(r[p+I]=_-w<<24|64<<16|0),s.bits=C,0}var YE=1,XE=2,JE=0,ZE=-2,QE=1,eD=12,tD=30,nD=852,oD=592;function rD(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function iD(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new rI(320),this.work=new rI(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function aD(e){var t,n,o;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,(n=e)&&n.state?(o=n.state,n.total_in=n.total_out=o.total=0,n.msg="",o.wrap&&(n.adler=1&o.wrap),o.mode=QE,o.last=0,o.havedict=0,o.dmax=32768,o.head=null,o.hold=0,o.bits=0,o.lencode=o.lendyn=new iI(nD),o.distcode=o.distdyn=new iI(oD),o.sane=1,o.back=-1,JE):ZE):ZE}var sD,cD,lD=!0;function uD(e){if(lD){var t;for(sD=new iI(512),cD=new iI(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(KE(YE,e.lens,0,288,sD,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;KE(XE,e.lens,0,32,cD,0,e.work,{bits:5}),lD=!1}e.lencode=sD,e.lenbits=9,e.distcode=cD,e.distbits=5}var dD,pD=1,hD=7;function fD(e){if(e<pD||e>hD)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function gD(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}fD.prototype.init=function(e,t,n,o,r){var i;switch(this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=o,3!==this.mode&&4!==this.mode||(this.windowBits+=16),this.mode===hD&&(this.windowBits+=32),5!==this.mode&&6!==this.mode||(this.windowBits=-this.windowBits),this.strm=new tI,this.mode){case pD:case 3:case 5:i=function(e,t,n,o,r,i){if(!e)return lE;var a=1;if(-1===t&&(t=6),o<0?(a=0,o=-o):o>15&&(a=2,o-=16),r<1||r>9||o<8||o>15||t<0||t>9||i<0||i>4)return bE(e,lE);8===o&&(o=9);var s=new RE;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=o,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+uE-1)/uE),s.window=new oI(2*s.w_size),s.head=new rI(s.hash_size),s.prev=new rI(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new oI(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=i,s.method=8,OE(e)}(this.strm,this.level,0,this.windowBits,this.memLevel,this.strategy);break;case 2:case 4:case 6:case hD:i=function(e,t){var n,o,r,i,a,s;return e?(o=new iD,e.state=o,o.window=null,i=t,(n=(r=e)&&r.state?(s=r.state,i<0?(a=0,i=-i):(a=1+(i>>4),i<48&&(i&=15)),i&&(i<8||i>15)?ZE:(null!==s.window&&s.wbits!==i&&(s.window=null),s.wrap=a,s.wbits=i,aD(r))):ZE)!==JE&&(e.state=null),n):ZE}(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}0===i?(this.write_in_progress=!1,this.init_done=!0):this._error(i)},fD.prototype.params=function(){throw new Error("deflateParams Not supported")},fD.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(0===this.mode)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},fD.prototype.write=function(e,t,n,o,r,i,a){this._writeCheck(),this.write_in_progress=!0;var s=this;return AT((function(){s.write_in_progress=!1;var c=s._write(e,t,n,o,r,i,a);s.callback(c[0],c[1]),s.pending_close&&s.close()})),this},fD.prototype.writeSync=function(e,t,n,o,r,i,a){return this._writeCheck(),this._write(e,t,n,o,r,i,a)},fD.prototype._write=function(e,t,n,o,r,i,a){if(this.write_in_progress=!0,0!==e&&1!==e&&2!==e&&3!==e&&4!==e&&5!==e)throw new Error("Invalid flush value");null==t&&(t=new Lw(0),o=0,n=0),r._set?r.set=r._set:r.set=gD;var s,c=this.strm;switch(c.avail_in=o,c.input=t,c.next_in=n,c.avail_out=a,c.output=r,c.next_out=i,this.mode){case pD:case 3:case 5:s=xE(c,e);break;case hD:case 2:case 4:case 6:s=function(e,t){var n,o,r,i,a,s,c,l,u,d,p,h,f,g,v,m,_,y,b,M,C,k,w,T,S,I,E,D,A,L,R=0,O=new oI(4),x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return ZE;(n=e.state).mode===eD&&(n.mode=13),a=e.next_out,r=e.output,c=e.avail_out,i=e.next_in,o=e.input,s=e.avail_in,l=n.hold,u=n.bits,d=s,p=c,k=JE;e:for(;;)switch(n.mode){case QE:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(2&n.wrap&&35615===l){n.check=0,O[0]=255&l,O[1]=l>>>8&255,n.check=sE(n.check,O,2,0),l=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=tD;break}if(8!=(15&l)){e.msg="unknown compression method",n.mode=tD;break}if(u-=4,C=8+(15&(l>>>=4)),0===n.wbits)n.wbits=C;else if(C>n.wbits){e.msg="invalid window size",n.mode=tD;break}n.dmax=1<<C,e.adler=n.check=1,n.mode=512&l?10:eD,l=0,u=0;break;case 2:for(;u<16;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(n.flags=l,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=tD;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=tD;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(O[0]=255&l,O[1]=l>>>8&255,n.check=sE(n.check,O,2,0)),l=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&(O[0]=255&l,O[1]=l>>>8&255,O[2]=l>>>16&255,O[3]=l>>>24&255,n.check=sE(n.check,O,4,0)),l=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(O[0]=255&l,O[1]=l>>>8&255,n.check=sE(n.check,O,2,0)),l=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(O[0]=255&l,O[1]=l>>>8&255,n.check=sE(n.check,O,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((h=n.length)>s&&(h=s),h&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),nI(n.head.extra,o,i,h,C)),512&n.flags&&(n.check=sE(n.check,o,h,i)),s-=h,i+=h,n.length-=h),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;h=0;do{C=o[i+h++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C))}while(C&&h<s);if(512&n.flags&&(n.check=sE(n.check,o,h,i)),s-=h,i+=h,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;h=0;do{C=o[i+h++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C))}while(C&&h<s);if(512&n.flags&&(n.check=sE(n.check,o,h,i)),s-=h,i+=h,C)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=tD;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=eD;break;case 10:for(;u<32;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}e.adler=n.check=rD(l),l=0,u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=s,n.hold=l,n.bits=u,2;e.adler=n.check=1,n.mode=eD;case eD:if(5===t||6===t)break e;case 13:if(n.last){l>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}switch(n.last=1&l,u-=1,3&(l>>>=1)){case 0:n.mode=14;break;case 1:if(uD(n),n.mode=20,6===t){l>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=tD}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=tD;break}if(n.length=65535&l,l=0,u=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(h=n.length){if(h>s&&(h=s),h>c&&(h=c),0===h)break e;nI(r,o,i,h,a),s-=h,i+=h,c-=h,a+=h,n.length-=h;break}n.mode=eD;break;case 17:for(;u<14;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=tD;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}n.lens[x[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[x[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,w={bits:n.lenbits},k=KE(0,n.lens,0,19,n.lencode,0,n.work,w),n.lenbits=w.bits,k){e.msg="invalid code lengths set",n.mode=tD;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(R=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,_=65535&R,!((v=R>>>24)<=u);){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(_<16)l>>>=v,u-=v,n.lens[n.have++]=_;else{if(16===_){for(T=v+2;u<T;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(l>>>=v,u-=v,0===n.have){e.msg="invalid bit length repeat",n.mode=tD;break}C=n.lens[n.have-1],h=3+(3&l),l>>>=2,u-=2}else if(17===_){for(T=v+3;u<T;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}u-=v,C=0,h=3+(7&(l>>>=v)),l>>>=3,u-=3}else{for(T=v+7;u<T;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}u-=v,C=0,h=11+(127&(l>>>=v)),l>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=tD;break}for(;h--;)n.lens[n.have++]=C}}if(n.mode===tD)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=tD;break}if(n.lenbits=9,w={bits:n.lenbits},k=KE(YE,n.lens,0,n.nlen,n.lencode,0,n.work,w),n.lenbits=w.bits,k){e.msg="invalid literal/lengths set",n.mode=tD;break}if(n.distbits=6,n.distcode=n.distdyn,w={bits:n.distbits},k=KE(XE,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,w),n.distbits=w.bits,k){e.msg="invalid distances set",n.mode=tD;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=s,n.hold=l,n.bits=u,UE(e,p),a=e.next_out,r=e.output,c=e.avail_out,i=e.next_in,o=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===eD&&(n.back=-1);break}for(n.back=0;m=(R=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,_=65535&R,!((v=R>>>24)<=u);){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(m&&0==(240&m)){for(y=v,b=m,M=_;m=(R=n.lencode[M+((l&(1<<y+b)-1)>>y)])>>>16&255,_=65535&R,!(y+(v=R>>>24)<=u);){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}l>>>=y,u-=y,n.back+=y}if(l>>>=v,u-=v,n.back+=v,n.length=_,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=eD;break}if(64&m){e.msg="invalid literal/length code",n.mode=tD;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(T=n.extra;u<T;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(R=n.distcode[l&(1<<n.distbits)-1])>>>16&255,_=65535&R,!((v=R>>>24)<=u);){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(0==(240&m)){for(y=v,b=m,M=_;m=(R=n.distcode[M+((l&(1<<y+b)-1)>>y)])>>>16&255,_=65535&R,!(y+(v=R>>>24)<=u);){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}l>>>=y,u-=y,n.back+=y}if(l>>>=v,u-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=tD;break}n.offset=_,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(T=n.extra;u<T;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=tD;break}n.mode=25;case 25:if(0===c)break e;if(h=p-c,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=tD;break}h>n.wnext?(h-=n.wnext,f=n.wsize-h):f=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=r,f=a-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do{r[a++]=g[f++]}while(--h);0===n.length&&(n.mode=21);break;case 26:if(0===c)break e;r[a++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===s)break e;s--,l|=o[i++]<<u,u+=8}if(p-=c,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=n.flags?sE(n.check,r,p,a-p):iE(n.check,r,p,a-p)),p=c,(n.flags?l:rD(l))!==n.check){e.msg="incorrect data check",n.mode=tD;break}l=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,l+=o[i++]<<u,u+=8}if(l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=tD;break}l=0,u=0}n.mode=29;case 29:k=1;break e;case tD:k=-3;break e;case 31:return-4;default:return ZE}return e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<tD&&(n.mode<27||4!==t))&&(S=e,I=e.output,E=e.next_out,D=p-e.avail_out,null===(L=S.state).window&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new oI(L.wsize)),D>=L.wsize?(nI(L.window,I,E-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):((A=L.wsize-L.wnext)>D&&(A=D),nI(L.window,I,E-D,A,L.wnext),(D-=A)?(nI(L.window,I,E-D,D,0),L.wnext=D,L.whave=L.wsize):(L.wnext+=A,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=A)))),d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=n.flags?sE(n.check,r,p,e.next_out-p):iE(n.check,r,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===eD?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===p||4===t)&&k===JE&&(k=-5),k}(c,e);break;default:throw new Error("Unknown mode "+this.mode)}return 1!==s&&0!==s&&this._error(s),this.write_in_progress=!1,[c.avail_in,c.avail_out]},fD.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===pD||3===this.mode||5===this.mode?function(e){var t;e&&e.state&&((t=e.state.status)!==hE&&t!==fE&&t!==gE&&t!==vE&&t!==mE&&t!==_E&&t!==yE?bE(e,lE):(e.state=null,t===_E&&bE(e,-3)))}(this.strm):function(e){if(!e||!e.state)return ZE;var t=e.state;t.window&&(t.window=null),e.state=null}(this.strm),this.mode=0)},fD.prototype.reset=function(){switch(this.mode){case pD:case 5:dD=OE(this.strm);break;case 2:case 6:dD=aD(this.strm)}0!==dD&&this._error(dD)},fD.prototype._error=function(e){this.onerror(eI[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var vD=Object.freeze({NONE:0,DEFLATE:pD,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:hD,Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8,Zlib:fD}),mD={};Object.keys(vD).forEach((function(e){mD[e]=vD[e]})),mD.Z_MIN_WINDOWBITS=8,mD.Z_MAX_WINDOWBITS=15,mD.Z_DEFAULT_WINDOWBITS=15,mD.Z_MIN_CHUNK=64,mD.Z_MAX_CHUNK=1/0,mD.Z_DEFAULT_CHUNK=16384,mD.Z_MIN_MEMLEVEL=1,mD.Z_MAX_MEMLEVEL=9,mD.Z_DEFAULT_MEMLEVEL=8,mD.Z_MIN_LEVEL=-1,mD.Z_MAX_LEVEL=9,mD.Z_DEFAULT_LEVEL=mD.Z_DEFAULT_COMPRESSION;var _D={Z_OK:mD.Z_OK,Z_STREAM_END:mD.Z_STREAM_END,Z_NEED_DICT:mD.Z_NEED_DICT,Z_ERRNO:mD.Z_ERRNO,Z_STREAM_ERROR:mD.Z_STREAM_ERROR,Z_DATA_ERROR:mD.Z_DATA_ERROR,Z_MEM_ERROR:mD.Z_MEM_ERROR,Z_BUF_ERROR:mD.Z_BUF_ERROR,Z_VERSION_ERROR:mD.Z_VERSION_ERROR};function yD(e,t){if("string"==typeof t&&(t=new Lw(t)),!fT(t))throw new TypeError("Not a string or buffer");var n=mD.Z_FINISH;return e._processChunk(t,n)}function bD(e){if(!(this instanceof bD))return new bD(e);ID.call(this,e,mD.DEFLATE)}function MD(e){if(!(this instanceof MD))return new MD(e);ID.call(this,e,mD.INFLATE)}function CD(e){if(!(this instanceof CD))return new CD(e);ID.call(this,e,mD.GZIP)}function kD(e){if(!(this instanceof kD))return new kD(e);ID.call(this,e,mD.GUNZIP)}function wD(e){if(!(this instanceof wD))return new wD(e);ID.call(this,e,mD.DEFLATERAW)}function TD(e){if(!(this instanceof TD))return new TD(e);ID.call(this,e,mD.INFLATERAW)}function SD(e){if(!(this instanceof SD))return new SD(e);ID.call(this,e,mD.UNZIP)}function ID(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||mD.Z_DEFAULT_CHUNK,XS.call(this,e),e.flush&&e.flush!==mD.Z_NO_FLUSH&&e.flush!==mD.Z_PARTIAL_FLUSH&&e.flush!==mD.Z_SYNC_FLUSH&&e.flush!==mD.Z_FULL_FLUSH&&e.flush!==mD.Z_FINISH&&e.flush!==mD.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||mD.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<mD.Z_MIN_CHUNK||e.chunkSize>mD.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<mD.Z_MIN_WINDOWBITS||e.windowBits>mD.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<mD.Z_MIN_LEVEL||e.level>mD.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<mD.Z_MIN_MEMLEVEL||e.memLevel>mD.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=mD.Z_FILTERED&&e.strategy!=mD.Z_HUFFMAN_ONLY&&e.strategy!=mD.Z_RLE&&e.strategy!=mD.Z_FIXED&&e.strategy!=mD.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!fT(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new mD.Zlib(t);var n=this;this._hadError=!1,this._binding.onerror=function(e,t){n._binding=null,n._hadError=!0;var o=new Error(e);o.errno=t,o.code=mD.codes[t],n.emit("error",o)};var o=mD.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var r=mD.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(r=e.strategy),this._binding.init(e.windowBits||mD.Z_DEFAULT_WINDOWBITS,o,e.memLevel||mD.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new Lw(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=r,this.once("end",this.close)}Object.keys(_D).forEach((function(e){_D[_D[e]]=e})),FT(ID,XS),ID.prototype.params=function(e,t,n){if(e<mD.Z_MIN_LEVEL||e>mD.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=mD.Z_FILTERED&&t!=mD.Z_HUFFMAN_ONLY&&t!=mD.Z_RLE&&t!=mD.Z_FIXED&&t!=mD.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var o=this;this.flush(mD.Z_SYNC_FLUSH,(function(){o._binding.params(e,t),o._hadError||(o._level=e,o._strategy=t,n&&n())}))}else AT(n)},ID.prototype.reset=function(){return this._binding.reset()},ID.prototype._flush=function(e){this._transform(new Lw(0),"",e)},ID.prototype.flush=function(e,t){var n=this._writableState;if(("function"==typeof e||void 0===e&&!t)&&(t=e,e=mD.Z_FULL_FLUSH),n.ended)t&&AT(t);else if(n.ending)t&&this.once("end",t);else if(n.needDrain){var o=this;this.once("drain",(function(){o.flush(t)}))}else this._flushFlag=e,this.write(new Lw(0),"",t)},ID.prototype.close=function(e){if(e&&AT(e),!this._closed){this._closed=!0,this._binding.close();var t=this;AT((function(){t.emit("close")}))}},ID.prototype._transform=function(e,t,n){var o,r=this._writableState,i=(r.ending||r.ended)&&(!e||r.length===e.length);if(null===!e&&!fT(e))return n(new Error("invalid input"));i?o=mD.Z_FINISH:(o=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||mD.Z_NO_FLUSH)),this._processChunk(e,o,n)},ID.prototype._processChunk=function(e,t,n){var o=e&&e.length,r=this._chunkSize-this._offset,i=0,a=this,s="function"==typeof n;if(!s){var c,l=[],u=0;this.on("error",(function(e){c=e}));do{var d=this._binding.writeSync(t,e,i,o,this._buffer,this._offset,r)}while(!this._hadError&&f(d[0],d[1]));if(this._hadError)throw c;var p=Lw.concat(l,u);return this.close(),p}var h=this._binding.write(t,e,i,o,this._buffer,this._offset,r);function f(c,d){if(!a._hadError){var p=r-d;if(function(e,t){if(!e)throw new Error("have should not go down")}(p>=0),p>0){var h=a._buffer.slice(a._offset,a._offset+p);a._offset+=p,s?a.push(h):(l.push(h),u+=h.length)}if((0===d||a._offset>=a._chunkSize)&&(r=a._chunkSize,a._offset=0,a._buffer=new Lw(a._chunkSize)),0===d){if(i+=o-c,o=c,!s)return!0;var g=a._binding.write(t,e,i,o,a._buffer,a._offset,a._chunkSize);return g.callback=f,void(g.buffer=e)}if(!s)return!1;n()}}h.buffer=e,h.callback=f},FT(bD,ID),FT(MD,ID),FT(CD,ID),FT(kD,ID),FT(wD,ID),FT(TD,ID),FT(SD,ID);var ED=function(e,t){return yD(new bD(t),e)},DD=function(e,t){return yD(new MD(t),e)};class AD{constructor(e,t,n){this.SDKAPPID=e,this.EXPIRETIME=n,this.PRIVATEKEY=t}genTestUserSig(e){return this._isNumber(this.SDKAPPID)?this._isString(this.PRIVATEKEY)?this._isString(e)?this._isNumber(this.EXPIRETIME)?(console.log("sdkAppID="+this.SDKAPPID+" key="+this.PRIVATEKEY+" userID="+e+" expire="+this.EXPIRETIME),this.genSigWithUserbuf(e,this.EXPIRETIME,null)):(console.error("expireTime must be a number"),""):(console.error("userID must be a string"),""):(console.error("privateKey must be a string"),""):(console.error("sdkAppID must be a number"),"")}newBuffer(e,t){return Lw.from?Lw.from(e,t):new Lw(e,t)}unescape(e){return e.replace(/_/g,"=").replace(/\-/g,"/").replace(/\*/g,"+")}escape(e){return e.replace(/\+/g,"*").replace(/\//g,"-").replace(/=/g,"_")}encode(e){return this.escape(this.newBuffer(e).toString("base64"))}decode(e){return this.newBuffer(this.unescape(e),"base64")}base64encode(e){return this.newBuffer(e).toString("base64")}base64decode(e){return this.newBuffer(e,"base64").toString()}_hmacsha256(e,t,n,o){let r="TLS.identifier:"+e+"\n";r+="TLS.sdkappid:"+this.SDKAPPID+"\n",r+="TLS.time:"+t+"\n",r+="TLS.expire:"+n+"\n",null!=o&&(r+="TLS.userbuf:"+o+"\n");let i=_T.HmacSHA256(r,this.PRIVATEKEY);return _T.enc.Base64.stringify(i)}_utc(){return Math.round(Date.now()/1e3)}_isNumber(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"==typeof e&&e.constructor===Number)}_isString(e){return"string"==typeof e}genSigWithUserbuf(e,t,n){let o=this._utc(),r={"TLS.ver":"2.0","TLS.identifier":e,"TLS.sdkappid":this.SDKAPPID,"TLS.time":o,"TLS.expire":t},i="";if(null!=n){let a=this.base64encode(n);r["TLS.userbuf"]=a,i=this._hmacsha256(e,o,t,a)}else i=this._hmacsha256(e,o,t,null);r["TLS.sig"]=i;let a=JSON.stringify(r),s=ED(this.newBuffer(a)).toString("base64"),c=this.escape(s);return console.log("ret="+c),c}validate(e){let t=this.decode(e),n=DD(t);console.log("validate ret="+n)}}function LD(e){const{SDKAppID:t,secretKey:n,userID:o}=e;return{SDKAppID:t,userSig:new AD(t,n,604800).genTestUserSig(o)}}const RD="iHWefAYqmGKHeAqvDB";var OD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function xD(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),n}var ND={};({get exports(){return ND},set exports(e){ND=e}}).exports=function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ee){return!1}}function d(e,t,n){return(d=u()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&l(r,n.prototype),r}).apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return d(e,arguments,c(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l(o,e)})(e)}function h(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function v(e){var t=u();return function(){var n,o=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return g(this,n)}}function m(e,t){return y(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(c){s=!0,r=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return i}}(e,t)||M(e,t)||k()}function _(e){return function(e){if(Array.isArray(e))return C(e)}(e)||b(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){if(Array.isArray(e))return e}function b(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function M(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=M(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}var T={SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_RECEIVED:"onMessageReceived",MESSAGE_MODIFIED:"onMessageModified",MESSAGE_REVOKED:"onMessageRevoked",MESSAGE_READ_BY_PEER:"onMessageReadByPeer",MESSAGE_READ_RECEIPT_RECEIVED:"onMessageReadReceiptReceived",MESSAGE_EXTENSIONS_UPDATED:"onMessageExtensionsUpdated",MESSAGE_EXTENSIONS_DELETED:"onMessageExtensionsDeleted",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",TOTAL_UNREAD_MESSAGE_COUNT_UPDATED:"onTotalUnreadMessageCountUpdated",CONVERSATION_GROUP_LIST_UPDATED:"onConversationGroupListUpdated",CONVERSATION_IN_GROUP_UPDATED:"onConversationInGroupUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_SYSTEM_NOTICE_RECEIVED:"receiveGroupSystemNotice",GROUP_ATTRIBUTES_UPDATED:"groupAttributesUpdated",GROUP_COUNTER_UPDATED:"onGroupCounterUpdated",TOPIC_CREATED:"onTopicCreated",TOPIC_DELETED:"onTopicDeleted",TOPIC_UPDATED:"onTopicUpdated",PROFILE_UPDATED:"onProfileUpdated",USER_STATUS_UPDATED:"onUserStatusUpdated",BLACKLIST_UPDATED:"blacklistUpdated",FRIEND_LIST_UPDATED:"onFriendListUpdated",FRIEND_GROUP_LIST_UPDATED:"onFriendGroupListUpdated",FRIEND_APPLICATION_LIST_UPDATED:"onFriendApplicationListUpdated",KICKED_OUT:"kickedOut",ERROR:"error",NET_STATE_CHANGE:"netStateChange",SDK_RELOAD:"sdkReload"},S={MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_LOCATION:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",MSG_MERGER:"TIMRelayElem",MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_TOPIC:"TOPIC",CONV_SYSTEM:"@TIM#SYSTEM",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,CONV_MARK_TYPE_STAR:1,CONV_MARK_TYPE_UNREAD:2,CONV_MARK_TYPE_FOLD:4,CONV_MARK_TYPE_HIDE:8,GRP_PRIVATE:"Private",GRP_WORK:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_MEETING:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_COMMUNITY:"Community",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_MBR_ROLE_CUSTOM:"Custom",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,GRP_TIP_BAN_AVCHATROOM_MEMBER:10,GRP_TIP_UNBAN_AVCHATROOM_MEMBER:11,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",KICKED_OUT_REST_API:"REST_API_Kick",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",INVITE_OPTIONS_DISABLE_INVITE:"DisableInvite",INVITE_OPTIONS_NEED_PERMISSION:"NeedPermission",INVITE_OPTIONS_FREE_ACCESS:"FreeAccess",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INVITE_OPTION:"inviteOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification",GRP_PROFILE_MUTE_ALL_MBRS:"muteAllMembers",SNS_ADD_TYPE_SINGLE:"Add_Type_Single",SNS_ADD_TYPE_BOTH:"Add_Type_Both",SNS_DELETE_TYPE_SINGLE:"Delete_Type_Single",SNS_DELETE_TYPE_BOTH:"Delete_Type_Both",SNS_APPLICATION_TYPE_BOTH:"Pendency_Type_Both",SNS_APPLICATION_SENT_TO_ME:"Pendency_Type_ComeIn",SNS_APPLICATION_SENT_BY_ME:"Pendency_Type_SendOut",SNS_APPLICATION_AGREE:"Response_Action_Agree",SNS_APPLICATION_AGREE_AND_ADD:"Response_Action_AgreeAndAdd",SNS_CHECK_TYPE_BOTH:"CheckResult_Type_Both",SNS_CHECK_TYPE_SINGLE:"CheckResult_Type_Single",SNS_TYPE_NO_RELATION:"CheckResult_Type_NoRelation",SNS_TYPE_A_WITH_B:"CheckResult_Type_AWithB",SNS_TYPE_B_WITH_A:"CheckResult_Type_BWithA",SNS_TYPE_BOTH_WAY:"CheckResult_Type_BothWay",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",MSG_AT_ALL:"__kImSDK_MesssageAtALL__",READ_ALL_C2C_MSG:"readAllC2CMessage",READ_ALL_GROUP_MSG:"readAllGroupMessage",READ_ALL_MSG:"readAllMessage",USER_STATUS_UNKNOWN:0,USER_STATUS_ONLINE:1,USER_STATUS_OFFLINE:2,USER_STATUS_UNLOGINED:3},I=function(){function e(){o(this,e),this.cache=[],this.options=null}return i(e,[{key:"use",value:function(e){if("function"!=typeof e)throw"middleware must be a function";return this.cache.push(e),this}},{key:"next",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:"run",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,e),this.high=t,this.low=n}return i(e,[{key:"equal",value:function(e){return null!==e&&this.low===e.low&&this.high===e.high}},{key:"toString",value:function(){var e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8)for(var n=8-t.length;n;)t="0"+t,n--;return e+t}}]),e}(),D={TEST:{CHINA:{DEFAULT:"wss://wss-dev.tim.qq.com"},OVERSEA:{DEFAULT:"wss://wss-dev.tim.qq.com"},SINGAPORE:{DEFAULT:"wss://wsssgp-dev.im.qcloud.com"},KOREA:{DEFAULT:"wss://wsskr-dev.im.qcloud.com"},GERMANY:{DEFAULT:"wss://wssger-dev.im.qcloud.com"},IND:{DEFAULT:"wss://wssind-dev.im.qcloud.com"},JPN:{DEFAULT:"wss://wssjpn-dev.im.qcloud.com"},USA:{DEFAULT:"wss://wssusa-dev.im.qcloud.com"}},PRODUCTION:{CHINA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.tim.qq.com",STAT:"https://events.im.qcloud.com",ANYCAST:"wss://162.14.13.203"},OVERSEA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.my-imcloud.com",STAT:"https://api.my-imcloud.com"},SINGAPORE:{DEFAULT:"wss://wsssgp.im.qcloud.com",BACKUP:"wss://wsssgp.my-imcloud.com",STAT:"https://apisgp.my-imcloud.com"},KOREA:{DEFAULT:"wss://wsskr.im.qcloud.com",BACKUP:"wss://wsskr.my-imcloud.com",STAT:"https://apikr.my-imcloud.com"},GERMANY:{DEFAULT:"wss://wssger.im.qcloud.com",BACKUP:"wss://wssger.my-imcloud.com",STAT:"https://apiger.my-imcloud.com"},IND:{DEFAULT:"wss://wssind.my-imcloud.com",BACKUP:"wss://wssind.im.qcloud.com",STAT:"https://apiind.my-imcloud.com"},JPN:{DEFAULT:"wss://wssjpn.im.qcloud.com",BACKUP:"wss://wssjpn.my-imcloud.com",STAT:"https://apijpn.my-imcloud.com"},USA:{DEFAULT:"wss://wssusa.im.qcloud.com",BACKUP:"wss://wssusa.my-imcloud.com",STAT:"https://apiusa.my-imcloud.com"}}},A={ANDROID:2,IOS:3,MAC:4,WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,IPAD:13,UNI_NATIVE_APP:15},L="1.7.3",R=537048168,O="CHINA",x="OVERSEA",N="SINGAPORE",P="KOREA",U="GERMANY",G="IND",B="JPN",F="USA",q={HOST:{CURRENT:{DEFAULT:"wss://wss.im.qcloud.com",STAT:"https://events.im.qcloud.com"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;this.CURRENT=D.PRODUCTION[e]}},NAME:{OPEN_IM:"openim",OPEN_IM_MSG_EXT:"openim_msg_ext_http_svc",GROUP:"group_open_http_svc",GROUP_AVCHATROOM:"group_open_avchatroom_http_svc",GROUP_COMMUNITY:"million_group_open_http_svc",GROUP_ATTR:"group_open_attr_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP_NO_AUTH:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_svc",BIG_GROUP_LONG_POLLING_NO_AUTH:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",WEB_IM:"webim",IM_COS_SIGN:"im_cos_sign_svr",CUSTOM_UPLOAD:"im_cos_msg",HEARTBEAT:"heartbeat",IM_OPEN_PUSH:"im_open_push",IM_OPEN_STATUS:"im_open_status",IM_LONG_MESSAGE:"im_long_msg",IM_CONFIG_MANAGER:"im_sdk_config_mgr",STAT_SERVICE:"StatSvc",OVERLOAD_PUSH:"OverLoadPush",IM_MSG_AUDIT_MGR:"im_msg_audit_mgr",TUIROOM_SVR:"tui_room_svr",IM_OPEN_TRANSLATE:"im_open_translate"},CMD:{LOGIN:"wslogin",LOGOUT_LONG_POLL:"longpollinglogout",LOGOUT:"wslogout",HELLO:"wshello",STAT_BACKGROUND:"ws_stat_background",STAT_FOREGROUND:"ws_stat_foreground",SET_TOKEN:"ws_stat_settoken",PORTRAIT_GET:"portrait_get_all",PORTRAIT_SET:"portrait_set",GET_LONG_POLL_ID:"getlongpollingid",LONG_POLL:"longpolling",AVCHATROOM_LONG_POLL:"get_msg",ADD_FRIEND:"friend_add",UPDATE_FRIEND:"friend_update",GET_FRIEND_LIST:"friend_get",GET_FRIEND_PROFILE:"friend_get_specified",DELETE_FRIEND:"friend_delete",CHECK_FRIEND:"friend_check",GET_FRIEND_GROUP_LIST:"group_get",RESPOND_FRIEND_APPLICATION:"friend_response",GET_FRIEND_APPLICATION_LIST:"pendency_get",DELETE_FRIEND_APPLICATION:"pendency_delete",REPORT_FRIEND_APPLICATION:"pendency_report",GET_GROUP_APPLICATION:"get_pendency",CREATE_FRIEND_GROUP:"group_add",DELETE_FRIEND_GROUP:"group_delete",UPDATE_FRIEND_GROUP:"group_update",GET_BLACKLIST:"black_list_get",ADD_BLACKLIST:"black_list_add",DELETE_BLACKLIST:"black_list_delete",CREATE_GROUP:"create_group",GET_JOINED_GROUPS:"get_joined_group_list",SET_GROUP_ATTRIBUTES:"set_group_attr",MODIFY_GROUP_ATTRIBUTES:"modify_group_attr",DELETE_GROUP_ATTRIBUTES:"delete_group_attr",CLEAR_GROUP_ATTRIBUTES:"clear_group_attr",GET_GROUP_ATTRIBUTES:"get_group_attr",SEND_MESSAGE:"sendmsg",REVOKE_C2C_MESSAGE:"msgwithdraw",DELETE_C2C_MESSAGE:"delete_c2c_msg_ramble",MODIFY_C2C_MESSAGE:"modify_c2c_msg",MODIFY_C2C_MESSAGE_EXTENSIONS:"set_key_values",GET_C2C_MESSAGE_EXTENSIONS:"get_key_values",SEND_GROUP_MESSAGE:"send_group_msg",REVOKE_GROUP_MESSAGE:"group_msg_recall",DELETE_GROUP_MESSAGE:"delete_group_ramble_msg_by_seq",MODIFY_GROUP_MESSAGE:"modify_group_msg",MODIFY_GROUP_MESSAGE_EXTENSIONS:"group_set_key_values",GET_GROUP_MESSAGE_EXTENSIONS:"group_get_key_values",GET_GROUP_INFO:"get_group_self_member_info",GET_GROUP_MEMBER_INFO:"get_specified_group_member_info",GET_GROUP_MEMBER_LIST:"get_group_member_info",GET_AVCHATROOM_MEMBER_LIST:"get_members",MARK_AVCHATROOM_MEMBER_INFO:"modify_user_info",QUIT_GROUP:"quit_group",CHANGE_GROUP_OWNER:"change_group_owner",DESTROY_GROUP:"destroy_group",ADD_GROUP_MEMBER:"add_group_member",DELETE_GROUP_MEMBER:"delete_group_member",BAN_AVCHATROOM_MEMBER:"ban_group_member",SEARCH_GROUP_BY_ID:"get_group_public_info",APPLY_JOIN_GROUP:"apply_join_group",HANDLE_APPLY_JOIN_GROUP:"handle_apply_join_group",HANDLE_INVITE_JOIN_GROUP:"handle_invite_join_permission_group",HANDLE_GROUP_INVITATION:"handle_invite_join_group",MODIFY_GROUP_INFO:"modify_group_base_info",MODIFY_GROUP_MEMBER_INFO:"modify_group_member_info",DELETE_GROUP_SYSTEM_MESSAGE:"deletemsg",DELETE_GROUP_AT_TIPS:"deletemsg",GET_GROUP_NOTIFY:"get_group_notify",GET_CONVERSATION_LIST:"get",PAGING_GET_CONVERSATION_LIST:"page_get",DELETE_CONVERSATION:"batch_delete",CLEAR_HISTORY_MESSAGE:"clear_msg",PIN_CONVERSATION:"top",SET_CONVERSATION_CUSTOM_DATA:"mark_contact",MARK_CONVERSATION:"mark_contact",CREATE_CONVERSATION_GROUP:"create_contact_group",DELETE_CONVERSATION_GROUP:"del_contact_group",UPDATE_CONVERSATION_GROUP:"update_contact_group",GET_CONVERSATION_GROUP_LIST:"get_contact_group",GET_MESSAGES:"getmsg",GET_C2C_ROAM_MESSAGES:"getroammsg",SET_C2C_PEER_MUTE_NOTIFICATIONS:"set_c2c_peer_mute_notifications",GET_C2C_PEER_MUTE_NOTIFICATIONS:"get_c2c_peer_mute_notifications",GET_GROUP_ROAM_MESSAGES:"group_msg_get",GET_READ_RECEIPT:"get_group_msg_receipt",GET_READ_RECEIPT_DETAIL:"get_group_msg_receipt_detail",SEND_READ_RECEIPT:"group_msg_receipt",SEND_C2C_READ_RECEIPT:"c2c_msg_read_receipt",SET_C2C_MESSAGE_READ:"msgreaded",GET_PEER_READ_TIME:"get_peer_read_time",SET_GROUP_MESSAGE_READ:"msg_read_report",FILE_READ_AND_WRITE_AUTHKEY:"authkey",FILE_UPLOAD:"pic_up",COS_SIGN:"cos",COS_PRE_SIG:"pre_sig",VIDEO_COVER:"video_cover",TIM_WEB_REPORT_V2:"tim_web_report_v2",BIG_DATA_HALLWAY_AUTH_KEY:"authkey",GET_ONLINE_MEMBER_NUM:"get_online_member_num",ALIVE:"alive",MESSAGE_PUSH:"msg_push",MULTI_MESSAGE_PUSH:"multi_msg_push_ws",MESSAGE_PUSH_ACK:"ws_msg_push_ack",STATUS_FORCE_OFFLINE:"stat_forceoffline",DOWNLOAD_MERGER_MESSAGE:"get_relay_json_msg",UPLOAD_MERGER_MESSAGE:"save_relay_json_msg",FETCH_CLOUD_CONTROL_CONFIG:"fetch_config",PUSHED_CLOUD_CONTROL_CONFIG:"push_configv2",FETCH_COMMERCIAL_CONFIG:"fetch_imsdk_purchase_bitsv2",PUSHED_COMMERCIAL_CONFIG:"push_imsdk_purchase_bitsv2",KICK_OTHER:"KickOther",OVERLOAD_NOTIFY:"notify2",SET_ALL_MESSAGE_READ:"read_all_unread_msg",CREATE_TOPIC:"create_topic",DELETE_TOPIC:"destroy_topic",UPDATE_TOPIC_PROFILE:"modify_topic",GET_TOPIC_LIST:"get_topic",SET_SELF_STATUS:"ws_set_custom_status",GET_USER_STATUS:"ws_get_user_status",SUBSCRIBE_USER_STATUS:"ws_status_subscribe",UNSUBSCRIBE_USER_STATUS:"ws_status_unsubscribe",GET_RPOFANITY_LIST:"get_local_words",TRANSLATE_TEXT:"ws_batch_trans_text",UPDATE_GROUP_COUNTER:"update_group_counter",GET_GROUP_COUNTER:"get_group_counter"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v4",group_open_long_polling_http_svc:"v4",group_open_long_polling_http_noauth_svc:"v4",imopenstat:"v4",im_cos_sign_svr:"v4",im_cos_msg:"v4",webim:"v4",im_open_push:"v4",im_open_status:"v4"}},V={SEARCH_MSG:new E(0,Math.pow(2,0)).toString(),SEARCH_GRP_SNS:new E(0,Math.pow(2,1)).toString(),AVCHATROOM_HISTORY_MSG:new E(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new E(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new E(0,Math.pow(2,4)).toString(),AVCHATROOM_MBR_LIST:new E(0,Math.pow(2,6)).toString(),USER_STATUS:new E(0,Math.pow(2,7)).toString(),CONV_MARK:new E(0,Math.pow(2,9)).toString(),CONV_GROUP:new E(0,Math.pow(2,10)).toString(),AVCHATROOM_BAN_MBR:new E(0,Math.pow(2,11)).toString(),MSG_EXT:new E(0,Math.pow(2,13)).toString(),GRP_COUNTER:new E(0,Math.pow(2,15)).toString()},H="c2c_text_message",z="c2c_custom_message",j="group_text_message",$="group_custom_message",W="user_profile",K="group_profile",Y="group_member_profile";q.HOST.setCurrent(O);var X,J,Z,Q,ee,te="undefined"!=typeof wx&&"function"==typeof k_&&Boolean(k_().fontSizeSetting),ne="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),oe="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),re="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),ie="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),ae="undefined"!=typeof jd&&"function"==typeof jd.getSystemInfoSync,se="undefined"!=typeof uni&&"undefined"==typeof window,ce="undefined"!=typeof uni,le=te||ne||oe||re||ie||se||ae,ue=("undefined"!=typeof uni||"undefined"!=typeof window)&&!le,de=ne?qq:oe?tt:re?swan:ie?my:te?wx:se?uni:ae?jd:{},pe=ue&&window&&window.navigator&&window.navigator.userAgent||"",he=/(micromessenger|webbrowser)/i.test(pe),fe=/AppleWebKit\/([\d.]+)/i.exec(pe),ge=(fe&&parseFloat(fe.pop()),X="WEB",he?X="WEB":ne?X="QQ_MP":oe?X="TT_MP":re?X="BAIDU_MP":ie?X="ALI_MP":te?X="WX_MP":se&&(X="UNI_NATIVE_APP"),A[X]),ve=/iPad/i.test(pe),me=/iPhone/i.test(pe)&&!ve,_e=/iPod/i.test(pe),ye=me||ve||_e,be=(J=pe.match(/OS (\d+)_/i))&&J[1]?J[1]:null,Me=/Android/i.test(pe),Ce=function(){var e=pe.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),ke=((ee=pe.match(/Chrome\/(\d+)/))&&ee[1]&&parseFloat(ee[1]),/MSIE/.test(pe)||pe.indexOf("Trident")>-1&&pe.indexOf("rv:11.0")>-1),we=function(){var e=/MSIE\s(\d+)\.\d/.exec(pe),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(pe)&&/rv:11.0/.test(pe)&&(t=11),t}(),Te=(function(){var e=pe.match(/TBS\/(\d+)/i);e&&e[1]&&e[1]}(),/Windows/i.test(pe)),Se=/MAC OS X/i.test(pe),Ie=ue&&"undefined"!=typeof Worker&&!ke,Ee=Me||ye,De=ue&&void 0!==window.tencent_cloud_im_csig_flutter_for_web_25F_cy;Z="undefined"!=typeof console?console:void 0!==OD&&OD.console?OD.console:"undefined"!=typeof window&&window.console?window.console:{};for(var Ae=function(){},Le=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],Re=Le.length;Re--;)Q=Le[Re],console[Q]||(Z[Q]=Ae);var Oe=Z,xe=0,Ne=function(){return(new Date).getTime()+xe},Pe=function(){xe=0},Ue=function(){return Math.floor(Ne()/1e3)},Ge=0;function Be(){return $t()?"%c TIM %c":"TIM"}function Fe(){var e,t=((e=new Date).setTime(Ne()),e);return t.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){var t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(t.getMilliseconds())}var qe={arguments2String:function(e){var t="";if(1===e.length)t=e[0];else for(var n=0,o=e.length;n<o;n++)st(e[n])?lt(e[n])?t+=gt(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=" ";return t},_exec:function(e,t){$t()?Oe[e](Be(),"background:#0abf5b; padding:1px; border-radius:3px; color: #fff","background:transparent",Fe(),t):Oe[e]("".concat(Be()," ").concat(Fe()," ").concat(t))},d:function(){if(Ge<=-1){var e=this.arguments2String(arguments);this._exec("debug",e)}},l:function(){if(Ge<=0){var e=this.arguments2String(arguments);this._exec("log",e)}},log:function(){if(Ge<=0){var e=this.arguments2String(arguments);this._exec("log",e)}},i:function(){if(Ge<=1){var e=this.arguments2String(arguments);this._exec("info",e)}},w:function(){if(Ge<=2){var e=this.arguments2String(arguments);this._exec("warn",e)}},e:function(){if(Ge<=3){var e=this.arguments2String(arguments);this._exec("error",e)}},setLevel:function(e){e<4&&this._exec("log","set level from "+Ge+" to "+e),Ge=e},getLevel:function(){return Ge}},Ve={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},He={NICK:"Tag_Profile_IM_Nick",GENDER:"Tag_Profile_IM_Gender",BIRTHDAY:"Tag_Profile_IM_BirthDay",LOCATION:"Tag_Profile_IM_Location",SELFSIGNATURE:"Tag_Profile_IM_SelfSignature",ALLOWTYPE:"Tag_Profile_IM_AllowType",LANGUAGE:"Tag_Profile_IM_Language",AVATAR:"Tag_Profile_IM_Image",MESSAGESETTINGS:"Tag_Profile_IM_MsgSettings",ADMINFORBIDTYPE:"Tag_Profile_IM_AdminForbidType",LEVEL:"Tag_Profile_IM_Level",ROLE:"Tag_Profile_IM_Role"},ze={UNKNOWN:"Gender_Type_Unknown",FEMALE:"Gender_Type_Female",MALE:"Gender_Type_Male"},je={NONE:"AdminForbid_Type_None",SEND_OUT:"AdminForbid_Type_SendOut"},$e={NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_ANY:"AllowType_Type_AllowAny",DENY_ANY:"AllowType_Type_DenyAny"},We="JoinedSuccess",Ke="WaitAdminApproval",Ye="@TGS#_",Xe="@TOPIC#_",Je=["url"],Ze=function(e){return"map"===ut(e)},Qe=function(e){return"file"===ut(e)},et=function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"===n(e)&&e.constructor===Number)},nt=function(e){return"string"==typeof e},ot=function(e){return null!==e&&"object"===n(e)},rt=function(e){if("object"!==n(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var o=t;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return t===o},it=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"array"===ut(e)},at=function(e){return void 0===e},st=function(e){return it(e)||ot(e)},ct=function(e){return"function"==typeof e},lt=function(e){return e instanceof Error},ut=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()},dt=function(e){if("string"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)},pt=0;Date.now||(Date.now=function(){return(new Date).getTime()});var ht=function(){0===pt&&(pt=Date.now()-1);var e=Date.now()-pt;return e>4294967295?(pt+=4294967295,Date.now()-pt):e},ft=function e(t,n,o,r){if(!st(t)||!st(n))return 0;for(var i,a=0,s=Object.keys(n),c=0,l=s.length;c<l;c++)if(i=s[c],!(at(n[i])||o&&o.includes(i)))if(st(t[i])&&st(n[i]))a+=e(t[i],n[i],o,r);else{if(r&&r.includes(n[i]))continue;t[i]!==n[i]&&(t[i]=n[i],a+=1)}return a},gt=function(e){return JSON.stringify(e,["message","code"])},vt=function(e){if(0===e.length)return 0;for(var t=0,n=0,o="undefined"!=typeof document&&void 0!==document.characterSet?document.characterSet:"UTF-8";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===o?3:2;return n},mt=function(e){var t=e||99999999;return Math.round(Math.random()*t)},_t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",yt=_t.length,bt=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},Mt={},Ct=function(e){return-1===e.indexOf("http://")||-1===e.indexOf("https://")?"https://"+e:e.replace(/https|http/,"https")},kt=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var o=Array.isArray(t)?[]:Object.create(null),r="";for(var i in t)null!==t[i]?void 0!==t[i]?(r=n(t[i]),["string","number","function","boolean"].indexOf(r)>=0?o[i]=t[i]:o[i]=e(t[i])):o[i]=void 0:o[i]=null;return o};function wt(e,t){it(e)&&it(t)&&t.forEach((function(t){var n=t.key,o=t.value,r=e.find((function(e){return e.key===n}));r?r.value=o:e.push({key:n,value:o})}))}var Tt=function(e){return e===S.GRP_AVCHATROOM},St=function(e){var t=e.type,n=e.groupID;return t===S.GRP_COMMUNITY||"".concat(n).startsWith(Ye)&&!"".concat(n).includes(Xe)},It=function(e){return"".concat(e).startsWith(Ye)&&"".concat(e).includes(Xe)},Et=function(e){return nt(e)&&e.slice(0,3)===S.CONV_C2C},Dt=function(e){return nt(e)&&e.slice(0,5)===S.CONV_GROUP},At=function(e){return nt(e)&&e===S.CONV_SYSTEM};function Lt(e,t){var n={};return Object.keys(e).forEach((function(o){n[o]=t(e[o],o)})),n}function Rt(e){return le?new Promise((function(t,n){de.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):ke&&9===we?Promise.resolve({width:0,height:0}):new Promise((function(t,n){var o=new Image;o.onload=function(){t({width:this.width,height:this.height}),o=null},o.onerror=function(){t({width:0,height:0}),o=null},o.src=e}))}function Ot(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function xt(){var e="unknown";if(Se&&(e="mac"),Te&&(e="windows"),ye&&(e="ios"),Me&&(e="android"),le)try{var t=de.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(n){}return e}function Nt(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var o=0;o<n;o++){var r=parseInt(e[o]),i=parseInt(t[o]);if(r>i)return 1;if(r<i)return-1}return 0}function Pt(e){var t=e.originUrl,n=void 0===t?void 0:t,o=e.originWidth,r=e.originHeight,i=e.min,a=void 0===i?198:i,s=parseInt(o),c=parseInt(r),l={url:void 0,width:0,height:0};if((s<=c?s:c)<=a)l.url=n,l.width=s,l.height=c;else{c<=s?(l.width=Math.ceil(s*a/c),l.height=a):(l.width=a,l.height=Math.ceil(c*a/s));var u=n&&n.indexOf("?")>-1?"".concat(n,"&"):"".concat(n,"?");l.url="".concat(u,198===a?"imageView2/3/w/198/h/198":"imageView2/3/w/720/h/720")}return at(n)?h(l,Je):l}function Ut(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function Gt(e){var t=e.servcmd;return t.slice(t.indexOf(".")+1)}function Bt(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function Ft(e,t){return e.includes(t)}function qt(e,t){return e.includes(t)}function Vt(e){return e.split(Xe)[0]}var Ht=function(e,t,n){if(at(t))return"";switch(e){case S.MSG_TEXT:return t.text;case S.MSG_IMAGE:return n?"[Image]":"[图片]";case S.MSG_LOCATION:return n?"[Location]":"[位置]";case S.MSG_AUDIO:return n?"[Voice]":"[语音]";case S.MSG_VIDEO:return n?"[Video]":"[视频]";case S.MSG_FILE:return n?"[File]":"[文件]";case S.MSG_CUSTOM:return n?"[Custom Messages]":"[自定义消息]";case S.MSG_GRP_TIP:return n?"[Group Notification]":"[群提示消息]";case S.MSG_GRP_SYS_NOTICE:return n?"[Group System Message]":"[群系统通知]";case S.MSG_FACE:return n?"[Animated Sticker]":"[动画表情]";case S.MSG_MERGER:return n?"[Chat Record]":"[聊天记录]";default:return""}};function zt(e){return e===S.MSG_TEXT||e===S.MSG_CUSTOM||e===S.MSG_LOCATION||e===S.MSG_FACE}function jt(e){var t=[];if(!nt(e))return t;var n=e.length;if(0===n)return t;for(var o=n-1;o>=0;o--)"1"===e[o]&&t.push(Math.pow(2,n-o-1));return t}function $t(){return!ke&&!le}function Wt(e){return"the length of userIDList cannot exceed ".concat(e)}function Kt(e,t){if(e){var n=e;return t&&(e.startsWith("http://")?n=e.replace(/^http:\/\/[^/]+/,t):e.startsWith("https://")&&(n=e.replace(/^https:\/\/[^/]+/,t))),n}}var Yt=Object.prototype.hasOwnProperty;function Xt(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(rt(e)){for(var t in e)if(Yt.call(e,t))return!1;return!0}return!(!Ze(e)&&(n=e,"set"!==ut(n))&&!Qe(e))&&0===e.size;var n}function Jt(e,t,n){if(void 0===t)return!0;var o=!0;if(rt(t))Object.keys(t).forEach((function(r){var i=1===e.length?e[0][r]:void 0;o=!!Zt(i,t[r],n,r)&&o}));else if(it(t))for(var r=0;r<t.length;r++)o=!!Zt(e[r],t[r],n,t[r].name)&&o;if(o)return o;throw new Error("Params validate failed.")}function Zt(e,t,n,o){if(void 0===t)return!0;var r=!0;if(t.required&&Xt(e)&&(qe.e("[".concat(n,'] Missing required params: "').concat(o,'".')),r=!1),!Xt(e)){var i=ut(e),a=t.type.toLowerCase();i!==a&&("asyncfunction"===i&&"function"===a||(qe.e("[".concat(n,'] Invalid params: type check failed for "').concat(o,'".Expected ').concat(t.type,".")),r=!1))}return t.validator&&!t.validator(e)&&(qe.e("[".concat(n,"] Invalid params: custom validator check failed for params.")),r=!1),r}var Qt,en={UNSEND:"unSend",SUCCESS:"success",FAIL:"fail"},tn={NOT_START:"notStart",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"},nn=function(e){if(!e)return!1;if(Et(e)||Dt(e)||At(e))return!0;var t=Dn("InvalidConversationID",e);return t&&qe.w(t),!1},on=function(e){""!==e.desc&&""!==Dn("API_REFER")&&qe.w("[".concat(e.api,"] | ").concat(e.param," | ").concat(e.desc,", ").concat(Dn("API_REFER")).concat(e.api))},rn=function(){return Dn("StringRequiredLog")},an=function(e){return Dn("NonEmptyStringRequiredLog",e)},sn=function(){return Dn("NumberRequiredLog")},cn=function(){return Dn("UndefinedNotAllowedLog")},ln=function(){return Dn("FileRequiredLog")},un=function(){return Dn("FunctionRequiredLog")},dn=function(){return Dn("ArrayRequiredLog")},pn=function(){return Dn("NonEmptyArrayLog")},hn=function(){return Dn("CallbackMissingLog")},fn=function(){return Dn("PositiveIntegerRequiredLog")},gn=function(e,t){return Dn("StringNotLongerThanLog",e,t)},vn=function(e,t){return Dn("NumberLessThanLog",e,t)},mn=function(e){return Dn("KeyValueStringRequiredLog",e)},_n=function(){return Dn("PlainObjectRequiredLog")},yn=function(){return Dn("NonEmptyContentRequiredLog")},bn=function(){return Dn("FileNotSelectedLog")},Mn=function(){return Dn("MessageInstanceRequiredLog")},Cn=function(){return Dn("NonAnonymousFunctionLog")},kn=function(){return Dn("MessageExtensionNotAvailableLog")},wn={type:"String",required:!0},Tn={type:"Array",required:!0},Sn={type:"Object",required:!0},In={type:"Boolean",required:!0},En={type:"number",required:!0},Dn=null,An={hookGetAPITips:function(e){Dn=e},login:{userID:wn,userSig:wn},addToBlacklist:{userIDList:Tn},removeFromBlacklist:{userIDList:Tn},on:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(on({api:"on",param:"eventName",desc:an("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(on({api:"on",param:"handler",desc:un()}),!1):(""===e.name&&on({api:"on",param:"handler",desc:Cn()}),!0)}}],once:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(on({api:"once",param:"eventName",desc:an("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(on({api:"once",param:"handler",desc:un()}),!1):(""===e.name&&on({api:"once",param:"handler",desc:Cn()}),!0)}}],off:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(on({api:"off",param:"eventName",desc:an("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(on({api:"off",param:"handler",desc:un()}),!1):(""===e.name&&on({api:"off",param:"handler",desc:Cn()}),!0)}}],sendMessage:[t({name:"message"},Sn)],setMessageExtensions:[t(t({name:"message"},Sn),{},{validator:function(e){return e.status===en.SUCCESS&&!0===e.isSupportExtension||(on({api:"setMessageExtensions",param:"message",desc:kn()}),!1)}}),t({name:"extensions"},Tn)],getMessageExtensions:[t(t({name:"message"},Sn),{},{validator:function(e){return e.status===en.SUCCESS&&!0===e.isSupportExtension||(on({api:"getMessageExtensions",param:"message",desc:kn()}),!1)}})],deleteMessageExtensions:[t(t({name:"message"},Sn),{},{validator:function(e){return e.status===en.SUCCESS&&!0===e.isSupportExtension||(on({api:"deleteMessageExtensions",param:"message",desc:kn()}),!1)}})],getMessageList:{conversationID:t(t({},wn),{},{validator:function(e){return nn(e)}}),nextReqMessageID:{type:"String"},count:{type:"Number",validator:function(e){return!(!at(e)&&!/^[1-9][0-9]*$/.test(e)&&(on({api:"getMessageList",param:"count",desc:fn()}),1))}}},getMessageListHopping:{conversationID:t(t({},wn),{},{validator:function(e){return nn(e)}}),sequence:{type:"Number"},time:{type:"Number"},direction:{type:"Number",validator:function(e){return!(!at(e)&&0!==e&&1!==e&&(on({api:"getMessageListHopping",param:"direction",desc:Dn("0Or1RequiredLog")}),1))}},count:{type:"Number",validator:function(e){return!(!at(e)&&!/^[1-9][0-9]*$/.test(e)&&(on({api:"getMessageListHopping",param:"count",desc:fn}),1))}}},setMessageRead:{conversationID:t(t({},wn),{},{validator:function(e){return nn(e)}})},setAllMessageRead:{scope:{type:"String",required:!1,validator:function(e){return!e||-1!==[S.READ_ALL_C2C_MSG,S.READ_ALL_GROUP_MSG,S.READ_ALL_MSG].indexOf(e)||(on({api:"setAllMessageRead",param:"scope",desc:"TIM.TYPES.READ_ALL_C2C_MSG or TIM.TYPES.READ_ALL_GROUP_MSG or TIM.TYPES.READ_ALL_MSG required"}),!1)}}},getConversationProfile:[t(t({name:"conversationID"},wn),{},{validator:function(e){return nn(e)}})],clearHistoryMessage:[t(t({name:"conversationID"},wn),{},{validator:function(e){return nn(e)}})],pinConversation:{conversationID:t(t({},wn),{},{validator:function(e){return nn(e)}}),isPinned:t({},In)},setConversationCustomData:{conversationIDList:t({},Tn),customData:{type:"String",validator:function(e){return nt(e)?!(e.length>256&&(on({api:"setConversationCustomData",param:"customData",desc:gn("customData",256)}),1)):(on({api:"setConversationCustomData",param:"customData",desc:rn()}),!1)}}},markConversation:{conversationIDList:t({},Tn),markType:{type:"number",validator:function(e){return et(e)?e<=0?(on({api:"markConversation",param:"markType",desc:(t="markType",n=0,Dn("NumberGreaterThanLog",t,n))}),!1):!(e>=Math.pow(2,64)&&(on({api:"markConversation",param:"markType",desc:vn("markType","Math.pow(2,64)")}),1)):(on({api:"markConversation",param:"markType",desc:sn()}),!1);var t,n}},enableMark:t({},In)},createConversationGroup:{conversationIDList:t({},Tn),groupName:t(t({},wn),{},{validator:function(e){return!(!e||e.length>32&&(on({api:"createConversationGroup",param:"groupName",desc:gn("groupName",32)}),1))}})},deleteConversationGroup:[t({name:"groupName"},wn)],renameConversationGroup:{oldName:t({},wn),newName:t(t({},wn),{},{validator:function(e){return!(!e||e.length>32&&(on({api:"renameConversationGroup",param:"newName",desc:gn("newName",32)}),1))}})},addConversationsToGroup:{conversationIDList:t({},Tn),groupName:t({},wn)},deleteConversationsFromGroup:{conversationIDList:t({},Tn),groupName:t({},wn)},getGroupList:{groupProfileFilter:{type:"Array"}},getGroupProfile:{groupID:wn,groupCustomFieldFilter:{type:"Array"},memberCustomFieldFilter:{type:"Array"}},getGroupProfileAdvance:{groupIDList:Tn},createGroup:{name:wn},joinGroup:{groupID:wn,type:{type:"String"},applyMessage:{type:"String"}},quitGroup:[t({name:"groupID"},wn)],handleApplication:{message:Sn,handleAction:wn,handleMessage:{type:"String"}},changeGroupOwner:{groupID:wn,newOwnerID:wn},updateGroupProfile:{groupID:wn,muteAllMembers:{type:"Boolean"}},dismissGroup:[t({name:"groupID"},wn)],searchGroupByID:[t({name:"groupID"},wn)],initGroupAttributes:{groupID:wn,groupAttributes:t(t({},Sn),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!nt(e[n]))return on({api:"initGroupAttributes",param:"groupAttributes",desc:mn("value")}),t=!1})),t}})},setGroupAttributes:{groupID:wn,groupAttributes:t(t({},Sn),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!nt(e[n]))return on({api:"setGroupAttributes",param:"groupAttributes",desc:mn("value")}),t=!1})),t}})},deleteGroupAttributes:{groupID:wn,keyList:{type:"Array",validator:function(e){if(at(e)||!it(e))return on({api:"deleteGroupAttributes",param:"keyList",desc:dn()}),!1;if(!Xt(e)){var t=!0;return e.forEach((function(e){if(!nt(e))return on({api:"deleteGroupAttributes",param:"keyList",desc:Dn("StringArrayRequiredLog")}),t=!1})),t}return!0}}},getGroupAttributes:{groupID:wn,keyList:{type:"Array",validator:function(e){if(at(e)||!it(e))return on({api:"getGroupAttributes",param:"keyList",desc:dn()}),!1;if(!Xt(e)){var t=!0;return e.forEach((function(e){if(!nt(e))return on({api:"getGroupAttributes",param:"keyList",desc:mn("key")}),t=!1})),t}return!0}}},setGroupCounters:{groupID:wn,counters:Sn},increaseGroupCounter:{groupID:wn,key:wn,value:En},decreaseGroupCounter:{groupID:wn,key:wn,value:En},getGroupCounters:{groupID:wn},getGroupMemberList:{groupID:wn,count:{type:"Number"}},getGroupMemberProfile:{groupID:wn,userIDList:Tn,memberCustomFieldFilter:{type:"Array"}},addGroupMember:{groupID:wn,userIDList:Tn},setGroupMemberRole:{groupID:wn,userID:wn,role:wn},setGroupMemberMuteTime:{groupID:wn,userID:wn,muteTime:{type:"Number",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:wn,userID:{type:"String"},nameCard:{type:"String",validator:function(e){return nt(e)?(e.length,!0):(on({api:"setGroupMemberNameCard",param:"nameCard",desc:rn()}),!1)}}},setGroupMemberCustomField:{groupID:wn,userID:{type:"String"},memberCustomField:Tn},deleteGroupMember:{groupID:wn},markGroupMemberList:{groupID:wn,markType:{type:"number",validator:function(e){return et(e)?!(e<1e3&&(on({api:"markGroupMemberList",param:"markType",desc:(t="markType",n=1e3,Dn("NumberGreaterOrEqualLog",t,n))}),1)):(on({api:"markGroupMemberList",param:"markType",desc:sn()}),!1);var t,n}},userIDList:t({},Tn),enableMark:t({},In)},createTextMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){return rt(e)?nt(e.text)?0!==e.text.length||(on({api:"createTextMessage",param:"payload.text",desc:yn()}),!1):(on({api:"createTextMessage",param:"payload.text",desc:rn()}),!1):(on({api:"createTextMessage",param:"payload",desc:_n()}),!1)}})},createTextAtMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){return rt(e)?nt(e.text)?0===e.text.length?(on({api:"createTextAtMessage",param:"payload.text",desc:yn()}),!1):!(e.atUserList&&!it(e.atUserList)&&(on({api:"createTextAtMessage",param:"payload.atUserList",desc:dn()}),1)):(on({api:"createTextAtMessage",param:"payload.text",desc:rn()}),!1):(on({api:"createTextAtMessage",param:"payload",desc:_n()}),!1)}})},createCustomMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){return rt(e)?e.data&&!nt(e.data)?(on({api:"createCustomMessage",param:"payload.data",desc:rn()}),!1):e.description&&!nt(e.description)?(on({api:"createCustomMessage",param:"payload.description",desc:rn()}),!1):!(e.extension&&!nt(e.extension)&&(on({api:"createCustomMessage",param:"payload.extension",desc:rn()}),1)):(on({api:"createCustomMessage",param:"payload",desc:_n()}),!1)}})},createImageMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){if(!rt(e))return on({api:"createImageMessage",param:"payload",desc:_n()}),!1;if(at(e.file))return on({api:"createImageMessage",param:"payload.file",desc:cn()}),!1;if(ue){if(!(e.file instanceof HTMLInputElement||Qe(e.file)))return rt(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(on({api:"createImageMessage",param:"payload.file",desc:bn()}),!1):(on({api:"createImageMessage",param:"payload.file",desc:ln()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return on({api:"createImageMessage",param:"payload.file",desc:bn()}),!1}return!0},onProgress:{type:"Function",required:!1,validator:function(e){return at(e)&&on({api:"createImageMessage",param:"onProgress",desc:hn()}),!0}}})},createAudioMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){return!!rt(e)||(on({api:"createAudioMessage",param:"payload",desc:_n()}),!1)}}),onProgress:{type:"Function",required:!1,validator:function(e){return at(e)&&on({api:"createAudioMessage",param:"onProgress",desc:hn()}),!0}}},createVideoMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){if(!rt(e))return on({api:"createVideoMessage",param:"payload",desc:_n()}),!1;if(at(e.file))return on({api:"createVideoMessage",param:"payload.file",desc:cn()}),!1;if(ue){if(!(e.file instanceof HTMLInputElement||Qe(e.file)))return rt(e.file)&&"undefined"!=typeof uni?!!Qe(e.file.tempFile)||(on({api:"createVideoMessage",param:"payload.file",desc:bn()}),!1):(on({api:"createVideoMessage",param:"payload.file",desc:ln()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return on({api:"createVideoMessage",param:"payload.file",desc:bn()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return at(e)&&on({api:"createVideoMessage",param:"onProgress",desc:hn()}),!0}}},createFaceMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){return rt(e)?et(e.index)?!!nt(e.data)||(on({api:"createFaceMessage",param:"payload.data",desc:rn()}),!1):(on({api:"createFaceMessage",param:"payload.index",desc:sn()}),!1):(on({api:"createFaceMessage",param:"payload",desc:_n()}),!1)}})},createFileMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){if(!rt(e))return on({api:"createFileMessage",param:"payload",desc:_n()}),!1;if(at(e.file))return on({api:"createFileMessage",param:"payload.file",desc:cn()}),!1;if(ue){if(!(e.file instanceof HTMLInputElement||Qe(e.file)))return rt(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(on({api:"createFileMessage",param:"payload.file",desc:bn()}),!1):(on({api:"createFileMessage",param:"payload.file",desc:ln()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return on({api:"createFileMessage",param:"payload.file",desc:bn()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return at(e)&&on({api:"createFileMessage",param:"onProgress",desc:hn()}),!0}}},createLocationMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){return rt(e)?nt(e.description)?et(e.longitude)?!!et(e.latitude)||(on({api:"createLocationMessage",param:"payload.latitude",desc:sn()}),!1):(on({api:"createLocationMessage",param:"payload.longitude",desc:sn()}),!1):(on({api:"createLocationMessage",param:"payload.description",desc:rn()}),!1):(on({api:"createLocationMessage",param:"payload",desc:_n()}),!1)}})},createMergerMessage:{to:wn,conversationType:wn,payload:t(t({},Sn),{},{validator:function(e){if(Xt(e.messageList))return on({api:"createMergerMessage",param:"payload.messageList",desc:pn()}),!1;if(Xt(e.compatibleText))return on({api:"createMergerMessage",param:"payload.compatibleText",desc:an("compatibleText")}),!1;var t=!1;return e.messageList.forEach((function(e){e.status===en.FAIL&&(t=!0)})),!t||(on({api:"createMergerMessage",param:"payload.messageList",desc:Dn("MergeFailedMessageLog")}),!1)}})},revokeMessage:[t(t({name:"message"},Sn),{},{validator:function(e){return Xt(e)?(on({api:"revokeMessage",param:"message",desc:Mn()}),!1):e.conversationType===S.CONV_SYSTEM?(on({api:"revokeMessage",param:"message",desc:Dn("MessageCanBeRevokedDesc")}),!1):!0!==e.isRevoked||(on({api:"revokeMessage",param:"message",desc:Dn("MessageRevokedLog")}),!1)}})],deleteMessage:[t(t({name:"messageList"},Tn),{},{validator:function(e){return!Xt(e)||(on({api:"deleteMessage",param:"messageList",desc:pn()}),!1)}})],translateText:{sourceTextList:Tn,sourceLanguage:wn,targetLanguage:wn},modifyMessage:[t(t({name:"message"},Sn),{},{validator:function(e){return Xt(e)?(on({api:"modifyMessage",param:"message",desc:Mn()}),!1):e.conversationType===S.CONV_SYSTEM?(on({api:"modifyMessage",param:"message",desc:Dn("MessageCanBeModifiedLog")}),!1):!0!==e._onlineOnlyFlag||(on({api:"modifyMessage",param:"message",desc:Dn("OnlineMessageNotSupportLog")}),!1)}})],getUserProfile:{userIDList:{type:"Array",validator:function(e){return it(e)?(0===e.length&&on({api:"getUserProfile",param:"userIDList",desc:pn()}),!0):(on({api:"getUserProfile",param:"userIDList",desc:dn()}),!1)}}},updateMyProfile:{profileCustomField:{type:"Array",validator:function(e){return!!at(e)||!!it(e)||(on({api:"updateMyProfile",param:"profileCustomField",desc:dn()}),!1)}}},setSelfStatus:{customStatus:{type:"String",validator:function(e){return!!nt(e)||(on({api:"setSelfStatus",param:"customStatus",desc:rn()}),!1)}}},getUserStatus:{userIDList:{type:"Array",validator:function(e){return it(e)?0!==e.length||(on({api:"getUserStatus",param:"userIDList",desc:pn()}),!1):(on({api:"getUserStatus",param:"userIDList",desc:dn()}),!1)}}},subscribeUserStatus:{userIDList:{type:"Array",validator:function(e){return it(e)?0!==e.length||(on({api:"subscribeUserStatus",param:"userIDList",desc:pn()}),!1):(on({api:"subscribeUserStatus",param:"userIDList",desc:dn()}),!1)}}},unsubscribeUserStatus:{userIDList:{type:"Array",validator:function(e){return!e||!!it(e)||(on({api:"subscribeUserStatus",param:"userIDList",desc:dn()}),!1)}}},addFriend:{to:wn,source:{type:"String",required:!0,validator:function(e){return!(!e||(e.startsWith("AddSource_Type_")?e.replace("AddSource_Type_","").length>8&&(on({api:"addFriend",param:"source",desc:gn("keyword",8)}),1):(on({api:"addFriend",param:"source",desc:Dn("SourcePrefixLog")}),1)))}},remark:{type:"String",required:!1,validator:function(e){return!(nt(e)&&e.length>96&&(on({api:"addFriend",param:"remark",desc:gn("remark",96)}),1))}}},deleteFriend:{userIDList:Tn},checkFriend:{userIDList:Tn},getFriendProfile:{userIDList:Tn},updateFriend:{userID:wn,remark:{type:"String",required:!1,validator:function(e){return!(nt(e)&&e.length>96&&(on({api:"updateFriend",param:"remark",desc:gn("remark",96)}),1))}},friendCustomField:{type:"Array",required:!1,validator:function(e){if(e){if(!it(e))return on({api:"updateFriend",param:"friendCustomField",desc:dn()}),!1;var t=!0;return e.forEach((function(e){return nt(e.key)&&-1!==e.key.indexOf("Tag_SNS_Custom")?nt(e.value)?e.key.replace("Tag_SNS_Custom_","").length>8?(on({api:"updateFriend",param:"friendCustomField",desc:gn("keyword",8)}),t=!1):void 0:(on({api:"updateFriend",param:"friendCustomField",desc:mn("value")}),t=!1):(on({api:"updateFriend",param:"friendCustomField",desc:Dn("FriendCustomFieldPrefixLog")}),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:wn},refuseFriendApplication:{userID:wn},deleteFriendApplication:{userID:wn},createFriendGroup:{name:wn},deleteFriendGroup:{name:wn},addToFriendGroup:{name:wn,userIDList:Tn},removeFromFriendGroup:{name:wn,userIDList:Tn},renameFriendGroup:{oldName:wn,newName:wn},sendMessageReadReceipt:[{name:"messageList",type:"Array",validator:function(e){return it(e)?0!==e.length||(on({api:"sendMessageReadReceipt",param:"messageList",desc:pn()}),!1):(on({api:"sendMessageReadReceipt",param:"messageList",desc:dn()}),!1)}}],getMessageReadReceiptList:[{name:"messageList",type:"Array",validator:function(e){return it(e)?0!==e.length||(on({api:"getMessageReadReceiptList",param:"messageList",desc:pn()}),!1):(on({api:"getMessageReadReceiptList",param:"messageList",desc:dn()}),!1)}}],createTopicInCommunity:{groupID:wn,topicName:wn},deleteTopicFromCommunity:{groupID:wn,topicIDList:{type:"Array",validator:function(e){return!e||!!it(e)||(on({api:"deleteTopicFromCommunity",param:"topicIDList",desc:dn()}),!1)}}},updateTopicProfile:{groupID:wn,topicID:wn},getTopicList:{groupID:wn,topicIDList:{type:"Array",validator:function(e){return!e||!!it(e)||(on({api:"getTopicList",param:"topicIDList",desc:dn()}),!1)}}}},Ln={login:1,logout:1,on:1,once:1,off:1,setLogLevel:1,registerPlugin:1,destroy:1,createTextMessage:1,createTextAtMessage:1,createImageMessage:1,createAudioMessage:1,createVideoMessage:1,createCustomMessage:1,createFaceMessage:1,createFileMessage:1,createLocationMessage:1,createMergerMessage:1,downloadMergerMessage:1,createForwardMessage:1,sendMessage:1,resendMessage:1,revokeMessage:1,deleteMessage:1,translateText:1,modifyMessage:1,sendMessageReadReceipt:1,getGroupMessageReadMemberList:1,getMessageReadReceiptList:1,setMessageExtensions:1,getMessageExtensions:1,deleteMessageExtensions:1,getMessageList:1,findMessage:1,getMessageListHopping:1,setMessageRead:1,setAllMessageRead:1,getConversationList:1,getConversationProfile:1,deleteConversation:1,pinConversation:1,getTotalUnreadMessageCount:1,setConversationCustomData:1,markConversation:1,createConversationGroup:1,getConversationGroupList:1,deleteConversationGroup:1,renameConversationGroup:1,addConversationsToGroup:1,deleteConversationsFromGroup:1,clearHistoryMessage:1,getGroupList:1,getGroupProfile:1,createGroup:1,joinGroup:1,updateGroupProfile:1,quitGroup:1,dismissGroup:1,changeGroupOwner:1,searchGroupByID:1,setMessageRemindType:1,getGroupApplicationList:1,handleGroupApplication:1,initGroupAttributes:1,setGroupAttributes:1,deleteGroupAttributes:1,getGroupAttributes:1,setGroupCounters:1,increaseGroupCounter:1,decreaseGroupCounter:1,getGroupCounters:1,getJoinedCommunityList:1,createTopicInCommunity:1,deleteTopicFromCommunity:1,updateTopicProfile:1,getTopicList:1,getGroupMemberProfile:1,getGroupMemberList:1,addGroupMember:1,deleteGroupMember:1,setGroupMemberNameCard:1,setGroupMemberMuteTime:1,setGroupMemberRole:1,setGroupMemberCustomField:1,getGroupOnlineMemberCount:1,markGroupMemberList:1,getMyProfile:1,getUserProfile:1,updateMyProfile:1,setSelfStatus:1,getUserStatus:1,subscribeUserStatus:1,unsubscribeUserStatus:1,getBlacklist:1,addToBlacklist:1,removeFromBlacklist:1,getFriendList:1,addFriend:1,deleteFriend:1,checkFriend:1,updateFriend:1,getFriendProfile:1,getFriendApplicationList:1,refuseFriendApplication:1,deleteFriendApplication:1,acceptFriendApplication:1,setFriendApplicationRead:1,getFriendGroupList:1,createFriendGroup:1,renameFriendGroup:1,deleteFriendGroup:1,addToFriendGroup:1,removeFromFriendGroup:1,callExperimentalAPI:1},Rn=1,On=2,xn=3,Nn=4,Pn=6,Un=7,Gn=8,Bn=9,Fn=10,qn=11,Vn=12,Hn=13,zn=14,jn=15,$n=16,Wn=17,Kn=18,Yn=19,Xn=20,Jn=21,Zn=22,Qn=23,eo=24,to=25,no=26,oo=27,ro=28,io=29,ao=30,so=31,co=32,lo=function(){function e(t){o(this,e),this._m=t,this._n=""}return i(e,[{key:"isLoggedIn",value:function(){return this._m.getModule(Vn).isLoggedIn()}},{key:"isOversea",value:function(){return this._m.getModule(Vn).isOversea()}},{key:"isPrivateNetWork",value:function(){return this._m.getModule(Vn).isPrivateNetWork()}},{key:"getFileDownloadProxy",value:function(){return this._m.getModule(Vn).getFileDownloadProxy()}},{key:"getMyUserID",value:function(){return this._m.getModule(Vn).getUserID()}},{key:"getMyTinyID",value:function(){return this._m.getModule(Vn).getTinyID()}},{key:"getSDKAppID",value:function(){return this._m.getModule(Vn).getSDKAppID()}},{key:"isIntl",value:function(){return this._m.getModule(Vn).isIntl()}},{key:"isDevMode",value:function(){return this._m.getModule(Vn).isDevMode()}},{key:"getModule",value:function(e){return this._m.getModule(e)}},{key:"getPlatform",value:function(){return ge}},{key:"getNetworkType",value:function(){return this._m.getModule(jn).getNetworkType()}},{key:"probeNetwork",value:function(e){return this._m.getModule(jn).probe(e)}},{key:"getCloudConfig",value:function(e){return this._m.getModule(Qn).getCloudConfig(e)}},{key:"emitOuterEvent",value:function(e,t){this._m.getOuterEmitterInstance().emit(e,t)}},{key:"emitInnerEvent",value:function(e,t){this._m.getInnerEmitterInstance().emit(e,t)}},{key:"getInnerEmitterInstance",value:function(){return this._m.getInnerEmitterInstance()}},{key:"generateTjgID",value:function(e){return this._m.getModule(Vn).getTinyID()+"-"+e.random}},{key:"filterModifiedMessage",value:function(e){if(!Xt(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(T.MESSAGE_MODIFIED,t)}}},{key:"filterUnmodifiedMessage",value:function(e){return Xt(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:"request",value:function(e){return this._m.getModule(Xn).request(e)}},{key:"canIUse",value:function(e){return this._m.getModule(oo).canIUse(e)}},{key:"getErrorMessage",value:function(e,t,n){return this._m.getErrorMessage(e,t,n)}},{key:"outputWarning",value:function(e,t,n){var o=this.getErrorMessage(e,t,n);o&&qe.w(o)}}]),e}(),uo="wslogin",po="wslogout",ho="wshello",fo="KickOther",go="getmsg",vo="authkey",mo="sendmsg",_o="send_group_msg",yo="portrait_get_all",bo="portrait_set",Mo="black_list_get",Co="black_list_add",ko="black_list_delete",wo="msgwithdraw",To="msgreaded",So="set_c2c_peer_mute_notifications",Io="get_c2c_peer_mute_notifications",Eo="getroammsg",Do="get_peer_read_time",Ao="delete_c2c_msg_ramble",Lo="modify_c2c_msg",Ro="set_key_values",Oo="get_key_values",xo="page_get",No="get",Po="batch_delete",Uo="clear_msg",Go="top",Bo="deletemsg",Fo="set_conv_custom_data",qo="mark_contact",Vo="create_contact_group",Ho="del_contact_group",zo="update_contact_group",jo="add_conv_to_group",$o="del_conv_from_group",Wo="get_contact_group",Ko="get_joined_group_list",Yo="get_group_self_member_info",Xo="create_group",Jo="destroy_group",Zo="modify_group_base_info",Qo="apply_join_group",er="apply_join_group_noauth",tr="quit_group",nr="get_group_public_info",or="change_group_owner",rr="handle_apply_join_group",ir="handle_invite_join_permission_group",ar="handle_invite_join_group",sr="group_msg_recall",cr="msg_read_report",lr="read_all_unread_msg",ur="group_msg_get",dr="get_group_msg_receipt",pr="group_msg_receipt",hr="c2c_msg_read_receipt",fr="get_group_msg_receipt_detail",gr="get_pendency",vr="deletemsg",mr="get_msg",_r="get_msg_noauth",yr="get_online_member_num",br="delete_group_ramble_msg_by_seq",Mr="modify_group_msg",Cr="set_group_attr",kr="modify_group_attr",wr="delete_group_attr",Tr="clear_group_attr",Sr="get_group_attr",Ir="group_set_key_values",Er="group_get_key_values",Dr="get_group_notify",Ar="update_group_counter",Lr="get_group_counter",Rr="get_group_member_info",Or="get_members",xr="get_specified_group_member_info",Nr="add_group_member",Pr="delete_group_member",Ur="ban_group_member",Gr="modify_group_member_info",Br="modify_user_info",Fr="cos",qr="pre_sig",Vr="video_cover",Hr="tim_web_report_v2",zr="alive",jr="msg_push",$r="multi_msg_push_ws",Wr="ws_msg_push_ack",Kr="stat_forceoffline",Yr="save_relay_json_msg",Xr="get_relay_json_msg",Jr="fetch_config",Zr="push_configv2",Qr="fetch_imsdk_purchase_bitsv2",ei="push_imsdk_purchase_bitsv2",ti="notify2",ni="create_topic",oi="destroy_topic",ri="modify_topic",ii="get_topic",ai="ws_set_custom_status",si="ws_get_user_status",ci="ws_status_subscribe",li="ws_status_unsubscribe",ui="ws_stat_background",di="ws_stat_foreground",pi="ws_stat_settoken",hi="get_local_words",fi="ws_batch_trans_text",gi=2e3,vi=2002,mi=2003,_i=2022,yi=2023,bi=2024,Mi=2025,Ci=2040,ki=2041,wi=2100,Ti=2101,Si=2105,Ii=2106,Ei=2108,Di=2109,Ai=2110,Li=2111,Ri=2112,Oi=2114,xi=2115,Ni=2116,Pi=2117,Ui=2251,Gi=2252,Bi=2253,Fi=2300,qi=2301,Vi=2350,Hi=2351,zi=2352,ji=2400,$i=2401,Wi=2402,Ki=2403,Yi=2450,Xi=2451,Ji=2452,Zi=2453,Qi=2480,ea=2481,ta=2500,na=2501,oa=2502,ra=2503,ia=2600,aa=2601,sa=2602,ca=2603,la=2620,ua=2621,da=2622,pa=2623,ha=2660,fa=2661,ga=2662,va=2681,ma=2682,_a=2683,ya=2684,ba=2685,Ma=2686,Ca=2721,ka=2722,wa=2742,Ta=2800,Sa=2801,Ia=2805,Ea=2903,Da=2905,Aa=2996,La=2997,Ra=2998,Oa=2999,xa=3e3,Na=3001,Pa=3002,Ua=3003,Ga=3004,Ba=3005,Fa=3006,qa=3021,Va=3122,Ha=3123,za=20002,ja=70001,$a=1002,Wa=60022,Ka="networkRTT",Ya="messageE2EDelay",Xa="sendMessageC2C",Ja="sendMessageGroup",Za="sendMessageGroupAV",Qa="sendMessageRichMedia",es="cosUpload",ts="messageReceivedGroup",ns="messageReceivedGroupAVPush",os="messageReceivedGroupAVPull",rs=(a(Qt={},Ka,2),a(Qt,Ya,3),a(Qt,Xa,4),a(Qt,Ja,5),a(Qt,Za,6),a(Qt,Qa,7),a(Qt,ts,8),a(Qt,ns,9),a(Qt,os,10),a(Qt,es,11),Qt),is={info:4,warning:5,error:6},as={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5,unknown:6,none:7,online:8},ss={login:4},cs=function(){function e(t){o(this,e),this._n="SSOLogData",this.eventType=ss[t]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message="",this.moreMessage="",this.extension=t,this.costTime=0,this.duplicate=!1,this.level=4,this.uiPlatform=void 0,this._sentFlag=!1,this._startts=Ne()}return i(e,[{key:"updateTimeStamp",value:function(){this.timestamp=Ne()}},{key:"start",value:function(e){return this._startts=e,this}},{key:"end",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var n=Ne();0===this.costTime&&(this.costTime=n-this._startts),this.setMoreMessage("startts:".concat(this._startts," endts:").concat(n)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:"setError",value:function(e,t,n){if(!(e instanceof Error))return qe.w("".concat(this._n,".setError value not instanceof Error, please check!")),this;if(this._sentFlag)return this;if(this.setNetworkType(n),t)e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message);else{var o=Ia;this.setCode(o)}return this.setLevel("error"),this}},{key:"setCode",value:function(e){return at(e)||this._sentFlag||("ECONNABORTED"===e&&(this.code=103),et(e)?this.code=e:qe.w("".concat(this._n,".setCode value not a number, please check!"),e,n(e))),this}},{key:"setMessage",value:function(e){return at(e)||this._sentFlag||(et(e)&&(this.message=e.toString()),nt(e)&&(this.message=e)),this}},{key:"setCostTime",value:function(e){return this.costTime=e,this}},{key:"setLevel",value:function(e){return at(e)||this._sentFlag||(this.level=is[e]),this}},{key:"setMoreMessage",value:function(e){return Xt(this.moreMessage)?this.moreMessage="".concat(e):this.moreMessage+=" ".concat(e),this}},{key:"setNetworkType",value:function(e){if(at(e))qe.w("".concat(this._n,".setNetworkType value is undefined, please check!"));else{var t=as[e.toLowerCase()];at(t)||(this.networkType=t)}return this}},{key:"getStartTs",value:function(){return this._startts}},{key:"setUIPlatform",value:function(e){this.uiPlatform=e}}],[{key:"bindEventStatModule",value:function(t){e.prototype._eventStatModule=t}}]),e}(),ls=function(){function e(t){o(this,e),this.type=S.MSG_TEXT,this.content={text:t.text||""}}return i(e,[{key:"setText",value:function(e){this.content.text=e}},{key:"sendable",value:function(){return 0!==this.content.text.length}}]),e}(),us=function(){function e(t,n){o(this,e),this._imageMemoryURL="",this._fileDownloadProxy=n,le?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=S.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||Ve.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._autoFixUrl()}return i(e,[{key:"_initImageInfoModel",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=mt(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||"",this.url=Kt(t.url||e._imageMemoryURL,e._fileDownloadProxy)},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:"initImageInfoArray",value:function(e){for(var t=0,n=null,o=null;t<=2;)o=at(e)||at(e[t])?{type:0,size:0,width:0,height:0,url:""}:e[t],(n=new this._ImageInfoModel(o)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:"updateImageInfoArray",value:function(e){for(var t,n=this.content.imageInfoArray.length,o=0;o<n;o++)t=this.content.imageInfoArray[o],e[o].size&&(t.size=e[o].size),e[o].url&&t.setImageUrl(e[o].url),e[o].width&&(t.width=e[o].width),e[o].height&&(t.height=e[o].height)}},{key:"_autoFixUrl",value:function(){for(var e=this.content.imageInfoArray.length,t="",n="",o=["http","https"],r=null,i=0;i<e;i++)this.content.imageInfoArray[i].url&&""!==(r=this.content.imageInfoArray[i]).imageUrl&&(n=r.imageUrl.slice(0,r.imageUrl.indexOf("://")+1),t=r.imageUrl.slice(r.imageUrl.indexOf("://")+1),o.indexOf(n)<0&&(n="https:"),this.content.imageInfoArray[i].setImageUrl([n,t].join("")))}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateImageFormat",value:function(e){this.content.imageFormat=Ve[e.toUpperCase()]||Ve.UNKNOWN}},{key:"createImageDataASURLInWeb",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:"createImageDataASURLInWXMiniApp",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:"replaceImageInfo",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:"addImageInfo",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:"updateAccessSideImageInfoArray",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,o=void 0===n?0:n,r=t.height,i=void 0===r?0:r;0!==o&&0!==i&&(Ut(e),Object.assign(e[2],Pt({originWidth:o,originHeight:i,min:720})))}},{key:"sendable",value:function(){return 0!==this.content.imageInfoArray.length&&""!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size}}]),e}(),ds=function(){function e(t){o(this,e),this.type=S.MSG_FACE,this.content=t||null}return i(e,[{key:"sendable",value:function(){return null!==this.content}}]),e}(),ps=function(){function e(t,n){o(this,e),this.type=S.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:Kt(t.url,n),remoteAudioUrl:t.url||"",uuid:t.uuid}}return i(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateAudioUrl",value:function(e){this.content.remoteAudioUrl=e}},{key:"sendable",value:function(){return""!==this.content.remoteAudioUrl}}]),e}(),hs={from:!0,groupID:!0,groupName:!0,to:!0},fs=function(){function e(t){o(this,e),this.type=S.MSG_GRP_TIP,this.content={},this._initContent(t)}return i(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"remarkInfo":case"operatorInfo":case"memberExtraInfo":case"onlineMemberInfo":break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case"memberInfoList":case"msgMemberInfo":t._updateMemberList(e[n]);break;case"memberNum":t.content[n]=e[n],t.content.memberCount=e[n];break;case"newGroupProfile":t.content.newGroupProfile={},t._initNewGroupProfile(e[n]);break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];hs[o]&&(this.content.groupProfile[o]=e[o])}}},{key:"_updateMemberList",value:function(e){Xt(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach((function(t){e.forEach((function(e){t.userID===e.userID&&Object.assign(t,e)}))}))}},{key:"_initNewGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];this.content.newGroupProfile[o]="muteAllMembers"!==o?e[o]:1===e[o]}}}]),e}(),gs={from:!0,groupID:!0,groupName:!0,to:!0},vs=function(){function e(t){o(this,e),this.type=S.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return i(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"memberInfoList":break;case"remarkInfo":t.content.handleMessage=e[n];break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];gs[o]&&("groupName"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}]),e}(),ms=function(){function e(t,n){o(this,e),this.type=S.MSG_FILE,this._percent=0;var r=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:Kt(t.url,n)||"",uuid:t.uuid,fileName:r.name||"",fileSize:r.size||0}}return i(e,[{key:"_getFileInfo",value:function(e){if(!at(e.fileName)&&!at(e.fileSize))return{size:e.fileSize,name:e.fileName};var t=e.file.files[0];if(se){if(t.path&&-1!==t.path.indexOf(".")){var n=t.path.slice(t.path.lastIndexOf(".")+1).toLowerCase();t.type=n,t.name||(t.name="".concat(mt(999999),".").concat(n))}t.name||(t.type="",t.name=t.path.slice(t.path.lastIndexOf("/")+1).toLowerCase()),t.suffix&&(t.type=t.suffix),t.url||(t.url=t.path)}return{size:t.size,name:t.name}}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateFileUrl",value:function(e){this.content.fileUrl=e}},{key:"sendable",value:function(){return""!==this.content.fileUrl&&""!==this.content.fileName&&0!==this.content.fileSize}}]),e}(),_s=function(){function e(t){o(this,e),this.type=S.MSG_CUSTOM,this.content={data:t.data||"",description:t.description||"",extension:t.extension||""}}return i(e,[{key:"setData",value:function(e){return this.content.data=e,this}},{key:"setDescription",value:function(e){return this.content.description=e,this}},{key:"setExtension",value:function(e){return this.content.extension=e,this}},{key:"sendable",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),ys=function(){function e(t,n){o(this,e),this.type=S.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||"",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:Kt(t.videoUrl,n),videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,snapshotWidth:t.thumbWidth,thumbHeight:t.thumbHeight,snapshotHeight:t.thumbHeight,thumbSize:t.thumbSize,snapshotSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:Kt(t.thumbUrl,n),snapshotUrl:Kt(t.thumbUrl,n)}}return i(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateVideoUrl",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:"updateSnapshotInfo",value:function(e){var t=e.snapshotUrl,n=e.snapshotWidth,o=e.snapshotHeight;Xt(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),Xt(n)||(this.content.thumbWidth=this.content.snapshotWidth=Number(n)),Xt(o)||(this.content.thumbHeight=this.content.snapshotHeight=Number(o))}},{key:"sendable",value:function(){return""!==this.content.remoteVideoUrl}}]),e}(),bs=function(){function e(t){o(this,e),this.type=S.MSG_LOCATION;var n=t.description,r=t.longitude,i=t.latitude;this.content={description:n,longitude:r,latitude:i}}return i(e,[{key:"sendable",value:function(){return!0}}]),e}(),Ms=function(){function e(t,n){if(o(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||"",this.clientTime=t.clientTime||void 0,t.ID)this.ID=t.ID||"",this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(S.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(S.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[];var r=t.elements[0].type,i=t.elements[0].content;this._patchRichMediaPayload(r,i),this._updateRichMediaDownloadUrl(r,i,n),r===S.MSG_MERGER?this.messageBody.push({type:r,payload:new Cs(i).content}):this.messageBody.push({type:r,payload:i}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to),this.ID="".concat(t.tinyID,"-").concat(t.clientTime,"-").concat(t.random)}}return i(e,[{key:"_patchRichMediaPayload",value:function(e,t){e===S.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===S.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===S.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===S.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}},{key:"_updateRichMediaDownloadUrl",value:function(e,t,n){n&&(e===S.MSG_IMAGE?t.imageInfoArray.forEach((function(e){e.url=Kt(e.url,n)})):e===S.MSG_VIDEO?(t.videoUrl=Kt(t.videoUrl,n),t.snapshotUrl=Kt(t.thumbUrl,n),t.snapshotHeight=t.thumbHeight,t.snapshotWidth=t.thumbWidth):e===S.MSG_AUDIO?t.url=Kt(t.url,n):e===S.MSG_FILE&&(t.fileUrl=Kt(t.fileUrl,n)))}}]),e}(),Cs=function(){function e(t,n){if(o(this,e),this.type=S.MSG_MERGER,this.content={downloadKey:"",pbDownloadKey:"",messageList:[],title:"",abstractList:[],compatibleText:"",version:0,layersOverLimit:!1},t.downloadKey){var r=t.downloadKey,i=t.pbDownloadKey,a=t.title,s=t.abstractList,c=t.compatibleText,l=t.version;this.content.downloadKey=r,this.content.pbDownloadKey=i,this.content.title=a,this.content.abstractList=s,this.content.compatibleText=c,this.content.version=l||0}else if(Xt(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var u=t.messageList,d=t.title,p=t.abstractList,h=t.compatibleText,f=t.version,g=[];u.forEach((function(e){if(!Xt(e)){var t=new Ms(e,n);g.push(t)}})),this.content.messageList=g,this.content.title=d,this.content.abstractList=p,this.content.compatibleText=h,this.content.version=f||0}}return i(e,[{key:"sendable",value:function(){return!Xt(this.content.messageList)||!Xt(this.content.downloadKey)}}]),e}(),ks={1:S.MSG_PRIORITY_HIGH,2:S.MSG_PRIORITY_NORMAL,3:S.MSG_PRIORITY_LOW,4:S.MSG_PRIORITY_LOWEST},ws=function(){function e(t){o(this,e),this.ID="",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||S.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:mt(),this.priority=this._computePriority(t.priority),this.nick=t.nick||"",this.avatar=t.avatar||"",this.isPeerRead=!1,this.nameCard="",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.from=t.from||null,this.to=t.to||null,this.flow="",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||"JSON",this.isResend=!1,this.isRead=!1,this.status=t.status||en.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||"",this.isDeleted=!1,this.isModified=!1,this._isExcludedFromUnreadCount=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromLastMessage),this.clientTime=t.clientTime||Ue()||0,this.senderTinyID=t.senderTinyID||t.tinyID||"",this.readReceiptInfo=t.readReceiptInfo||{readCount:void 0,unreadCount:void 0,isPeerRead:void 0},this.needReadReceipt=!0===t.needReadReceipt||1===t.needReadReceipt,this.version=t.messageVersion||0,this.isBroadcastMessage=t.isBroadcastMessage||!1,this._receiverList=t.receiverList||void 0,this.isSupportExtension=!0===t.isSupportExtension||1===t.isSupportExtension,this.revoker=t.revokerInfo&&t.revokerInfo.revoker||null,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t),this.initC2CReadReceiptInfo(t.readReceiptSentByPeer)}return i(e,[{key:"elements",get:function(){return this._elements}},{key:"getElements",value:function(){return this._elements}},{key:"extractGroupInfo",value:function(e){if(null!==e){nt(e.nick)&&(this.nick=e.nick),nt(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;rt(t)&&nt(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:"handleGroupAtInfo",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==S.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(S.MSG_AT_ALL))})),it(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){0===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&t.atUserList.push(S.MSG_AT_ALL)}))}},{key:"getGroupAtInfoList",value:function(){return this._groupAtInfoList}},{key:"_initProxy",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:"reInitialize",value:function(e){e&&(this.status=this.from?en.SUCCESS:en.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID()}},{key:"isSendable",value:function(){return 0!==this._elements.length&&"function"==typeof this._elements[0].sendable&&this._elements[0].sendable()}},{key:"_initTo",value:function(e){this.conversationType===S.CONV_GROUP&&(this.to=e.groupID)}},{key:"_initSequence",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return!1;if(void 0===Mt[e]){var t=new Date,n="3".concat(t.getHours()).slice(-2),o="0".concat(t.getMinutes()).slice(-2),r="0".concat(t.getSeconds()).slice(-2);Mt[e]=parseInt([n,o,r,"0001"].join("")),n=null,o=null,r=null,qe.l("autoIncrementIndex start index:".concat(Mt[e]))}return Mt[e]++}(e)),0===this.sequence&&this.conversationType===S.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:"generateMessageID",value:function(){this.from===S.CONV_SYSTEM&&(this.senderTinyID="144115198244471703"),this.ID="".concat(this.senderTinyID,"-").concat(this.clientTime,"-").concat(this.random)}},{key:"_initFlow",value:function(e){""!==e&&(e===this.from?(this.flow="out",this.isRead=!0):this.flow="in")}},{key:"_concatConversationID",value:function(e){var t=this.to,n="",o=this.conversationType;o!==S.CONV_SYSTEM?(n=o===S.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=n?"".concat(o).concat(n):null):this.conversationID=S.CONV_SYSTEM}},{key:"isElement",value:function(e){return e instanceof ls||e instanceof us||e instanceof ds||e instanceof ps||e instanceof ms||e instanceof ys||e instanceof fs||e instanceof vs||e instanceof _s||e instanceof bs||e instanceof Cs}},{key:"setElement",value:function(e,t){var n=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var o=function(e){if(e.type&&e.content)switch(e.type){case S.MSG_TEXT:n.setTextElement(e.content);break;case S.MSG_IMAGE:n.setImageElement(e.content,t);break;case S.MSG_AUDIO:n.setAudioElement(e.content,t);break;case S.MSG_FILE:n.setFileElement(e.content,t);break;case S.MSG_VIDEO:n.setVideoElement(e.content,t);break;case S.MSG_CUSTOM:n.setCustomElement(e.content);break;case S.MSG_LOCATION:n.setLocationElement(e.content);break;case S.MSG_GRP_TIP:n.setGroupTipElement(e.content);break;case S.MSG_GRP_SYS_NOTICE:n.setGroupSystemNoticeElement(e.content);break;case S.MSG_FACE:n.setFaceElement(e.content);break;case S.MSG_MERGER:n.setMergerElement(e.content,t)}};if(it(e))for(var r=0;r<e.length;r++)o(e[r]);else o(e);this._initProxy()}},{key:"clearElement",value:function(){this._elements.length=0}},{key:"setTextElement",value:function(e){var t="string"==typeof e?e:e.text,n=new ls({text:t});this._elements.push(n)}},{key:"setImageElement",value:function(e,t){var n=new us(e,t);this._elements.push(n)}},{key:"setAudioElement",value:function(e,t){var n=new ps(e,t);this._elements.push(n)}},{key:"setFileElement",value:function(e,t){var n=new ms(e,t);this._elements.push(n)}},{key:"setVideoElement",value:function(e,t){var n=new ys(e,t);this._elements.push(n)}},{key:"setLocationElement",value:function(e){var t=new bs(e);this._elements.push(t)}},{key:"setCustomElement",value:function(e){var t=new _s(e);this._elements.push(t)}},{key:"setGroupTipElement",value:function(e){var t={},n=e.operationType;if(Xt(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):n!==S.GRP_TIP_MBR_JOIN&&n!==S.GRP_TIP_MBR_KICKED_OUT&&n!==S.GRP_TIP_MBR_SET_ADMIN&&n!==S.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]),!Xt(e.memberExtraInfo)){var o=e.memberExtraInfo.reason;e.msgMemberInfo.forEach((function(e){e.reason=o}))}var r=t,i=r.nick,a=r.avatar;nt(i)&&(this.nick=i),nt(a)&&(this.avatar=a);var s=new fs(e);this._elements.push(s)}},{key:"setGroupSystemNoticeElement",value:function(e){var t=new vs(e);this._elements.push(t)}},{key:"setFaceElement",value:function(e){var t=new ds(e);this._elements.push(t)}},{key:"setMergerElement",value:function(e,t){var n=new Cs(e,t);this._elements.push(n)}},{key:"setIsRead",value:function(e){this.isRead=e}},{key:"setRelayFlag",value:function(e){this._relayFlag=e}},{key:"getRelayFlag",value:function(){return this._relayFlag}},{key:"_computePriority",value:function(e){if(at(e))return S.MSG_PRIORITY_NORMAL;if(nt(e)&&-1!==Object.values(ks).indexOf(e))return e;if(et(e)){var t=""+e;if(-1!==Object.keys(ks).indexOf(t))return ks[t]}return S.MSG_PRIORITY_NORMAL}},{key:"setNickAndAvatar",value:function(e){var t=e.nick,n=e.avatar;nt(t)&&(this.nick=t),nt(n)&&(this.avatar=n)}},{key:"setNameCard",value:function(e){nt(e)&&(this.nameCard=e)}},{key:"initC2CReadReceiptInfo",value:function(e){this.conversationType===S.CONV_C2C&&!0===this.needReadReceipt&&(this.readReceiptInfo.isPeerRead=1===e)}}]),e}(),Ts=function(e){return{code:0,data:e||{}}},Ss=function(e){s(n,e);var t=v(n);function n(e){var r;o(this,n),r=t.call(this);var i=e.code,a=e.message,s=e.data;return r.code=i,r.message=a||r._getErrorMessage(r.code),r.data=s||{},r}return i(n)}(p(Error)),Is=null,Es=function(e){Is=e},Ds=function(e){return Promise.resolve(Ts(e))},As=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof Ss)return t&&null!==Is&&Is.emit(T.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new Ss({code:Ea});return t&&null!==Is&&Is.emit(T.ERROR,n),Promise.reject(n)}if(!at(e)&&!at(e.code)){var o=new Ss(e);return t&&null!==Is&&Is.emit(T.ERROR,o),Promise.reject(o)}},Ls=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="C2CModule",t._messageFromUnreadDBMap=new Map,t._signalingFromUnreadDBList=[],t}return i(r,[{key:"onNewC2CMessage",value:function(e){var t=e.dataList,n=e.isInstantMessage,o=e.C2CRemainingUnreadList,r=e.C2CPairUnreadList;qe.d("".concat(this._n,".onNewC2CMessage count:").concat(t.length," isInstantMessage:").concat(n));var i=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:o,C2CPairUnreadList:r,isInstantMessage:n}),a=i.conversationOptionsList,s=i.messageList,c=i.isUnreadC2CMessage;this.filterModifiedMessage(s),a.length>0&&this.getModule(qn).onNewMessage({conversationOptionsList:a,isInstantMessage:n,isUnreadC2CMessage:c});var l=this.filterUnmodifiedMessage(s);n&&l.length>0&&this.emitOuterEvent(T.MESSAGE_RECEIVED,l),s.length=0}},{key:"_newC2CMessageStoredAndSummary",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,o=e.C2CPairUnreadList,r=e.isInstantMessage,i=null,a=[],s=[],c={},l=this.getModule($n),u=this.getModule(no),d=!1,p=this.getModule(qn),h=this.getFileDownloadProxy(),f=0,g=t.length;f<g;f++)if(this._isSignaling(t[f]))this._signalingFromUnreadDBList.push(t[f].eventArray[0].c2CNotifyMsgArray[0]);else{var v=t[f];v.currentUser=this.getMyUserID(),v.conversationType=S.CONV_C2C,v.isSystemMessage=!!v.isSystemMessage,(at(v.nick)||at(v.avatar))&&(d=!0,qe.d("".concat(this._n,"._newC2CMessageStoredAndSummary nick or avatar missing!"))),i=new ws(v),v.elements=l.parseElements(v.elements,v.from),i.setElement(v.elements,h),i.setNickAndAvatar({nick:v.nick,avatar:v.avatar});var m=i.conversationID;if(r){if(1===this._messageFromUnreadDBMap.get(i.ID))continue;var _=!1;if(i.from!==this.getMyUserID()){var y=p.getLatestMessageSentByPeer(m);if(y){var b=y.nick,M=y.avatar;d?i.setNickAndAvatar({nick:b,avatar:M}):b===i.nick&&M===i.avatar||(_=!0)}}else{var C=p.getLatestMessageSentByMe(m);if(C){var k=C.nick,w=C.avatar;k===i.nick&&w===i.avatar||p.modifyMessageSentByMe({conversationID:m,latestNick:i.nick,latestAvatar:i.avatar})}}var T=1===t[f].isModified;if(p.isMessageSentByCurrentInstance(i)?i.isModified=T:T=!1,0===v.msgLifeTime)i._onlineOnlyFlag=!0,p.isMessageSentByCurrentInstance(i)||s.push(i);else{if(!p.pushIntoMessageList(s,i,T))continue;_&&(p.modifyMessageSentByPeer({conversationID:m,latestNick:i.nick,latestAvatar:i.avatar}),p.updateUserProfileSpecifiedKey({conversationID:m,nick:i.nick,avatar:i.avatar}))}r&&i.clientTime>0&&u.addMessageDelay(i.clientTime)}else this._messageFromUnreadDBMap.set(i.ID,1);if(0!==v.msgLifeTime){if(!1===i._onlineOnlyFlag){var I=p.getLastMessageTime(m);if(et(I)&&i.time<I)continue;if(at(c[m])){var E=0;"in"===i.flow&&(i._isExcludedFromUnreadCount||(E=1)),c[m]=a.push({conversationID:m,unreadCount:E,type:i.conversationType,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1}else{var D=c[m];a[D].type=i.conversationType,a[D].subType=i.conversationSubType,a[D].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||a[D].unreadCount++)}}}else i._onlineOnlyFlag=!0}this._handleSignalingFromUnreadDB();var A=!1;if(it(o))for(var L=function(e,t){if(o[e].unreadCount>0){A=!0;var n=a.find((function(t){return t.conversationID==="C2C".concat(o[e].from)}));n?n.unreadCount=o[e].unreadCount:a.push({conversationID:"C2C".concat(o[e].from),unreadCount:o[e].unreadCount,type:S.CONV_C2C})}},R=0,O=o.length;R<O;R++)L(R);if(it(n))for(var x=function(e,t){a.find((function(t){return t.conversationID==="C2C".concat(n[e].from)}))||a.push({conversationID:"C2C".concat(n[e].from),type:S.CONV_C2C,lastMsgTime:n[e].lastMsgTime})},N=0,P=n.length;N<P;N++)x(N);return{conversationOptionsList:a,messageList:s,isUnreadC2CMessage:A}}},{key:"_isSignaling",value:function(e){var t=e.eventArray;return!(!it(t)||10!==t[0].event)}},{key:"_handleSignalingFromUnreadDB",value:function(){var e=this._signalingFromUnreadDBList.length;if(qe.l("".concat(this._n,"._handleSignalingFromUnreadDB signalingCount:").concat(e)),0!==e){var t=[];this._signalingFromUnreadDBList.forEach((function(e){e.hasOwnProperty("c2cMessageRevokedNotify")&&t.push(e)})),this.onC2CMessageRevoked({dataList:t}),this._signalingFromUnreadDBList.length=0,t.length=0}}},{key:"onC2CMessageRevoked",value:function(e){var t=this,n=this.getModule(qn),o=[],r=null,i=!0;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var a=e.c2cMessageRevokedNotify.revokedInfos;at(a)||a.forEach((function(e){var a=t.getMyUserID()===e.from?"".concat(S.CONV_C2C).concat(e.to):"".concat(S.CONV_C2C).concat(e.from);r=n.revoke(a,e.sequence,e.random);var s=e.revokerInfo&&e.revokerInfo.revoker;if(r)r.revoker=s,o.push(r);else{var c={conversationID:a,sequence:e.sequence,time:e.time,revoker:s};n.isLastMessageRevoked(c)&&(o.push(c),i=!1)}}))}})),0!==o.length&&(n.onMessageRevoked(o),!0===i&&(qe.l("".concat(this._n,".onC2CMessageRevoked count:").concat(o.length)),this.emitOuterEvent(T.MESSAGE_REVOKED,o)))}},{key:"onC2CMessageReadReceipt",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Xt(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var o=e.peerReadTime;qe.d("".concat(t._n,"._onC2CMessageReadReceipt to:").concat(n," peerReadTime:").concat(o));var r="".concat(S.CONV_C2C).concat(n),i=t.getModule(qn);i.recordPeerReadTime(r,o),i.updateMessageIsPeerReadProperty(r,o)}))}}))}},{key:"onC2CMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Xt(e.c2cMessageReadNotice)){var n=t.getModule(qn);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var o=e.from,r=e.peerReadTime;qe.d("".concat(t._n,".onC2CMessageReadNotice from:").concat(o," lastReadTime:").concat(r));var i="".concat(S.CONV_C2C).concat(o);n.updateIsReadAfterReadReport({conversationID:i,lastMessageTime:r}),n.updateUnreadCount(i)}))}}))}},{key:"onC2CMessageModified",value:function(e){qe.d("".concat(this._n,".onC2CMessageModified options:"),JSON.stringify(e));var n=this.getModule(qn);e.dataList.forEach((function(e){n.onMessageModified(t(t({},e),{},{conversationType:S.CONV_C2C}))}))}},{key:"onReadReceiptList",value:function(e){qe.d("".concat(this._n,".onReadReceiptList options:"),JSON.stringify(e));var t=e.dataList,n=t.userID,o=t.readReceiptList;this.getModule(qn).updateReadReceiptInfo({userID:n,readReceiptList:o})}},{key:"sendMessage",value:function(e,t){var n=this._createC2CMessagePack(e,t);return this.request(n)}},{key:"_createC2CMessagePack",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var o="";nt(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var r=[];if(rt(t)&&rt(t.messageControlInfo)){var i=t.messageControlInfo,a=i.excludedFromUnreadCount,s=i.excludedFromLastMessage,c=i.excludedFromContentModeration;!0===a&&r.push("NoUnread"),!0===s&&r.push("NoLastMsg"),!0===c&&r.push("NoMsgCheck")}var l=this.isOnlineMessage(e,t)?0:void 0;return{protocolName:mo,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:e.getElements(),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:l,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(n)},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:0!==l?r:void 0,clientTime:e.clientTime,needReadReceipt:!0===e.needReadReceipt?1:0,isSupportExtension:!0===e.isSupportExtension?1:0}}}},{key:"_isVoipPush",value:function(e){var t=void 0;return at(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}},{key:"isOnlineMessage",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:"revokeMessage",value:function(e){return this.request({protocolName:wo,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:"deleteMessage",value:function(e){var t=e.to,n=e.keyList;return qe.l("".concat(this._n,".deleteMessage toAccount:").concat(t," count:").concat(n.length)),this.request({protocolName:Ao,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:n}})}},{key:"modifyRemoteMessage",value:function(e){var t=e.from,n=e.to,o=e.version,r=void 0===o?0:o,i=e.sequence,a=e.random,s=e.time,c=e.payload,l=e.type,u=e.cloudCustomData,d=void 0;return zt(l)&&(d=[]).push({type:l,content:c}),this.request({protocolName:Lo,requestData:{from:t,to:n,version:r,sequence:i,random:a,time:s,elements:d,cloudCustomData:u}})}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageTime,r="".concat(this._n,".setMessageRead");qe.l("".concat(r," conversationID:").concat(n," lastMessageTime:").concat(o)),et(o)||this.outputWarning("DoNotModifyLastTime");var i=new cs("setC2CMessageRead");return i.setMessage("conversationID:".concat(n," lastMessageTime:").concat(o)),this.request({protocolName:To,requestData:{C2CMsgReaded:{cookie:"",C2CMsgReadedItem:[{toAccount:n.replace("C2C",""),lastMessageTime:o,receipt:1}]}}}).then((function(){i.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(r," ok"));var e=t.getModule(qn);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:o}),e.updateUnreadCount(n),Ts()})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),qe.l("".concat(r," failed. error:"),e),As(e)}))}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessage"),o=e.peerAccount,r=e.conversationID,i=e.count,a=e.lastMessageTime,s=e.messageKey,c="peerAccount:".concat(o," count:").concat(i||15," lastMessageTime:").concat(a||0," messageKey:").concat(s);qe.l("".concat(n," ").concat(c));var l=new cs("getC2CRoamingMessages");return this.request({protocolName:Eo,requestData:{peerAccount:o,count:i||15,lastMessageTime:a||0,messageKey:s}}).then((function(e){var o=e.data,i=o.complete,a=o.messageList,s=o.messageKey,u=o.lastMessageTime;at(a)?qe.l("".concat(n," ok. complete:").concat(i," but messageList is undefined!")):qe.l("".concat(n," ok. complete:").concat(i," count:").concat(a.length)),l.setNetworkType(t.getNetworkType()).setMessage("".concat(c," complete:").concat(i," length:").concat(a.length)).end();var d=t.getModule(qn);1===i&&d.setCompleted(r);var p=d.onRoamingMessage(a,r);d.modifyMessageList(r),d.updateIsRead(r),d.updateRoamingMessageKeyAndTime(r,s,u);var h=d.getPeerReadTime(r);if(qe.l("".concat(n," update isPeerRead property. conversationID:").concat(r," peerReadTime:").concat(h)),h)d.updateMessageIsPeerReadProperty(r,h);else{var f=r.replace(S.CONV_C2C,"");t.getRemotePeerReadTime([f]).then((function(){d.updateMessageIsPeerReadProperty(r,d.getPeerReadTime(r))}))}var g="";if(p.length>0)g=p[0].ID;else{var v=d.getLocalOldestMessage(r);v&&(g=v.ID)}return qe.l("".concat(n," nextReqID:").concat(g," stored message count:").concat(p.length)),{nextReqID:g,storedMessageList:p}})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setMessage(c).setError(e,o,r).end()})),qe.w("".concat(n," failed. error:"),e),As(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessagesHopping"),o=e.peerAccount,r=e.time,i=void 0===r?0:r,a=e.count,s=e.direction,c="".concat(S.CONV_C2C).concat(o),l="peerAccount:".concat(o," count:").concat(a," time:").concat(i," direction:").concat(s);qe.l("".concat(n," ").concat(l));var u=new cs("getC2CRoamingMessagesHopping");return this.request({protocolName:Eo,requestData:{peerAccount:o,count:a+1,lastMessageTime:i,direction:s}}).then((function(e){var o=e.data,r=o.complete,i=o.messageList,a=void 0===i?[]:i,d=o.lastMessageTime;qe.l("".concat(n," ok. complete:").concat(r," count:").concat(a.length)),u.setNetworkType(t.getNetworkType()).setMessage("".concat(l," complete:").concat(r," length:").concat(a.length)).end(),1!==r&&(1===s?a.pop():a.shift());var p=t.getModule(qn).onRoamingMessage(a,c,!1);t._modifyMessageList(c,p);var h=t._computeResult({complete:r,lastMessageTime:d,resultList:p});return Ts(h)})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setMessage(l).setError(e,o,r).end()})),qe.w("".concat(n," failed. error:"),e),As(e)}))}},{key:"_computeResult",value:function(e){var t=e.complete,n=void 0===t?0:t,o=e.lastMessageTime,r=e.resultList,i={messageList:_(void 0===r?[]:r),isCompleted:!1,nextMessageTime:""};return 1===n?(i.isCompleted=!0,i):(i.nextMessageTime=o,i)}},{key:"_modifyMessageList",value:function(e,t){var n=this.getModule(qn).getLocalConversation(e);if(n)for(var o=n.userProfile.nick,r=n.userProfile.avatar,i=this.getModule(Nn).getNickAndAvatarByUserID(this.getMyUserID()),a=i.nick,s=i.avatar,c=t.length-1;c>=0;c--){var l=t[c];"in"===l.flow&&(l.nick!==o&&l.setNickAndAvatar({nick:o}),l.avatar!==r&&l.setNickAndAvatar({avatar:r})),"out"===l.flow&&(l.nick!==a&&l.setNickAndAvatar({nick:a}),l.avatar!==s&&l.setNickAndAvatar({avatar:s}))}}},{key:"getRemotePeerReadTime",value:function(e){var t=this,n="".concat(this._n,".getRemotePeerReadTime");if(Xt(e))return qe.w("".concat(n," userIDList is empty!")),Promise.resolve();var o=new cs("getPeerReadTime");return qe.l("".concat(n," userIDList:").concat(e)),this.request({protocolName:Do,requestData:{userIDList:e}}).then((function(r){var i=r.data.peerReadTimeList;qe.l("".concat(n," ok. peerReadTimeList:").concat(i));for(var a="",s=t.getModule(qn),c=0;c<e.length;c++)a+="".concat(e[c],"-").concat(i[c]," "),i[c]>0&&s.recordPeerReadTime("C2C".concat(e[c]),i[c]);o.setNetworkType(t.getNetworkType()).setMessage(a).end()})).catch((function(e){t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.w("".concat(n," failed. error:"),e)}))}},{key:"sendReadReceipt",value:function(e){var t=this,n=e[0].conversationID.replace(S.CONV_C2C,""),o=new cs("sendC2CReadReceipt");o.setMessage("peerAccount:".concat(n));var r=this.getMyUserID(),i=e.filter((function(e){return e.from!==r&&!0===e.needReadReceipt})).map((function(e){return{fromAccount:e.from,toAccount:e.to,sequence:e.sequence,random:e.random,time:e.time,clientTime:e.clientTime}}));if(0===i.length)return As({code:Oi});var a="".concat(this._n,".sendReadReceipt");return qe.l("".concat(a,". peerAccount:").concat(n," messageInfoList length:").concat(i.length)),this.request({protocolName:hr,requestData:{peerAccount:n,messageInfoList:i}}).then((function(e){return o.end(),qe.l("".concat(a," ok")),Ts()})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.w("".concat(a," failed. error:"),e),As(e)}))}},{key:"getReadReceiptList",value:function(e){var t="".concat(this._n,".getReadReceiptList"),n=this.getMyUserID(),o=e.filter((function(e){return e.from===n&&!0===e.needReadReceipt}));return qe.l("".concat(t," userID:").concat(n," messageList length:").concat(o.length)),Ds({messageList:o})}},{key:"getMessageExtensions",value:function(e,t){return qe.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.request({protocolName:Oo,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return qe.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(n)),this.request({protocolName:Ro,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),extensionList:t,operateType:n}})}},{key:"_getMessageKey",value:function(e){var t=e.clientSequence,n=e.random,o=e.time;return"".concat(t,"_").concat(n,"_").concat(o)}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._messageFromUnreadDBMap.clear(),this._signalingFromUnreadDBList.length=0}}]),r}(lo),Rs=function(){function e(){o(this,e),this.list=new Map,this._n="MessageListHandler",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map}return i(e,[{key:"getLocalOldestMessageByConversationID",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:"pushIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,o=!0;this.list.has(n)||this.list.set(n,new Map);var r=this._getUniqueIDOfMessage(e);if(this.list.get(n).has(r)){var i=this.list.get(n).get(r);if(!t||!0===i.isModified)return!1}return this.list.get(n).set(r,e),this._setLatestMessageSentByPeer(n,e),this._setLatestMessageSentByMe(n,e),o}},{key:"unshift",value:function(e,t){var n;if(it(e)?e.length>0&&(n=e[0].conversationID,this._unshiftMultipleMessages(e,t)):(n=e.conversationID,this._unshiftSingleMessage(e,t)),n&&n.startsWith(S.CONV_C2C)){var o=Array.from(this.list.get(n).values()),r=o.length;if(0===r)return;for(var i=r-1;i>=0;i--)if("out"===o[i].flow){this._setLatestMessageSentByMe(n,o[i]);break}for(var a=r-1;a>=0;a--)if("in"===o[a].flow){this._setLatestMessageSentByPeer(n,o[a]);break}}}},{key:"_unshiftSingleMessage",value:function(e,t){var n=e.conversationID,o=this._getUniqueIDOfMessage(e);if(!this.list.has(n))return this.list.set(n,new Map),this.list.get(n).set(o,e),void t.push(e);var r=this.list.get(n),i=Array.from(r);r.has(o)||(i.unshift([o,e]),this.list.set(n,new Map(i)),t.push(e))}},{key:"_unshiftMultipleMessages",value:function(e,t){for(var n=e.length,o=[],r=e[0].conversationID,i=this.list.get(r),a=this.list.has(r)?Array.from(i):[],s=0;s<n;s++){var c=this._getUniqueIDOfMessage(e[s]);i&&i.has(c)||(o.push([c,e[s]]),t.push(e[s]))}this.list.set(r,new Map(o.concat(a)))}},{key:"remove",value:function(e){var t=e.conversationID,n=this._getUniqueIDOfMessage(e);this.list.has(t)&&this.list.get(t).delete(n)}},{key:"revoke",value:function(e,t,n){if(qe.d("revoke message",e,t,n),this.list.has(e)){var o,r=w(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var i=m(o.value,2)[1];if(i.sequence===t&&(at(n)||i.random===n))return i.isRevoked=!0,i}}catch(a){r.e(a)}finally{r.f()}}return null}},{key:"removeByConversationID",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:"findMessage",value:function(e){var t,n=null,o=w(this.list);try{for(o.s();!(t=o.n()).done;)for(var r=_(m(t.value,2)[1].values()),i=r.length,a=0;a<i;a++)if(r[a].ID===e){n=r[a];break}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){var n=[];if(this.list.has(e)){var o,r=w(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var i=m(o.value,2)[1];i.time<=t&&!i.isPeerRead&&"out"===i.flow&&(i.isPeerRead=!0,n.push(i))}}catch(a){r.e(a)}finally{r.f()}qe.l("".concat(this._n,".updateMessageIsPeerReadProperty conversationID:").concat(e," peerReadTime:").concat(t," count:").concat(n.length))}return n}},{key:"updateMessageIsModifiedProperty",value:function(e){var t=e.conversationID;if(this.list.has(t)){var n=this._getUniqueIDOfMessage(e),o=this.list.get(t).get(n);o&&(o.isModified=!0)}}},{key:"hasLocalMessageList",value:function(e){return this.list.has(e)}},{key:"getLocalMessageList",value:function(e){return this.hasLocalMessageList(e)?_(this.list.get(e).values()):[]}},{key:"hasLocalMessage",value:function(e,t){for(var n=!1,o=this.getLocalMessageList(e),r=o.length,i=0;i<r;i++)o[i].ID===t&&(n=!0);return n}},{key:"getLocalMessage",value:function(e,t){for(var n=null,o=this.getLocalMessageList(e),r=o.length,i=0;i<r;i++)if(o[i].ID===t){n=o[i];break}return n}},{key:"getLocalLastMessage",value:function(e){var t=this.getLocalMessageList(e);return t[t.length-1]}},{key:"getLocalOldestMessage",value:function(e){return this.getLocalMessageList(e)[0]}},{key:"_setLatestMessageSentByPeer",value:function(e,t){e.startsWith(S.CONV_C2C)&&"in"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:"_setLatestMessageSentByMe",value:function(e,t){e.startsWith(S.CONV_C2C)&&"out"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:"modifyMessageSentByPeer",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,r=this.list.get(t);if(!Xt(r)){var i=Array.from(r.values()),a=i.length;if(0!==a){for(var s=null,c=0,l=!1,u=a-1;u>=0;u--)"in"===i[u].flow&&((s=i[u]).nick!==n&&(s.setNickAndAvatar({nick:n}),l=!0),s.avatar!==o&&(s.setNickAndAvatar({avatar:o}),l=!0),l&&(c+=1));qe.l("".concat(this._n,".modifyMessageSentByPeer conversationID:").concat(t," count:").concat(c))}}}},{key:"modifyMessageSentByMe",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,r=this.list.get(t);if(!Xt(r)){var i=Array.from(r.values()),a=i.length;if(0!==a){for(var s=null,c=0,l=!1,u=a-1;u>=0;u--)"out"===i[u].flow&&((s=i[u]).nick!==n&&(s.setNickAndAvatar({nick:n}),l=!0),s.avatar!==o&&(s.setNickAndAvatar({avatar:o}),l=!0),l&&(c+=1));qe.l("".concat(this._n,".modifyMessageSentByMe conversationID:").concat(t," count:").concat(c))}}}},{key:"getTopicConversationIDList",value:function(e){return _(this.list.keys()).filter((function(t){return t.startsWith("".concat(S.CONV_GROUP).concat(e))}))}},{key:"traversal",value:function(){if(0!==this.list.size&&-1===qe.getLevel()){console.group("conversationID-messageCount");var e,t=w(this.list);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];console.log("".concat(o,"-").concat(r.size))}}catch(i){t.e(i)}finally{t.f()}console.groupEnd()}}},{key:"onMessageModified",value:function(e,t){if(!this.list.has(e))return{isUpdated:!1,message:null};var n=this._getUniqueIDOfMessage(t),o=this.list.get(e).has(n);if(qe.d("".concat(this._n,".onMessageModified conversationID:").concat(e," uniqueID:").concat(n," has:").concat(o)),o){var r=this.list.get(e).get(n),i=t.messageVersion,a=t.elements,s=t.cloudCustomData;return r.version<i?(r.version=i,r._elements=JSON.parse(JSON.stringify(a)),r.payload=JSON.parse(JSON.stringify(a[0].content)),r.type=a[0].type,r.cloudCustomData=s,r.isModified=!0,{isUpdated:!0,message:r}):{isUpdated:!1,message:r}}return{isUpdated:!1,message:null}}},{key:"_getUniqueIDOfMessage",value:function(e){var t=e.from,n=e.to,o=e.random,r=e.sequence,i=e.time;return"".concat(t,"-").concat(n,"-").concat(o,"-").concat(r,"-").concat(i)}},{key:"reset",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear()}}]),e}(),Os="_a2KeyAndTinyIDUpdated",xs="_cloudConfigUpdated",Ns="_profileUpdated";function Ps(e){this.mixin(e)}Ps.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var Us=["jpg","jpeg","gif","png","bmp","image","webp"],Gs=["mp4","quicktime","mov"],Bs=1,Fs=2,qs=3,Vs=255,Hs=function(){function e(t){var n=this;o(this,e),Xt(t)||(this.userID=t.userID||"",this.nick=t.nick||"",this.gender=t.gender||"",this.birthday=t.birthday||0,this.location=t.location||"",this.selfSignature=t.selfSignature||"",this.allowType=t.allowType||S.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||"",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||S.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Xt(t.profileCustomField)||t.profileCustomField.forEach((function(e){n.profileCustomField.push({key:e.key,value:e.value})})))}return i(e,[{key:"validate",value:function(e){var t=!0,n="";if(Xt(e))return{valid:!1,tips:"empty options"};if(e.profileCustomField)for(var o=e.profileCustomField.length,r=null,i=0;i<o;i++){if(r=e.profileCustomField[i],!nt(r.key)||-1===r.key.indexOf("Tag_Profile_Custom"))return{valid:!1,tips:"The prefix of keys of the custom profile key-value pairs (which is profileCustomField) must be Tag_Profile_Custom"};if(!nt(r.value))return{valid:!1,tips:"The type of values of the custom profile key-value pairs (which is profileCustomField) must be String"}}for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if("profileCustomField"===a)continue;if(Xt(e[a])&&!nt(e[a])&&!et(e[a])){n="key:"+a+", invalid value:"+e[a],t=!1;continue}switch(a){case"nick":nt(e[a])||(n="nick must be a string",t=!1),vt(e[a])>500&&(n="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(vt(e[a])," bytes"),t=!1);break;case"gender":bt(ze,e.gender)||(n="key:gender, invalid value:"+e.gender,t=!1);break;case"birthday":et(e.birthday)||(n="birthday must be a number",t=!1);break;case"location":nt(e.location)||(n="location must be a string",t=!1);break;case"selfSignature":nt(e.selfSignature)||(n="selfSignature must be a string",t=!1);break;case"allowType":bt($e,e.allowType)||(n="key:allowType, invalid value:"+e.allowType,t=!1);break;case"language":et(e.language)||(n="language must be a number",t=!1);break;case"avatar":nt(e.avatar)||(n="avatar must be a string",t=!1);break;case"messageSettings":0!==e.messageSettings&&1!==e.messageSettings&&(n="messageSettings must be 0 or 1",t=!1);break;case"adminForbidType":bt(je,e.adminForbidType)||(n="key:adminForbidType, invalid value:"+e.adminForbidType,t=!1);break;case"level":et(e.level)||(n="level must be a number",t=!1);break;case"role":et(e.role)||(n="role must be a number",t=!1);break;default:n="unknown key:"+a+"  "+e[a],t=!1}}return{valid:t,tips:n}}}]),e}(),zs=i((function e(t){o(this,e),this.value=t,this.next=null})),js=function(){function e(t){o(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map}return i(e,[{key:"set",value:function(e){var t=new zs(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:"has",value:function(e){return this.map.has(e)}},{key:"delete",value:function(e){this.has(e)&&this.map.delete(e)}},{key:"tail",value:function(){return this.pTail}},{key:"size",value:function(){return this.map.size}},{key:"data",value:function(){return Array.from(this.map.keys())}},{key:"reset",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),$s=["groupID","name","avatar","type","introduction","notification","ownerID","selfInfo","createTime","infoSequence","lastInfoTime","lastMessage","nextMessageSeq","memberNum","maxMemberNum","memberList","joinOption","groupCustomField","muteAllMembers","isSupportTopic","inviteOption","_lastRevokedTime"],Ws=function(){function e(t){o(this,e),this.groupID="",this.name="",this.avatar="",this.type="",this.introduction="",this.notification="",this.ownerID="",this.createTime="",this.infoSequence="",this.lastInfoTime="",this.selfInfo={messageRemindType:"",joinTime:"",nameCard:"",role:"",userID:"",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:"",lastSequence:"",fromAccount:"",messageForShow:""},this.nextMessageSeq="",this.memberNum="",this.memberCount="",this.maxMemberNum="",this.maxMemberCount="",this.joinOption="",this.inviteOption="",this.groupCustomField=[],this.muteAllMembers=!1,this.isSupportTopic=!1,this._lastRevokedTime=0,this._initGroup(t)}return i(e,[{key:"memberNum",get:function(){return this.memberCount},set:function(e){}},{key:"maxMemberNum",get:function(){return this.maxMemberCount},set:function(e){}},{key:"_initGroup",value:function(e){for(var t in e)$s.indexOf(t)<0||("selfInfo"!==t?("memberNum"===t&&(this.memberCount=e[t]),"maxMemberNum"===t&&(this.maxMemberCount=e[t]),"isSupportTopic"!==t?this[t]=e[t]:this.isSupportTopic=1===e[t]):this.updateSelfInfo(e[t]))}},{key:"updateGroup",value:function(e){var t=this;e.appid=void 0,e.grossTopicNextMsgSeq=void 0,e.selfInfo&&(e.selfInfo.grossTopicReadSeq=void 0);var n=JSON.parse(JSON.stringify(e));n.lastMsgTime&&(this.lastMessage.lastTime=n.lastMsgTime),at(n.muteAllMembers)||("On"===n.muteAllMembers?n.muteAllMembers=!0:n.muteAllMembers=!1),n.groupCustomField&&wt(this.groupCustomField,n.groupCustomField),at(n.memberNum)||(this.memberCount=n.memberNum),at(n.maxMemberNum)||(this.maxMemberCount=n.maxMemberNum),at(n.isSupportTopic)||(this.isSupportTopic=et(n.isSupportTopic)?1===n.isSupportTopic:n.isSupportTopic),ft(this,n,["members","errorCode","lastMsgTime","groupCustomField","memberNum","maxMemberNum","isSupportTopic"]),it(n.members)&&n.members.length>0&&n.members.forEach((function(e){e.userID===t.selfInfo.userID&&ft(t.selfInfo,e,["sequence"])}))}},{key:"updateSelfInfo",value:function(e){var n={nameCard:e.nameCard,joinTime:e.joinTime,role:e.role,messageRemindType:e.messageRemindType,readedSequence:e.readedSequence,excludedUnreadSequenceList:e.excludedUnreadSequenceList};ft(this.selfInfo,t({},n),[],["",null,void 0,0,NaN])}},{key:"setSelfNameCard",value:function(e){this.selfInfo.nameCard=e}}]),e}(),Ks=function(e,n){return at(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:"",payload:null,type:"",isRevoked:!1,cloudCustomData:"",onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:!1,revoker:null}:e instanceof ws?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",messageForShow:Ht(e.type,e.payload,n),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||"",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||"",nameCard:e.nameCard||"",version:e.version||0,isPeerRead:e.isPeerRead||!1,revoker:e.revoker||null}:t(t({},e),{},{messageForShow:Ht(e.type,e.payload,n)})},Ys=function(){function e(t,n){o(this,e),this.conversationID=t.conversationID||"",this.unreadCount=t.unreadCount||0,this.type=t.type||"",this.lastMessage=Ks(t.lastMessage,n),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark="",this.isPinned=t.isPinned||!1,this.messageRemindType="",this.markList=t.markList||[],this.customData=t.customData||"",this.conversationGroupList=t.conversationGroupList||[],this._initProfile(t)}return i(e,[{key:"toAccount",get:function(){return this.conversationID.startsWith(S.CONV_C2C)?this.conversationID.replace(S.CONV_C2C,""):this.conversationID.startsWith(S.CONV_GROUP)?this.conversationID.replace(S.CONV_GROUP,""):""}},{key:"subType",get:function(){return this.groupProfile?this.groupProfile.type:""}},{key:"_initProfile",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"userProfile":t.userProfile=e.userProfile;break;case"groupProfile":t.groupProfile=e.groupProfile}})),at(this.userProfile)&&this.type===S.CONV_C2C?this.userProfile=new Hs({userID:e.conversationID.replace("C2C","")}):at(this.groupProfile)&&this.type===S.CONV_GROUP&&(this.groupProfile=new Ws({groupID:e.conversationID.replace("GROUP","")}))}},{key:"updateUnreadCount",value:function(e){var t=e.nextUnreadCount,n=e.isFromGetConversations,o=e.isUnreadC2CMessage;at(t)||(Tt(this.subType)?this.unreadCount=0:n&&this.type===S.CONV_GROUP||n&&this.type===S.CONV_TOPIC||o&&this.type===S.CONV_C2C?this.unreadCount=t:this.unreadCount=this.unreadCount+t)}},{key:"updateLastMessage",value:function(e){this.lastMessage=Ks(e)}},{key:"updateGroupAtInfoList",value:function(e){if(!this._isNeedMergeGroupAtInfo(e)){var t,n=(y(t=e.groupAtType)||b(t)||M(t)||k()).slice(0);-1!==n.indexOf(S.CONV_AT_ME)&&-1!==n.indexOf(S.CONV_AT_ALL)&&(n=[S.CONV_AT_ALL_AT_ME]);var o={from:e.from,groupID:e.groupID,topicID:e.topicID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(o)}}},{key:"_isNeedMergeGroupAtInfo",value:function(e){var t=e.groupID,n=e.sequence;if(!St({groupID:t}))return!1;var o=!1;return this.groupAtInfoList.forEach((function(t){t.messageSequence===n&&(t.atTypeArray.indexOf(S.CONV_AT_ME)>-1&&e.groupAtType.indexOf(S.CONV_AT_ALL)>-1&&(t.atTypeArray=[S.CONV_AT_ALL_AT_ME]),t.atTypeArray.indexOf(S.CONV_AT_ALL)>-1&&e.groupAtType.indexOf(S.CONV_AT_ME)>-1&&(t.atTypeArray=[S.CONV_AT_ALL_AT_ME],t.__random=e.__random,t.__sequence=e.__sequence),o=!0)})),o}},{key:"clearGroupAtInfoList",value:function(){this.groupAtInfoList.length=0}},{key:"reduceUnreadCount",value:function(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}},{key:"isLastMessageRevoked",value:function(e){var t=e.sequence,n=e.time;return this.type===S.CONV_C2C&&t===this.lastMessage.lastSequence&&n===this.lastMessage.lastTime||this.type===S.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),e}(),Xs=function(){function e(t){o(this,e),this._conversationModule=t,this._n="MessageRemindHandler",this._updateSequence=0}return i(e,[{key:"getC2CMessageRemindType",value:function(){var e=this,t="".concat(this._n,".getC2CMessageRemindType");return this._conversationModule.request({protocolName:Io,updateSequence:this._updateSequence}).then((function(n){qe.l("".concat(t," ok"));var o=n.data,r=o.updateSequence,i=o.muteFlagList;e._updateSequence=r,e._patchC2CMessageRemindType(i)})).catch((function(e){qe.e("".concat(t," failed. error:"),e)}))}},{key:"_patchC2CMessageRemindType",value:function(e){var t=this,n=0,o="";it(e)&&e.length>0&&e.forEach((function(e){var r=e.userID,i=e.muteFlag;0===i?o=S.MSG_REMIND_ACPT_AND_NOTE:1===i?o=S.MSG_REMIND_DISCARD:2===i&&(o=S.MSG_REMIND_ACPT_NOT_NOTE),!0===t._conversationModule.patchMessageRemindType({ID:r,isC2CConversation:!0,messageRemindType:o})&&(n+=1)})),qe.l("".concat(this._n,"._patchC2CMessageRemindType count:").concat(n))}},{key:"set",value:function(e){return e.groupID?this._setGroupMessageRemindType(e):it(e.userIDList)?this._setC2CMessageRemindType(e):void 0}},{key:"_setGroupMessageRemindType",value:function(e){var t=this,n="".concat(this._n,"._setGroupMessageRemindType"),o=e.groupID,r=e.messageRemindType,i="groupID:".concat(o," messageRemindType:").concat(r),a=new cs("setMessageRemindType");return a.setMessage(i),this._getModule(Bn).modifyGroupMemberInfo({groupID:o,messageRemindType:r,userID:this._conversationModule.getMyUserID()}).then((function(){a.setNetworkType(t._conversationModule.getNetworkType()).end(),qe.l("".concat(n," ok. ").concat(i));var o=t.onGroupMessageRemindTypeUpdated(e);return t._conversationModule.emitTotalUnreadMessageCountUpdate(),Ts(o)})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"onGroupMessageRemindTypeUpdated",value:function(e){var t=e.groupID,n=e.messageRemindType,o=this._getModule(Un).getLocalGroupProfile(t);if(o&&(o.selfInfo.messageRemindType=n),It(t)){var r=t,i=Vt(r),a=this._getModule(Fn).getLocalTopic(i,r);return a&&(a.updateSelfInfo({messageRemindType:n}),this._conversationModule.emitOuterEvent(T.TOPIC_UPDATED,{groupID:i,topic:a})),{topic:a}}return this._conversationModule.patchMessageRemindType({ID:t,isC2CConversation:!1,messageRemindType:n})&&this._emitConversationUpdate(),{group:o}}},{key:"_setC2CMessageRemindType",value:function(e){var t=this,n="".concat(this._n,"._setC2CMessageRemindType"),o=e.userIDList,r=e.messageRemindType,i=o.slice(0,30),a=0;r===S.MSG_REMIND_DISCARD?a=1:r===S.MSG_REMIND_ACPT_NOT_NOTE&&(a=2);var s="userIDList:".concat(i," messageRemindType:").concat(r),c=new cs("setMessageRemindType");return c.setMessage(s),this._conversationModule.request({protocolName:So,requestData:{userIDList:i,muteFlag:a}}).then((function(e){c.setNetworkType(t._conversationModule.getNetworkType()).end();var o=e.data,a=o.updateSequence,s=o.errorList;t._updateSequence=a;var l=[],u=[];it(s)&&s.forEach((function(e){l.push(e.userID),u.push({userID:e.userID,code:e.errorCode})}));var d=i.filter((function(e){return-1===l.indexOf(e)}));qe.l("".concat(n," ok. successUserIDList:").concat(d," failureUserIDList:").concat(JSON.stringify(u)));var p=0;return d.forEach((function(e){t._conversationModule.patchMessageRemindType({ID:e,isC2CConversation:!0,messageRemindType:r})&&(p+=1)})),p>=1&&t._emitConversationUpdate(),i.length=l.length=0,t._conversationModule.emitTotalUnreadMessageCountUpdate(),Ds({successUserIDList:d.map((function(e){return{userID:e}})),failureUserIDList:u})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"_getModule",value:function(e){return this._conversationModule.getModule(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"setUpdateSequence",value:function(e){this._updateSequence=e}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._updateSequence=0}}]),e}(),Js=function(){function e(t){o(this,e),this._conversationModule=t,this._n="ConvGroupHandler",this._convGroupMap=new Map,this._startIndex=0,this._pagingStatus=tn.NOT_START}return i(e,[{key:"setConvCustomData",value:function(e){var t=this,n="".concat(this._n,".").concat("setConvCustomData"),o=e.conversationIDList,r=e.customData;qe.l("".concat(n," options:"),e);var i=new cs("setConvCustomData");i.setMessage(JSON.stringify(e));var a={fromAccount:this._getMyUserID(),itemList:[]},s=[],c=[];return o.forEach((function(e){if(!t._hasLocalConversation(e))return t._onConversationNotFound(c,e),!0;if(!Et(e)&&!Dt(e))return t._onConversationIDInvalid(c,e),!0;var n={operationType:2,contactItem:void 0,customMark:r};Et(e)?n.contactItem={type:1,toAccount:e.replace(S.CONV_C2C,"")}:Dt(e)&&(n.contactItem={type:2,groupID:e.replace(S.CONV_GROUP,"")}),a.itemList.push(n)})),c.length===o.length?Ds({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Fo,requestData:a}).then((function(e){i.setNetworkType(t._conversationModule.getNetworkType()).end(),qe.l("".concat(n," ok"));var o=e.data.resultItem;if(it(o)){var a,l,u=!1;o.forEach((function(e){a=t._concatConversationID(e.contactItem),0===e.resultCode?(s.push(a),(l=t._getLocalConversation(a))&&l.customData!==r&&(l.customData=r,u=!0)):c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===u&&t._emitConversationUpdate()}return Ts({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"markConversation",value:function(e){var t=this;if(!this._conversationModule.canIUse(V.CONV_MARK))return As({code:Va});var n="".concat(this._n,".").concat("markConversation"),o=e.conversationIDList,r=e.markType,i=e.enableMark;qe.l("".concat(n," options:"),e);var a=new cs("markConversation");a.setMessage(JSON.stringify(e));var s=void 0,c=void 0,l=this._getFlagBit(r);!0===i?c=[l]:s=[l];var u={fromAccount:this._getMyUserID(),itemList:[]},d=[],p=[];return o.forEach((function(e){if(!t._hasLocalConversation(e))return t._onConversationNotFound(p,e),!0;if(!Et(e)&&!Dt(e))return t._onConversationIDInvalid(p,e),!0;var n={operationType:1,contactItem:void 0,clearMark:s,setMark:c};Et(e)?n.contactItem={type:1,toAccount:e.replace(S.CONV_C2C,"")}:Dt(e)&&(n.contactItem={type:2,groupID:e.replace(S.CONV_GROUP,"")}),u.itemList.push(n)})),p.length===o.length?Ds({successConversationIDList:d,failureConversationIDList:p}):this._conversationModule.request({protocolName:qo,requestData:u}).then((function(e){a.setNetworkType(t._conversationModule.getNetworkType()).end(),qe.l("".concat(n," ok"));var o=e.data.resultItem;if(it(o)){var s,c,l=!1;o.forEach((function(e){if(s=t._concatConversationID(e.contactItem),0===e.resultCode){if(d.push(s),c=t._getLocalConversation(s)){var n=c.markList.indexOf(r);!0===i?-1===n&&(c.markList.push(r),l=!0):-1!==n&&(c.markList.splice(n,1),l=!0)}}else p.push({conversationID:s,code:e.resultCode,message:e.resultInfo})})),!0===l&&t._emitConversationUpdate()}return Ts({successConversationIDList:d,failureConversationIDList:p})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"getLocalConvGroupList",value:function(){var e=this;return qe.l("".concat(this._n,".getLocalConvGroupList pagingStatus:").concat(this._pagingStatus)),this._pagingStatus===tn.REJECTED?this.getRemoteConvGroupList().then((function(){return Ts(_(e._convGroupMap.values()))})):Ds(_(this._convGroupMap.values()))}},{key:"getRemoteConvGroupList",value:function(){var e=this,t="".concat(this._n,".getRemoteConvGroupList");return this._pagingStatus=tn.PENDING,this._conversationModule.request({protocolName:Wo,requestData:{fromAccount:this._getMyUserID(),startIndex:this._startIndex,startTime:Ue()}}).then((function(n){var o,r,i=n.data,a=i.completeFlag,s=i.contactItem,c=i.nextStartIndex,l=void 0===c?0:c,u=i.groupItem;if(e._startIndex=l,qe.l("".concat(t," completeFlag:").concat(a," nextStartIndex:").concat(l)),it(u)&&u.forEach((function(t){var n=t.convGroupID,o=t.groupName;e._convGroupMap.set(n,o)})),it(s)&&s.forEach((function(t){var n=t.standardMark,i=t.customData,a=t.convGroupIDList;if(o=e._concatConversationID(t),(r=e._getLocalConversation(o))&&(r.markList=jt(n),r.customData=i||"",it(a))){var s=[];a.forEach((function(t){e._convGroupMap.has(t)&&s.push(e._convGroupMap.get(t))})),r.conversationGroupList=[].concat(s),s.length=0}})),0===a)return e.getRemoteConvGroupList();1===a&&(e._pagingStatus=tn.RESOLVED,e._emitConversationUpdate(),e._emitConvGroupListUpdate())})).catch((function(n){e._pagingStatus=tn.REJECTED,qe.w("".concat(t," failed. error:"),n)}))}},{key:"createConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(V.CONV_GROUP))return As({code:Va});var n="".concat(this._n,".").concat("createConvGroup");qe.l("".concat(n," options:"),e);var o=new cs("createConvGroup");o.setMessage(JSON.stringify(e));var r=e.groupName,i=e.conversationIDList,a={fromAccount:this._getMyUserID(),itemList:[{groupName:r,contactItem:[]}]},s=[],c=[];return i.forEach((function(e){return t._hasLocalConversation(e)?Et(e)||Dt(e)?void(Et(e)?a.itemList[0].contactItem.push({type:1,toAccount:e.replace(S.CONV_C2C,"")}):Dt(e)&&a.itemList[0].contactItem.push({type:2,groupID:e.replace(S.CONV_GROUP,"")})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===i.length?Ds({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Vo,requestData:a}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),qe.l("".concat(n," ok"));var i=e.data.groupResultItem[0],a=i.groupItem,l=i.resultItem;if(rt(a)&&(t._convGroupMap.set(a.convGroupID,a.groupName),t._emitConvGroupListUpdate()),it(l)){var u,d,p=!1;l.forEach((function(e){u=t._concatConversationID(e.contactItem),0===e.resultCode?(s.push(u),(d=t._getLocalConversation(u))&&-1===d.conversationGroupList.indexOf(r)&&(d.conversationGroupList.push(r),p=!0)):c.push({conversationID:u,code:e.resultCode,message:e.resultInfo})})),!0===p&&(t._emitConversationUpdate(),t._emitConvGroupListUpdate())}return Ts({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"deleteConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(V.CONV_GROUP))return As({code:Va});var n="".concat(this._n,".").concat("deleteConvGroup");qe.l("".concat(n," groupName:").concat(e));var o=new cs("deleteConvGroup");return o.setMessage(e),this._conversationModule.request({protocolName:Ho,requestData:{fromAccount:this._getMyUserID(),groupName:[e]}}).then((function(r){o.setNetworkType(t._conversationModule.getNetworkType()).end(),qe.l("".concat(n," ok"));var i=r.data.groupItem;if(it(i)){var a=!1;i.forEach((function(e){t._convGroupMap.has(e.convGroupID)&&(t._convGroupMap.delete(e.convGroupID),a=!0)})),!0===a&&t._emitConvGroupListUpdate()}t._eraseFromConversationGroupList([e])})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"renameConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(V.CONV_GROUP))return As({code:Va});var n="".concat(this._n,".").concat("renameConvGroup");qe.l("".concat(n," options:"),e);var o=new cs("renameConvGroup");o.setMessage(JSON.stringify(e));var r=e.oldName,i=e.newName;return this._conversationModule.request({protocolName:zo,requestData:{fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:1,oldName:r,newName:i}}}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),qe.l("".concat(n," ok"));var a=e.data.updateGroupResult.convGroupID;t._convGroupMap.set(a,i),t._emitConvGroupListUpdate();var s,c,l=t._conversationModule.getLocalConversationList(),u=!1;l.forEach((function(e){s=e.conversationGroupList,-1!==(c=s.indexOf(r))&&(s.splice(c,1,i),u=!0)})),!0===u&&t._emitConversationUpdate()})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"addConvsToGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(V.CONV_GROUP))return As({code:Va});var n="".concat(this._n,".").concat("addConvsToGroup");qe.l("".concat(n," options:"),e);var o=new cs("addConvsToGroup");o.setMessage(JSON.stringify(e));var r=e.conversationIDList,i=e.groupName,a={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:i,updateItem:[]}},s=[],c=[];return r.forEach((function(e){return t._hasLocalConversation(e)?Et(e)||Dt(e)?void(Et(e)?a.updateGroup.updateItem.push({operationType:1,contactItem:{type:1,toAccount:e.replace(S.CONV_C2C,"")}}):Dt(e)&&a.updateGroup.updateItem.push({operationType:1,contactItem:{type:2,groupID:e.replace(S.CONV_GROUP,"")}})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===r.length?Ds({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:jo,requestData:a}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),qe.l("".concat(n," ok"));var r=e.data.updateGroupResult.contactResultItem;if(it(r)){var a,l,u=!1;r.forEach((function(e){a=t._concatConversationID(e.contactItem),0===e.resultCode?(l=t._getLocalConversation(a))&&-1===l.conversationGroupList.indexOf(i)&&(l.conversationGroupList.push(i),s.push(a),u=!0):c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===u&&(t._emitConversationUpdate(),t._emitConvInGroupUpdate(i))}return Ts({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"deleteConvsFromGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(V.CONV_GROUP))return As({code:Va});var n="".concat(this._n,".").concat("deleteConvsFromGroup");qe.l("".concat(n," options:"),e);var o=new cs("deleteConvsFromGroup");o.setMessage(JSON.stringify(e));var r=e.conversationIDList,i=e.groupName,a={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:i,updateItem:[]}},s=[],c=[];return r.forEach((function(e){return t._hasLocalConversation(e)?Et(e)||Dt(e)?void(Et(e)?a.updateGroup.updateItem.push({operationType:2,contactItem:{type:1,toAccount:e.replace(S.CONV_C2C,"")}}):Dt(e)&&a.updateGroup.updateItem.push({operationType:2,contactItem:{type:2,groupID:e.replace(S.CONV_GROUP,"")}})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===r.length?Ds({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:$o,requestData:a}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),qe.l("".concat(n," ok"));var r=e.data.updateGroupResult.contactResultItem;if(it(r)){var a,l,u=!1;r.forEach((function(e){if(a=t._concatConversationID(e.contactItem),0===e.resultCode){if(l=t._getLocalConversation(a)){var n=l.conversationGroupList.indexOf(i);-1!==n&&(l.conversationGroupList.splice(n,1),s.push(a),u=!0)}}else c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===u&&(t._emitConversationUpdate(),t._emitConvInGroupUpdate(i))}return Ts({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"onConvMarkUpdated",value:function(e){var t=this;if(!Xt(e)){var n,o;qe.d("".concat(this._n,".onConvMarkUpdated markItemList:"),e);var r=!1;e.forEach((function(e){var i=e.recentContactItem,a=e.optType,s=e.standardMark,c=e.customMark;if(n=t._concatConversationID(i),o=t._getLocalConversation(n))if(1===a){var l=jt(s);!0!==function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;n++)if(e[n]!==t[n])return!1;return!0}(o.markList,l)&&(o.markList=l,r=!0)}else 2===a&&o.customData!==c&&void 0!==c&&(o.customData=c,r=!0)})),!0===r&&this._emitConversationUpdate()}}},{key:"onConvGroupCreated",value:function(e){var t=this;qe.d("".concat(this._n,".onConvGroupCreated resultList:"),e);var n=!1,o=!1;it(e)&&(e.forEach((function(e){var r=e.msgGroupItem,i=r.groupID,a=r.groupName;t._convGroupMap.get(i)!==a&&(t._convGroupMap.set(i,a),o=!0);var s,c,l=e.msgRecentContactItem;it(l)&&l.forEach((function(e){s=t._concatConversationID(e),(c=t._getLocalConversation(s))&&-1===c.conversationGroupList.indexOf(a)&&(c.conversationGroupList.push(a),n=!0)}))})),!0===n&&this._emitConversationUpdate(),!0===o&&this._emitConvGroupListUpdate())}},{key:"onConvGroupDeleted",value:function(e){var t=this;qe.d("".concat(this._n,".onConvGroupDeleted groupItemList:"),e);var n=[];if(it(e)){var o=!1;e.forEach((function(e){var r=e.groupID,i=e.groupName;t._convGroupMap.has(r)&&(t._convGroupMap.delete(r),o=!0,n.push(i))})),!0===o&&this._emitConvGroupListUpdate()}this._eraseFromConversationGroupList(n)}},{key:"_eraseFromConversationGroupList",value:function(e){Xt(e)||(this._conversationModule.getLocalConversationList().forEach((function(t){t.conversationGroupList=t.conversationGroupList.filter((function(t){return!e.includes(t)}))})),this._emitConversationUpdate())}},{key:"onConvGroupNameUpdated",value:function(e){qe.d("".concat(this._n,".onConvGroupNameUpdated options:"),e);var t=e.groupID,n=e.groupName,o=e.oldGroupName;if(this._convGroupMap.get(t)!==n){this._convGroupMap.set(t,n),this._emitConvGroupListUpdate();var r,i,a=this._conversationModule.getLocalConversationList(),s=!1;a.forEach((function(e){r=e.conversationGroupList,-1!==(i=r.indexOf(o))&&(r.splice(i,1,n),s=!0)})),!0===s&&this._emitConversationUpdate()}}},{key:"onConvInGroupUpdated",value:function(e){var t=this;qe.d("".concat(this._n,".onConvInGroupUpdated options:"),e);var n=e.oldGroupName,o=e.recentContactUpdateGroupItem;if(it(o)){var r,i,a,s=!1;o.forEach((function(e){var o=e.contactOptType,c=e.recentContactItem;r=t._concatConversationID(c),(i=t._getLocalConversation(r))&&(a=i.conversationGroupList.indexOf(n),1===o?-1===a&&(i.conversationGroupList.push(n),s=!0):2===o&&-1!==a&&(i.conversationGroupList.splice(a,1),s=!0))})),!0===s&&(this._emitConversationUpdate(),this._emitConvInGroupUpdate(n))}}},{key:"onConvAddedToOrDeletedFromGroup",value:function(e){var t=this;qe.d("".concat(this._n,".onConvAddedToOrDeletedFromGroup options:"),e);var n=e.msgRecentContactItem,o=e.msgRecentContactUpdateContactItem,r=this._concatConversationID(n),i=this._getLocalConversation(r);if(i&&it(o)){var a,s=!1;o.forEach((function(e){var n=e.groupOptType,o=e.recentContactGroupItem.groupName;a=i.conversationGroupList.indexOf(o),1===n?-1===a&&(i.conversationGroupList.push(o),s=!0):2===n&&-1!==a&&(i.conversationGroupList.splice(a,1),s=!0),!0===s&&t._emitConvInGroupUpdate(o)})),!0===s&&this._emitConversationUpdate()}}},{key:"onConvGroupListSynced",value:function(e){var t=this;it(e)&&0!==e.length&&(qe.l("".concat(this._n,".onConvGroupListSynced groupItemList:"),e),e.forEach((function(e){t._convGroupMap.set(e.convGroupID,e.groupName)})))}},{key:"getConvGroupListByID",value:function(e){var t=this;if(!Xt(e)){var n=[];return e.forEach((function(e){t._convGroupMap.has(e)&&n.push(t._convGroupMap.get(e))})),n}}},{key:"_onConversationNotFound",value:function(e,t){e.push({conversationID:t,code:ta,message:this._conversationModule.getErrorMessage(ta)})}},{key:"_onConversationIDInvalid",value:function(e,t){e.push({conversationID:t,code:ra,message:this._conversationModule.getErrorMessage(ra)})}},{key:"_getFlagBit",value:function(e){for(var t=e.toString(2),n=t.length,o=n-1;o>=0;o--)if("1"===t[o])return n-o-1}},{key:"_concatConversationID",value:function(e){var t,n=e.type,o=e.to,r=e.groupID,i=e.userID;return 1===n?at(i)?at(o)||(t="".concat(S.CONV_C2C).concat(o)):t="".concat(S.CONV_C2C).concat(i):2===n&&(t="".concat(S.CONV_GROUP).concat(r)),t}},{key:"_getMyUserID",value:function(){return this._conversationModule.getMyUserID()}},{key:"_insertConversationGroup",value:function(e,t){var n=this._getLocalConversation(e);if(n){var o=n.conversationGroupList;-1===o.indexOf(t)&&o.push(t)}}},{key:"_getLocalConversation",value:function(e){return this._conversationModule.getLocalConversation(e)}},{key:"_hasLocalConversation",value:function(e){return this._conversationModule.hasLocalConversation(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"_emitConvGroupListUpdate",value:function(){this._conversationModule.emitOuterEvent(T.CONVERSATION_GROUP_LIST_UPDATED,_(this._convGroupMap.values()))}},{key:"_emitConvInGroupUpdate",value:function(e){var t={groupName:e,conversationList:[]},n=this._conversationModule.getLocalConversationList();t.conversationList=n.filter((function(t){return t.conversationGroupList.includes(e)})),this._conversationModule.emitOuterEvent(T.CONVERSATION_IN_GROUP_UPDATED,t)}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._convGroupMap.clear(),this._startIndex=0,this._pagingStatus=tn.NOT_START}}]),e}(),Zs=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="ConversationModule",Ps.mixin(f(t)),t._messageListHandler=new Rs,t._messageRemindHandler=new Xs(f(t)),t._convGroupHandler=new Js(f(t)),t.singlyLinkedList=new js(100),t._pagingStatus=tn.NOT_START,t._pagingTimeStamp=0,t._pagingStartIndex=0,t._pagingPinnedTimeStamp=0,t._pagingPinnedStartIndex=0,t._pagingConvIDMap=new Map,t._convIDFromUnreadDBMap=new Map,t._conversationMap=new Map,t._tmpGroupList=[],t._tmpGroupAtTipsList=[],t._peerReadTimeMap=new Map,t._completedMap=new Map,t._roamingMessageKeyAndTimeMap=new Map,t._roamingMessageSequenceMap=new Map,t._remoteGroupReadSequenceMap=new Map,t._convTotalUnreadCount=0,t._initListeners(),t}return i(r,[{key:"_initListeners",value:function(){var e=this.getInnerEmitterInstance();e.on(Os,this._initLocalConversationList,this),e.on(Ns,this._onProfileUpdated,this)}},{key:"onCheckTimer",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:"_initLocalConversationList",value:function(){var e=this,t=new cs("_initLocalConversationList");qe.l("".concat(this._n,".").concat("_initLocalConversationList"));var n="",o=this._getStorageConversationList(),r=this.isIntl();if(o){for(var i=o.length,a=0;a<i;a++){var s=o[a];if(s){if(s.conversationID==="".concat(S.CONV_C2C,"@TLS#ERROR")||s.conversationID==="".concat(S.CONV_C2C,"@TLS#NOT_FOUND"))continue;if(s.groupProfile){var c=s.groupProfile.type;if(Tt(c))continue}}this._conversationMap.set(o[a].conversationID,new Ys(o[a],r))}this.emitConversationUpdate(!0,!1),n="count:".concat(i)}else n="count:0";t.setNetworkType(this.getNetworkType()).setMessage(n).end(),this.getModule(Pn)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this.syncConversationList()}},{key:"onMessageSent",value:function(e){this._onSendOrReceiveMessage({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}},{key:"onNewMessage",value:function(e){this._onSendOrReceiveMessage(e)}},{key:"_onSendOrReceiveMessage",value:function(e){var t=this,n=e.conversationOptionsList,o=e.isInstantMessage,r=void 0===o||o,i=e.isUnreadC2CMessage,a=void 0!==i&&i,s=e.updateUnreadCount,c=void 0===s||s;this._isReady?0!==n.length&&(this._getC2CPeerReadTime(n),this._updateLocalConversationList({conversationOptionsList:n,isInstantMessage:r,isUnreadC2CMessage:a,isFromGetConversations:!1,updateUnreadCount:c}),r||(this._convIDFromUnreadDBMap=new Map([].concat(_(this._convIDFromUnreadDBMap),_(n.map((function(e){return[e.conversationID,1]}))))),this._diffAndDeleteConversation()),this._setStorageConversationList(),n.filter((function(e){return e.type===S.CONV_TOPIC})).length>0||this.emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e)}))}},{key:"updateConversationGroupProfile",value:function(e){var t=this;if(!it(e)||0!==e.length)if(0!==this._conversationMap.size){var n=!1;e.forEach((function(e){var o="GROUP".concat(e.groupID);if(t._conversationMap.has(o)){n=!0;var r=t._conversationMap.get(o);r.groupProfile=JSON.parse(JSON.stringify(e)),r.lastMessage.lastSequence<e.nextMessageSeq&&(r.lastMessage.lastSequence=e.nextMessageSeq-1),r.subType||(r.subType=e.type)}})),n&&this.emitConversationUpdate(!0,!1)}else this._tmpGroupList=e}},{key:"_updateConversationUserProfile",value:function(e){var t=this;e.data.forEach((function(e){var n="C2C".concat(e.userID);t._conversationMap.has(n)&&(t._conversationMap.get(n).userProfile=e)})),this.emitConversationUpdate(!0,!1)}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var n=null,o=!1,r=[];e.forEach((function(e){(n=t._conversationMap.get(e.conversationID))&&(n.type===S.CONV_TOPIC?r.push(e):(n.reduceUnreadCount()&&(o=!0),n.isLastMessageRevoked({sequence:e.sequence,time:e.time})&&(n.setLastMessageRevoked(!0),n.setLastMessageRevoker(e.revoker),o=!0)))})),this.getModule(Fn).onMessageRevoked(r),o&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())}}},{key:"isLastMessageRevoked",value:function(e){var t=!1,n=e.conversationID,o=e.sequence,r=e.time,i=this._conversationMap.get(n);return i&&(t=i.type===S.CONV_TOPIC?this.getModule(Fn).isLastMessageRevoked({topicID:n.replace(S.CONV_GROUP,""),sequence:o}):i.isLastMessageRevoked({sequence:o,time:r})),qe.l("".concat(this._n,".isLastMessageRevoked options:").concat(JSON.stringify(e)," ret:").concat(t)),t}},{key:"onMessageDeleted",value:function(e){var t=this;if(0!==e.length){var n=null;e.forEach((function(e){(n=t._messageListHandler.getLocalMessage(e.conversationID,e.ID))&&(n.isDeleted=!0),e!==n&&(e.isDeleted=!0)}));for(var o=e[0].conversationID,r=this._messageListHandler.getLocalMessageList(o),i={},a=r.length-1;a>=0;a--)if(!r[a].isDeleted){i=r[a];break}var s=this._conversationMap.get(o);if(s){var c=!1;s.lastMessage.lastSequence===i.sequence&&s.lastMessage.lastTime===i.time||(Xt(i)&&(i=void 0),s.updateLastMessage(i),s.type!==S.CONV_TOPIC&&(c=!0),qe.l("".concat(this._n,".onMessageDeleted. update conversationID:").concat(o," with lastMessage:"),s.lastMessage)),o.startsWith(S.CONV_C2C)&&this.updateUnreadCount(o),c&&this.emitConversationUpdate(!0,!1)}}}},{key:"onMessageModified",value:function(e){var t=e.conversationType,n=e.from,o=e.to,r=e.time,i=e.sequence,a=e.elements,s=e.cloudCustomData,c=e.messageVersion,l=this.getMyUserID(),u="".concat(t).concat(o);o===l&&t===S.CONV_C2C&&(u="".concat(t).concat(n));var d=this._messageListHandler.onMessageModified(u,e),p=d.isUpdated,h=d.message;!0===p&&this.emitOuterEvent(T.MESSAGE_MODIFIED,[h]);var f=this._isTopicConversation(u);if(qe.l("".concat(this._n,".onMessageModified isUpdated:").concat(p," isTopicMessage:").concat(f," from:").concat(n," to:").concat(o)),f)this.getModule(Fn).onMessageModified(e);else{var g=this._conversationMap.get(u);if(g){var v=g.lastMessage;qe.d("".concat(this._n.onMessageModified," lastMessage:"),JSON.stringify(v),"options:",JSON.stringify(e)),v&&v.lastTime===r&&v.lastSequence===i&&v.version!==c&&(v.type=a[0].type,v.payload=a[0].content,v.messageForShow=Ht(v.type,v.payload,this.isIntl()),v.cloudCustomData=s,v.version=c,this.emitConversationUpdate(!0,!1))}}return h}},{key:"onNewGroupAtTips",value:function(e){var n=this,o=e.dataList,r=null;o.forEach((function(e){e.groupAtTips?r=e.groupAtTips:e.elements?r=t(t({},e.elements),{},{sync:!0}):e.groupAtType&&(r=t(t({},e),{},{sync:!0})),r.__random=e.random,r.__sequence=e.clientSequence,n._tmpGroupAtTipsList.push(r)})),qe.d("".concat(this._n,".onNewGroupAtTips isReady:").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:"_handleGroupAtTipsList",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(n){var o=n.groupID,r=n.from,i=n.topicID,a=void 0===i?void 0:i,s=n.sync,c=void 0!==s&&s;if(r!==e.getMyUserID())if(at(a)){var l=e._conversationMap.get("".concat(S.CONV_GROUP).concat(o));l&&(l.updateGroupAtInfoList(n),t=!0)}else{var u=e._conversationMap.get("".concat(S.CONV_GROUP).concat(a));if(u){u.updateGroupAtInfoList(n);var d=e.getModule(Fn),p=u.groupAtInfoList;d.onConversationProxy({topicID:a,groupAtInfoList:p})}Xt(u)&&c&&(e.updateTopicConversation([{conversationID:"".concat(S.CONV_GROUP).concat(a),type:S.CONV_TOPIC}]),e._conversationMap.get("".concat(S.CONV_GROUP).concat(a)).updateGroupAtInfoList(n))}})),t&&this.emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:"_getC2CPeerReadTime",value:function(e){var t=this,n=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==S.CONV_C2C||n.push(e.conversationID.replace(S.CONV_C2C,""))})),n.length>0){qe.d("".concat(this._n,"._getC2CPeerReadTime userIDList:").concat(n));var o=this.getModule(Pn);o&&o.getRemotePeerReadTime(n)}}},{key:"_getStorageConversationList",value:function(){return this.getModule(Hn).getItem("conversationMap")}},{key:"_setStorageConversationList",value:function(){var e=this.getLocalConversationList().filter((function(e){return e.type===S.CONV_C2C||e.type===S.CONV_GROUP&&e.lastMessage.type!==S.MSG_GRP_TIP})).slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(Hn).setItem("conversationMap",e)}},{key:"emitConversationUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalConversationList();if(t){var o=this.getModule(Un);o&&o.updateGroupLastMessage(n)}e&&this.emitOuterEvent(T.CONVERSATION_LIST_UPDATED)}},{key:"getLocalConversationList",value:function(){return _(this._conversationMap.values()).filter((function(e){return e.type!==S.CONV_TOPIC}))}},{key:"getLocalConversation",value:function(e){return this._conversationMap.get(e)}},{key:"hasLocalConversation",value:function(e){return this._conversationMap.has(e)}},{key:"getLocalOldestMessage",value:function(e){return this._messageListHandler.getLocalOldestMessage(e)}},{key:"syncConversationList",value:function(){var e=this,t=new cs("syncConversationList");return this._pagingStatus===tn.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(n){return e._pagingStatus=tn.RESOLVED,e._diffAndDeleteConversation(),e.emitConversationUpdate(!0,!1),e._setStorageConversationList(),e._handleC2CPeerReadTime(),e._patchConversationProperties(),t.setMessage(e._conversationMap.size).setNetworkType(e.getNetworkType()).end(),n})).catch((function(n){return e._pagingStatus=tn.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],i=o[1];t.setError(n,r,i).end()})),As(n)}))}},{key:"_diffAndDeleteConversation",value:function(){var e=this;if(this._isSyncCompleted()){var t=[];this._conversationMap.forEach((function(n,o){!e._pagingConvIDMap.has(o)&&e._convIDFromUnreadDBMap.has(o)&&(e._conversationMap.delete(o),t.push(o))})),qe.l("".concat(this._n,"._diffAndDeleteConversation list:").concat(t))}}},{key:"_patchConversationProperties",value:function(){var e=this,t=Date.now(),n=this.checkAndPatchRemark(),o=this._messageRemindHandler.getC2CMessageRemindType(),r=this.getModule(Un).getGroupList();Promise.all([n,o,r]).then((function(){var n=Date.now()-t;qe.l("".concat(e._n,"._patchConversationProperties ok. cost ").concat(n," ms")),e.emitConversationUpdate(!0,!1),e.emitTotalUnreadMessageCountUpdate()}))}},{key:"_pagingGetConversationList",value:function(){var e=this,t="".concat(this._n,"._pagingGetConversationList");return qe.l("".concat(t," timeStamp:").concat(this._pagingTimeStamp," startIndex:").concat(this._pagingStartIndex)+" pinnedTimeStamp:".concat(this._pagingPinnedTimeStamp," pinnedStartIndex:").concat(this._pagingPinnedStartIndex)),this._pagingStatus=tn.PENDING,this.request({protocolName:xo,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingPinnedStartIndex,orderType:1}}).then((function(n){var o=n.data,r=o.completeFlag,i=o.conversations,a=void 0===i?[]:i,s=o.timeStamp,c=o.startIndex,l=o.pinnedTimeStamp,u=o.pinnedStartIndex,d=o.groupItem;if(qe.l("".concat(t," ok. completeFlag:").concat(r," count:").concat(a.length," isReady:").concat(e._isReady)),e._convGroupHandler.onConvGroupListSynced(d),a.length>0){var p=e._getConversationOptions(a);e._pagingConvIDMap=new Map([].concat(_(e._pagingConvIDMap),_(p.map((function(e){return[e.conversationID,1]}))))),e._updateLocalConversationList({conversationOptionsList:p,isFromGetConversations:!0}),e.isLoggedIn()&&e.emitConversationUpdate()}if(!e._isReady){if(!e.isLoggedIn())return Ds();e.triggerReady()}return e._pagingTimeStamp=s,e._pagingStartIndex=c,e._pagingPinnedTimeStamp=l,e._pagingPinnedStartIndex=u,1!==r?e._pagingGetConversationList():(e._handleGroupAtTipsList(),e._convGroupHandler.getRemoteConvGroupList(),Ds())})).catch((function(n){throw e.isLoggedIn()&&(e._isReady||(qe.w("".concat(t," failed. error:"),n),e.triggerReady())),n}))}},{key:"_updateLocalConversationList",value:function(e){var t,n=e.isFromGetConversations,o=e.isInstantMessage,r=Date.now();t=this._getTmpConversationListMapping(e),this._conversationMap=new Map(this._sortConversationList([].concat(_(t.toBeUpdatedConversationList),_(this._conversationMap)))),n||(this._updateUserOrGroupProfile(t.newConversationList),o&&this.emitTotalUnreadMessageCountUpdate()),qe.d("".concat(this._n,"._updateLocalConversationList cost ").concat(Date.now()-r," ms"))}},{key:"_getTmpConversationListMapping",value:function(e){for(var t=e.conversationOptionsList,n=e.isFromGetConversations,o=e.isInstantMessage,r=e.isUnreadC2CMessage,i=void 0!==r&&r,a=e.updateUnreadCount,s=[],c=[],l=this.getModule(Un),u=this.getModule(Gn),d=this.isIntl(),p=0,h=t.length;p<h;p++){var f=new Ys(t[p],d),g=f.conversationID;if(g!=="".concat(S.CONV_C2C,"@TLS#ERROR")&&g!=="".concat(S.CONV_C2C,"@TLS#NOT_FOUND"))if(this._conversationMap.has(g)){var v=this._conversationMap.get(g),m=["unreadCount","allowType","adminForbidType","payload","isPinned"];!1===o&&m.push("lastMessage");var _=t[p].lastMessage,y=!at(_);y||t[p].type===S.CONV_TOPIC||this._onLastMessageNotExist(t[p]),at(o)&&y&&null===v.lastMessage.payload&&(v.lastMessage.payload=_.payload),Xt(v.lastMessage.revoker)||(v.lastMessage.revoker=null),ft(v,f,m,[null,void 0,"",0,NaN]),!0===a&&v.updateUnreadCount({nextUnreadCount:f.unreadCount,isFromGetConversations:n,isUnreadC2CMessage:i}),o&&y&&(_.payload&&(v.lastMessage.payload=_.payload),v.type===S.CONV_GROUP&&(v.lastMessage.nameCard=_.nameCard,v.lastMessage.nick=_.nick)),y&&v.lastMessage.cloudCustomData!==_.cloudCustomData&&(v.lastMessage.cloudCustomData=_.cloudCustomData||""),this._conversationMap.delete(g),s.push([g,v])}else{if(f.type===S.CONV_GROUP&&l){var b=f.groupProfile.groupID,M=l.getLocalGroupProfile(b);M&&(f.groupProfile=M,!0===a&&f.updateUnreadCount({nextUnreadCount:0}))}else if(f.type===S.CONV_C2C){var C=g.replace(S.CONV_C2C,"");u&&u.isMyFriend(C)&&(f.remark=u.getFriendRemark(C))}c.push(f),s.push([g,f])}}var k=this.getModule(Fn);return s.forEach((function(e){if(e[1].type===S.CONV_TOPIC){var t=e[1],n=t.conversationID,o=t.unreadCount,r=t.groupAtInfoList;k.onConversationProxy({topicID:n.replace(S.CONV_GROUP,""),unreadCount:o,groupAtInfoList:Xt(r)?void 0:r})}})),{toBeUpdatedConversationList:s,newConversationList:c}}},{key:"_onLastMessageNotExist",value:function(e){new cs("lastMessageNotExist").setMessage("".concat(JSON.stringify(e))).setNetworkType(this.getNetworkType()).end()}},{key:"_sortConversationList",value:function(e){var t=[],n=[],o=[],r=[];return e.forEach((function(e){!0===e[1].isPinned?Xt(e[1].lastMessage.lastTime)?n.push(e):t.push(e):Xt(e[1].lastMessage.lastTime)?r.push(e):o.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n).concat(o.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime}))).concat(r)}},{key:"_sortConversationListAndEmitEvent",value:function(){this._conversationMap=new Map(this._sortConversationList(_(this._conversationMap))),this.emitConversationUpdate(!0,!1)}},{key:"_updateUserOrGroupProfile",value:function(e){var t=this;if(0!==e.length){var n=[],o=[],r=this.getModule(Nn),i=this.getModule(Un);e.forEach((function(e){if(e.type===S.CONV_C2C)n.push(e.toAccount);else if(e.type===S.CONV_GROUP){var t=e.toAccount;i.hasLocalGroup(t)?e.groupProfile=i.getLocalGroupProfile(t):o.push(t)}})),qe.l("".concat(this._n,"._updateUserOrGroupProfile c2cUserIDList:").concat(n," groupIDList:").concat(o)),n.length>0&&r.getUserProfile({userIDList:n}).then((function(e){var n=e.data;it(n)?n.forEach((function(e){t._doUpdateUserProfile("C2C".concat(e.userID),e)})):t._doUpdateUserProfile("C2C".concat(n.userID),n)})),o.length>0&&i.getGroupProfileAdvance({groupIDList:o,responseFilter:{groupBaseInfoFilter:["Type","Name","FaceUrl"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var n="GROUP".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);ft(o.groupProfile,e,[],[null,void 0,"",0,NaN]),!o.subType&&e.type&&(o.subType=e.type)}}))}))}}},{key:"_doUpdateUserProfile",value:function(e,t){this.hasLocalConversation(e)&&(this.getLocalConversation(e).userProfile=t)}},{key:"_getConversationOptions",value:function(e){var n=this,o=[],r=e.filter((function(e){var t=e.type,n=e.userID;return 1===t&&"@TLS#NOT_FOUND"!==n&&"@TLS#ERROR"!==n||2===t})),i=this.getMyUserID(),a=r.map((function(e){if(at(e.lastMsg)&&(e.lastMsg={elements:[]}),1===e.type){var r={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar};return o.push(r),{conversationID:"C2C".concat(e.userID),type:"C2C",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?n._amendLayersOverLimitProperty(e.lastMsg.elements[0].content):null,cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:e.lastC2CMsgFromAccount===i&&e.time<=e.c2cPeerReadTime,revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null},userProfile:new Hs(r),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,messageRemindType:"",customData:e.customMark||"",markList:jt(e.standardMark),conversationGroupList:n._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}return{conversationID:"GROUP".concat(e.groupID),type:"GROUP",lastMessage:t(t({lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow},n._patchTypeAndPayload(e)),{},{cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||"",nameCard:e.senderNameCard||"",revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null}),groupProfile:new Ws({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned,messageRemindType:"",version:0,customData:e.customMark||"",markList:jt(e.standardMark),conversationGroupList:n._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}));return o.length>0&&this.getModule(Nn).onConversationsProfileUpdated(o),a}},{key:"_patchTypeAndPayload",value:function(e){var n=e.lastMsg,o=n.event,r=void 0===o?void 0:o,i=n.elements,a=void 0===i?[]:i,s=n.groupTips,c=void 0===s?{}:s;if(!at(r)&&!Xt(c)){var l=new ws(c);l.setElement({type:S.MSG_GRP_TIP,content:t(t({},c.elements),{},{groupProfile:c.groupProfile})});var u=JSON.parse(JSON.stringify(l.payload));return l=null,{type:S.MSG_GRP_TIP,payload:u}}return{type:a[0]?a[0].type:null,payload:a[0]?this._amendLayersOverLimitProperty(a[0].content):null}}},{key:"_amendLayersOverLimitProperty",value:function(e){var t=e.layersOverLimit;return 0===t?e.layersOverLimit=!1:1===t&&(e.layersOverLimit=!0),e}},{key:"getLocalMessageList",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:"deleteLocalMessage",value:function(e){e instanceof ws&&this._messageListHandler.remove(e)}},{key:"onConversationDeleted",value:function(e){if(it(e)){var t=e.map((function(e){var t=e.type,n=e.userID,o=e.groupID;return 1===t?"".concat(S.CONV_C2C).concat(n):2===t?"".concat(S.CONV_GROUP).concat(o):void 0}));qe.l("".concat(this._n,".onConversationDeleted conversationIDList:").concat(t)),this.deleteLocalConversationList(t)}}},{key:"onConversationPinned",value:function(e){var t=this;if(it(e)){var n=!1;e.forEach((function(e){var o,r=e.type,i=e.userID,a=e.groupID;1===r?o=t.getLocalConversation("".concat(S.CONV_C2C).concat(i)):2===r&&(o=t.getLocalConversation("".concat(S.CONV_GROUP).concat(a))),o&&(qe.l("".concat(t._n,".onConversationPinned conversationID:").concat(o.conversationID," isPinned:").concat(o.isPinned)),o.isPinned||(o.isPinned=!0,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:"onConversationUnpinned",value:function(e){var t=this;if(it(e)){var n=!1;e.forEach((function(e){var o,r=e.type,i=e.userID,a=e.groupID;1===r?o=t.getLocalConversation("".concat(S.CONV_C2C).concat(i)):2===r&&(o=t.getLocalConversation("".concat(S.CONV_GROUP).concat(a))),o&&(qe.l("".concat(t._n,".onConversationUnpinned conversationID:").concat(o.conversationID," isPinned:").concat(o.isPinned)),o.isPinned&&(o.isPinned=!1,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:"getMessageList",value:function(e){var t=this,n=e.conversationID,o=e.nextReqMessageID,r=e.count,i="".concat(this._n,".getMessageList"),a=this.getLocalConversation(n),s="";if(a&&a.groupProfile&&(s=a.groupProfile.type),Tt(s))return qe.l("".concat(i," not available in avchatroom. conversationID:").concat(n)),Ds({messageList:[],nextReqMessageID:"",isCompleted:!0});(at(r)||r>15)&&(r=15),!o&&this._isNotInCommunity(n)&&(this._messageListHandler.removeByConversationID(n),this._completedMap.delete(n),this._roamingMessageSequenceMap.delete(n));var c=this._computeRemainingCount({conversationID:n,nextReqMessageID:o}),l=this._completedMap.has(n);if(qe.l("".concat(i," conversationID:").concat(n," nextReqMessageID:").concat(o)+" remainingCount:".concat(c," count:").concat(r," isCompleted:").concat(l)),this._needGetHistory({conversationID:n,remainingCount:c,count:r}))return this.getHistoryMessages({conversationID:n,nextReqMessageID:o,count:20}).then((function(e){var o=e.nextReqID,r=e.storedMessageList,a=t._completedMap.has(n),s=r;c>0&&(s=t._messageListHandler.getLocalMessageList(n).slice(0,r.length+c));var l={nextReqMessageID:a?"":o,messageList:s,isCompleted:a};return qe.l("".concat(i," ret.nextReqMessageID:").concat(l.nextReqMessageID," ret.isCompleted:").concat(l.isCompleted," ret.length:").concat(s.length)),Ts(l)}));this.modifyMessageList(n);var u=this._getMessageListFromMemory({conversationID:n,nextReqMessageID:o,count:r});return Ds(u)}},{key:"_getMessageListFromMemory",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r="".concat(this._n,"._getMessageListFromMemory"),i=this._messageListHandler.getLocalMessageList(t),a=i.length,s=0,c={isCompleted:!1,nextReqMessageID:"",messageList:[]};return n?(s=i.findIndex((function(e){return e.ID===n})))>o?(c.messageList=i.slice(s-o,s),c.nextReqMessageID=i[s-o].ID):(c.messageList=i.slice(0,s),c.isCompleted=!0):a>o?(s=a-o,c.messageList=i.slice(s,a),c.nextReqMessageID=i[s].ID):(c.messageList=i.slice(0,a),c.isCompleted=!0),qe.l("".concat(r," conversationID:").concat(t)+" ret.nextReqMessageID:".concat(c.nextReqMessageID," ret.isCompleted:").concat(c.isCompleted," ret.length:").concat(c.messageList.length)),c}},{key:"getMessageListHopping",value:function(e){var t=e.conversationID,n=e.sequence,o=e.time,r=e.count,i=e.direction,a=void 0===i?0:i;if((at(r)||r>15)&&(r=15),t.startsWith(S.CONV_C2C)){var s=this.getModule(Pn),c=t.replace(S.CONV_C2C,"");return s.getRoamingMessagesHopping({peerAccount:c,time:o,count:r,direction:a})}if(t.startsWith(S.CONV_GROUP)){var l=this.getModule(Un),u=t.replace(S.CONV_GROUP,"");return l.getRoamingMessagesHopping({groupID:u,sequence:n,count:r,direction:a})}}},{key:"_computeRemainingCount",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=this._messageListHandler.getLocalMessageList(t),r=o.length;if(!n)return r;var i=0;return Et(t)?i=o.findIndex((function(e){return e.ID===n})):Dt(t)&&(i=-1!==n.indexOf("-")?o.findIndex((function(e){return e.ID===n})):o.findIndex((function(e){return e.sequence===n}))),-1===i&&(i=0),i}},{key:"_getMessageListSize",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:"_needGetHistory",value:function(e){var t=e.conversationID,n=e.remainingCount,o=e.count,r=this.getLocalConversation(t),i="";return r&&r.groupProfile&&(i=r.groupProfile.type),!At(t)&&!Tt(i)&&!(Dt(t)&&this._isPagingGetGroupListCompleted()&&this._getLocalGroupCount()<=4e3&&!this._hasLocalGroup(t)&&!this._isTopicConversation(t))&&n<=o&&!this._completedMap.has(t)}},{key:"_isTopicConversation",value:function(e){var t=e.replace(S.CONV_GROUP,"");return It(t)}},{key:"getHistoryMessages",value:function(e){var t=e.conversationID,n=e.count;if(t===S.CONV_SYSTEM)return Ds();var o=15;n>20&&(o=20);var r=null;if(Et(t)){var i=this._roamingMessageKeyAndTimeMap.has(t);return(r=this.getModule(Pn))?r.getRoamingMessage({conversationID:t,peerAccount:t.replace(S.CONV_C2C,""),count:o,lastMessageTime:i?this._roamingMessageKeyAndTimeMap.get(t).lastMessageTime:0,messageKey:i?this._roamingMessageKeyAndTimeMap.get(t).messageKey:""}):As({code:Ra})}if(Dt(t)){if(!(r=this.getModule(Un)))return As({code:Ra});var a=null;this._conversationMap.has(t)&&(a=this._conversationMap.get(t).lastMessage);var s=0;a&&(s=a.lastSequence);var c=this._roamingMessageSequenceMap.get(t);return r.getRoamingMessage({conversationID:t,groupID:t.replace(S.CONV_GROUP,""),count:o,sequence:c||s})}return Ds()}},{key:"patchConversationLastMessage",value:function(e){var t=this.getLocalConversation(e);if(t){var n=t.lastMessage,o=n.messageForShow,r=n.payload;if(Xt(o)||Xt(r)){var i=this._messageListHandler.getLocalMessageList(e);if(0===i.length)return;var a=i[i.length-1];qe.l("".concat(this._n,".patchConversationLastMessage conversationID:").concat(e," payload:"),a.payload),t.updateLastMessage(a)}}}},{key:"onRoamingMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=n.startsWith(S.CONV_C2C)?S.CONV_C2C:S.CONV_GROUP,i=null,a=[],s=[],c=0,l=e.length,u=null,d=r===S.CONV_GROUP,p=this.getModule($n),h=this.getFileDownloadProxy(),f=function(){c=d?e.length-1:0,l=d?0:e.length},g=function(){d?--c:++c},v=function(){return d?c>=l:c<l};for(f();v();g())if(d&&1===e[c].sequence&&o&&this.setCompleted(n),1!==e[c].isPlaceMessage)if((i=new ws(e[c])).to=e[c].to,r!==S.CONV_GROUP||at(e[c].topicID)||(i.to=e[c].topicID),i.isSystemMessage=!!e[c].isSystemMessage,i.conversationType=r,4===e[c].event?u={type:S.MSG_GRP_TIP,content:t(t({},e[c].elements),{},{groupProfile:e[c].groupProfile})}:(e[c].elements=p.parseElements(e[c].elements,e[c].from),u=e[c].elements),d||i.setNickAndAvatar({nick:e[c].nick,avatar:e[c].avatar}),Xt(u)){var m=new cs("emptyMessageBody");m.setMessage("from:".concat(i.from," to:").concat(i.to," sequence:").concat(i.sequence," event:").concat(e[c].event)),m.setNetworkType(this.getNetworkType()).setLevel("warning").end()}else i.setElement(u,h),i.reInitialize(this.getMyUserID()),a.push(i);return f=g=v=null,o?(this._messageListHandler.unshift(a,s),a=null,s):(s=null,a)}},{key:"findMessage",value:function(e){return this._messageListHandler.findMessage(e)}},{key:"_isNotInCommunity",value:function(e){var t=!1;if(e.startsWith(S.CONV_GROUP)&&this._isTopicConversation(e)){var n=Vt(e.replace(S.CONV_GROUP,""));this.getModule(Un).hasLocalGroup(n)||(t=!0)}return t}},{key:"deleteTopicRoamingMessageInfo",value:function(e){var t=this;St({groupID:e})&&this._messageListHandler.getTopicConversationIDList(e).forEach((function(e){t._messageListHandler.removeByConversationID(e),t._completedMap.delete(e),t._roamingMessageSequenceMap.delete(e)}))}},{key:"deleteGroupRomaingMessageInfo",value:function(e){var t="".concat(S.CONV_GROUP).concat(e);this._messageListHandler.removeByConversationID(t),this._completedMap.delete(t),this._roamingMessageSequenceMap.delete(t)}},{key:"setMessageRead",value:function(e){var t=e.conversationID,n=this.getLocalConversation(t);if(qe.l("".concat(this._n,".setMessageRead conversationID:").concat(t," unreadCount:").concat(n?n.unreadCount:0)),!n)return Ds();if(n.type!==S.CONV_GROUP&&n.type!==S.CONV_TOPIC||Xt(n.groupAtInfoList)||this.deleteGroupAtTips(t),0===n.unreadCount)return Ds();if(n.type===S.CONV_GROUP&&!this._hasLocalGroup(t))return 0!==n.unreadCount&&(n.unreadCount=0,this.emitConversationUpdate(!0,!1)),Ds();var o=this._messageListHandler.getLocalLastMessage(t),r=n.lastMessage.lastTime;o&&r<o.time&&(r=o.time);var i=n.lastMessage.lastSequence;if(o&&i<o.sequence&&(i=o.sequence),n.type===S.CONV_TOPIC&&at(o)){var a=this.getModule(Fn),s=t.replace(S.CONV_GROUP,""),c=Vt(s),l=a.getLocalTopic(c,s);l&&(i=l.nextMessageSeq-1)}var u=null;switch(n.type){case S.CONV_C2C:return(u=this.getModule(Pn))?u.setMessageRead({conversationID:t,lastMessageTime:r}):As({code:Ra});case S.CONV_GROUP:case S.CONV_TOPIC:return(u=this.getModule(Un))?u.setMessageRead({conversationID:t,lastMessageSeq:i}):As({code:Ra});case S.CONV_SYSTEM:return n.unreadCount=0,this.emitConversationUpdate(!0,!1),Ds();default:return Ds()}}},{key:"setAllMessageRead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="setAllMessageRead",o="".concat(this._n,".").concat(n);t.scope||(t.scope=S.READ_ALL_MSG),qe.l("".concat(o," options:"),t);var r=this._createSetAllMessageReadPack(t);if(0===r.readAllC2CMessage&&0===r.groupMessageReadInfoList.length)return Ds();var i=new cs(n);return this.request({protocolName:lr,requestData:r}).then((function(n){var o=n.data,r=e._handleAllMessageRead(o);return i.setMessage("scope:".concat(t.scope," failureGroups:").concat(JSON.stringify(r))).setNetworkType(e.getNetworkType()).end(),Ds()})).catch((function(t){return e.probeNetwork().then((function(e){var n=m(e,2),o=n[0],r=n[1];i.setError(t,o,r).end()})),qe.w("".concat(o," failed. error:"),t),As({code:t&&t.code?t.code:Ri,message:t&&t.message?t.message:void 0})}))}},{key:"setConversationCustomData",value:function(e){return this._convGroupHandler.setConvCustomData(e)}},{key:"markConversation",value:function(e){return this._convGroupHandler.markConversation(e)}},{key:"getConversationGroupList",value:function(){return this._convGroupHandler.getLocalConvGroupList()}},{key:"createConversationGroup",value:function(e){return this._convGroupHandler.createConvGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._convGroupHandler.deleteConvGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._convGroupHandler.renameConvGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._convGroupHandler.addConvsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._convGroupHandler.deleteConvsFromGroup(e)}},{key:"onConversationMarkUpdated",value:function(e){this._convGroupHandler.onConvMarkUpdated(e)}},{key:"onConversationGroupCreated",value:function(e){this._convGroupHandler.onConvGroupCreated(e)}},{key:"onConversationGroupDeleted",value:function(e){this._convGroupHandler.onConvGroupDeleted(e)}},{key:"onConversationGroupNameUpdated",value:function(e){this._convGroupHandler.onConvGroupNameUpdated(e)}},{key:"onConversationInGroupUpdated",value:function(e){this._convGroupHandler.onConvInGroupUpdated(e)}},{key:"onConversationAddedToOrDeletedFromGroup",value:function(e){this._convGroupHandler.onConvAddedToOrDeletedFromGroup(e)}},{key:"_getConversationLastMessageSequence",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastSequence;return t&&n<t.sequence&&(n=t.sequence),n}},{key:"_getConversationLastMessageTime",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastTime;return t&&n<t.time&&(n=t.time),n}},{key:"_createSetAllMessageReadPack",value:function(e){var t,n={readAllC2CMessage:0,groupMessageReadInfoList:[]},o=e.scope,r=w(this._conversationMap);try{for(r.s();!(t=r.n()).done;){var i=m(t.value,2)[1];if(i.unreadCount>0)if(i.type===S.CONV_C2C&&0===n.readAllC2CMessage){if(o===S.READ_ALL_MSG)n.readAllC2CMessage=1;else if(o===S.READ_ALL_C2C_MSG){n.readAllC2CMessage=1;break}}else if(i.type===S.CONV_GROUP&&(o===S.READ_ALL_GROUP_MSG||o===S.READ_ALL_MSG)){var a=this._getConversationLastMessageSequence(i);n.groupMessageReadInfoList.push({groupID:i.groupProfile.groupID,messageSequence:a})}}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"onPushedAllMessageRead",value:function(e){this._handleAllMessageRead(e)}},{key:"_handleAllMessageRead",value:function(e){var t=e.groupMessageReadInfoList,n=e.readAllC2CMessage,o=this._parseGroupReadInfo(t);return this._updateAllConversationUnreadCount({readAllC2CMessage:n})>=1&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate()),o}},{key:"_parseGroupReadInfo",value:function(e){var t=[];if(e&&e.length)for(var n=0,o=e.length;n<o;n++){var r=e[n],i=r.groupID,a=r.sequence,s=r.retCode,c=r.lastMessageSeq;at(s)?this._remoteGroupReadSequenceMap.set(i,c):(this._remoteGroupReadSequenceMap.set(i,a),0!==s&&t.push("".concat(i,"-").concat(a,"-").concat(s)))}return t}},{key:"_updateAllConversationUnreadCount",value:function(e){var t,n=e.readAllC2CMessage,o=0,r=w(this._conversationMap);try{for(r.s();!(t=r.n()).done;){var i=m(t.value,2),a=i[0],s=i[1];if(s.unreadCount>=1){if(1===n&&s.type===S.CONV_C2C){var c=this._getConversationLastMessageTime(s);this.updateIsReadAfterReadReport({conversationID:a,lastMessageTime:c})}else if(s.type===S.CONV_GROUP){var l=a.replace(S.CONV_GROUP,"");if(this._remoteGroupReadSequenceMap.has(l)){var u=this._remoteGroupReadSequenceMap.get(l),d=this._getConversationLastMessageSequence(s);this.updateIsReadAfterReadReport({conversationID:a,remoteReadSequence:u}),d>=u&&this._remoteGroupReadSequenceMap.delete(l)}}this.updateUnreadCount(a,!1)&&(o+=1)}}}catch(p){r.e(p)}finally{r.f()}return o}},{key:"isRemoteRead",value:function(e){var t=e.conversationID,n=e.sequence,o=t.replace(S.CONV_GROUP,""),r=!1;if(this._remoteGroupReadSequenceMap.has(o)){var i=this._remoteGroupReadSequenceMap.get(o);n<=i&&(r=!0,qe.l("".concat(this._n,".isRemoteRead conversationID:").concat(t," messageSequence:").concat(n," remoteReadSequence:").concat(i))),n>=i+10&&this._remoteGroupReadSequenceMap.delete(o)}return r}},{key:"updateIsReadAfterReadReport",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,o=e.lastMessageTime,r=this._messageListHandler.getLocalMessageList(t);if(0!==r.length)for(var i,a=r.length-1;a>=0;a--)if(i=r[a],!(o&&i.time>o||n&&i.sequence>n)){if("in"===i.flow&&i.isRead)break;i.setIsRead(!0)}}},{key:"updateUnreadCount",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1,o=this.getLocalConversation(e),r=this._messageListHandler.getLocalMessageList(e);if(o){var i=o.unreadCount,a=r.filter((function(e){return!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted})).length;if(i!==a&&(o.unreadCount=a,n=!0,qe.l("".concat(this._n,".updateUnreadCount from ").concat(i," to ").concat(a,", conversationID:").concat(e)),!0===t&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())),n&&o.type===S.CONV_TOPIC){var s=o.unreadCount,c=this.getModule(Fn),l=e.replace(S.CONV_GROUP,"");c.onConversationProxy({topicID:l,unreadCount:s})}return n}}},{key:"clearGroupAtInfoList",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalConversation(e);if(n&&n.groupAtInfoList.length>0){if(n.clearGroupAtInfoList(),qe.l("".concat(this._n,".clearGroupAtInfoList conversationID:").concat(e)),n.type===S.CONV_TOPIC){var o=n.groupAtInfoList,r=this.getModule(Fn),i=e.replace(S.CONV_GROUP,"");r.onConversationProxy({topicID:i,groupAtInfoList:o})}!0===t&&this.emitConversationUpdate(!0,!1)}}},{key:"updateReadReceiptInfo",value:function(e){var t=this,n=e.userID,o=void 0===n?void 0:n,r=e.groupID,i=void 0===r?void 0:r,a=e.readReceiptList;if(!Xt(a)){var s=[];if(at(o)){if(!at(i)){var c="".concat(S.CONV_GROUP).concat(i);a.forEach((function(e){var n=e.tinyID,o=e.clientTime,r=e.random,a=e.readCount,l=e.unreadCount,u="".concat(n,"-").concat(o,"-").concat(r),d=t._messageListHandler.getLocalMessage(c,u),p={groupID:i,messageID:u,readCount:0,unreadCount:0};d&&(et(a)&&(d.readReceiptInfo.readCount=a,p.readCount=a),et(l)&&(d.readReceiptInfo.unreadCount=l,p.unreadCount=l),s.push(p))}))}}else{var l="".concat(S.CONV_C2C).concat(o);a.forEach((function(e){var n=e.tinyID,r=e.clientTime,i=e.random,a="".concat(n,"-").concat(r,"-").concat(i),c=t._messageListHandler.getLocalMessage(l,a);if(c){c.readReceiptInfo.isPeerRead=!0;var u={userID:o,messageID:a,isPeerRead:!0};s.push(u)}}))}s.length>0&&this.emitOuterEvent(T.MESSAGE_READ_RECEIPT_RECEIVED,s)}}},{key:"recomputeGroupUnreadCount",value:function(e){var t=e.conversationID,n=e.count,o=this.getLocalConversation(t);if(o){var r=o.unreadCount,i=r-n;i<0&&(i=0),o.unreadCount=i,qe.l("".concat(this._n,".recomputeGroupUnreadCount from ").concat(r," to ").concat(i,", conversationID:").concat(t))}}},{key:"updateIsRead",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!At(t.type)){for(var o=[],r=0,i=n.length;r<i;r++)"in"!==n[r].flow?"out"!==n[r].flow||n[r].isRead||n[r].setIsRead(!0):o.push(n[r]);var a=0;if(t.type===S.CONV_C2C){var s=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;a=o.length-t.unreadCount-s}else a=o.length-t.unreadCount;for(var c=0;c<a&&!o[c].isRead;c++)o[c].setIsRead(!0)}}},{key:"deleteGroupAtTips",value:function(e){var t=this,n="".concat(this._n,".deleteGroupAtTips");qe.l("".concat(n));var o=this._conversationMap.get(e);if(!o)return Promise.resolve();var r=o.groupAtInfoList;if(0===r.length)return Promise.resolve();var i=void 0;e.startsWith(S.CONV_GROUP)&&(i=e.replace(S.CONV_GROUP,""));var a=_(r);if((St({groupID:i})||It(i))&&0===(a=r.filter((function(e){return!e.atTypeArray.includes(S.CONV_AT_ALL)}))).length)return this.clearGroupAtInfoList(e,!1),Promise.resolve();var s=this.getMyUserID();return this.request({protocolName:Bo,requestData:{messageListToDelete:a.map((function(e){return{from:e.from,to:s,messageSeq:e.__sequence,messageRandom:e.__random,groupID:at(e.topicID)?e.groupID:e.topicID}}))}}).then((function(){return qe.l("".concat(n," ok. count:").concat(r.length)),t.clearGroupAtInfoList(e,!1),Promise.resolve()})).catch((function(e){return qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"appendToMessageList",value:function(e){this._messageListHandler.pushIn(e)}},{key:"setMessageRandom",value:function(e){this.singlyLinkedList.set(e.random)}},{key:"deleteMessageRandom",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:"pushIntoMessageList",value:function(e,t,n){return!(!this._messageListHandler.pushIn(t,n)||this._isMessageFromCurrentInstance(t)&&!n||(e.push(t),0))}},{key:"_isMessageFromCurrentInstance",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:"revoke",value:function(e,t,n){return this._messageListHandler.revoke(e,t,n)}},{key:"getPeerReadTime",value:function(e){return this._peerReadTimeMap.get(e)}},{key:"recordPeerReadTime",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){if(e.startsWith(S.CONV_C2C)&&t>0){var n=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);if(n.length>0&&this.emitOuterEvent(T.MESSAGE_READ_BY_PEER,n),this._conversationMap.has(e)){var o=this._conversationMap.get(e).lastMessage;Xt(o)||o.fromAccount===this.getMyUserID()&&o.lastTime<=t&&!o.isPeerRead&&(o.isPeerRead=!0,this.emitConversationUpdate(!0,!1))}}}},{key:"updateMessageIsModifiedProperty",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:"setCompleted",value:function(e){qe.l("".concat(this._n,".setCompleted. conversationID:").concat(e)),this._completedMap.set(e,!0)}},{key:"updateRoamingMessageKeyAndTime",value:function(e,t,n){this._roamingMessageKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:n})}},{key:"updateRoamingMessageSequence",value:function(e,t){this._roamingMessageSequenceMap.set(e,t)}},{key:"getConversationList",value:function(e){var t=this,n="getConversationList",o="".concat(this._n,".").concat(n),r="pagingStatus:".concat(this._pagingStatus,", local conversation count:").concat(this._conversationMap.size,", options:").concat(e);if(qe.l("".concat(o,". ").concat(r)),this._pagingStatus===tn.REJECTED){var i=new cs(n);return i.setMessage(r),this.syncConversationList().then((function(){i.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return Ts({conversationList:n,isSyncCompleted:t._isSyncCompleted()})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}if(0===this._conversationMap.size){var a=new cs(n);return a.setMessage(r),this.syncConversationList().then((function(){a.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return Ts({conversationList:n,isSyncCompleted:t._isSyncCompleted()})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}var s=this._getConversationList(e);return qe.l("".concat(o,". returned conversation count:").concat(s.length)),Ds({conversationList:s,isSyncCompleted:this._isSyncCompleted()})}},{key:"_getConversationList",value:function(e){if(at(e))return this.getLocalConversationList();if(it(e))return 0===e.length?[]:this.getLocalConversationList().filter((function(t){return e.includes(t.conversationID)}));if(rt(e)){var t=e.type,n=e.markType,o=e.groupName;return this.getLocalConversationList().filter((function(e){return(t!==S.CONV_C2C&&t!==S.CONV_GROUP||e.type===t)&&(!nt(o)||e.conversationGroupList.includes(o))&&(!et(n)||e.markList.includes(n))}))}return[]}},{key:"_handleC2CPeerReadTime",value:function(){var e,t=w(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];r.type===S.CONV_C2C&&(qe.d("".concat(this._n,"._handleC2CPeerReadTime conversationID:").concat(o," peerReadTime:").concat(r.peerReadTime)),this.recordPeerReadTime(o,r.peerReadTime))}}catch(i){t.e(i)}finally{t.f()}}},{key:"_isPagingGetGroupListCompleted",value:function(){return this.getModule(Un).isPagingGetCompleted()}},{key:"_getLocalGroupCount",value:function(){return this.getModule(Un).getLocalGroupList().length}},{key:"_hasLocalGroup",value:function(e){return this.getModule(Un).hasLocalGroup(e.replace(S.CONV_GROUP,""))}},{key:"getConversationProfile",value:function(e){var t,n=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new Ys({conversationID:e,type:e.slice(0,3)===S.CONV_C2C?S.CONV_C2C:S.CONV_GROUP},this.isIntl()))._isInfoCompleted||t.type===S.CONV_SYSTEM)return Ds({conversation:t});if(Dt(e)&&!this._hasLocalGroup(e))return Ds({conversation:t});var o="".concat(this._n,".").concat("getConversationProfile"),r=new cs("getConversationProfile");return qe.l("".concat(o,". conversationID:").concat(e," remark:").concat(t.remark," lastMessage:"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(i){r.setNetworkType(n.getNetworkType()).setMessage("conversationID:".concat(e," unreadCount:").concat(i.data.conversation.unreadCount)).end();var a=n.getModule(Gn);if(a&&t.type===S.CONV_C2C){var s=e.replace(S.CONV_C2C,"");if(a.isMyFriend(s)){var c=a.getFriendRemark(s);t.remark!==c&&(t.remark=c,qe.l("".concat(o,". conversationID:").concat(e," patch remark:").concat(t.remark)))}}return qe.l("".concat(o," ok. conversationID:").concat(e)),i})).catch((function(t){return n.probeNetwork().then((function(n){var o=m(n,2),i=o[0],a=o[1];r.setError(t,i,a).setMessage("conversationID:".concat(e)).end()})),qe.e("".concat(o," failed. error:"),t),As(t)}))}},{key:"_updateUserOrGroupProfileCompletely",value:function(e){var t=this;return e.type===S.CONV_C2C?this.getModule(Nn).getUserProfile({userIDList:[e.toAccount]}).then((function(n){var o=n.data;return 0===o.length?As(new Ss({code:na})):(e.userProfile=o[0],e._isInfoCompleted=!0,t._unshiftConversation(e),Ds({conversation:e}))})):this.getModule(Un).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),Ds({conversation:e})}))}},{key:"_unshiftConversation",value:function(e){e instanceof Ys&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(_(this._conversationMap))),this._setStorageConversationList(),this.emitConversationUpdate(!0,!1))}},{key:"_onProfileUpdated",value:function(e){var t=this;e.data.forEach((function(e){var n=e.userID;if(n===t.getMyUserID())t._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar});else{var o=t._conversationMap.get("".concat(S.CONV_C2C).concat(n));o&&(o.userProfile=e)}}))}},{key:"_isSyncCompleted",value:function(){return this._pagingStatus===tn.RESOLVED}},{key:"_errorLog",value:function(e,t,n,o){var r=new Error("Params validate failed."),i="".concat(this.getErrorMessage("API_REFER")).concat(e);throw qe.w("[".concat(e,"] | ").concat(t," | ").concat(this.getErrorMessage(n,o),", ").concat(i)),qe.e("[".concat(e,"] Invalid ").concat(t,": type check failed for ").concat(t,".")),r}},{key:"_isValidConversationID",value:function(e){return Et(e)||Dt(e)||At(e)}},{key:"deleteConversation",value:function(e){var t=this,n="deleteConversation";return nt(e)||ot(e)||this._errorLog(n,"options","StringOrObjectRequiredLog"),nt(e)?(this._isValidConversationID(e)||this._errorLog(n,"options","InvalidConversationID",e),qe.l("".concat(this._n,".").concat(n," conversationID:").concat(e)),this.deleteConversationList({conversationIDList:[e],flag:1})):(it(e.conversationIDList)||this._errorLog(n,"conversationIDList","ArrayRequiredLog"),0===e.conversationIDList.length&&this._errorLog(n,"conversationIDList","NonEmptyArrayLog"),e.conversationIDList.forEach((function(e){t._isValidConversationID(e)||t._errorLog(n,"conversationIDList","InvalidConversationID",e)})),"clearHistoryMessage"in e&&"boolean"!=typeof e.clearHistoryMessage&&this._errorLog(n,"clearHistoryMessage","BooleanRequiredLog"),e.conversationIDList.length>100&&(e.conversationIDList=e.conversationIDList.slice(0,100)),this.deleteConversationList(e))}},{key:"deleteConversationList",value:function(e){var t=this,n=e.conversationIDList,o=void 0===n?[]:n,r=e.clearHistoryMessage,i=void 0===r||r,a=e.flag,s=void 0===a?0:a,c="".concat(this._n,".").concat("deleteConversationList");qe.l("".concat(c," conversationIDList.length:").concat(o.length," clearHistoryMessage:").concat(i));var l=new cs("deleteConversationList");return l.setMessage("conversationIDList:".concat(o)),Promise.all([this.rmLocalOnlyConversationList(o),this.rmLocalAndRemoteConversationList(o,i)]).then((function(e){l.setNetworkType(t.getNetworkType()).end();var n=[].concat(_(e[0]),_(e[1]));return 0===n.length?As(new Ss({code:ta})):(qe.l("".concat(c," ok")),Ds(1===s?{conversationID:n[0]}:{conversationIDList:n}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),qe.e("".concat(c," failed. error:"),e),As(e)}))}},{key:"rmLocalOnlyConversationList",value:function(e){var t=this;return e.filter((function(e){if(!t._conversationMap.has(e))return!1;var n=t.getLocalConversation(e).type;return n!==S.CONV_GROUP||t._hasLocalGroup(e)?n===S.CONV_SYSTEM&&(t.getModule(Un).deleteGroupSystemNotice({messageList:t._messageListHandler.getLocalMessageList(e)}),t.deleteLocalConversation(e),!0):(t.deleteLocalConversation(e),!0)}))}},{key:"rmLocalAndRemoteConversationList",value:function(e,t){var n=this,o={fromAccount:this.getMyUserID(),conversationList:[],clearHistoryMessage:t?1:0};return e.forEach((function(e){if(n._conversationMap.has(e)){var t=n.getLocalConversation(e).type;t===S.CONV_C2C?o.conversationList.push({toAccount:e.replace(t,""),type:1}):t===S.CONV_GROUP&&n._hasLocalGroup(e)&&o.conversationList.push({toGroupID:e.replace(t,""),type:2})}})),0===o.conversationList.length?[]:this.request({protocolName:Po,requestData:o}).then((function(e){var t=[];return e.data.resultList.length>0&&e.data.resultList.map((function(e){if(0===e.code){var n="".concat(1===e.type?S.CONV_C2C:S.CONV_GROUP).concat(e.to);t.push(n)}})),n.deleteLocalConversationList(t),t}))}},{key:"clearHistoryMessage",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0,toGroupID:void 0};if(!this._conversationMap.has(e))return As({code:ta});var o=this._conversationMap.get(e).type;if(o===S.CONV_C2C)n.type=1,n.toAccount=e.replace(S.CONV_C2C,"");else{if(o!==S.CONV_GROUP)return o===S.CONV_SYSTEM?(this.getModule(Un).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),Ds({conversationID:e})):As({code:oa});n.type=2,n.toGroupID=e.replace(S.CONV_GROUP,"")}var r="".concat(this._n,".").concat("clearHistoryMessage"),i=new cs("clearHistoryMessage");return i.setMessage("conversationID:".concat(e)),qe.l("".concat(r,". conversationID:").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:Uo,requestData:n})})).then((function(){i.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(r," ok")),t._messageListHandler.removeByConversationID(e),t.setCompleted(e);var n=t.getLocalConversation(e);return n&&(n.updateLastMessage(),t._sortConversationListAndEmitEvent()),Ds({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),qe.e("".concat(r," failed. error:"),e),As(e)}))}},{key:"pinConversation",value:function(e){var t=this,n=e.conversationID,o=e.isPinned;if(!this._conversationMap.has(n))return As({code:ta});var r=this.getLocalConversation(n);if(r.isPinned===o)return Ds({conversationID:n});var i="".concat(this._n,".").concat("pinConversation"),a=new cs("pinConversation");a.setMessage("conversationID:".concat(n," isPinned:").concat(o)),qe.l("".concat(i,". conversationID:").concat(n," isPinned:").concat(o));var s=null;return Et(n)?s={type:1,toAccount:n.replace(S.CONV_C2C,"")}:Dt(n)&&(s={type:2,groupID:n.replace(S.CONV_GROUP,"")}),this.request({protocolName:Go,requestData:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[s]}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(i," ok")),r.isPinned!==o&&(r.isPinned=o,t._sortConversationListAndEmitEvent()),Ts({conversationID:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(i," failed. error:"),e),As(e)}))}},{key:"setMessageRemindType",value:function(e){return this._messageRemindHandler.set(e)}},{key:"patchMessageRemindType",value:function(e){var t=e.ID,n=e.isC2CConversation,o=e.messageRemindType,r=!1,i=this.getLocalConversation(n?"".concat(S.CONV_C2C).concat(t):"".concat(S.CONV_GROUP).concat(t));return i&&i.messageRemindType!==o&&(i.messageRemindType=o,r=!0),qe.d("".concat(this._n,".patchMessageRemindType options:"),e,"ret:".concat(r)),r}},{key:"onC2CMessageRemindTypeSynced",value:function(e){var t=this,n="".concat(this._n,".onC2CMessageRemindTypeSynced");qe.d(n,e),e.dataList.forEach((function(e){if(!Xt(e.muteNotificationsSync)){var o,r=e.muteNotificationsSync,i=r.to,a=r.updateSequence,s=r.muteFlag;t._messageRemindHandler.setUpdateSequence(a),0===s?o=S.MSG_REMIND_ACPT_AND_NOTE:1===s?o=S.MSG_REMIND_DISCARD:2===s&&(o=S.MSG_REMIND_ACPT_NOT_NOTE);var c=0;t.patchMessageRemindType({ID:i,isC2CConversation:!0,messageRemindType:o})&&(c+=1),qe.l("".concat(n," updateCount:").concat(c)),c>=1&&t.emitConversationUpdate(!0,!1)}}))}},{key:"onGroupMessageRemindTypeSynced",value:function(e){qe.d("".concat(this._n,".onGroupMessageRemindTypeSynced options:"),e),this._messageRemindHandler.onGroupMessageRemindTypeUpdated(e)}},{key:"deleteLocalConversation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._conversationMap.has(e);if(qe.d("".concat(this._n,".deleteLocalConversation conversationID:").concat(e," has:").concat(n)),n&&(this._conversationMap.delete(e),this._roamingMessageKeyAndTimeMap.has(e)&&this._roamingMessageKeyAndTimeMap.delete(e),this._roamingMessageSequenceMap.has(e)&&this._roamingMessageSequenceMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),t)){var o=!this._isTopicConversation(e);this.emitConversationUpdate(o,!1)}}},{key:"deleteLocalConversationList",value:function(e){var t=this,n=0,o=!1;e.forEach((function(e){t._conversationMap.has(e)&&(n+=t._conversationMap.get(e).unreadCount||0,t.deleteLocalConversation(e,!1),o=!0)})),qe.l("".concat(this._n,".deleteLocalConversationList conversationIDList.length:").concat(e.length," isConvIDExisted:").concat(o)),o&&(this.emitConversationUpdate(!0,!1),n>0&&this.emitTotalUnreadMessageCountUpdate())}},{key:"isMessageSentByCurrentInstance",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:"modifyMessageList",value:function(e){if(e.startsWith(S.CONV_C2C)&&this._conversationMap.has(e)){var t=this._conversationMap.get(e),n=Date.now();this._messageListHandler.modifyMessageSentByPeer({conversationID:e,latestNick:t.userProfile.nick,latestAvatar:t.userProfile.avatar});var o=this.getModule(Nn).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:o.nick,latestAvatar:o.avatar}),qe.l("".concat(this._n,".modifyMessageList conversationID:").concat(e," cost ").concat(Date.now()-n," ms"))}}},{key:"updateUserProfileSpecifiedKey",value:function(e){qe.l("".concat(this._n,".updateUserProfileSpecifiedKey options:"),e);var t=e.conversationID,n=e.nick,o=e.avatar;if(this._conversationMap.has(t)){var r=this._conversationMap.get(t).userProfile;nt(n)&&r.nick!==n&&(r.nick=n),nt(o)&&r.avatar!==o&&(r.avatar=o),this.emitConversationUpdate(!0,!1)}}},{key:"_onMyProfileModified",value:function(e){var n=this,o=this.getLocalConversationList(),r=Date.now();o.forEach((function(o){n.modifyMessageSentByMe(t({conversationID:o.conversationID},e))})),qe.l("".concat(this._n,"._onMyProfileModified. modify all messages sent by me, cost ").concat(Date.now()-r," ms"))}},{key:"modifyMessageSentByMe",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:"modifyMessageSentByPeer",value:function(e){this._messageListHandler.modifyMessageSentByPeer(e)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:"pushIntoNoticeResult",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random)||(e.push(t),0))}},{key:"getLocalLastMessage",value:function(e){return this._messageListHandler.getLocalLastMessage(e)}},{key:"checkAndPatchRemark",value:function(){var e=Promise.resolve();if(0===this._conversationMap.size)return e;var t=this.getModule(Gn);if(!t)return e;var n=_(this._conversationMap.values()).filter((function(e){return e.type===S.CONV_C2C}));if(0===n.length)return e;var o=0;return n.forEach((function(e){var n=e.conversationID.replace(S.CONV_C2C,"");if(t.isMyFriend(n)){var r=t.getFriendRemark(n);e.remark!==r&&(e.remark=r,o+=1)}})),qe.l("".concat(this._n,".checkAndPatchRemark. c2c conversation count:").concat(n.length,", patched count:").concat(o)),e}},{key:"updateTopicConversation",value:function(e){this._updateLocalConversationList({conversationOptionsList:e,isFromGetConversations:!0})}},{key:"sendReadReceipt",value:function(e){var t=e[0],n=null;return t.conversationType===S.CONV_C2C?n=this._m.getModule(Pn):t.conversationType===S.CONV_GROUP&&(n=this._m.getModule(Un)),n?n.sendReadReceipt(e):As({code:Ra})}},{key:"getReadReceiptList",value:function(e){var t=e[0],n=null;return t.conversationType===S.CONV_C2C?n=this._m.getModule(Pn):t.conversationType===S.CONV_GROUP&&(n=this._m.getModule(Un)),n?n.getReadReceiptList(e):As({code:Ra})}},{key:"getLastMessageTime",value:function(e){var t=this.getLocalConversation(e);return t?t.lastMessage.lastTime:0}},{key:"getTotalUnreadMessageCount",value:function(){var e=this.getLocalConversationList(),t=0;return e.forEach((function(e){e.type!==S.CONV_SYSTEM&&(""!==e.messageRemindType&&e.messageRemindType!==S.MSG_REMIND_ACPT_AND_NOTE||(t+=e.unreadCount))})),t}},{key:"emitTotalUnreadMessageCountUpdate",value:function(){var e=this.getTotalUnreadMessageCount();this._convTotalUnreadCount!==e&&(qe.l("".concat(this._n,".emitTotalUnreadMessageCountUpdate from ").concat(this._convTotalUnreadCount," to ").concat(e)),this._convTotalUnreadCount=e,this.emitOuterEvent(T.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED))}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._pagingStatus=tn.NOT_START,this._messageListHandler.reset(),this._messageRemindHandler.reset(),this._roamingMessageKeyAndTimeMap.clear(),this._roamingMessageSequenceMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._remoteGroupReadSequenceMap.clear(),this._convTotalUnreadCount=0,this.resetReady()}}]),r}(lo),Qs=function(){function e(t){o(this,e),this._groupModule=t,this._n="GroupTipsHandler",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map}return i(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:"_checkCachedGroupTips",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);qe.l("".concat(e._n,"._checkCachedGroupTips groupID:").concat(n," hasLocalGroup:").concat(r," checkCount:").concat(o)),r?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:"onNewGroupTips",value:function(e){qe.d("".concat(this._n,".onReceiveGroupTips count:").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),n=t.eventDataList,o=t.result,r=t.AVChatRoomMessageList;r.length>0&&this._groupModule.onAVChatRoomMessage(r),n.length>0&&(this._groupModule.updateNextMessageSeq(n),this._groupModule.getModule(qn).onNewMessage({conversationOptionsList:n,isInstantMessage:!0})),o.length>0&&(this._groupModule.emitOuterEvent(T.MESSAGE_RECEIVED,o),this.handleMessageList(o))}},{key:"newGroupTipsStoredAndSummary",value:function(e){for(var n=this,o=e.event,r=e.dataList,i=null,a=[],s=[],c={},l=[],u=function(e,u){var d=kt(r[e]);if(6===o){if(n._groupModule.isGroupAttributesUpdatedNotice(d))return"continue";if(n._groupModule.isGroupCountersNotice(d))return"continue"}var p=d.groupProfile,h=p.groupID,f=p.communityType,g=void 0===f?0:f,v=p.topicID,m=void 0===v?void 0:v,_=p.invisible,y=void 0,b=n._groupModule.isMessageFromTopic(g,m);if(b){y=S.CONV_TOPIC,d.to=m;var M=n._groupModule.getModule(Fn);M.hasLocalTopic(h,m)||n._getTopicPendingMap.has(m)||(n._getTopicPendingMap.set(m,1),M.getTopicList({groupID:h,topicIDList:[m]}).finally((function(){n._getTopicPendingMap.delete(m)})))}var C=n._groupModule.hasLocalGroup(h);if(!C&&n._groupModule.isUnjoinedAVChatRoom(h))return"continue";if(!C&&!b)return n._cacheGroupTipsAndProbe({groupID:h,event:o,item:d}),"continue";if(n._groupModule.isMessageFromOrToAVChatroom(h))return d.event=o,l.push(d),"continue";if(d.currentUser=n._groupModule.getMyUserID(),d.conversationType=S.CONV_GROUP,(i=new ws(d)).setElement({type:S.MSG_GRP_TIP,content:t(t({},d.elements),{},{groupProfile:d.groupProfile})}),i.isSystemMessage=!1,1===_)return n._qualityStat(i),"continue";var k=n._groupModule.getModule(qn),w=i,T=w.conversationID,I=w.sequence;if(6===o)i._onlineOnlyFlag=!0,s.push(i);else if(!k.pushIntoNoticeResult(s,i))return"continue";if(n._groupModule.isMessageFromCommunityOfTopic(g,m))return"continue";if(6===o&&k.getLocalConversation(T))return"continue";6!==o&&n._qualityStat(i);var E=k.isRemoteRead({conversationID:T,sequence:I});if(at(c[T])){var D=0;"in"===i.flow&&(i._isExcludedFromUnreadCount||i._onlineOnlyFlag||E||(D=1)),c[T]=a.push({conversationID:T,unreadCount:D,type:at(y)?i.conversationType:y,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1}else{var A=c[T];a[A].type=i.conversationType,a[A].subType=i.conversationSubType,a[A].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||i._onlineOnlyFlag||E||a[A].unreadCount++)}},d=0,p=r.length;d<p;d++)u(d);return{eventDataList:a,result:s,AVChatRoomMessageList:l}}},{key:"_qualityStat",value:function(e){this._groupModule.getModule(no).addMessageSequence({key:ts,message:e})}},{key:"handleMessageList",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;case 8:t._onTopicProfileUpdated(e);break;default:qe.w("".concat(t._n,".handleMessageList unknown operationType:").concat(e.payload.operationType))}}))}},{key:"_onNewMemberComeIn",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&et(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r))}},{key:"_onMemberQuit",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&et(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r)),this._groupModule.getModule(Bn).deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:"_onMemberKickedOut",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&et(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r)),this._groupModule.getModule(Bn).deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:"_updateConversationGroupProfile",value:function(e){this._groupModule.getModule(qn).updateConversationGroupProfile([e])}},{key:"_onMemberSetAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(Bn);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(S.GRP_MBR_ROLE_ADMIN)}))}},{key:"_onMemberCancelledAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(Bn);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(S.GRP_MBR_ROLE_MEMBER)}))}},{key:"_onGroupProfileModified",value:function(e){var t=this,n=e.payload,o=n.newGroupProfile,r=n.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(r);Object.keys(o).forEach((function(e){"ownerID"===e?t._ownerChanged(i,o):i[e]=o[e]}));var a=!i.isSupportTopic;this._groupModule.emitGroupListUpdate(!0,a)}},{key:"_ownerChanged",value:function(e,t){var n=e.groupID,o=this._groupModule.getLocalGroupProfile(n),r=this._groupModule.getMyUserID();if(r===t.ownerID){o.updateGroup({selfInfo:{role:S.GRP_MBR_ROLE_OWNER}});var i=this._groupModule.getModule(Bn),a=i.getLocalGroupMemberInfo(n,r),s=this._groupModule.getLocalGroupProfile(n).ownerID,c=i.getLocalGroupMemberInfo(n,s);a&&a.updateRole(S.GRP_MBR_ROLE_OWNER),c&&c.updateRole(S.GRP_MBR_ROLE_MEMBER)}}},{key:"_onMemberInfoModified",value:function(e){var t=e.to,n=e.payload,o=n.groupProfile,r=n.memberList,i=o.groupID;It(t)&&this._updateTopicMuteTime(e);var a=this._groupModule.getModule(Bn);r.forEach((function(e){var t=a.getLocalGroupMemberInfo(i,e.userID);t&&et(e.muteTime)&&t.updateMuteUntil(e.muteTime)}))}},{key:"_updateTopicMuteTime",value:function(e){var t=e.to,n=e.payload,o=n.groupProfile,r=n.memberList,i=void 0===r?[]:r,a=this._groupModule.getModule(Fn),s=o.groupID,c=a.getLocalTopic(s,t);if(c){for(var l=!1,u=0;u<i.length;u++){var d=i[u];if(d.userID===this._groupModule.getMyUserID()&&d.muteTime>=0){c.updateSelfInfo({muteTime:d.muteTime}),l=!0;break}}l&&this._groupModule.emitOuterEvent(T.TOPIC_UPDATED,{groupID:s,topic:c})}}},{key:"_onTopicProfileUpdated",value:function(e){var n=e.payload,o=n.groupProfile.groupID,r=n.newTopicInfo;this._groupModule.getModule(Fn).onTopicProfileUpdated(t({groupID:o,topicID:e.to},r))}},{key:"_cacheGroupTips",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:"_deleteCachedGroupTips",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:"_notifyCachedGroupTips",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),qe.l("".concat(this._n,"._notifyCachedGroupTips groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupTipsAndProbe",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupTips(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===S.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),qe.l("".concat(this._n,"._cacheGroupTipsAndProbe groupID:").concat(n))}},{key:"reset",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear()}}]),e}(),ec=function(){function e(t){o(this,e),this._groupModule=t,this._n="CommonGroupHandler",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map,this._isPagingGetCompleted=!1,t.getInnerEmitterInstance().once(Os,this._initGroupList,this)}return i(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:"_checkCachedGroupMessage",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);qe.l("".concat(e._n,"._checkCachedGroupMessage groupID:").concat(n," hasLocalGroup:").concat(r," checkCount:").concat(o)),r?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:"_initGroupList",value:function(){var e=this;qe.l("".concat(this._n,"._initGroupList"));var t=new cs("getGroupListInStorage"),n=this._groupModule.getStorageGroupList();if(it(n)&&n.length>0){n.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var o=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:".concat(o)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:0").end();qe.l("".concat(this._n,"._initGroupList ok"))}},{key:"handleUpdateGroupLastMessage",value:function(e){var n="".concat(this._n,".handleUpdateGroupLastMessage");if(qe.l("".concat(n," conversation count:").concat(e.length,", local group count:").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var o,r,i,a=!1,s=0,c=e.length;s<c;s++)(o=e[s]).type===S.CONV_GROUP&&(r=o.conversationID.split(/^GROUP/)[1],(i=this._groupModule.getLocalGroupProfile(r))&&(i.lastMessage=t({},o.lastMessage),a=!0));a&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:"onNewGroupMessage",value:function(e){qe.d("".concat(this._n,".onNewGroupMessage count:").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),n=t.conversationOptionsList,o=t.messageList,r=t.AVChatRoomMessageList;r.length>0&&this._groupModule.onAVChatRoomMessage(r),this._groupModule.filterModifiedMessage(o),n.length>0&&(this._groupModule.updateNextMessageSeq(n),this._groupModule.getModule(qn).onNewMessage({conversationOptionsList:n,isInstantMessage:e.isInstantMessage||!0,updateUnreadCount:e.updateUnreadCount||!0}));var i=this._groupModule.filterUnmodifiedMessage(o);i.length>0&&this._groupModule.emitOuterEvent(T.MESSAGE_RECEIVED,i),o.length=0}},{key:"_newGroupMessageStoredAndSummary",value:function(e){var t=this,n=e.dataList,o=e.event,r=e.isInstantMessage,i=null,a=[],s=[],c=[],l={},u=this._groupModule.getModule($n),d=this._groupModule.getFileDownloadProxy(),p=n.length;p>1&&n.sort((function(e,t){return e.sequence-t.sequence}));for(var h=function(e){var p=kt(n[e]),h=p.groupProfile,f=h.groupID,g=h.communityType,v=void 0===g?0:g,m=h.topicID,_=void 0===m?void 0:m,y=h.invisible,b=void 0,M=t._groupModule.isMessageFromTopic(v,_);if(M){b=S.CONV_TOPIC,p.to=_;var C=t._groupModule.getModule(Fn);C.hasLocalTopic(f,_)||t._getTopicPendingMap.has(_)||(t._getTopicPendingMap.set(_,1),C.getTopicList({groupID:f,topicIDList:[_]}).finally((function(){t._getTopicPendingMap.delete(_)})))}var k=t._groupModule.hasLocalGroup(f);if(!k&&t._groupModule.isUnjoinedAVChatRoom(f))return"continue";if(!k&&!M)return t._cacheGroupMessageAndProbe({groupID:f,event:o,item:p}),"continue";if(t._groupModule.isMessageFromOrToAVChatroom(f))return p.event=o,c.push(p),"continue";if(p.currentUser=t._groupModule.getMyUserID(),p.conversationType=S.CONV_GROUP,p.isSystemMessage=!!p.isSystemMessage,i=new ws(p),p.elements=u.parseElements(p.elements,p.from),i.setElement(p.elements,d),1===y)return t._qualityStat(r,i),"continue";var w=1===n[e].isModified,T=t._groupModule.getModule(qn);if(T.isMessageSentByCurrentInstance(i)?i.isModified=w:w=!1,1===p.onlineOnlyFlag)i._onlineOnlyFlag=!0,T.isMessageSentByCurrentInstance(i)||s.push(i);else{if(t._groupModule.isMessageFromCommunityOfTopic(v,_))return s.push(i),"continue";if(!T.pushIntoMessageList(s,i,w))return"continue";t._qualityStat(r,i);var I=i,E=I.conversationID,D=I.sequence,A=T.isRemoteRead({conversationID:E,sequence:D});if(at(l[E])){var L=0;"in"===i.flow&&(i._isExcludedFromUnreadCount||A||(L=1)),l[E]=a.push({conversationID:E,unreadCount:L,type:at(b)?i.conversationType:b,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1}else{var R=l[E];a[R].type=at(b)?i.conversationType:b,a[R].subType=i.conversationSubType,a[R].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||A||a[R].unreadCount++)}}},f=0;f<p;f++)h(f);return{conversationOptionsList:a,messageList:s,AVChatRoomMessageList:c}}},{key:"_qualityStat",value:function(e,t){var n=this._groupModule.getModule(no);n.addMessageSequence({key:ts,message:t}),e&&t.clientTime>0&&n.addMessageDelay(t.clientTime)}},{key:"onGroupMessageRevoked",value:function(e){var t=this._groupModule.getModule(qn),n=[],o=null,r=!0;e.dataList.forEach((function(e){var i=e.elements.revokedInfos;at(i)||i.forEach((function(e){var i=Xt(e.topicID)?"GROUP".concat(e.groupID):"GROUP".concat(e.topicID);o=t.revoke(i,e.sequence,e.random);var a=e.revokerInfo&&e.revokerInfo.revoker;if(o)o.revoker=a,n.push(o);else{var s={conversationID:i,to:e.topicID||"",sequence:e.sequence,time:e.time,revoker:a};t.isLastMessageRevoked(s)&&(n.push(s),r=!1)}}))})),0!==n.length&&(t.onMessageRevoked(n),!0===r&&(qe.l("".concat(this._n,".onGroupMessageRevoked count:").concat(n.length)),this._groupModule.emitOuterEvent(T.MESSAGE_REVOKED,n)))}},{key:"_groupListTreeShaking",value:function(e){for(var t=new Map(_(this._groupModule.getGroupMap())),n=0,o=e.length;n<o;n++)t.delete(e[n].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)})),this._groupModule.getGroupMap().forEach((function(e,n){e.isSupportTopic&&t.delete(n)}));for(var r=_(t.keys()),i=0,a=r.length;i<a;i++)this._groupModule.deleteGroup(r[i])}},{key:"getGroupList",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupList"),o=new cs("getGroupList");qe.l("".concat(n));var r={introduction:"Introduction",notification:"Notification",createTime:"CreateTime",ownerID:"Owner_Account",lastInfoTime:"LastInfoTime",memberNum:"MemberNum",maxMemberNum:"MaxMemberNum",joinOption:"ApplyJoinOption",inviteOption:"InviteJoinOption",muteAllMembers:"ShutUpAllMember"},i=["Type","Name","FaceUrl","NextMsgSeq","LastMsgTime","AtInfoList","LastRecallTime"],a=[];e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){r[e]&&i.push(r[e])}));var s=(e||{}).isGroupWithTopicOnly,c=void 0!==s&&s;return this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:i,groupList:a,isGroupWithTopicOnly:c}).then((function(){qe.l("".concat(n," ok. count:").concat(a.length," isGroupWithTopicOnly:").concat(c)),c||t._groupListTreeShaking(a),t._groupModule.updateGroupMap(a);var e=t._groupModule.getLocalGroupList().length;o.setNetworkType(t._groupModule.getNetworkType()).setMessage("remote count:".concat(a.length,", after tree shaking, local count:").concat(e,", isGroupWithTopicOnly:").concat(c)).end(),t.tempConversationList&&(t.handleUpdateGroupLastMessage(t.tempConversationList),t.tempConversationList=null),t._groupModule.patchGroupMessageRemindType(),t._groupModule.recomputeUnreadCount(),t._groupModule.emitGroupListUpdate(!0,!c);var r=t._groupModule.getLocalGroupList();if(c){var i=r.filter((function(e){return!0===e.isSupportTopic}));return Ts({groupList:i})}return t._isPagingGetCompleted=!0,Ts({groupList:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"isPagingGetCompleted",value:function(){return this._isPagingGetCompleted}},{key:"_pagingGetGroupList",value:function(e){var t=this,n="".concat(this._n,".").concat("_pagingGetGroupList"),o=e.isCommunityRelay,r=void 0!==o&&o,i=e.isGroupWithTopicOnly,a=void 0!==i&&i,s=e.limit,c=e.offset,l=e.groupBaseInfoFilter,u=e.groupList;if(a)return this._pagingGetGroupListWithTopic({limit:s,offset:c,groupBaseInfoFilter:l,groupList:u});var d=new cs("_pagingGetGroupList");return this._groupModule.request({protocolName:Ko,requestData:{type:r?S.GRP_COMMUNITY:void 0,memberAccount:this._groupModule.getMyUserID(),limit:s,offset:c,responseFilter:{groupBaseInfoFilter:l,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]}}}).then((function(e){var o=e.data,i=o.groups,a=void 0===i?[]:i,p=o.totalCount;u.push.apply(u,_(a)),t._handleGroupAtInfoWithoutTopic(r,a);var h=c+s,f=!(p>h),g="offset:".concat(c," totalCount:").concat(p," isCompleted:").concat(f," ")+"currentCount:".concat(u.length," isCommunityRelay:").concat(r);return d.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(g)).end(),r||f?!r&&f?(qe.l("".concat(n," start to get community list")),c=0,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:l,groupList:u,isCommunityRelay:!0})):r&&!f?(c=h,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:l,groupList:u,isCommunityRelay:!0})):(qe.l("".concat(n," ok. totalCount:").concat(u.length)),Ts({groupList:u})):(c=h,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:l,groupList:u}))})).catch((function(e){return 11e3!==e.code&&t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],i=n[1];d.setMessage("isCommunityRelay:".concat(r)).setError(e,o,i).end()})),r?(11e3===e.code&&(d=null,qe.l("".concat(n," ok. community unavailable"))),Ds({groupList:u})):As(e)}))}},{key:"_pagingGetGroupListWithTopic",value:function(e){var t=this,n="".concat(this._n,"._pagingGetGroupListWithTopic"),o=e.limit,r=e.offset,i=e.groupBaseInfoFilter,a=e.groupList,s=new cs("pagingGetGroupListWithTopic");return this._groupModule.request({protocolName:Ko,requestData:{type:S.GRP_COMMUNITY,memberAccount:this._groupModule.getMyUserID(),limit:o,offset:r,responseFilter:{groupBaseInfoFilter:i,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]},isSupportTopic:1}}).then((function(e){var c=e.data,l=c.groups,u=void 0===l?[]:l,d=c.totalCount;a.push.apply(a,_(u));var p=r+o,h=!(d>p),f="offset:".concat(r," totalCount:").concat(d," isCompleted:").concat(h," ")+"currentCount:".concat(a.length);return s.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(f)).end(),h?(qe.l("".concat(n," ok. totalCount:").concat(a.length)),Ts({groupList:a})):(r=p,t._pagingGetGroupListWithTopic({limit:o,offset:r,groupBaseInfoFilter:i,groupList:a}))})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),As(e)}))}},{key:"_cacheGroupMessage",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:"_deleteCachedGroupMessage",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:"_notifyCachedGroupMessage",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),qe.l("".concat(this._n,"._notifyCachedGroupMessage groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupMessageAndProbe",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupMessage(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===S.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),qe.l("".concat(this._n,"._cacheGroupMessageAndProbe groupID:").concat(n))}},{key:"_handleGroupAtInfoWithoutTopic",value:function(e,n){var o=this;e&&0!==n.length&&n.forEach((function(e){var n=e.groupID,r=e.groupAtInfoList,i=[];at(r)||(r.forEach((function(e){i.push(t(t({},e),{},{groupID:n}))})),o._groupModule.getModule(qn).onNewGroupAtTips({dataList:i}))}))}},{key:"reset",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear(),this._isPagingGetCompleted=!1,this._groupModule.getInnerEmitterInstance().once(Os,this._initGroupList,this)}}]),e}(),tc=1,nc=2,oc=3,rc=4,ic=5,ac=function(){function e(t){o(this,e),this._groupModule=t,this._n="GroupAttributesHandler",this._groupAttributesMap=new Map,this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(xs,this._onCloudConfigUpdated,this)}return i(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_attr_cache_time");at(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:"isGroupAttributesUpdatedNotice",value:function(e){var t=e.to,n=e.elements.newGroupProfile,o=!at(n)&&!Xt(n.groupAttributeOption);return o&&this._onGroupAttributesUpdated({groupID:t,groupAttributeOption:n.groupAttributeOption}),o}},{key:"_onGroupAttributesUpdated",value:function(e){var t=this,n=e.groupID,o=e.groupAttributeOption,r=o.mainSequence,i=o.isWithChangedAttributeInfo,a=o.groupAttributeList,s=void 0===a?[]:a,c=o.operationType;if(qe.l("".concat(this._n,".onGroupAttributesUpdated. ")+"groupID:".concat(n," isWithChangedAttributeInfo:").concat(i," operationType:").concat(c)),!at(c)){this._groupAttributesCopy=this._getCachedAttributes({groupID:n});var l=this._getLocalGroupAttributes(n).localMainSequence;if(1===i&&r-l==1)return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:r,groupAttributeList:s,operationType:c}),void this._emitGroupAttributesUpdated(n);if(this._hasLocalGroupAttributes(n)){var u=this._getLocalGroupAttributes(n).avChatRoomKey;this._getGroupAttributes({groupID:n,avChatRoomKey:u}).then((function(){t._emitGroupAttributesUpdated(n)}))}}}},{key:"initGroupAttributesCache",value:function(e){var t=e.groupID,n=e.avChatRoomKey,o=void 0===n?void 0:n;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:o}),qe.l("".concat(this._n,".initGroupAttributesCache groupID:").concat(t," avChatRoomKey:").concat(o))}},{key:"initGroupAttributes",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._getLocalGroupAttributes(n),i=r.remoteMainSequence,a=r.avChatRoomKey,s=new cs("initGroupAttributes");return s.setMessage("groupID:".concat(n," avChatRoomKey:").concat(a," mainSequence:").concat(i)),this._groupModule.request({protocolName:Cr,requestData:{groupID:n,avChatRoomKey:a,mainSequence:i,groupAttributeList:this._transformGroupAttributes(o)}}).then((function(e){var r=e.data,i=r.mainSequence,a=_(r.groupAttributeList);return a.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:i,groupAttributeList:a,operationType:tc}),s.setNetworkType(t._groupModule.getNetworkType()).end(),qe.l("".concat(t._n,".").concat("initGroupAttributes"," ok. groupID:").concat(n)),Ts({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),As(e)}))}},{key:"setGroupAttributes",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupAttributes"),o=e.groupID,r=e.groupAttributes,i=this._getLocalGroupAttributes(o),a=i.remoteMainSequence,s=i.avChatRoomKey,c=i.attributes,l=this._transformGroupAttributes(r);l.forEach((function(e){var t=e.key;e.sequence=0,c.has(t)&&(e.sequence=c.get(t).sequence)}));var u=new cs("setGroupAttributes");return u.setMessage("groupID:".concat(o," groupAttributes:").concat(JSON.stringify(r))),qe.l("".concat(n,". groupID:").concat(o," mainSequence:").concat(a)),this._groupModule.request({protocolName:kr,requestData:{groupID:o,avChatRoomKey:s,mainSequence:a,groupAttributeList:l}}).then((function(e){var i=e.data,a=i.mainSequence,s=_(i.groupAttributeList);return s.forEach((function(e){e.value=r[e.key]})),t._refreshCachedGroupAttributes({groupID:o,remoteMainSequence:a,groupAttributeList:s,operationType:nc}),u.setNetworkType(t._groupModule.getNetworkType()).end(),qe.l("".concat(n," ok.")),Ts({groupAttributes:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),As(e)}))}},{key:"deleteGroupAttributes",value:function(e){var t=this,n=e.groupID,o=e.keyList,r=void 0===o?[]:o,i=this._getLocalGroupAttributes(n),a=i.remoteMainSequence,s=i.avChatRoomKey,c=i.attributes,l=_(c.keys()),u=Tr,d=oc,p={groupID:n,avChatRoomKey:s,mainSequence:a},h=[];r.length>0&&(l=[],u=wr,d=rc,r.forEach((function(e){var t=0;c.has(e)&&(t=c.get(e).sequence,l.push(e)),h.push({key:e,sequence:t})})),p.groupAttributeList=h);var f=new cs("deleteGroupAttributes");return f.setMessage("groupID:".concat(n," mainSequence:").concat(a," keyList:").concat(r," protocolName:").concat(u)),this._groupModule.request({protocolName:u,requestData:p}).then((function(e){var o=e.data.mainSequence;return t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:h,operationType:d}),f.setNetworkType(t._groupModule.getNetworkType()).end(),qe.l("".concat(t._n,".").concat("deleteGroupAttributes"," ok. groupID:").concat(n)),Ts({keyList:l})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];f.setError(e,o,r).end()})),As(e)}))}},{key:"getGroupAttributes",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupAttributes"),o=e.groupID,r=this._getLocalGroupAttributes(o),i=r.avChatRoomKey,a=r.lastUpdateTime,s=r.localMainSequence,c=r.remoteMainSequence,l=new cs("getGroupAttributes");if(l.setMessage("groupID:".concat(o," localMainSequence:").concat(s," remoteMainSequence:").concat(c," keyList:").concat(e.keyList)),Date.now()-a>=this.CACHE_EXPIRE_TIME||s<c)return this._getGroupAttributes({groupID:o,avChatRoomKey:i}).then((function(r){l.setMoreMessage("get attributes from remote. count:".concat(r.length)).setNetworkType(t._groupModule.getNetworkType()).end(),qe.l("".concat(n," from remote. groupID:").concat(o));var i=t._getCachedAttributes(e);return Ts({groupAttributes:i})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),As(e)}));l.setMoreMessage("get attributes from cache").setNetworkType(this._groupModule.getNetworkType()).end(),qe.l("".concat(n," from cache. groupID:").concat(o));var u=this._getCachedAttributes(e);return Ds({groupAttributes:u})}},{key:"_getGroupAttributes",value:function(e){var n=this,o=0;return at(e.avChatRoomKey)||(o=1),this._groupModule.request({protocolName:Sr,requestData:t(t({},e),{},{groupType:o})}).then((function(t){var o=t.data,r=o.mainSequence,i=o.groupAttributeList,a=_(i);return at(r)||n._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:r,groupAttributeList:a,operationType:ic}),qe.l("".concat(n._n,"._getGroupAttributes ok. groupID:").concat(e.groupID)),i})).catch((function(e){return As(e)}))}},{key:"_refreshCachedGroupAttributes",value:function(e){var t=e.groupID,n=e.remoteMainSequence,o=e.groupAttributeList,r=e.operationType;if(this._hasLocalGroupAttributes(t)){var i=this._getLocalGroupAttributes(t),a=i.localMainSequence;if(r===ic||n-a==1)i.remoteMainSequence=n,i.localMainSequence=n,i.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:i,groupAttributeList:o,operationType:r});else{if(a===n)return;i.remoteMainSequence=n}this._groupAttributesMap.set(t,i);var s="operationType:".concat(r," localMainSequence:").concat(a," remoteMainSequence:").concat(n);qe.l("".concat(this._n,"._refreshCachedGroupAttributes. ").concat(s))}}},{key:"_getCachedAttributes",value:function(e){var t=e.groupID,n=e.keyList,o=void 0===n?[]:n,r={};if(this._hasLocalGroupAttributes(t)){var i=this._getLocalGroupAttributes(t).attributes;if(o.length>0)o.forEach((function(e){i.has(e)&&(r[e]=i.get(e).value)}));else{var a,s=w(i.keys());try{for(s.s();!(a=s.n()).done;){var c=a.value;r[c]=i.get(c).value}}catch(l){s.e(l)}finally{s.f()}}}return r}},{key:"_updateCachedAttributes",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList,o=e.operationType;o!==oc?o!==rc?(o===tc&&t.attributes.clear(),n.forEach((function(e){var n=e.key,o=e.value,r=e.sequence;t.attributes.set(n,{value:o,sequence:r})}))):n.forEach((function(e){t.attributes.delete(e.key)})):t.attributes.clear()}},{key:"_hasLocalGroupAttributes",value:function(e){return this._groupAttributesMap.has(e)}},{key:"_getLocalGroupAttributes",value:function(e){return this._hasLocalGroupAttributes(e)||this.initGroupAttributesCache({groupID:e}),this._groupAttributesMap.get(e)}},{key:"_transformGroupAttributes",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_emitGroupAttributesUpdated",value:function(e){var t=this._getCachedAttributes({groupID:e}),n=this._computeAttrChangedInfo(t),o=n.updatedKeyList,r=n.deletedKeyList;this._groupModule.emitOuterEvent(T.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t,updatedKeyList:o,deletedKeyList:r})}},{key:"_computeAttrChangedInfo",value:function(e){var t=this,n=[],o=[];return Object.keys(e).forEach((function(o){e[o]!==t._groupAttributesCopy[o]&&n.push(o)})),Object.keys(this._groupAttributesCopy).forEach((function(t){at(e[t])&&o.push(t)})),this._groupAttributesCopy={},qe.l("".concat(this._n,"._computeAttrChangedInfo update count:").concat(n.length,", delete count:").concat(o.length)),{updatedKeyList:n,deletedKeyList:o}}},{key:"deleteLocalGroupAttributes",value:function(e){this._hasLocalGroupAttributes(e)&&this._groupAttributesMap.delete(e)}},{key:"reset",value:function(){this._groupAttributesMap.clear(),this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4}}]),e}(),sc="Set",cc="Increase",lc="Decrease",uc=function(){function e(t){o(this,e),this._groupModule=t,this._n="GroupCountersHandler",this._groupCountersMap=new Map,this.EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(xs,this._onCloudConfigUpdated,this)}return i(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_counter_expire_time");at(e)||(this.EXPIRE_TIME=Number(e))}},{key:"isGroupCountersNotice",value:function(e){var t=e.to,n=e.elements.groupCounterInfo,o=!1;return Xt(n)||(this._onGroupCountersUpdated({groupID:t,groupCounterInfo:n}),o=!0),o}},{key:"_onGroupCountersUpdated",value:function(e){var t=this,n=e.groupID;e.groupCounterInfo.forEach((function(e){var o=e.type,r=e.groupCounterSeq,i=e.counterList,a=void 0===i?[]:i;0!==o&&2!==o||(t._updateLocalGroupCounters({groupID:n,groupCounterSeq:r,counterList:a}),a.forEach((function(e){t._groupModule.emitOuterEvent(T.GROUP_COUNTER_UPDATED,{groupID:n,key:e.key,value:e.value})}))),1===o&&t._deleteLocalGroupCounters({groupID:n,groupCounterSeq:r,counterList:a})})),qe.l("".concat(this._n,"._onGroupCountersUpdated groupID:").concat(n))}},{key:"initGroupCountersCache",value:function(e){var t=e.groupID,n=e.avChatRoomKey;this._groupCountersMap.set(t,{lastUpdateTime:0,groupCounterSeq:0,counters:new Map,avChatRoomKey:n}),qe.l("".concat(this._n,".initGroupCountersCache groupID:").concat(t," avChatRoomKey:").concat(n))}},{key:"setGroupCounters",value:function(e){var t=this;if(!this._groupModule.canIUse(V.GRP_COUNTER))return As({code:Va});var n="".concat(this._n,".setGroupCounters"),o=e.groupID,r=e.counters,i=this._convertObjectToList(r),a=this._getLocalGroupCounters(o).avChatRoomKey,s="groupID:".concat(o," count:").concat(i.length),c=new cs("setGroupCounters");return c.setMessage("".concat(s)),qe.l("".concat(n,". ").concat(s)),this._updateGroupCounters({groupID:o,counterList:i,avChatRoomKey:a,mode:sc}).then((function(e){return c.end(),qe.l("".concat(n," ok.")),Ts({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"increaseGroupCounter",value:function(e){var t=this;if(!this._groupModule.canIUse(V.GRP_COUNTER))return As({code:Va});var n="".concat(this._n,".increaseGroupCounters"),o=e.groupID,r=e.key,i=e.value,a=this._getLocalGroupCounters(o).avChatRoomKey,s="groupID:".concat(o," key:").concat(r," value:").concat(i),c=new cs("increaseGroupCounter");c.setMessage("".concat(s)),qe.l("".concat(n,". ").concat(s));var l=[{key:r,value:i}];return this._updateGroupCounters({groupID:o,counterList:l,avChatRoomKey:a,mode:cc}).then((function(e){return c.end(),qe.l("".concat(n," ok.")),Ts({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"decreaseGroupCounter",value:function(e){var t=this;if(!this._groupModule.canIUse(V.GRP_COUNTER))return As({code:Va});var n="".concat(this._n,".decreaseGroupCounter"),o=e.groupID,r=e.key,i=e.value,a=this._getLocalGroupCounters(o).avChatRoomKey,s="groupID:".concat(o," key:").concat(r," value:").concat(i),c=new cs("decreaseGroupCounter");c.setMessage("".concat(s)),qe.l("".concat(n,". ").concat(s));var l=[{key:r,value:i}];return this._updateGroupCounters({groupID:o,counterList:l,avChatRoomKey:a,mode:lc}).then((function(e){return c.end(),qe.l("".concat(n," ok.")),Ts({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"getGroupCounters",value:function(e){var t=this;if(!this._groupModule.canIUse(V.GRP_COUNTER))return As({code:Va});var n="".concat(this._n,".getGroupCounters"),o=e.groupID,r=e.keyList,i=void 0===r?[]:r,a=this._getLocalGroupCounters(o),s=a.avChatRoomKey,c=a.lastUpdateTime,l=new cs("getGroupCounters");if(l.setMessage("groupID:".concat(o)),Date.now()-c>=this.EXPIRE_TIME)return this._getRemoteGroupCounters({groupID:o,avChatRoomKey:s}).then((function(e){l.setMoreMessage("from remote. count:".concat(e.length)).end(),qe.l("".concat(n," from remote. groupID:").concat(o));var r=t._getLocalCounters(o,i);return Ts({counters:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),As(e)}));l.setMoreMessage("from cache").end(),qe.l("".concat(n," from cache. groupID:").concat(o));var u=this._getLocalCounters(o,i);return Ds({counters:u})}},{key:"_getRemoteGroupCounters",value:function(e){var n=this;return this._groupModule.request({protocolName:Lr,requestData:t({},e)}).then((function(t){var o=t.data,r=o.counterList,i=void 0===r?[]:r,a=o.groupCounterSeq;return n._updateLocalGroupCounters({groupID:e.groupID,counterList:i,groupCounterSeq:a}),qe.l("".concat(n._n,"._getRemoteGroupCounters ok. groupID:").concat(e.groupID)),i})).catch((function(e){return As(e)}))}},{key:"_convertObjectToList",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_updateGroupCounters",value:function(e){var n="".concat(this._n,"._updateGroupCounters"),o=e.groupID,r=e.avChatRoomKey,i=e.mode;return qe.l("".concat(n,". groupID:").concat(o," avChatRoomKey:").concat(r," mode:").concat(i)),this._groupModule.request({protocolName:Ar,requestData:t({},e)}).then((function(e){qe.l("".concat(n," ok."));var t=e.data.counterList,o={};return(void 0===t?[]:t).forEach((function(e){var t=e.key,n=e.value;o[t]=n})),o})).catch((function(e){return As(e)}))}},{key:"_hasLocalGroupCounters",value:function(e){return this._groupCountersMap.has(e)}},{key:"_getLocalGroupCounters",value:function(e){return this._hasLocalGroupCounters(e)||this.initGroupCountersCache({groupID:e}),this._groupCountersMap.get(e)}},{key:"_updateLocalGroupCounters",value:function(e){var t=e.groupID,n=e.counterList,o=void 0===n?[]:n,r=e.groupCounterSeq;if(this._hasLocalGroupCounters(t)){var i=this._getLocalGroupCounters(t),a=i.counters,s=i.avChatRoomKey,c=i.groupCounterSeq;if(r>0&&r<c)return;o.forEach((function(e){var t=e.key,n=e.value;a.set(t,n)})),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:r,counters:a,avChatRoomKey:s})}}},{key:"_deleteLocalGroupCounters",value:function(e){var t=e.groupID,n=e.counterList,o=void 0===n?[]:n,r=e.groupCounterSeq;if(this._hasLocalGroupCounters(t)){var i=this._getLocalGroupCounters(t),a=i.counters,s=i.avChatRoomKey;o.forEach((function(e){a.delete(e.key)})),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:r,counters:a,avChatRoomKey:s})}}},{key:"_getLocalCounters",value:function(e,t){var n={};if(!this._hasLocalGroupCounters(e))return n;var o=this._getLocalGroupCounters(e).counters;if(t.length>0)t.forEach((function(e){o.has(e)&&(n[e]=o.get(e))}));else{var r,i=w(o.keys());try{for(i.s();!(r=i.n()).done;){var a=r.value;n[a]=o.get(a)}}catch(s){i.e(s)}finally{i.f()}}return n}},{key:"reset",value:function(){this._groupCountersMap.clear(),this.EXPIRE_TIME=3e4}}]),e}(),dc=function(){function e(t){o(this,e);var n=t.manager,r=t.groupID,i=t.onInit,a=t.onSuccess,s=t.onFail;this._n="Polling",this._manager=n,this._groupModule=n._groupModule,this._onInit=i,this._onSuccess=a,this._onFail=s,this._groupID=r,this._timeoutID=-1,this._isRunning=!1,this._protocolName=mr}return i(e,[{key:"start",value:function(){var e=this._groupModule.isLoggedIn();e||(this._protocolName=_r),qe.l("".concat(this._n,".start pollingInterval:").concat(this._manager.getPollingInterval()," isLoggedIn:").concat(e)),this._isRunning=!0,this._request()}},{key:"isRunning",value:function(){return this._isRunning}},{key:"_request",value:function(){var e=this,t=this._onInit(this._groupID);this._groupModule.request({protocolName:this._protocolName,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.getPollingInterval()))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.MAX_POLLING_INTERVAL))}))}},{key:"stop",value:function(){qe.l("".concat(this._n,".stop")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}}]),e}(),pc={3:!0,4:!0,5:!0,6:!0,17:!0},hc=function(){function e(t){o(this,e),this._groupModule=t,this._n="AVChatRoomHandler",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new js(200),this.messageIDLinkedList=new js(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0,this._startBroadcastSeq=1,this._broadcastMessageIDMap=new Map,this.DEFAULT_POLLING_SIMPLIFIED_MSG=0}return i(e,[{key:"hasJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this._joinedGroupMap.has(e)}},{key:"getJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0?_(this._joinedGroupMap.keys()):null}},{key:"_updateRequestData",value:function(e){var n=this._pollingRequestInfoMap.get(e);return e===_(this._pollingInstanceMap.keys())[0]?t(t({},n),{},{startBroadcastSeq:this._startBroadcastSeq,simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG}):t(t({},n),{},{simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG})}},{key:"_handleSuccess",value:function(e,t){var n=t.data,o=n.key,r=n.nextSeq,i=n.rspMsgList,a=n.errorCode,s=n.nextBroadcastSeq,c=n.broadcastMessageList;if(0!==a){var l=this._pollingRequestInfoMap.get(e),u=new cs("longPollingAVError"),d=l?"".concat(l.key,"-").concat(l.startSeq):"requestInfo is undefined";u.setMessage("".concat(e,"-").concat(d,"-").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;nt(o)&&et(r)&&this._pollingRequestInfoMap.set(e,{key:o,startSeq:r}),et(s)&&s>this._startBroadcastSeq&&(this._startBroadcastSeq=s),it(i)&&i.length>0?(i.forEach((function(e){e.to=e.groupID})),this.onMessage(i)):(this._pollingNoMessageCount+=1,this._pollingNoMessageCount===this.DEFAULT_POLLING_NO_MESSAGE_COUNT&&(this._pollingInterval=this.DEFAULT_POLLING_INTERVAL+this.DEFAULT_POLLING_INTERVAL_PLUS)),this._onBroadcastMessage(c)}}},{key:"_handleFailure",value:function(e,t){}},{key:"onMessage",value:function(e){if(it(e)&&0!==e.length){0!==this._pollingNoMessageCount&&(this._pollingNoMessageCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL);var t=null,n=[],o=this._getModule(qn),r=this._getModule(no),i=e.length;i>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var a=this._getModule(Vn),s=0;s<i;s++){var c=this.restoreMessageFromSimplified(e[s]);if(pc[c.event]){if(6===c.event){if(this._groupModule.isGroupAttributesUpdatedNotice(c))continue;if(this._groupModule.isGroupCountersNotice(c))continue}this.receivedMessageCount+=1,t=this.packMessage(c,c.event);var l=1===c.isModified,u=1===c.isHistoryMessage;if((a.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var d=t.conversationID;if(this.receivedMessageCount%50==0?this._getModule(Zn).detectFirstRound(d,this.sequencesLinkedList.data()):this.receivedMessageCount%80==0&&this._getModule(Zn).detectSecondRound(d,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var p=this.sequencesLinkedList.tail().value,h=t.sequence-p;h>1&&h<=20?this._getModule(Zn).onMessageMaybeLost(d,p+1,h-1):h<-1&&h>=-20&&this._getModule(Zn).onMessageMaybeLost(d,t.sequence+1,Math.abs(h)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var f=!1;if(this._isMessageSentByCurrentInstance(t)?l&&(f=!0,t.isModified=l,o.updateMessageIsModifiedProperty(t)):f=!0,f){if(t.conversationType===S.CONV_SYSTEM&&5===t.payload.operationType&&this._onGroupDismissed(t.payload.groupProfile.groupID),!u&&t.conversationType!==S.CONV_SYSTEM){var g=t.conversationID.replace(S.CONV_GROUP,"");this._pollingInstanceMap.has(g)?this._groupModule.isLoggedIn()&&r.addMessageSequence({key:os,message:t}):(t.type!==S.MSG_GRP_TIP&&t.clientTime>0&&r.addMessageDelay(t.clientTime),r.addMessageSequence({key:ns,message:t}))}n.push(t)}}}else qe.w("".concat(this._n,".onMessage unknown event:").concat(c.event))}if(0!==n.length){this._groupModule.filterModifiedMessage(n);var v=this.packConversationOption(n);v.length>0&&this._getModule(qn).onNewMessage({conversationOptionsList:v,isInstantMessage:!0}),qe.d("".concat(this._n,".onMessage count:").concat(n.length)),this._checkMessageStacked(n);var m=this._groupModule.filterUnmodifiedMessage(n);m.length>0&&this._groupModule.emitOuterEvent(T.MESSAGE_RECEIVED,m),n.length=0}}}},{key:"isBroadcastOrNormal",value:function(e){return 3===e||17===e}},{key:"isGroupTip",value:function(e){return 4===e||6===e}},{key:"isGroupSystemNotice",value:function(e){return 5===e}},{key:"restoreGroupTipElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.groupJoinType||(e.groupJoinType=1);var t=e.operatorInfo,n=void 0===t?{}:t,o=e.operatorID,r=e.userIDList,i=void 0===r?[]:r,a=n.userID,s=void 0===a?o:a,c=n.avatar,l=void 0===c?"":c,u=n.nick,d=void 0===u?"":u;e.operatorInfo={userID:s,avatar:l,nick:d};var p=i.map((function(e){return{userID:e}}));return e.memberInfoList=e.memberInfoList||p,e}},{key:"restoreMessageFromSimplified",value:function(e){var n=e.event;if(this.isBroadcastOrNormal(n)&&(e.cloudCustomData=e.cloudCustomData||"",e.elements=e.elements.map((function(e){if(e.type===S.MSG_CUSTOM){var n=e.content,o=void 0===n?{}:n;e.content=t({data:"",description:"",extension:""},o)}return e}))),(this.isGroupTip(n)||this.isGroupSystemNotice(n))&&(e.from=e.from||"@TIM#SYSTEM"),this.isGroupTip(n)){e.elements=this.restoreGroupTipElements(e.elements);var o=e.elements,r=void 0===o?{}:o,i=r.operationType,s=r.operatorInfo;if(1===i){var c=[{userID:(void 0===s?{}:s).userID}];r.memberInfoList=r.memberInfoList||c}}if(this.isGroupSystemNotice(n)){var l=e.elements,u=l.memberInfoList,d=l.operatorInfo;u||(u=void 0===d?{}:d),e.elements.memberInfoList=t({userID:e.elements.operatorID,avatar:"",nick:""},u),e.elements=t({authentication:"",remarkInfo:"",messageKey:1e3*e.time},e.elements);var p=Object.keys(e.elements).filter((function(e){return"operatorInfo"!==e})).reduce((function(n,o){return t(t({},n),{},a({},o,e.elements[o]))}),{});e.elements=p}return e}},{key:"_onGroupDismissed",value:function(e){qe.l("".concat(this._n,"._onGroupDismissed groupID:").concat(e)),this._groupModule.deleteLocalGroupAndConversation(e),this.reset(e)}},{key:"_checkMessageStacked",value:function(e){var t="MessageStacked",n=e.length;n>=100&&(this._groupModule.outputWarning(t),this._reportMessageStackedCount<5&&(new cs(t).setNetworkType(this._groupModule.getNetworkType()).setMessage("count:".concat(n," groupID:").concat(_(this._joinedGroupMap.keys()))).setLevel("warning").end(),this._reportMessageStackedCount+=1))}},{key:"_isMessageSentByCurrentInstance",value:function(e){return!!this._getModule(qn).isMessageSentByCurrentInstance(e)}},{key:"packMessage",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?S.CONV_SYSTEM:S.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new ws(e),o=this.packElements(e,t);return n.setElement(o,this._groupModule.getFileDownloadProxy()),n}},{key:"packElements",value:function(e,n){return 4===n||6===n?(this._updateMemberCountByGroupTips(e),{type:S.MSG_GRP_TIP,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}):5===n?{type:S.MSG_GRP_SYS_NOTICE,content:t(t({},e.elements),{},{groupProfile:t(t({},e.groupProfile),{},{groupID:e.groupID})})}:this._getModule($n).parseElements(e.elements,e.from)}},{key:"packConversationOption",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var o=e[n],r=o.conversationID;if(t.has(r)){var i=t.get(r);i.lastMessage=o,"in"===o.flow&&i.unreadCount++}else t.set(r,{conversationID:o.conversationID,unreadCount:"out"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})}return _(t.values())}},{key:"_updateMemberCountByGroupTips",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,o=void 0===n?void 0:n;if(!Xt(o)){var r=o.onlineMemberNum,i=void 0===r?0:r,a=o.expireTime,s=void 0===a?this.DEFAULT_EXPIRE_TIME:a,c=this._onlineMemberCountMap.get(t)||{},l=Date.now();Xt(c)?Object.assign(c,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:l,memberCount:i,expireTime:s}):(c.latestUpdateTime=l,c.memberCount=i),qe.d("".concat(this._n,"._updateMemberCountByGroupTips info:"),c),this._onlineMemberCountMap.set(t,c)}}},{key:"_onBroadcastMessage",value:function(e){if(!Xt(e)){for(var t=[],n=e.length,o=null,r=0;r<n;r++){var i=this.restoreMessageFromSimplified(e[r]);pc[i.event]?((o=this.packMessage(i,i.event)).isBroadcastMessage=!0,this._broadcastMessageIDMap.has(o.ID)||(t.push(o),this._broadcastMessageIDMap.set(o.ID,1))):qe.w("".concat(this._n,"._onBroadcastMessage unknown event:").concat(i.event))}t.length>0&&this._groupModule.emitOuterEvent(T.MESSAGE_RECEIVED,t)}}},{key:"start",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var n=new dc({manager:this,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});n.start(),this._pollingInstanceMap.set(e,n),qe.l("".concat(this._n,".start groupID:").concat(e))}}},{key:"handleJoinResult",value:function(e){var t=this;return this._preCheck().then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._joinedGroupMap.set(r,o),t._groupModule.updateGroupMap([o]),t._groupModule.deleteUnjoinedAVChatRoom(r),t._groupModule.emitGroupListUpdate(!0,!1),at(n)?Ds({status:We,group:o}):Promise.resolve()}))}},{key:"startRunLoop",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,o=e.group,r=e.startSeq,i=void 0===r?0:r,a=o.groupID;return t._pollingRequestInfoMap.set(a,{key:n,startSeq:i}),t.start(a),t._groupModule.isLoggedIn()?Ds({status:We,group:o}):Ds({status:We})}))}},{key:"_preCheck",value:function(){if(this._getModule(Vn).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=m(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this._groupModule.isLoggedIn()){if(n.selfInfo.role!==S.GRP_MBR_ROLE_OWNER&&n.ownerID!==this._groupModule.getMyUserID())return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:"joinWithoutAuth",value:function(e){var t=this,n=e.groupID,o="".concat(this._n,".").concat("joinWithoutAuth"),r=new cs("joinWithoutAuth");return this._groupModule.request({protocolName:er,requestData:e}).then((function(e){var i=e.data.longPollingKey;if(t._groupModule.probeNetwork().then((function(e){var t=m(e,2),o=(t[0],t[1]);r.setNetworkType(o).setMessage("groupID:".concat(n," longPollingKey:").concat(i)).end(!0)})),at(i))return As({code:ga});qe.l("".concat(o," ok. groupID:").concat(n)),t._getModule(qn).setCompleted("".concat(S.CONV_GROUP).concat(n));var a=new Ws({groupID:n});return t.startRunLoop({group:a,longPollingKey:i}),Ts({status:We})})).catch((function(e){return qe.e("".concat(o," failed. groupID:").concat(n," error:"),e),t._groupModule.probeNetwork().then((function(t){var o=m(t,2),i=o[0],a=o[1];r.setError(e,i,a).setMessage("groupID:".concat(n)).end(!0)})),As(e)})).finally((function(){t._groupModule.getModule(zn).reportAtOnce()}))}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return Xt(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return Ts({memberCount:e.memberCount})})).catch((function(e){return As(e)}))):Ds({memberCount:t.memberCount})}},{key:"_getGroupOnlineMemberCount",value:function(e){var t=this,n="".concat(this._n,".").concat("_getGroupOnlineMemberCount");return this._groupModule.request({protocolName:yr,requestData:{groupID:e}}).then((function(o){var r=t._onlineMemberCountMap.get(e)||{},i=o.data,a=i.onlineMemberNum,s=void 0===a?0:a,c=i.expireTime,l=void 0===c?t.DEFAULT_EXPIRE_TIME:c;qe.l("".concat(n," ok. groupID:").concat(e," memberCount:").concat(s," expireTime:").concat(l));var u=Date.now();return Xt(r)&&(r.lastReqTime=u),t._onlineMemberCountMap.set(e,Object.assign(r,{lastSyncTime:u,latestUpdateTime:u,memberCount:s,expireTime:l})),{memberCount:s}})).catch((function(o){return qe.w("".concat(n," failed. error:"),o),new cs("_getGroupOnlineMemberCount").setCode(o.code).setMessage("groupID:".concat(e," error:").concat(JSON.stringify(o))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(o)}))}},{key:"_getModule",value:function(e){return this._groupModule.getModule(e)}},{key:"setPollingInterval",value:function(e){at(e)||(et(e)?this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=e:this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=parseInt(e,10))}},{key:"setPollingIntervalPlus",value:function(e){at(e)||(et(e)?this.DEFAULT_POLLING_INTERVAL_PLUS=e:this.DEFAULT_POLLING_INTERVAL_PLUS=parseInt(e,10))}},{key:"setPollingNoMessageCount",value:function(e){at(e)||(et(e)?this.DEFAULT_POLLING_NO_MESSAGE_COUNT=e:this.DEFAULT_POLLING_NO_MESSAGE_COUNT=parseInt(e,10))}},{key:"setPollingSimplifiedMessage",value:function(e){at(e)||"0"!==e&&"1"!==e||(this.DEFAULT_POLLING_SIMPLIFIED_MSG=parseInt(e,10))}},{key:"getPollingInterval",value:function(){return this._pollingInterval}},{key:"onAVChatRoomMemberBanned",value:function(e){var t=e.payload.groupProfile.groupID;qe.l("".concat(this._n,".onAVChatRoomMemberBanned groupID:").concat(t)),this._groupModule.deleteLocalGroupAndConversation(t),this.reset(t)}},{key:"restartPolling",value:function(){qe.l("".concat(this._n,".restartPolling count:").concat(this._pollingInstanceMap.size));var e,t=w(this._pollingInstanceMap.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.stop(),n.start()}}catch(o){t.e(o)}finally{t.f()}}},{key:"reset",value:function(e){if(e){qe.l("".concat(this._n,".reset groupID:").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{qe.l("".concat(this._n,".reset all"));var n,o=w(this._pollingInstanceMap.values());try{for(o.s();!(n=o.n()).done;)n.value.stop()}catch(r){o.e(r)}finally{o.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear(),this._broadcastMessageIDMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=300,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0}}]),e}(),fc=1,gc=15,vc=function(){function e(t){o(this,e),this._groupModule=t,this._n="GroupSystemNoticeHandler",this.pendencyMap=new Map}return i(e,[{key:"onNewGroupSystemNotice",value:function(e){var t=e.dataList,n=e.isSyncingEnded,o=e.isInstantMessage;qe.d("".concat(this._n,".onReceiveSystemNotice count:").concat(t.length));var r=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:o}),i=r.eventDataList,a=r.result;i.length>0&&(this._groupModule.getModule(qn).onNewMessage({conversationOptionsList:i,isInstantMessage:o}),this._onReceivedGroupSystemNotice({result:a,isInstantMessage:o})),o?a.length>0&&this._groupModule.emitOuterEvent(T.MESSAGE_RECEIVED,a):!0===n&&this._clearGroupSystemNotice()}},{key:"newSystemNoticeStoredAndSummary",value:function(e){var n=e.notifiesList,o=e.isInstantMessage,r=null,i=n.length,a=0,s=[],c={conversationID:S.CONV_SYSTEM,unreadCount:0,type:S.CONV_SYSTEM,subType:null,lastMessage:null};for(a=0;a<i;a++){var l=n[a],u=l.groupProfile,d=u.communityType,p=void 0===d?0:d,h=u.topicID,f=void 0===h?void 0:h,g=l.elements,v=g.topicIDList,m=void 0===v?void 0:v,_=g.operationType;if(!(2!==p||Xt(f)&&Xt(m))){if([17,18,20].includes(_)){this._handleTopicSystemNotice(l);continue}Xt(f)||(l.to=f)}l.elements.operationType!==gc&&(l.currentUser=this._groupModule.getMyUserID(),l.conversationType=S.CONV_SYSTEM,l.conversationID=S.CONV_SYSTEM,(r=new ws(l)).setElement({type:S.MSG_GRP_SYS_NOTICE,content:t(t({},l.elements),{},{groupProfile:t({},l.groupProfile)})}),r.isSystemMessage=!0,(1===r.sequence&&1===r.random||2===r.sequence&&2===r.random)&&(r.sequence=mt(),r.random=mt(),r.generateMessageID(),qe.l("".concat(this._n,".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:").concat(r.ID))),this._groupModule.getModule(qn).pushIntoNoticeResult(s,r)&&(o?c.unreadCount++:r.setIsRead(!0),c.subType=r.conversationSubType))}return c.lastMessage=s[s.length-1],{eventDataList:s.length>0?[c]:[],result:s}}},{key:"_clearGroupSystemNotice",value:function(){var e=this;this._getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set("".concat(t.from,"_").concat(t.groupID,"_").concat(t.to),t)}));var n=e._groupModule.getModule(qn).getLocalMessageList(S.CONV_SYSTEM),o=[];n.forEach((function(t){var n=t.payload,r=n.operatorID,i=n.operationType,a=n.groupProfile;if(i===fc){var s="".concat(r,"_").concat(a.groupID,"_").concat(a.to),c=e.pendencyMap.get(s);c&&et(c.handled)&&0!==c.handled&&o.push(t)}})),e.deleteGroupSystemNotice({messageList:o})}))}},{key:"deleteGroupSystemNotice",value:function(e){var t=this,n="".concat(this._n,".deleteGroupSystemNotice");return it(e.messageList)&&0!==e.messageList.length?(qe.l("".concat(n," ")+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:vr,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:S.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){qe.l("".concat(n," ok"));var o=t._groupModule.getModule(qn);return e.messageList.forEach((function(e){o.deleteLocalMessage(e)})),Ts()})).catch((function(e){return qe.e("".concat(n," error:"),e),As(e)}))):Ds()}},{key:"_getPendencyList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,o=void 0===n?void 0:n,r=t.startTime,i=void 0===r?0:r,a=t.limit,s=void 0===a?20:a;return this._groupModule.request({protocolName:gr,requestData:{type:o,startTime:i,limit:s,handleAccount:this._groupModule.getMyUserID()}}).then((function(t){var n=t.data.pendencyList;return 0!==t.data.nextStartTime?e._getPendencyList({startTime:t.data.nextStartTime}).then((function(e){return[].concat(_(n),_(e))})):n}))}},{key:"getGroupApplicationList",value:function(){var e=this;return this._getPendencyList().then((function(t){return e._getPendencyList({type:S.GRP_COMMUNITY}).then((function(n){return t.push.apply(t,_(n)),e._handlePendencyResult(t)})).catch((function(n){return e._handlePendencyResult(t)}))}))}},{key:"_handlePendencyResult",value:function(e){var t=this,n=[];return e.forEach((function(e){t.pendencyMap.set("".concat(e.from,"_").concat(e.groupID,"_").concat(e.to),e),0===e.handled&&n.push({applicant:e.from,applicantNick:e.fromUserNickName,groupName:e.groupName,groupID:e.groupID,authentication:e.authentication,messageKey:e.time,applicationType:e.applicationType,userID:e.userID})})),Ds({applicationList:n})}},{key:"_onReceivedGroupSystemNotice",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:case 3:case 6:case 11:case 12:case 15:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e);break;case 20:t._onMessageRemindTypeSynced(e);break;case 21:t._groupModule.onAVChatRoomMemberBanned(e)}}))}},{key:"_onApplyGroupRequestAgreed",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;if(n){t._groupModule.updateGroupMap([n]);var o=!n.isSupportTopic;t._groupModule.emitGroupListUpdate(!0,o)}}))}},{key:"_onMemberKicked",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onGroupDismissed",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var n=this._groupModule._AVChatRoomHandler;n&&n.checkJoinedAVChatRoomByID(t)&&n.reset(t)}},{key:"_onInviteGroup",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:"_onQuitGroup",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onSetManager",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(Bn).getLocalGroupMemberInfo(o,n);r&&r.updateRole(S.GRP_MBR_ROLE_ADMIN)}},{key:"_onDeleteManager",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(Bn).getLocalGroupMemberInfo(o,n);r&&r.updateRole(S.GRP_MBR_ROLE_MEMBER)}},{key:"_onMessageRemindTypeSynced",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.messageRemindType;this._groupModule.getModule(qn).onGroupMessageRemindTypeSynced({groupID:t,messageRemindType:n})}},{key:"_handleTopicSystemNotice",value:function(e){var t=e.groupProfile,n=t.groupID,o=t.topicID,r=e.elements,i=r.operationType,a=r.topicIDList,s=r.messageRemindType,c=this._groupModule.getModule(Fn);17===i?c.onTopicCreated({groupID:n,topicID:o}):18===i?c.onTopicDeleted({groupID:n,topicIDList:a}):20===i&&c.onTopicMessageRemindTypeUpdated({groupID:n,topicID:o,messageRemindType:s})}},{key:"reset",value:function(){this.pendencyMap.clear()}}]),e}(),mc=["relayFlag"],_c=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="GroupModule",t._commonGroupHandler=null,t._AVChatRoomHandler=null,t._groupSystemNoticeHandler=null,t._commonGroupHandler=new ec(f(t)),t._groupAttributesHandler=new ac(f(t)),t._groupCountersHandler=new uc(f(t)),t._AVChatRoomHandler=new hc(f(t)),t._groupTipsHandler=new Qs(f(t)),t._groupSystemNoticeHandler=new vc(f(t)),t.groupMap=new Map,t._unjoinedAVChatRoomList=new Map,t._receiptDetailCompleteMap=new Map,t.getInnerEmitterInstance().on(xs,t._onCloudConfigUpdated,f(t)),t}return i(r,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("polling_interval"),t=this.getCloudConfig("polling_interval_plus"),n=this.getCloudConfig("polling_no_msg_count"),o=this.getCloudConfig("polling_simplified_msg");this._AVChatRoomHandler&&(qe.l("".concat(this._n,"._onCloudConfigUpdated pollingInterval:").concat(e)+" pollingIntervalPlus:".concat(t," pollingNoMessageCount:").concat(n)+" pollingSimplifiedMessage:".concat(o)),this._AVChatRoomHandler.setPollingInterval(e),this._AVChatRoomHandler.setPollingIntervalPlus(t),this._AVChatRoomHandler.setPollingNoMessageCount(n),this._AVChatRoomHandler.setPollingSimplifiedMessage(o))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:"guardForAVChatRoom",value:function(e){var t=this;if(e.conversationType===S.CONV_GROUP){var n=It(e.to)?Vt(e.to):e.to;return this.hasLocalGroup(n)?Ds():this.getGroupProfile({groupID:n}).then((function(o){var r=o.data.group.type;if(qe.l("".concat(t._n,".guardForAVChatRoom. groupID:").concat(n," type:").concat(r)),r===S.GRP_AVCHATROOM){var i=Ti;return As(new Ss({code:i,message:t.getErrorMessage(i,e.from,n),data:{message:e}}))}return Ds()}))}return Ds()}},{key:"checkJoinedAVChatRoomByID",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"onNewGroupMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:"updateNextMessageSeq",value:function(e){var t=this;if(it(e)){var n=this.getModule(Fn);e.forEach((function(e){var o=e.conversationID.replace(S.CONV_GROUP,"");It(o)&&n.updateLastMessage(o,e.lastMessage),t.groupMap.has(o)&&(t.groupMap.get(o).nextMessageSeq=e.lastMessage.sequence+1)}))}}},{key:"onNewGroupTips",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:"onGroupMessageRevoked",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:"onNewGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:"onGroupMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){var n=e.elements.groupMessageReadNotice;if(!at(n)){var o=t.getModule(qn);n.forEach((function(e){var n=e.groupID,r=e.topicID,i=void 0===r?void 0:r,a=e.lastMessageSeq;qe.d("".concat(t._n,".onGroupMessageReadNotice groupID:").concat(n," lastMessageSeq:").concat(a));var s="".concat(S.CONV_GROUP).concat(n),c=!0;Xt(i)||(s="".concat(S.CONV_GROUP).concat(i),c=!1),o.updateIsReadAfterReadReport({conversationID:s,lastMessageSeq:a}),o.updateUnreadCount(s,c),o.clearGroupAtInfoList(s,c)}))}}))}},{key:"onReadReceiptList",value:function(e){var t=this;qe.d("".concat(this._n,".onReadReceiptList options:"),JSON.stringify(e)),e.dataList.forEach((function(e){var n=e.groupProfile,o=e.elements,r=n.groupID,i=t.getModule(qn),a=o.readReceiptList;i.updateReadReceiptInfo({groupID:r,readReceiptList:a})}))}},{key:"onGroupMessageModified",value:function(e){qe.d("".concat(this._n,".onGroupMessageModified options:"),JSON.stringify(e));var n=this.getModule(qn);e.dataList.forEach((function(e){n.onMessageModified(t(t({},e),{},{conversationType:S.CONV_GROUP,to:e.topicID?e.topicID:e.groupID}))}))}},{key:"deleteGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:"initGroupMap",value:function(e){this.groupMap.set(e.groupID,new Ws(e))}},{key:"deleteGroup",value:function(e){this.groupMap.delete(e)}},{key:"updateGroupMap",value:function(e){var t,n=this,o=this.getModule(qn);e.forEach((function(e){t=e.groupID,n.groupMap.has(t)?n.groupMap.get(t).updateGroup(e):(n.groupMap.set(t,new Ws(e)),o.deleteGroupRomaingMessageInfo(t))}));var r,i=this.getMyUserID(),a=w(this.groupMap);try{for(a.s();!(r=a.n()).done;){var s=m(r.value,2)[1];s.selfInfo.userID=i,"Owner"===s.selfInfo.role&&(s.ownerID=i)}}catch(c){a.e(c)}finally{a.f()}this._setStorageGroupList()}},{key:"getStorageGroupList",value:function(){return this.getModule(Hn).getItem("groupMap")}},{key:"_setStorageGroupList",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!Tt(t)})).filter((function(e){return!e.isSupportTopic})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(Hn).setItem("groupMap",e)}},{key:"getGroupMap",value:function(){return this.groupMap}},{key:"getLocalGroupList",value:function(){return _(this.groupMap.values())}},{key:"getLocalGroupProfile",value:function(e){return this.groupMap.get(e)}},{key:"sortLocalGroupList",value:function(){var e=_(this.groupMap).filter((function(e){var t=m(e,2);return t[0],!Xt(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(_(e))}},{key:"updateGroupLastMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:"emitGroupListUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();if(e&&this.emitOuterEvent(T.GROUP_LIST_UPDATED),t){var o=JSON.parse(JSON.stringify(n));this.getModule(qn).updateConversationGroupProfile(o)}}},{key:"patchGroupMessageRemindType",value:function(){var e=this.getLocalGroupList(),t=this.getModule(qn),n=0;e.forEach((function(e){!0===t.patchMessageRemindType({ID:e.groupID,isC2CConversation:!1,messageRemindType:e.selfInfo.messageRemindType})&&(n+=1)})),qe.l("".concat(this._n,".patchGroupMessageRemindType count:").concat(n))}},{key:"recomputeUnreadCount",value:function(){var e=this.getLocalGroupList(),t=this.getModule(qn);e.forEach((function(e){var n=e.groupID,o=e.selfInfo,r=o.excludedUnreadSequenceList,i=o.readedSequence;if(it(r)){var a=0;r.forEach((function(t){t>=i&&t<=e.nextMessageSeq-1&&(a+=1)})),a>=1&&t.recomputeGroupUnreadCount({conversationID:"".concat(S.CONV_GROUP).concat(n),count:a})}}))}},{key:"getMyNameCardByGroupID",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:""}},{key:"isPagingGetCompleted",value:function(){return!!this._commonGroupHandler&&this._commonGroupHandler.isPagingGetCompleted()}},{key:"getGroupList",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):Ds()}},{key:"getGroupProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupProfile"),o=new cs("getGroupProfile"),r=e.groupID,i=e.groupCustomFieldFilter;qe.l("".concat(n," groupID:").concat(r));var a={groupIDList:[r],responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember","InviteJoinOption"],groupCustomFieldFilter:i,memberInfoFilter:["Role","JoinTime","MsgSeq","MsgFlag","NameCard"]}};return this.getGroupProfileAdvance(a).then((function(e){var i,a=e.data,s=a.successGroupList,c=a.failureGroupList;return qe.l("".concat(n," ok")),c.length>0?As(c[0]):(Tt(s[0].type)&&!t.hasLocalGroup(r)?i=new Ws(s[0]):(t.updateGroupMap(s),i=t.getLocalGroupProfile(r)),i.isSupportTopic||t.getModule(qn).updateConversationGroupProfile([i]),o.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(r," type:").concat(i.type," muteAllMembers:").concat(i.muteAllMembers," ownerID:").concat(i.ownerID)).end(),Ts({group:i}))})).catch((function(r){return t.probeNetwork().then((function(t){var n=m(t,2),i=n[0],a=n[1];o.setError(r,i,a).setMessage("groupID:".concat(e.groupID)).end()})),qe.e("".concat(n," failed. error:"),r),As(r)}))}},{key:"getGroupProfileAdvance",value:function(e){var n="".concat(this._n,".getGroupProfileAdvance"),o=e.groupIDList;it(o)&&o.length>50&&(this.outputWarning("GetGroupProfileLimit"),o.length=50);var r=[],i=[];o.forEach((function(e){St({groupID:e})?i.push(e):r.push(e)}));var a=[];if(r.length>0){var s=this._getGroupProfileAdvance(t(t({},e),{},{groupIDList:r}));a.push(s)}if(i.length>0){var c=this._getGroupProfileAdvance(t(t({},e),{},{groupIDList:i,relayFlag:r.length>0}));a.push(c)}return Promise.all(a).then((function(e){var t=[],n=[];return e.forEach((function(e){t.push.apply(t,_(e.successGroupList)),n.push.apply(n,_(e.failureGroupList))})),Ts({successGroupList:t,failureGroupList:n})})).catch((function(e){return qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"_getGroupProfileAdvance",value:function(e){var t=this,n=e.relayFlag,o=void 0!==n&&n,r=h(e,mc);return this.request({protocolName:Yo,requestData:r}).then((function(e){qe.l("".concat(t._n,"._getGroupProfileAdvance ok."));var n=e.data.groups;return{successGroupList:n.filter((function(e){return at(e.errorCode)||0===e.errorCode})),failureGroupList:n.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new Ss({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}))}})).catch((function(t){return o&&St({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:As(t)}))}},{key:"createGroup",value:function(e){var n=this,o="".concat(this._n,".").concat("createGroup"),r=e.type,i=e.groupID;if(e.name&&!1===this._filterProfanity("name",e))return As({code:Ha});if(e.introduction&&!1===this._filterProfanity("introduction",e))return As({code:Ha});if(e.notification&&!1===this._filterProfanity("notification",e))return As({code:Ha});if(!["Public","Private","ChatRoom","AVChatRoom","Community"].includes(r))return As({code:ia});if(!St({type:r})){if(!Xt(i)&&St({groupID:i}))return As({code:sa});e.isSupportTopic=void 0}if(Tt(r)&&!at(e.memberList)&&e.memberList.length>0&&(e.memberList=void 0),this._canIUseJoinOption(r)||at(e.joinOption)||(e.joinOption=void 0),St({type:r})){if(!Xt(i)&&!St({groupID:i}))return As({code:sa});e.isSupportTopic=!0===e.isSupportTopic?1:0}var a=new cs("createGroup");qe.l("".concat(o," options:"),e);var s=null,c=[];return this.request({protocolName:Xo,requestData:t(t({},e),{},{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(r){var i=r.data,l=i.groupID,u=i.overLimitUserIDList,d=void 0===u?[]:u;if(s=l,c=d,a.setNetworkType(n.getNetworkType()).setMessage("groupType:".concat(e.type," groupID:").concat(l," overLimitUserIDList=").concat(d)).end(),qe.l("".concat(o," ok groupID:").concat(l," overLimitUserIDList:"),d),e.type===S.GRP_AVCHATROOM)return n.getGroupProfile({groupID:l});if(e.type===S.GRP_COMMUNITY&&1===e.isSupportTopic)return n.getGroupProfile({groupID:l});Xt(e.memberList)||Xt(d)||(e.memberList=e.memberList.filter((function(e){return-1===d.indexOf(e.userID)}))),n.updateGroupMap([t(t({},e),{},{groupID:l})]);var p=n.getModule(On),h=p.createCustomMessage({to:l,conversationType:S.CONV_GROUP,payload:{data:"group_create",extension:n.isIntl()?"".concat(n.getMyUserID()," created a group"):"".concat(n.getMyUserID(),"创建群组")}});return p.sendMessageInstance(h),n.emitGroupListUpdate(),n.getGroupProfile({groupID:l})})).then((function(e){var t=e.data.group,n=t.selfInfo,o=n.nameCard,r=n.joinTime;return t.updateSelfInfo({nameCard:o,joinTime:r,messageRemindType:S.MSG_REMIND_ACPT_AND_NOTE,role:S.GRP_MBR_ROLE_OWNER}),Ts({group:t,overLimitUserIDList:c})})).catch((function(r){if(a.setMessage("groupType:".concat(e.type)),n.probeNetwork().then((function(e){var t=m(e,2),n=t[0],o=t[1];a.setError(r,n,o).end()})),10010===r.code||10007===r.code){n.updateGroupMap([t(t({},e),{},{groupID:s})]);var i=n.getLocalGroupProfile(s);return qe.l("".concat(o," success, but failed to get group profile.")),Ts({group:i,overLimitUserIDList:c})}return qe.e("".concat(o," failed. error:"),r),As(r)}))}},{key:"dismissGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("dismissGroup");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===S.GRP_WORK)return As(new Ss({code:da}));var o=new cs("dismissGroup");return o.setMessage("groupID:".concat(e)),qe.l("".concat(n," groupID:").concat(e)),this.request({protocolName:Jo,requestData:{groupID:e}}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),Ts({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"updateGroupProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("updateGroupProfile");if(this.hasLocalGroup(e.groupID)){var o=this.getLocalGroupProfile(e.groupID).type;this._canIUseJoinOption(o)||at(e.joinOption)||(qe.w("".concat(n," joinOption is unavailable for Work/Meeting/AVChatRoom")),e.joinOption=void 0)}if(at(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers="On":e.muteAllMembers="Off"),e.name&&!1===this._filterProfanity("name",e))return As({code:Ha});if(e.introduction&&!1===this._filterProfanity("introduction",e))return As({code:Ha});if(e.notification&&!1===this._filterProfanity("notification",e))return As({code:Ha});var r=new cs("updateGroupProfile");return r.setMessage(JSON.stringify(e)),qe.l("".concat(n," groupID:").concat(e.groupID)),this.request({protocolName:Zo,requestData:e}).then((function(){return r.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok")),t.hasLocalGroup(e.groupID)&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList()),Ts({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),qe.l("".concat(n," failed. error:"),e),As(e)}))}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(io);if(!n)return!0;var o=n.filterText(t[e],K),r=o.isAllowedToSend,i=o.modifiedText;return!0===r&&(t[e]=i,!0)}},{key:"joinGroup",value:function(e){var t=this,n=e.groupID,o=e.type,r="".concat(this._n,".joinGroup");if(o===S.GRP_WORK)return As({code:aa});if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return Ds({status:S.JOIN_STATUS_ALREADY_IN_GROUP});var i=new cs("applyJoinGroup");return this.getGroupProfile({groupID:n}).then((function(){return i.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," joinedStatus:").concat(S.JOIN_STATUS_ALREADY_IN_GROUP)).end(),Ds({status:S.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(o){return i.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," unjoined")).end(),qe.w("".concat(r," ").concat(n," was unjoined, now join!")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return qe.l("".concat(r," groupID:").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:"applyJoinGroup",value:function(e){var n=this,o="".concat(this._n,".").concat("applyJoinGroup"),r=e.groupID;if(!Xt(e.applyMessage)&&!1===this._filterProfanity("applyMessage",e))return As({code:Ha});var i=new cs("applyJoinGroup"),a=t({},e),s=this.canIUse(V.AVCHATROOM_HISTORY_MSG);return s&&(a.historyMessageFlag=1),this.getModule(qn).deleteTopicRoamingMessageInfo(r),this.request({protocolName:Qo,requestData:a}).then((function(e){var t=e.data,a=t.joinedStatus,c=t.longPollingKey,l=t.startSeq,u=t.avChatRoomFlag,d=t.avChatRoomKey,p=t.messageList,h="groupID:".concat(r," joinedStatus:").concat(a," longPollingKey:").concat(c," startSeq:").concat(l)+" avChatRoomFlag:".concat(u," canGetAVChatRoomHistoryMessage:").concat(s,",")+" history message count:".concat(Xt(p)?0:p.length);switch(i.setNetworkType(n.getNetworkType()).setMessage("".concat(h)).end(),qe.l("".concat(o," ok. ").concat(h)),a){case Ke:return Ts({status:Ke});case We:return n.getGroupProfile({groupID:r}).then((function(e){var t=e.data.group;return n._handleJoinResult({group:t,avChatRoomFlag:u,longPollingKey:c,startSeq:l,avChatRoomKey:d,messageList:p})})).catch((function(){var e=new Ws({groupID:r});return n._handleJoinResult({group:e,avChatRoomFlag:u,longPollingKey:c,startSeq:l,avChatRoomKey:d,messageList:p})}));default:var f=new Ss({code:ha});return qe.e("".concat(o," failed. error:"),f),As(f)}})).catch((function(e){return i.setMessage("groupID:".concat(r)),n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}},{key:"_handleJoinResult",value:function(e){var t,n=this,o=e.group,r=e.avChatRoomFlag,i=e.longPollingKey,a=e.startSeq,s=e.avChatRoomKey,c=e.messageList,l=o.groupID;return 1===r?(this.getModule(qn).setCompleted("".concat(S.CONV_GROUP).concat(l)),this._groupAttributesHandler.initGroupAttributesCache({groupID:l,avChatRoomKey:s}),this._groupCountersHandler.initGroupCountersCache({groupID:l,avChatRoomKey:s}),(t=at(i)?this._AVChatRoomHandler.handleJoinResult({group:o}):this._AVChatRoomHandler.startRunLoop({group:o,longPollingKey:i,startSeq:a})).then((function(){n._onAVChatRoomHistoryMessage(c)})),t):(this.emitGroupListUpdate(!0,!1),Ts({status:We,group:o}))}},{key:"quitGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("quitGroup");qe.l("".concat(n," groupID:").concat(e));var o=this.checkJoinedAVChatRoomByID(e);if(!o&&!this.hasLocalGroup(e))return As({code:pa});if(o&&!this.isLoggedIn())return qe.l("".concat(n," anonymously ok. groupID:").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),Ds({groupID:e});var r=new cs("quitGroup");return r.setMessage("groupID:".concat(e)),this.request({protocolName:tr,requestData:{groupID:e}}).then((function(){return r.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),o&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),Ts({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"searchGroupByID",value:function(e){var t=this,n="".concat(this._n,".").concat("searchGroupByID"),o={groupIDList:[e]},r=new cs("searchGroupByID");return r.setMessage("groupID:".concat(e)),qe.l("".concat(n," groupID:").concat(e)),this.request({protocolName:nr,requestData:o}).then((function(e){var o=e.data.groupProfile;if(0!==o[0].errorCode)throw new Ss({code:o[0].errorCode,message:o[0].errorInfo});return r.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok")),Ts({group:new Ws(o[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),qe.w("".concat(n," failed. error:"),e),As(e)}))}},{key:"changeGroupOwner",value:function(e){var t=this,n="".concat(this._n,".").concat("changeGroupOwner");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===S.GRP_AVCHATROOM)return As({code:la});if(e.newOwnerID===this.getMyUserID())return As({code:ua});var o=new cs("changeGroupOwner");return o.setMessage("groupID:".concat(e.groupID," newOwnerID:").concat(e.newOwnerID)),qe.l("".concat(n," groupID:").concat(e.groupID)),this.request({protocolName:or,requestData:e}).then((function(){o.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok"));var r=e.groupID,i=e.newOwnerID;t.groupMap.get(r).ownerID=i;var a=t.getModule(Bn).getLocalGroupMemberList(r);if(a instanceof Map){var s=a.get(t.getMyUserID());at(s)||(s.updateRole("Member"),t.groupMap.get(r).selfInfo.role="Member");var c=a.get(i);at(c)||c.updateRole("Owner")}return t.emitGroupListUpdate(!0,!1),Ts({group:t.groupMap.get(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"getGroupApplicationList",value:function(){return this._groupSystemNoticeHandler.getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){var t,n,o,r,i,a=this,s="".concat(this._n,".").concat("handleGroupApplication"),c=e.handleAction,l=e.handleMessage,u=e.message,d=e.application;u?(t=u.payload.operatorID,n=u.payload.groupProfile.groupID,o=u.payload.authentication,r=u.payload.messageKey):d&&(t=d.applicant,n=d.groupID,o=d.authentication,r=d.messageKey);var p=rr;d&&2===d.applicationType&&(p=ir,i=d.userID);var h=new cs("handleGroupApplication");return h.setMessage("groupID:".concat(n)),qe.l("".concat(s," groupID:").concat(n)),this.request({protocolName:p,requestData:{handleAction:c,handleMessage:l,applicant:t,invitee:i,groupID:n,authentication:o,messageKey:r}}).then((function(){return h.setNetworkType(a.getNetworkType()).end(),qe.l("".concat(s," ok")),u&&a._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Ts({group:a.getLocalGroupProfile(n)})})).catch((function(e){return a.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];h.setError(e,o,r).end()})),qe.e("".concat(s," failed. error"),e),As(e)}))}},{key:"handleGroupInvitation",value:function(e){var n=this,o="".concat(this._n,".").concat("handleGroupInvitation"),r=e.message.payload,i=r.groupProfile.groupID,a=r.authentication,s=r.messageKey,c=r.operatorID,l=e.handleAction,u=new cs("handleGroupInvitation");return u.setMessage("groupID:".concat(i," inviter:").concat(c," handleAction:").concat(l)),qe.l("".concat(o," groupID:").concat(i," inviter:").concat(c," handleAction:").concat(l)),this.request({protocolName:ar,requestData:t(t({},e),{},{inviter:c,groupID:i,authentication:a,messageKey:s})}).then((function(){return u.setNetworkType(n.getNetworkType()).end(),qe.l("".concat(o," ok")),n._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Ts({group:n.getLocalGroupProfile(i)})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),qe.e("".concat(o," failed. error"),e),As(e)}))}},{key:"getGroupOnlineMemberCount",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):Ds({memberCount:0}):As({code:Ra})}},{key:"hasLocalGroup",value:function(e){return this.groupMap.has(e)}},{key:"deleteLocalGroupAndConversation",value:function(e){var t=this.checkJoinedAVChatRoomByID(e);if(qe.l("".concat(this._n,".deleteLocalGroupAndConversation isJoinedAVChatRoom:").concat(t)),t&&this.getModule(qn).deleteLocalConversation("".concat(S.CONV_GROUP).concat(e)),St({groupID:e})){var n=this.getLocalGroupProfile(e);n&&!0===n.isSupportTopic&&this.getModule(Fn).deleteTopicListInCommunity(e)}this._deleteLocalGroup(e),this.emitGroupListUpdate(!0,!1)}},{key:"_deleteLocalGroup",value:function(e){this.groupMap.delete(e),this.getModule(Bn).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:"sendMessage",value:function(e,t){if(it(e._receiverList)&&e._receiverList.length>0&&!this.canIUse(V.MSG_TO_SPECIFIED_GRP_MBR))return As({code:Va});var n=this.createGroupMessagePack(e,t);return this.request(n)}},{key:"createGroupMessagePack",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var o="";nt(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var r=[];if(rt(t)&&rt(t.messageControlInfo)){var i=t.messageControlInfo,a=i.excludedFromUnreadCount,s=i.excludedFromLastMessage,c=i.excludedFromContentModeration;!0===a&&r.push("NoUnread"),!0===s&&r.push("NoLastMsg"),!0===c&&r.push("NoMsgCheck")}var l=void 0;it(e._receiverList)&&e._receiverList.length>0&&(l=e._receiverList,e._receiverList.length>50&&(l=e._receiverList.slice(0,50),this.outputWarning("ReceiverListLimit")));var u=this.isOnlineMessage(e,t)?1:0,d=e.getGroupAtInfoList(),p={fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:o,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==S.MSG_TEXT||Xt(d)?void 0:d,onlineOnlyFlag:u,clientTime:e.clientTime,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(n)},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:0===u?r:void 0,needReadReceipt:!0!==e.needReadReceipt||this.isMessageFromOrToAVChatroom(e.to)?0:1,receiverList:l,isSupportExtension:!0===e.isSupportExtension?1:0};return It(e.to)&&(p.groupID=Vt(e.to),p.topicID=e.to),{protocolName:_o,tjgID:this.generateTjgID(e),requestData:p}}},{key:"_isVoipPush",value:function(e){var t=void 0;return at(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}},{key:"revokeMessage",value:function(e){var t={groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]};return It(e.to)&&(t.groupID=Vt(e.to),t.topicID=e.to),this.request({protocolName:sr,requestData:t})}},{key:"deleteMessage",value:function(e){var t=e.to,n=e.keyList;qe.l("".concat(this._n,".deleteMessage groupID:").concat(t," count:").concat(n.length));var o={groupID:t,deleter:this.getMyUserID(),keyList:n};return It(t)&&(o.groupID=Vt(t),o.topicID=t),this.request({protocolName:br,requestData:o})}},{key:"modifyRemoteMessage",value:function(e){var t=e.to,n=e.sequence,o=e.payload,r=e.type,i=e.version,a=void 0===i?0:i,s=e.cloudCustomData,c=t,l=void 0;It(t)&&(c=Vt(t),l=t);var u=void 0;return zt(r)&&(u=[]).push({type:r,content:o}),this.request({protocolName:Mr,requestData:{groupID:c,topicID:l,sequence:n,version:a,elements:u,cloudCustomData:s}})}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessage"),o=e.conversationID,r=e.groupID,i=e.sequence,a=new cs("getGroupRoamingMessages"),s=0,c=void 0;return It(r)&&(r=Vt(c=r)),this._computeLastSequence({groupID:r,topicID:c,sequence:i}).then((function(e){return s=e,qe.l("".concat(n," groupID:").concat(r," startSequence:").concat(s)),t.request({protocolName:ur,requestData:{groupID:r,count:21,sequence:s,topicID:c}})})).then((function(e){var i=e.data,l=i.messageList,u=i.complete,d=i.invisibleSequenceList,p=void 0===d?[]:d;at(l)?qe.l("".concat(n," ok. complete:").concat(u," but messageList is undefined!")):qe.l("".concat(n," ok. complete:").concat(u," count:").concat(l.length));var h=t._getMinSequence(p,l)-1;a.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(r," topicID:").concat(c," startSequence:").concat(s," complete:").concat(u," nextSequence:").concat(h)).end();var f=t.getModule(qn),g=[];return Xt(l)||(f.updateRoamingMessageSequence(o,h),g=f.onRoamingMessage(l,o),f.updateIsRead(o),f.patchConversationLastMessage(o)),2===u&&(f.setCompleted(o),h=""),qe.l("".concat(n," nextReqID:").concat(h,", stored message count:").concat(g.length,", invisible sequence count:").concat(p.length)),{nextReqID:h+"",storedMessageList:g}})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],i=n[1];a.setError(e,o,i).setMessage("groupID:".concat(r," topicID:").concat(c," startSequence:").concat(s)).end()})),qe.w("".concat(n," failed. error:"),e),As(e)}))}},{key:"_getGroupIDOfMessage",value:function(e){return e.conversationID.replace(S.CONV_GROUP,"")}},{key:"_getMinSequence",value:function(e,t){var n=0;Xt(t)||(n=t[t.length-1].sequence);var o=0;return Xt(e)||(o=e[e.length-1]),qe.l("".concat(this._n,"._getMinSequence minVisibleSequence:").concat(n," minInvisibleSequence:").concat(o)),o>0&&o<n?o:n}},{key:"getReadReceiptList",value:function(e){var t=this,n="".concat(this._n,".").concat("getReadReceiptList"),o=this._getGroupIDOfMessage(e[0]),r=this.getMyUserID(),i=e.filter((function(e){return e.from===r&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(qe.l("".concat(n," groupID:").concat(o," sequenceList:").concat(JSON.stringify(i))),0===i.length)return Ds({messageList:e});var a=new cs("getReadReceiptList");return a.setMessage("groupID:".concat(o)),this.request({protocolName:dr,requestData:{groupID:o,sequenceList:i}}).then((function(t){a.end(),qe.l("".concat(n," ok"));var o=t.data.readReceiptList;return it(o)&&o.forEach((function(t){e.forEach((function(e){0===t.code&&t.sequence===e.sequence&&(e.readReceiptInfo.readCount=t.readCount,e.readReceiptInfo.unreadCount=t.unreadCount)}))})),Ts({messageList:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.w("".concat(n," failed. error:"),e),As(e)}))}},{key:"sendReadReceipt",value:function(e){var t=this,n="".concat(this._n,".").concat("sendReadReceipt"),o=this._getGroupIDOfMessage(e[0]),r=new cs("sendReadReceipt");r.setMessage("groupID:".concat(o));var i=this.getMyUserID(),a=e.filter((function(e){return e.from!==i&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));return 0===a.length?As({code:Oi}):(qe.l("".concat(n,". sequenceList:").concat(JSON.stringify(a))),this.request({protocolName:pr,requestData:{groupID:o,sequenceList:a}}).then((function(e){return r.end(),qe.l("".concat(n," ok")),Ts()})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),qe.w("".concat(n," failed. error:"),e),As(e)})))}},{key:"getReadReceiptDetail",value:function(e){var t=this,n=e.message,o=e.filter,r=e.cursor,i=e.count,a=this._getGroupIDOfMessage(n),s=n.ID,c=n.sequence,l="".concat(this._n,".").concat("getReadReceiptDetail"),u=this._receiptDetailCompleteMap.get(s)||!1,d=0!==o&&1!==o?0:o,p=nt(r)?r:"",h=!et(i)||i<=0||i>=100?100:i,f="groupID:".concat(a," sequence:").concat(c," cursor:").concat(p," filter:").concat(d," completeFlag:").concat(u);qe.l("".concat(l," ").concat(f));var g={cursor:"",isCompleted:!1,messageID:s,unreadUserIDList:[],readUserIDList:[]},v=new cs("getReadReceiptDetail");return v.setMessage(f),this.request({protocolName:fr,requestData:{groupID:a,sequence:c,flag:d,cursor:p,count:h}}).then((function(e){v.end();var n=e.data,o=n.cursor,r=n.isCompleted,i=n.unreadUserIDList,a=n.readUserIDList;return g.cursor=o,1===r&&(g.isCompleted=!0,t._receiptDetailCompleteMap.set(s,!0)),0===d?g.readUserIDList=a.map((function(e){return e.userID})):1===d&&(g.unreadUserIDList=i.map((function(e){return e.userID}))),qe.l("".concat(l," ok")),Ts(g)})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];v.setError(e,o,r).end()})),qe.w("".concat(l," failed. error:"),e),As(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessagesHopping"),o=new cs("getGroupRoamingMessagesHopping"),r=e.groupID,i=e.count,a=e.sequence,s=e.direction,c=a;1===s&&(c=a+i-1);var l=void 0;It(r)&&(r=Vt(l=r));var u="".concat(l?"topicID:".concat(l):"groupID:".concat(r)," sequence:").concat(a," direction:").concat(s);return qe.l("".concat(n," ").concat(u)),this.request({protocolName:ur,requestData:{groupID:r,topicID:l,count:i,sequence:c}}).then((function(r){var i=r.data,c=i.messageList,l=i.complete,d="complete:".concat(l," count:").concat(c?c.length:0);if(qe.l("".concat(n," ok. ").concat(d)),o.setNetworkType(t.getNetworkType()).setMessage("".concat(u," ").concat(d)).end(),2===l||Xt(c)){var p=t._computeResult();return Ts(p)}var h="".concat(S.CONV_GROUP).concat(e.groupID),f=t.getModule(qn).onRoamingMessage(c,h,!1),g=t._computeResult({direction:s,sequence:a,remoteMessageList:c,processedMessageList:f});return Ts(g)})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),s=n[0],c=n[1];o.setError(e,s,c).setMessage("groupID:".concat(r," sequence:").concat(a," count:").concat(i)).end()})),qe.w("".concat(n," failed. error:"),e),As(e)}))}},{key:"_computeResult",value:function(e){var t={messageList:[],isCompleted:!1,nextMessageSeq:""};if(at(e))return t.isCompleted=!0,t;var n=e.direction,o=e.sequence,r=e.remoteMessageList,i=void 0===r?[]:r,a=e.processedMessageList,s=void 0===a?[]:a,c=i.length;return 1===n?(t.nextMessageSeq=i[0].sequence+1,s.forEach((function(e){e.sequence>=o&&t.messageList.push(e)})),0===t.messageList.length&&i[0].sequence<o&&(t.isCompleted=!0,t.nextMessageSeq=""),t):(t.nextMessageSeq=i[c-1].sequence-1,t.messageList=_(s),0===t.nextMessageSeq&&(t.isCompleted=!0,t.nextMessageSeq=""),t)}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageSeq,r="".concat(this._n,".setMessageRead");qe.l("".concat(r," conversationID:").concat(n," lastMessageSeq:").concat(o)),et(o)||this.outputWarning("DoNotModifyLastSeq");var i=new cs("setGroupMessageRead");i.setMessage("".concat(n,"-").concat(o));var a=n.replace(S.CONV_GROUP,""),s=void 0;return It(a)&&(a=Vt(s=a)),this.request({protocolName:cr,requestData:{groupID:a,topicID:s,messageReadSeq:o}}).then((function(){i.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(r," ok."));var e=t.getModule(qn);e.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:o});var c=!0;if(!at(s)){c=!1;var l=t.getModule(Fn).getLocalTopic(a,s);l&&l.updateSelfInfo({readedSequence:o})}return e.updateUnreadCount(n,c),Ts()})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),qe.l("".concat(r," failed. error:"),e),As(e)}))}},{key:"_computeLastSequence",value:function(e){var t=e.groupID,n=e.topicID,o=void 0===n?void 0:n,r=e.sequence;return r>0?Promise.resolve(r):at(o)||this.hasLocalGroup(t)?at(o)?this.getGroupLastSequence(t):this.getTopicLastSequence({groupID:t,topicID:o}):Promise.resolve(0)}},{key:"getGroupLastSequence",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupLastSequence"),o=new cs("getGroupLastSequence"),r=0,i="";if(this.hasLocalGroup(e)){var a=this.getLocalGroupProfile(e),s=a.lastMessage;if(s.lastSequence>0&&!1===s.onlineOnlyFlag)return r=s.lastSequence,i="got lastSequence:".concat(r," from local group profile[lastMessage.lastSequence]. groupID:").concat(e),qe.l("".concat(n," ").concat(i)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(r);if(a.nextMessageSeq>1)return r=a.nextMessageSeq-1,i="got lastSequence:".concat(r," from local group profile[nextMessageSeq]. groupID:").concat(e),qe.l("".concat(n," ").concat(i)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(r)}var c="GROUP".concat(e),l=this.getModule(qn).getLocalConversation(c);if(l&&l.lastMessage.lastSequence&&!1===l.lastMessage.onlineOnlyFlag)return r=l.lastMessage.lastSequence,i="got lastSequence:".concat(r," from local conversation profile[lastMessage.lastSequence]. groupID:").concat(e),qe.l("".concat(n," ").concat(i)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(r);var u={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["NextMsgSeq"]}};return this.getGroupProfileAdvance(u).then((function(a){var s=a.data.successGroupList;return Xt(s)?qe.l("".concat(n," successGroupList is empty. groupID:").concat(e)):(r=s[0].nextMessageSeq-1,i="got lastSequence:".concat(r," from getGroupProfileAdvance. groupID:").concat(e),qe.l("".concat(n," ").concat(i))),o.setNetworkType(t.getNetworkType()).setMessage("".concat(i)).end(),r})).catch((function(r){return t.probeNetwork().then((function(t){var n=m(t,2),i=n[0],a=n[1];o.setError(r,i,a).setMessage("get lastSequence failed from getGroupProfileAdvance. groupID:".concat(e)).end()})),qe.w("".concat(n," failed. error:"),r),As(r)}))}},{key:"getTopicLastSequence",value:function(e){var t=this,n=e.groupID,o=e.topicID,r="".concat(this._n,".").concat("getTopicLastSequence"),i=new cs("getTopicLastSequence"),a=0,s="",c=this.getModule(Fn);return c.hasLocalTopic(n,o)?(a=c.getLocalTopic(n,o).nextMessageSeq-1,s="get lastSequence:".concat(a," from local topic info[nextMessageSeq]. topicID:").concat(o),qe.l("".concat(r," ").concat(s)),i.setNetworkType(this.getNetworkType()).setMessage("".concat(s)).end(),Promise.resolve(a)):c.getTopicList({groupID:n,topicIDList:[o]}).then((function(e){var n=e.data.successTopicList;return Xt(n)?qe.l("".concat(r," successTopicList is empty. topicID:").concat(o)):(a=n[0].nextMessageSeq-1,s="get lastSequence:".concat(a," from getTopicList. topicID:").concat(o),qe.l("".concat(r," ").concat(s))),i.setNetworkType(t.getNetworkType()).setMessage("".concat(s)).end(),a})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];i.setError(e,r,a).setMessage("get lastSequence failed from getTopicList. topicID:".concat(o)).end()})),qe.w("".concat(r," failed. error:"),e),As(e)}))}},{key:"isMessageFromOrToAVChatroom",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"hasJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:"getJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:"isOnlineMessage",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:"_canIUseOnlineOnlyFlag",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==S.CONV_GROUP}},{key:"_onAVChatRoomHistoryMessage",value:function(e){if(!Xt(e)){qe.l("".concat(this._n,"._onAVChatRoomHistoryMessage count:").concat(e.length));var n=[];e.forEach((function(e){n.push(t(t({},e),{},{isHistoryMessage:1}))})),this.onAVChatRoomMessage(n)}}},{key:"onAVChatRoomMessage",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:"onAVChatRoomMemberBanned",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onAVChatRoomMemberBanned(e)}},{key:"getGroupSimplifiedInfo",value:function(e){var t=this,n=new cs("getGroupSimplifiedInfo"),o={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["Type","Name"]}};return this.getGroupProfileAdvance(o).then((function(o){var r=o.data.successGroupList;return n.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(e," type:").concat(r[0].type)).end(),r[0]})).catch((function(o){t.probeNetwork().then((function(t){var r=m(t,2),i=r[0],a=r[1];n.setError(o,i,a).setMessage("groupID:".concat(e)).end()}))}))}},{key:"setUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:"deleteUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:"isUnjoinedAVChatRoom",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:"isGroupAttributesUpdatedNotice",value:function(e){return this._groupAttributesHandler.isGroupAttributesUpdatedNotice(e)}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:"initGroupAttributes",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:"isMessageFromTopic",value:function(e,t){return 2===e&&!Xt(t)}},{key:"isMessageFromCommunityOfTopic",value:function(e,t){return 2===e&&Xt(t)}},{key:"getMessageExtensions",value:function(e,t){return qe.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.request({protocolName:Er,requestData:{groupID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return qe.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(n)),this.request({protocolName:Ir,requestData:{groupID:e.to,messageSequence:e.sequence,extensionList:t,operateType:n}})}},{key:"getGroupNotify",value:function(e){var n=this;if(this.hasLocalGroup(e)){var o=this.getLocalGroupProfile(e),r=o.type,i=o.isSupportTopic;if(!Tt(r)&&!i){var a="".concat(this._n,".getGroupNotify"),s=this._getGroupLastRevokedTime(e),c=1e3*Ne();qe.l("".concat(a," groupID:").concat(e," type:").concat(r," beginTime:").concat(s," endTime:").concat(c)),this.request({protocolName:Dr,requestData:{type:St({type:r,groupID:e})?S.GRP_COMMUNITY:void 0,groupID:e,beginTime:s,endTime:c}}).then((function(o){var r=o.data,i=r.nextRevokedTime,s=r.notifyList;qe.l("".concat(a," ok. groupID:").concat(e," nextRevokedTime:").concat(i));var c={dataList:[{elements:{revokedInfos:[]}}]};it(s)&&s.forEach((function(n){c.dataList[0].elements.revokedInfos.push({groupID:e,sequence:n.sequence,random:n.random,revokerInfo:t({},n.revokerInfo)})})),n.onGroupMessageRevoked(c),0!==i?(n._setGroupLastRevokedTime(e,i),n.getGroupNotify(e)):n._setGroupLastRevokedTime(e,1e3*Ne())})).catch((function(e){qe.e("".concat(a," failed. error:"),e)}))}}}},{key:"_getGroupLastRevokedTime",value:function(e){return this.hasLocalGroup(e)?this.getLocalGroupProfile(e)._lastRevokedTime:0}},{key:"_setGroupLastRevokedTime",value:function(e,t){this.hasLocalGroup(e)&&(this.getLocalGroupProfile(e)._lastRevokedTime=t)}},{key:"isGroupCountersNotice",value:function(e){return this._groupCountersHandler.isGroupCountersNotice(e)}},{key:"setGroupCounters",value:function(e){return this._groupCountersHandler.setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._groupCountersHandler.increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._groupCountersHandler.decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._groupCountersHandler.getGroupCounters(e)}},{key:"restartPolling",value:function(){this._AVChatRoomHandler&&this._AVChatRoomHandler.restartPolling()}},{key:"_canIUseJoinOption",value:function(e){return e===S.GRP_PUBLIC||St({type:e})}},{key:"reset",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._receiptDetailCompleteMap.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._groupAttributesHandler.reset(),this._groupCountersHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),r}(lo),yc=function(){function e(t){o(this,e),this.userID="",this.avatar="",this.nick="",this.role="",this.joinTime="",this.lastSendMsgTime="",this.nameCard="",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return i(e,[{key:"_initMember",value:function(e){this.updateMember(e)}},{key:"updateMember",value:function(e){var t=[null,void 0,"",0,NaN];e.memberCustomField&&wt(this.memberCustomField,e.memberCustomField),ft(this,e,["memberCustomField","marks"],t)}},{key:"updateRole",value:function(e){["Owner","Admin","Member"].indexOf(e)<0||(this.role=e)}},{key:"updateMuteUntil",value:function(e){at(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:"updateNameCard",value:function(e){at(e)||(this.nameCard=e)}},{key:"updateMemberCustomField",value:function(e){e&&wt(this.memberCustomField,e)}}]),e}(),bc=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="GroupMemberModule",t.groupMemberListMap=new Map,t.getInnerEmitterInstance().on(Ns,t._onProfileUpdated,f(t)),t}return i(r,[{key:"_onProfileUpdated",value:function(e){for(var t=this,n=e.data,o=function(e){var o=n[e];t.groupMemberListMap.forEach((function(e){e.has(o.userID)&&e.get(o.userID).updateMember({nick:o.nick,avatar:o.avatar})}))},r=0;r<n.length;r++)o(r)}},{key:"deleteGroupMemberList",value:function(e){this.groupMemberListMap.delete(e)}},{key:"getGroupMemberList",value:function(e){var t=this,n=e.groupID,o=e.offset,r=void 0===o?0:o,i=e.count,a=void 0===i?15:i,s=e.filter,c=void 0===s?void 0:s,l="".concat(this._n,".").concat("getGroupMemberList"),u=this.getModule(Un),d=u.hasLocalGroup(n);if(qe.l("".concat(l," groupID:").concat(n," offset:").concat(r," count:").concat(a," hasLocalGroup:").concat(d)),!d)return Ds({memberList:[],offset:0});if(u.getLocalGroupProfile(n).type===S.GRP_AVCHATROOM){if(this.canIUse(V.AVCHATROOM_MBR_LIST))return this._getAVChatRoomMemberList({groupID:n,offset:r,filter:c});this.outputWarning("LiveOnlineMember")}var p=new cs("getGroupMemberList"),h=0,f={groupID:n,limit:a>100?100:a};St({groupID:n})?f.next="".concat(r):(f.offset=r,h=r+a);var g=[];return this.request({protocolName:Rr,requestData:f}).then((function(e){var o=e.data,r=o.members,i=o.memberNum,a=o.next,s=void 0===a?void 0:a;if(at(s)||(h=Xt(s)?0:s),!it(r)||0===r.length)return h=0,Promise.resolve([]);var c=t.getModule(Un);return c.hasLocalGroup(n)&&(c.getLocalGroupProfile(n).memberNum=i),g=t._updateLocalGroupMemberMap(n,r),t.getModule(Nn).getUserProfile({userIDList:r.map((function(e){return e.userID})),tagList:[He.NICK,He.AVATAR]})})).then((function(e){var o=e.data;if(!it(o)||0===o.length)return Ds({memberList:[],offset:h});var i=o.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(n,i),g.length<a&&(h=0),p.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," offset:").concat(r," count:").concat(a)).end(),qe.l("".concat(l," ok.")),Ts({memberList:g,offset:h})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];p.setError(e,o,r).end()})),qe.e("".concat(l," failed. error:"),e),As(e)}))}},{key:"_getAVChatRoomMemberList",value:function(e){var t=this,n=e.groupID,o=e.offset,r=e.filter,i="".concat(this._n,".").concat("_getAVChatRoomMemberList"),a=new cs("_getAVChatRoomMemberList");return a.setMessage("groupID:".concat(n," offset:").concat(o," filter:").concat(r)),this.request({protocolName:Or,requestData:{groupID:n,offset:o,filter:r}}).then((function(e){var o=e.data,r=o.memberList,s=void 0===r?[]:r,c=o.offset,l=void 0===c?0:c;a.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(i," ok. member count:").concat(s.length,", next request timestamp:").concat(l));var u=t._updateLocalGroupMemberMap(n,s);return Ts({memberList:u,offset:l})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(i," failed. error:"),e),As(e)}))}},{key:"getGroupMemberProfile",value:function(e){var n=this,o="".concat(this._n,".").concat("getGroupMemberProfile"),r=new cs("getGroupMemberProfile");r.setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)),qe.l("".concat(o," groupID:").concat(e.groupID," userIDList:").concat(e.userIDList.join(","))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var i=e.groupID,a=e.userIDList;return this._getGroupMemberProfileAdvance(t(t({},e),{},{userIDList:a})).then((function(e){var t=e.data.members;return it(t)&&0!==t.length?(n._updateLocalGroupMemberMap(i,t),n.getModule(Nn).getUserProfile({userIDList:t.map((function(e){return e.userID})),tagList:[He.NICK,He.AVATAR]})):Ds([])})).then((function(e){var t=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));n._updateLocalGroupMemberMap(i,t);var o=a.filter((function(e){return n.hasLocalGroupMember(i,e)})).map((function(e){return n.getLocalGroupMemberInfo(i,e)}));return r.setNetworkType(n.getNetworkType()).end(),Ts({memberList:o})}))}},{key:"addGroupMember",value:function(e){var t=this,n="".concat(this._n,".").concat("addGroupMember"),o=e.groupID,r=this.getModule(Un).getLocalGroupProfile(o),i=r.type,a=new cs("addGroupMember");if(a.setMessage("groupID:".concat(o," groupType:").concat(i)),Tt(i)){var s=new Ss({code:fa});return a.setError(s,!0,this.getNetworkType()).end(),As(s)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),qe.l("".concat(n," groupID:").concat(o)),this.request({protocolName:Nr,requestData:e}).then((function(o){var i=o.data.members;qe.l("".concat(n," ok"));var s=i.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),c=i.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),l=i.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),u=i.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),d="groupID:".concat(e.groupID,", ")+"successUserIDList:".concat(s,", ")+"failureUserIDList:".concat(c,", ")+"existedUserIDList:".concat(l,", ")+"overLimitUserIDList:".concat(u);return a.setNetworkType(t.getNetworkType()).setMoreMessage(d).end(),0===s.length?Ts({successUserIDList:s,failureUserIDList:c,existedUserIDList:l,overLimitUserIDList:u}):(r.memberCount+=s.length,t._updateConversationGroupProfile(r),Ts({successUserIDList:s,failureUserIDList:c,existedUserIDList:l,overLimitUserIDList:u,group:r}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"deleteGroupMember",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteGroupMember"),o=e.groupID,r=e.userIDList,i=this.getModule(Un).getLocalGroupProfile(o);if(at(i))return As({code:ca});if(Tt(i.type))return this.canIUse(V.AVCHATROOM_BAN_MBR)?this._banAVChatRoomMember(e):As({code:Va});var a=new cs("deleteGroupMember"),s="groupID:".concat(o," ").concat(r.length>5?"userIDList.length:".concat(r.length):"userIDList:".concat(r));return a.setMessage(s),qe.l("".concat(n," groupID:").concat(o," userIDList:"),r),this.request({protocolName:Pr,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok")),i.memberCount-=1,t._updateConversationGroupProfile(i),t.deleteLocalGroupMembers(o,r),Ts({group:i,userIDList:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"_updateConversationGroupProfile",value:function(e){this.getModule(qn).updateConversationGroupProfile([e])}},{key:"_banAVChatRoomMember",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteGroupMember"),o=e.groupID,r=e.userIDList,i="groupID:".concat(o," ").concat(r.length>5?"userIDList.length:".concat(r.length):"userIDList:".concat(r)),a=new cs("deleteGroupMember");a.setMessage(i),qe.l("".concat(n," groupID:").concat(o," userIDList:"),r);var s=this.getModule(Un).getLocalGroupProfile(o);return at(e.duration)||0===e.duration?As({code:Ma}):this.request({protocolName:Ur,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok")),t.deleteLocalGroupMembers(o,r),Ts({group:s,userIDList:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"setGroupMemberMuteTime",value:function(e){var t=this,n=e.groupID,o=e.userID,r=e.muteTime,i="".concat(this._n,".").concat("setGroupMemberMuteTime");if(o===this.getMyUserID())return As(new Ss({code:ba}));qe.l("".concat(i," groupID:").concat(n," userID:").concat(o));var a=new cs("setGroupMemberMuteTime");return a.setMessage("groupID:".concat(n," userID:").concat(o," muteTime:").concat(r)),this.modifyGroupMemberInfo({groupID:n,userID:o,muteTime:r}).then((function(e){a.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(i," ok"));var o=t.getModule(Un);return Ts({group:o.getLocalGroupProfile(n),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(i," failed. error:"),e),As(e)}))}},{key:"setGroupMemberRole",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberRole"),o=e.groupID,r=e.userID,i=e.role,a=this.getModule(Un).getLocalGroupProfile(o);if(a.selfInfo.role!==S.GRP_MBR_ROLE_OWNER)return As({code:va});if([S.GRP_WORK,S.GRP_AVCHATROOM].includes(a.type))return As({code:ma});var s=[S.GRP_MBR_ROLE_ADMIN,S.GRP_MBR_ROLE_MEMBER];if(St({groupID:o})&&s.push(S.GRP_MBR_ROLE_CUSTOM),s.indexOf(i)<0)return As({code:_a});if(r===this.getMyUserID())return As({code:ya});var c=new cs("setGroupMemberRole");return c.setMessage("groupID:".concat(o," userID:").concat(r," role:").concat(i)),qe.l("".concat(n," groupID:").concat(o," userID:").concat(r)),this.modifyGroupMemberInfo({groupID:o,userID:r,role:i}).then((function(e){return c.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok")),Ts({group:a,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(io);if(!n)return!0;var o=n.filterText(t[e],Y),r=o.isAllowedToSend,i=o.modifiedText;return!0===r&&(t[e]=i,!0)}},{key:"setGroupMemberNameCard",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberNameCard");if(e.nameCard&&!1===this._filterProfanity("nameCard",e))return As({code:Ha});var o=e.groupID,r=e.userID,i=void 0===r?this.getMyUserID():r,a=e.nameCard;qe.l("".concat(n," groupID:").concat(o," userID:").concat(i));var s=new cs("setGroupMemberNameCard");return s.setMessage("groupID:".concat(o," userID:").concat(i," nameCard:").concat(a)),this.modifyGroupMemberInfo({groupID:o,userID:i,nameCard:a}).then((function(e){qe.l("".concat(n," ok")),s.setNetworkType(t.getNetworkType()).end();var r=t.getModule(Un).getLocalGroupProfile(o);return i===t.getMyUserID()&&r&&r.setSelfNameCard(a),Ts({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"setGroupMemberCustomField",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberCustomField"),o=e.groupID,r=e.userID,i=void 0===r?this.getMyUserID():r,a=e.memberCustomField;qe.l("".concat(n," groupID:").concat(o," userID:").concat(i));var s=new cs("setGroupMemberCustomField");return s.setMessage("groupID:".concat(o," userID:").concat(i," memberCustomField:").concat(JSON.stringify(a))),this.modifyGroupMemberInfo({groupID:o,userID:i,memberCustomField:a}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),qe.l("".concat(n," ok"));var r=t.getModule(Un).getLocalGroupProfile(o);return Ts({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"modifyGroupMemberInfo",value:function(e){var n=this,o=e.groupID,r=e.userID,i=void 0;return It(o)&&(o=Vt(i=o)),this.request({protocolName:Gr,requestData:t(t({},e),{},{groupID:o,topicID:i})}).then((function(){if(n.hasLocalGroupMember(o,r)){var t=n.getLocalGroupMemberInfo(o,r);return at(e.muteTime)||t.updateMuteUntil(e.muteTime),at(e.role)||t.updateRole(e.role),at(e.nameCard)||t.updateNameCard(e.nameCard),at(e.memberCustomField)||t.updateMemberCustomField(e.memberCustomField),t}return n.getGroupMemberProfile({groupID:o,userIDList:[r]}).then((function(e){return m(e.data.memberList,1)[0]}))}))}},{key:"markGroupMemberList",value:function(e){var t=this,n="".concat(this._n,".").concat("markGroupMemberList"),o=e.groupID,r=e.markType,i=e.enableMark,a=e.userIDList,s=void 0===a?[]:a,c="groupID:".concat(o," markType:").concat(r," enableMark:").concat(i," userIDList count: ").concat(s.length);qe.l("".concat(n," ").concat(c));var l=2,u=[];!0===i&&(l=1);var d=_(s);s.length>500&&(d=s.slice(0,500),qe.w("".concat(n," ").concat(Wt(500)))),d.forEach((function(e){u.push({userID:e,markType:[r]})})),d=null;var p=new cs("markGroupMemberList");return p.setMessage("".concat(c)),this.request({protocolName:Br,requestData:{groupID:o,operationType:l,memberList:u}}).then((function(e){var o=e.data.memberList,r=void 0===o?[]:o,i=[],a=[];r.length===s.length?i.push.apply(i,_(s)):(r.forEach((function(e){i.push(e.userID)})),s.forEach((function(e){i.includes(e)||a.push(e)})));var c="success count:".concat(i.length," fail count:").concat(a.length);return p.setNetworkType(t.getNetworkType()).setMessage(c).end(),qe.l("".concat(n," ok. ").concat(c)),Ts({successUserIDList:i,failureUserIDList:a})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];p.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"_getGroupMemberProfileAdvance",value:function(e){return this.request({protocolName:xr,requestData:t(t({},e),{},{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:["Role","JoinTime","NameCard","ShutUpUntil"]})})}},{key:"_updateLocalGroupMemberMap",value:function(e,t){var n=this;return it(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new yc(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:"deleteLocalGroupMembers",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:"getLocalGroupMemberInfo",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:"setLocalGroupMember",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:"getLocalGroupMemberList",value:function(e){return this.groupMemberListMap.get(e)}},{key:"hasLocalGroupMember",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:"hasLocalGroupMemberMap",value:function(e){return this.groupMemberListMap.has(e)}},{key:"reset",value:function(){this.groupMemberListMap.clear()}}]),r}(lo),Mc=["topicID","topicName","avatar","introduction","notification","unreadCount","muteAllMembers","customData","groupAtInfoList","nextMessageSeq","selfInfo"],Cc=function(e,t){return Xt(e)?{lastTime:0,lastSequence:0,fromAccount:"",payload:null,type:"",messageForShow:"",nick:"",version:0,cloudCustomData:"",isRevoked:!1,revoker:null}:{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",payload:e.payload||null,type:e.type||"",messageForShow:Ht(e.type,e.payload,t),nick:e.nick||"",version:e.version||0,cloudCustomData:e.cloudCustomData||"",isRevoked:e.isRevoked||!1,revoker:e.revoker||null}},kc=function(){function e(t,n){o(this,e),this.topicID="",this.topicName="",this.avatar="",this.introduction="",this.notification="",this.unreadCount=0,this.muteAllMembers=!1,this.customData="",this.groupAtInfoList=[],this.nextMessageSeq=0,this.lastMessage=Cc(t.lastMessage,n),this.selfInfo={muteTime:0,readedSequence:0,messageRemindType:"",excludedUnreadSequenceList:void 0},this._initTopic(t)}return i(e,[{key:"_initTopic",value:function(e){for(var t in e)Mc.indexOf(t)<0||("selfInfo"===t?this.updateSelfInfo(e[t]):this[t]="muteAllMembers"===t?1===e[t]:e[t])}},{key:"updateUnreadCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.unreadCount=e}},{key:"updateNextMessageSeq",value:function(e){this.nextMessageSeq=e}},{key:"updateLastMessage",value:function(e){this.lastMessage=Cc(e)}},{key:"updateGroupAtInfoList",value:function(e){this.groupAtInfoList=JSON.parse(JSON.stringify(e))}},{key:"updateTopic",value:function(e){at(e.selfInfo)||this.updateSelfInfo(e.selfInfo),at(e.muteAllMembers)||(this.muteAllMembers=1===e.muteAllMembers),ft(this,e,["groupID","lastMessageTime","selfInfo","muteAllMembers","lastMsg"])}},{key:"updateSelfInfo",value:function(e){return 0!==ft(this.selfInfo,e,[],[""])}},{key:"reduceUnreadCount",value:function(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}},{key:"isLastMessageRevoked",value:function(e){return e.sequence===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),e}(),wc=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="TopicModule",t._topicMap=new Map,t._getTopicTimeMap=new Map,t.TOPIC_CACHE_TIME=300,t.TOPIC_LAST_ACTIVE_TIME=3600,t.getInnerEmitterInstance().on(xs,t._onCloudConfigUpdated,f(t)),t}return i(r,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("topic_cache_time"),t=this.getCloudConfig("topic_last_active_time");at(e)||(this.TOPIC_CACHE_TIME=Number(e)),at(t)||(this.TOPIC_LAST_ACTIVE_TIME=Number(t))}},{key:"onTopicCreated",value:function(e){var t=e.groupID;this.resetGetTopicTime(t),this.emitOuterEvent(T.TOPIC_CREATED,e)}},{key:"onTopicDeleted",value:function(e){var t=this,n=e.groupID,o=e.topicIDList;(void 0===o?[]:o).forEach((function(e){t._deleteLocalTopic(n,e)})),this.emitOuterEvent(T.TOPIC_DELETED,e)}},{key:"onTopicMessageRemindTypeUpdated",value:function(e){var t=e.groupID,n=e.topicID,o=e.messageRemindType,r=this.getLocalTopic(t,n);if(r){var i=r.updateSelfInfo({messageRemindType:o});i&&this.emitOuterEvent(T.TOPIC_UPDATED,{groupID:t,topic:r}),qe.d("".concat(this._n,".onTopicMessageRemindTypeUpdated topicID:").concat(n)+" messageRemindType:".concat(o," isTopicUpdated:").concat(i))}}},{key:"onTopicProfileUpdated",value:function(e){var t=e.groupID,n=e.topicID,o=this.getLocalTopic(t,n);o&&(o.updateTopic(e),this.emitOuterEvent(T.TOPIC_UPDATED,{groupID:t,topic:o}))}},{key:"onConversationProxy",value:function(e){var t=e.topicID,n=e.unreadCount,o=e.groupAtInfoList,r=Vt(t),i=this.getLocalTopic(r,t),a=!1;i&&(at(n)||i.unreadCount===n||(i.updateUnreadCount(n),a=!0),at(o)||(i.updateGroupAtInfoList(o),a=!0)),a&&this.emitOuterEvent(T.TOPIC_UPDATED,{groupID:r,topic:i})}},{key:"onMessageSent",value:function(e){var t=e.groupID,n=e.topicID,o=e.lastMessage,r=this.getLocalTopic(t,n);r&&(r.nextMessageSeq+=1,r.updateLastMessage(o),this.emitOuterEvent(T.TOPIC_UPDATED,{groupID:t,topic:r}))}},{key:"onMessageModified",value:function(e){var t=e.to,n=e.time,o=e.sequence,r=e.elements,i=e.cloudCustomData,a=e.messageVersion,s=Vt(t),c=this.getLocalTopic(s,t);if(c){var l=c.lastMessage;qe.d("".concat(this._n,".onMessageModified topicID:").concat(t," lastMessage:"),JSON.stringify(l),"options:",JSON.stringify(e)),l&&(null===l.payload||l.lastTime===n&&l.lastSequence===o&&l.version!==a)&&(l.type=r[0].type,l.payload=r[0].content,l.messageForShow=Ht(l.type,l.payload,this.isIntl()),l.cloudCustomData=i,l.version=a,l.lastSequence=o,l.lastTime=n,this.emitOuterEvent(T.TOPIC_UPDATED,{groupID:s,topic:c}))}}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var n=null,o=null,r=!1;e.forEach((function(e){var i=e.to;o=Vt(i),(n=t.getLocalTopic(o,i))&&(n.reduceUnreadCount()&&(r=!0),n.isLastMessageRevoked(e)&&(n.setLastMessageRevoked(!0),n.setLastMessageRevoker(e.revoker),r=!0))})),r&&this.emitOuterEvent(T.TOPIC_UPDATED,{groupID:o,topic:n})}}},{key:"isLastMessageRevoked",value:function(e){var t=e.topicID,n=e.sequence,o=Vt(t),r=this.getLocalTopic(o,t),i=!1;return r&&(i=r.isLastMessageRevoked({sequence:n})),i}},{key:"getJoinedCommunityList",value:function(){return this.getModule(Un).getGroupList({isGroupWithTopicOnly:!0}).then((function(e){var t=e.data.groupList;return Ts({groupList:void 0===t?[]:t})})).catch((function(e){return As(e)}))}},{key:"createTopicInCommunity",value:function(e){var n=this,o="".concat(this._n,".").concat("createTopicInCommunity"),r=e.topicID;if(!at(r)&&!It(r))return As({code:qa});if(e.topicName&&!1===this._filterProfanity("topicName",e))return As({code:Ha});if(e.introduction&&!1===this._filterProfanity("introduction",e))return As({code:Ha});if(e.notification&&!1===this._filterProfanity("notification",e))return As({code:Ha});var i=new cs("createTopicInCommunity");return this.request({protocolName:ni,requestData:t({},e)}).then((function(r){var a=r.data.topicID;return i.setMessage("topicID:".concat(a)).setNetworkType(n.getNetworkType()).end(),qe.l("".concat(o," ok")),n._updateTopicMap([t(t({},e),{},{topicID:a})]),Ts({topicID:a})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}},{key:"deleteTopicFromCommunity",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteTopicFromCommunity"),o=e.groupID,r=e.topicIDList,i=void 0===r?[]:r,a=new cs("deleteTopicFromCommunity");return a.setMessage("groupID:".concat(o," topicIDList:").concat(i)),this.request({protocolName:oi,requestData:{groupID:o,topicIDList:i}}).then((function(e){var n=e.data.resultList,r=[],i=[];(void 0===n?[]:n).forEach((function(e){var t=e.topicID,n=e.errorCode,o=e.errorInfo;0===n?r.push({topicID:t}):i.push({topicID:t,code:n,message:o})}));var s="success count:".concat(r.length,", fail count:").concat(i.length);return a.setMoreMessage("".concat(s)).setNetworkType(t.getNetworkType()).end(),qe.l("".concat(s)),r.forEach((function(e){t._deleteLocalTopic(o,e.topicID)})),Ts({successTopicList:r,failureTopicList:i})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"updateTopicProfile",value:function(e){var n=this,o="".concat(this._n,".").concat("updateTopicProfile");if(qe.l("".concat(o," options:"),e),e.topicName&&!1===this._filterProfanity("topicName",e))return As({code:Ha});if(e.introduction&&!1===this._filterProfanity("introduction",e))return As({code:Ha});if(e.notification&&!1===this._filterProfanity("notification",e))return As({code:Ha});var r=new cs("updateTopicProfile");return r.setMessage("groupID:".concat(e.groupID," topicID:").concat(e.topicID)),at(e.muteAllMembers)||(e.muteAllMembers=!0===e.muteAllMembers?"On":"Off"),this.request({protocolName:ri,requestData:t({},e)}).then((function(){return r.setNetworkType(n.getNetworkType()).end(),qe.l("".concat(o," ok")),n._updateTopicMap([e]),Ts({topic:n.getLocalTopic(e.groupID,e.topicID)})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],i=n[1];r.setError(e,o,i).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}},{key:"getTopicList",value:function(e){var n=this,o="".concat(this._n,".").concat("getTopicList"),r=e.groupID,i=e.topicIDList,a=void 0===i?[]:i,s=0===a.length,c=new cs("getTopicList");if(c.setMessage("groupID:".concat(r)),this._getTopicTimeMap.has(r)){var l=this._getTopicTimeMap.get(r),u=l.isGetAll,d=l.time;if((u||!u&&!s)&&Date.now()-d<1e3*this.TOPIC_CACHE_TIME){var p=this._getLocalTopicList(r,a);if(s||p.length===a.length)return c.setNetworkType(this.getNetworkType()).setMoreMessage("from cache, topic count:".concat(p.length)).end(),qe.l("".concat(o," groupID:").concat(r," from cache, topic count:").concat(p.length)),Ds({successTopicList:p,failureTopicList:[]})}}return this.request({protocolName:ii,requestData:{groupID:r,topicIDList:a}}).then((function(e){var i=e.data.topicInfoList,a=[],l=[],u=[];(void 0===i?[]:i).forEach((function(e){var n=e.topic,o=e.selfInfo,r=e.errorCode,i=e.errorInfo,s=n.topicID;0===r?(a.push(t(t({},n),{},{selfInfo:o})),l.push(s)):u.push({topicID:s,code:r,message:i})})),n._updateTopicMap(a),n._handleTopicAtInfo(a);var d="success count:".concat(l.length,", fail count:").concat(u.length);c.setNetworkType(n.getNetworkType()).setMoreMessage("".concat(d)).end(),qe.l("".concat(o," groupID:").concat(r," from remote, ").concat(d));var p=[];return Xt(l)||(n._getTopicTimeMap.set(r,{time:Date.now(),isGetAll:s}),p=n._getLocalTopicList(r,l)),Ts({successTopicList:p,failureTopicList:u})})).catch((function(e){return n.probeNetwork(e).then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}},{key:"hasLocalTopic",value:function(e,t){return!!this._topicMap.has(e)&&this._topicMap.get(e).has(t)}},{key:"getLocalTopic",value:function(e,t){var n=null;return this._topicMap.has(e)&&(n=this._topicMap.get(e).get(t)),n}},{key:"_getLocalTopicList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this._topicMap.get(e),o=[];return n&&(o=_(n.values())),0===t.length?o:o.filter((function(e){return t.includes(e.topicID)}))}},{key:"_deleteLocalTopic",value:function(e,t){this._topicMap.has(e)&&(this._topicMap.get(e).delete(t),qe.l("".concat(this._n,"._deleteLocalTopic groupID:").concat(e," topicID:").concat(t)))}},{key:"_updateTopicMap",value:function(e){var t=this,n=[];e.forEach((function(e){var o=e.groupID,r=e.topicID,i=null;t._topicMap.has(o)||t._topicMap.set(o,new Map),t._topicMap.get(o).has(r)?(i=t._topicMap.get(o).get(r)).updateTopic(e):(t._getTopicLastMessage(e),i=new kc(e,t.isIntl()),t._topicMap.get(o).set(r,i));var a=t._computeUnreadCount(i);i.updateUnreadCount(a),n.push({conversationID:"".concat(S.CONV_GROUP).concat(r),type:S.CONV_TOPIC,unreadCount:a})})),n.length>0&&this.getModule(qn).updateTopicConversation(n)}},{key:"resetGetTopicTime",value:function(e){var t=this;at(e)?_(this._getTopicTimeMap.keys()).forEach((function(e){t._getTopicTimeMap.set(e,0)})):this._getTopicTimeMap.set(e,0)}},{key:"getTopicListOnReconnected",value:function(){var e=this,t=_(this._topicMap.keys()),n=[];t.forEach((function(t){var o=[];e._getLocalTopicList(t).forEach((function(t){var n=t.lastMessage.lastTime,r=void 0===n?0:n;Date.now()-1e3*r<1e3*e.TOPIC_LAST_ACTIVE_TIME&&o.push(t.topicID)})),o.length>0&&n.push({groupID:t,topicIDList:o})})),qe.l("".concat(this._n,".getTopicListOnReconnected. active community count:").concat(n.length)),this._relayGetTopicList(n)}},{key:"_relayGetTopicList",value:function(e){var t=this;if(0!==e.length){var n=e.shift(),o=n.topicIDList.length>5?"topicIDList.length:".concat(n.topicIDList.length):"topicIDList:".concat(n.topicIDList),r=new cs("relayGetTopicList");r.setMessage(o),qe.l("".concat(this._n,"._relayGetTopicList. ").concat(o)),this.getTopicList(n).then((function(){r.setNetworkType(t.getNetworkType()).end(),t._relayGetTopicList(e)})).catch((function(n){t.probeNetwork().then((function(e){var t=m(e,2),o=t[0],i=t[1];r.setError(n,o,i).end()})),t._relayGetTopicList(e)}))}}},{key:"_handleTopicAtInfo",value:function(e){var n=this;0!==e.length&&e.forEach((function(e){var o=e.groupID,r=e.topicID,i=e.groupAtInfoList,a=[];at(i)||(i.forEach((function(e){a.push(t(t({},e),{},{groupID:o,topicID:r}))})),n.getModule(qn).onNewGroupAtTips({dataList:a}))}))}},{key:"_getTopicLastMessage",value:function(e){if(!at(e.lastMsg)){var t={time:e.lastMsg.time,sequence:e.lastMsg.sequence,from:e.lastMsg.from,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:"",nick:e.lastMsg.nick,version:e.lastMsg.messageVersion,cloudCustomData:e.lastMsg.cloudCustomData,isRevoked:2===e.lastMsg.isPlaceMessage,revoker:Xt(e.lastMsg.revokerInfo)?null:e.lastMsg.revokerInfo.revoker};e.lastMessage=t}}},{key:"deleteTopicListInCommunity",value:function(e){var t=this,n=this._getLocalTopicList(e),o=this.getModule(qn);n.forEach((function(n){var r=n.topicID;t._deleteLocalTopic(e,r),t._getTopicTimeMap.delete(e),o.deleteLocalConversation("".concat(S.CONV_GROUP).concat(r))}))}},{key:"_computeUnreadCount",value:function(e){var t=e.selfInfo,n=t.excludedUnreadSequenceList,o=t.readedSequence,r=e.nextMessageSeq-e.selfInfo.readedSequence-1;if(it(n)){var i=0;n.forEach((function(t){t>=o&&t<=e.nextMessageSeq-1&&(i+=1)})),i>=1&&(r-=i)}return r<0?0:r}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(io);if(!n)return!0;var o=n.filterText(t[e],K),r=o.isAllowedToSend,i=o.modifiedText;return!0===r&&(t[e]=i,!0)}},{key:"updateLastMessage",value:function(e,t){var n=Vt(e),o=this.getLocalTopic(n,e);if(o){var r=t.sequence+1;o.updateNextMessageSeq(r),o.updateLastMessage(t),this.emitOuterEvent(T.TOPIC_UPDATED,{groupID:n,topic:o})}}},{key:"getMessageExtensions",value:function(e,t){qe.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t));var n=Vt(e.to);return this.request({protocolName:Er,requestData:{groupID:n,topicID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;qe.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(n));var o=Vt(e.to);return this.request({protocolName:Ir,requestData:{groupID:o,topicID:e.to,messageSequence:e.sequence,extensionList:t,operateType:n}})}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._topicMap.clear(),this._getTopicTimeMap.clear(),this.TOPIC_CACHE_TIME=300,this.TOPIC_LAST_ACTIVE_TIME=3600}}]),r}(lo),Tc=function(){function e(t){o(this,e),this._userModule=t,this._n="ProfileHandler",this.TAG="profile",this.accountProfileMap=new Map,this.expirationTime=864e5}return i(e,[{key:"setExpirationTime",value:function(e){this.expirationTime=e}},{key:"getUserProfile",value:function(e){var t=this,n=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),n.length>100&&(qe.w("".concat(this._n,".getUserProfile ").concat(Wt(100))),n.length=100);for(var o,r=[],i=[],a=0,s=n.length;a<s;a++)o=n[a],this._userModule.isMyFriend(o)&&this._containsAccount(o)?i.push(this._getProfileFromMap(o)):r.push(o);if(0===r.length)return Ds(i);e.toAccount=r;var c=e.bFromGetMyProfile||!1,l=[];e.toAccount.forEach((function(e){l.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=l;var u=new cs("getUserProfile");return u.setMessage(n.length>5?"userIDList.length:".concat(n.length):"userIDList:".concat(n)),this._userModule.request({protocolName:yo,requestData:e}).then((function(e){u.setNetworkType(t._userModule.getNetworkType()).end(),qe.i("".concat(t._n,".getUserProfile ok"));var n=t._handleResponse(e).concat(i);return Ts(c?n[0]:n)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),qe.e("".concat(t._n,".getUserProfile failed. error:"),e),As(e)}))}},{key:"getMyProfile",value:function(){var e=this._userModule.getMyAccount();if(qe.l("".concat(this._n,".getMyProfile myAccount:").concat(e)),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return qe.d("".concat(this._n,".getMyProfile from cache, myProfile:")+JSON.stringify(t)),Ds(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:"_handleResponse",value:function(e){for(var t,n,o=ht(),r=e.data.userProfileItem,i=[],a=0,s=r.length;a<s;a++)"@TLS#NOT_FOUND"!==r[a].to&&""!==r[a].to&&(t=r[a].to,n=this._updateMap(t,this._getLatestProfileFromResponse(t,r[a].profileItem)),i.push(n));return qe.l("".concat(this._n,"._handleResponse cost ").concat(ht()-o," ms")),i}},{key:"_getLatestProfileFromResponse",value:function(e,t){var n={};if(n.userID=e,n.profileCustomField=[],!Xt(t))for(var o=0,r=t.length;o<r;o++)if(t[o].tag.indexOf("Tag_Profile_Custom")>-1)n.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case He.NICK:n.nick=t[o].value;break;case He.GENDER:n.gender=t[o].value;break;case He.BIRTHDAY:n.birthday=t[o].value;break;case He.LOCATION:n.location=t[o].value;break;case He.SELFSIGNATURE:n.selfSignature=t[o].value;break;case He.ALLOWTYPE:n.allowType=t[o].value;break;case He.LANGUAGE:n.language=t[o].value;break;case He.AVATAR:n.avatar=t[o].value;break;case He.MESSAGESETTINGS:n.messageSettings=t[o].value;break;case He.ADMINFORBIDTYPE:n.adminForbidType=t[o].value;break;case He.LEVEL:n.level=t[o].value;break;case He.ROLE:n.role=t[o].value;break;default:qe.w("".concat(this._n,"._handleResponse unknown tag:"),t[o].tag,t[o].value)}return n}},{key:"updateMyProfile",value:function(e){var t=this,n="".concat(this._n,".updateMyProfile");if(e.nick&&!1===this._userModule.filterProfanity("nick",e))return As({code:Ha});if(e.selfSignature&&!1===this._userModule.filterProfanity("selfSignature",e))return As({code:Ha});var o=new cs("updateMyProfile");o.setMessage(JSON.stringify(e));var r=(new Hs).validate(e);if(!r.valid)return o.setCode(Ca).setMoreMessage("updateMyProfile info:".concat(r.tips)).setNetworkType(this._userModule.getNetworkType()).end(),qe.e("".concat(n," info:").concat(r.tips)),As({code:Ca});var i=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&("profileCustomField"===a?e.profileCustomField.forEach((function(e){i.push({tag:e.key,value:e.value})})):i.push({tag:He[a.toUpperCase()],value:e[a]}));if(0===i.length){var s=new Ss({code:ka});return o.setError(s,!0,this._userModule.getNetworkType()).end(),qe.e("".concat(n," failed. error:"),s),As(s)}return this._userModule.request({protocolName:bo,requestData:{fromAccount:this._userModule.getMyAccount(),profileItem:i}}).then((function(r){o.setNetworkType(t._userModule.getNetworkType()).end(),qe.i("".concat(n," ok"));var i=t._updateMap(t._userModule.getMyAccount(),e);return t._userModule.emitOuterEvent(T.PROFILE_UPDATED,[i]),Ds(i)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"onProfileModified",value:function(e){var t=e.dataList;if(!Xt(t)){var n,o,r=t.length;qe.d("".concat(this._n,".onProfileModified count:").concat(r," dataList:"),e.dataList);for(var i=[],a=0;a<r;a++)n=t[a].userID,o=this._updateMap(n,this._getLatestProfileFromResponse(n,t[a].profileList)),i.push(o);i.length>0&&(this._userModule.emitInnerEvent(Ns,i),this._userModule.emitOuterEvent(T.PROFILE_UPDATED,i))}}},{key:"_fillMap",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,o=e.length;n<o;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);qe.l("".concat(this._n,"._fillMap from cache, map.size:").concat(this.accountProfileMap.size))}}},{key:"_updateMap",value:function(e,t){var n,o=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&wt(n.profileCustomField,t.profileCustomField),ft(n,t,["profileCustomField"]),n.lastUpdatedTime=o):(n=new Hs(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(n.lastUpdatedTime=o,this.accountProfileMap.set(e,n))),this._flushMap(e===this._userModule.getMyAccount()),n}},{key:"_flushMap",value:function(e){var t=_(this.accountProfileMap.values()),n=this._userModule.getStorageModule();qe.d("".concat(this._n,"._flushMap length:").concat(t.length," flushAtOnce:").concat(e)),n.setItem(this.TAG,t,e)}},{key:"_containsAccount",value:function(e){return this.accountProfileMap.has(e)}},{key:"_getProfileFromMap",value:function(e){return this.accountProfileMap.get(e)}},{key:"_getCachedProfiles",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Xt(e)?[]:e}},{key:"onConversationsProfileUpdated",value:function(e){for(var t,n,o,r=[],i=0,a=e.length;i<a;i++)n=(t=e[i]).userID,this._userModule.isMyFriend(n)||(this._containsAccount(n)?(o=this._getProfileFromMap(n),ft(o,t)>0&&r.push(n)):r.push(t.userID));0!==r.length&&(qe.i("".concat(this._n,".onConversationsProfileUpdated toAccountList:").concat(r)),this.getUserProfile({userIDList:r}))}},{key:"getNickAndAvatarByUserID",value:function(e){if(this._containsAccount(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:"",avatar:""}}},{key:"reset",value:function(){this._flushMap(!0),this.accountProfileMap.clear()}}]),e}(),Sc=i((function e(t){o(this,e),Xt||(this.userID=t.userID||"",this.timeStamp=t.timeStamp||0)})),Ic=function(){function e(t){o(this,e),this._userModule=t,this._n="BlacklistHandler",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return i(e,[{key:"getLocalBlacklist",value:function(){return _(this._blacklistMap.keys())}},{key:"getBlacklist",value:function(){var e=this,t="".concat(this._n,".getBlacklist"),n={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new cs("getBlacklist");return this._userModule.request({protocolName:Mo,requestData:n}).then((function(n){var r=n.data,i=r.blackListItem,a=r.currentSequence,s=Xt(i)?0:i.length;o.setNetworkType(e._userModule.getNetworkType()).setMessage("count:".concat(s)).end(),qe.i("".concat(t," ok")),e.currentSequence=a,e._handleResponse(i,!0),e._userModule.emitOuterEvent(T.BLACKLIST_UPDATED,_(e._blacklistMap.keys()))})).catch((function(n){return e._userModule.probeNetwork().then((function(e){var t=m(e,2),r=t[0],i=t[1];o.setError(n,r,i).end()})),qe.e("".concat(t," failed. error:"),n),As(n)}))}},{key:"addBlacklist",value:function(e){var t=this,n=new cs("addToBlacklist"),o="".concat(this._n,".addBlacklist"),r=this._userModule.getMyAccount();if(1===e.userIDList.length&&e.userIDList[0]===r){var i=wa,a=this._userModule.getErrorMessage(i);n.setCode(i).setMessage(a).setNetworkType(this._userModule.getNetworkType()).end();var s=new Ss({code:i});return qe.e("".concat(o," failed. error:"),s),As(s)}return e.userIDList.includes(r)&&(e.userIDList=e.userIDList.filter((function(e){return e!==r}))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Co,requestData:e}).then((function(r){return n.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),qe.i("".concat(o," ok")),t._handleResponse(r.resultItem,!0),Ts(_(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var o=m(t,2),r=o[0],i=o[1];n.setError(e,r,i).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}},{key:"_handleResponse",value:function(e,t){if(!Xt(e))for(var n,o,r,i=0,a=e.length;i<a;i++)o=e[i].to,r=e[i].resultCode,(at(r)||0===r)&&(t?((n=this._blacklistMap.has(o)?this._blacklistMap.get(o):new Sc).userID=o,!Xt(e[i].addBlackTimeStamp)&&(n.timeStamp=e[i].addBlackTimeStamp),this._blacklistMap.set(o,n)):this._blacklistMap.has(o)&&(n=this._blacklistMap.get(o),this._blacklistMap.delete(o)));qe.l("".concat(this._n,"._handleResponse total:").concat(this._blacklistMap.size," bAdd:").concat(t))}},{key:"deleteBlacklist",value:function(e){var t=this,n="".concat(this._n,".deleteBlacklist"),o=new cs("removeFromBlacklist");return e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:ko,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),qe.i("".concat(n," ok")),t._handleResponse(r.data.resultItem,!1),Ts(_(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"onAccountDeleted",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),n.push(t));n.length>0&&(qe.l("".concat(this._n,".onAccountDeleted count:").concat(n.length," userIDList:"),n),this._userModule.emitOuterEvent(T.BLACKLIST_UPDATED,_(this._blacklistMap.keys())))}},{key:"onAccountAdded",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new Sc({userID:t})),n.push(t));n.length>0&&(qe.l("".concat(this._n,".onAccountAdded count:").concat(n.length," userIDList:"),n),this._userModule.emitOuterEvent(T.BLACKLIST_UPDATED,_(this._blacklistMap.keys())))}},{key:"reset",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),Ec=function(e){var t=String(e).replace(/[=]+$/,""),n="";if(t.length%4==1)return"";for(var o,r,i=0,a=0;r=t.charAt(a++);~r&&(o=i%4?64*o+r:r,i++%4)?n+=String.fromCharCode(255&o>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);try{return decodeURIComponent(escape(n))}catch(s){return""}},Dc=function(){function e(t){o(this,e),this._userModule=t,this._n="UserStatusHandler",this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100,this._userModule.getInnerEmitterInstance().on(xs,this._onCloudConfigUpdated,this)}return i(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._userModule.getCloudConfig("status_query_count"),t=this._userModule.getCloudConfig("status_sub_count"),n=this._userModule.getCloudConfig("status_unsub_count");qe.l("".concat(this._n,"._onCloudConfigUpdated statusQueryCount:").concat(e," statusSubscribeCount:").concat(t)+" statusUnsubscribeCount:".concat(n)),at(e)||(this.MAX_QUERY_USER_COUNT=parseInt(e,10)),at(e)||(this.MAX_SUBSCRIBE_USER_COUNT=parseInt(t,10)),at(e)||(this.MAX_UNSUBSCRIBE_USER_COUNT=parseInt(n,10))}},{key:"onUserStatusUpdated",value:function(e){var t=e.dataList,n=this._userModule.getMyUserID(),o=this._userModule.getModule(Vn),r=t.map((function(e){var t=e.to,r=e.statusType,i=e.customStatus,a=Ec(i);return t===n&&o.setCustomStatus(a),{userID:t,statusType:r,customStatus:a}}));this._userModule.emitOuterEvent(T.USER_STATUS_UPDATED,r)}},{key:"setSelfStatus",value:function(e){var t=this,n="".concat(this._n,".setSelfStatus");if(!1===this._userModule.filterProfanity("customStatus",e))return As({code:Ha});var o=new cs("setSelfStatus"),r=e.customStatus;return this._userModule.request({protocolName:ai,requestData:{customStatus:r}}).then((function(e){return o.setNetworkType(t._userModule.getNetworkType()).setMessage("customStatus:".concat(r)).end(),qe.l("".concat(n," ok. customStatus:").concat(r)),t._userModule.getModule(Vn).setCustomStatus(r),Ts({userID:t._userModule.getMyUserID(),statusType:1,customStatus:r})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"getUserStatus",value:function(e){var t=this,n="".concat(this._n,".getUserStatus"),o=e.userIDList,r=void 0===o?[]:o,i=this._userModule.getMyUserID(),a=_(r),s=void 0,c=a.indexOf(i);if(c>-1){a.splice(c,1);var l=this._userModule.getModule(Vn).getCustomStatus();s={userID:i,statusType:1,customStatus:l}}if(0===a.length)return Ds({successUserList:[s],failureUserList:[]});if(!this._userModule.canIUse(V.USER_STATUS))return As({code:Va});a.length>this.MAX_QUERY_USER_COUNT&&(qe.w("".concat(n," ").concat(Wt(this.MAX_QUERY_USER_COUNT))),a=r.slice(0,this.MAX_QUERY_USER_COUNT));var u=new cs("getUserStatus");return this._userModule.request({protocolName:si,requestData:{userIDList:a}}).then((function(e){var o=e.data,i=o.successUserList,a=void 0===i?[]:i,c=o.failureUserList,l=void 0===c?[]:c,d=a.map((function(e){var t=e.userID,n=e.statusType,o=e.customStatus;return{userID:t,statusType:n,customStatus:Ec(o)}})),p=l.map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode,r=e.errorInfo;return{userID:Xt(n)?t:n,code:o,message:r}}));at(s)||d.unshift(s);var h="userID count:".concat(r.length,", success count:").concat(d.length,", fail count:").concat(p.length);return u.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(h)).end(),qe.l("".concat(n," ok. ").concat(h,".")),Ts({successUserList:d,failureUserList:p})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],i=n[1];u.setMessage("userID count:".concat(r.length)).setError(e,o,i).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"subscribeUserStatus",value:function(e){var t=this;if(!this._userModule.canIUse(V.USER_STATUS))return As({code:Va});var n="".concat(this._n,".subscribeUserStatus"),o=e.userIDList,r=void 0===o?[]:o,i=_(r);i.length>this.MAX_SUBSCRIBE_USER_COUNT&&(qe.w("".concat(n," ").concat(Wt(this.MAX_SUBSCRIBE_USER_COUNT))),i=r.slice(0,this.MAX_SUBSCRIBE_USER_COUNT));var a=new cs("subscribeUserStatus"),s="userID count:".concat(r.length);return qe.l("".concat(n," ").concat(s)),this._userModule.request({protocolName:ci,requestData:{userIDList:i}}).then((function(e){var o=e.data.failureUserList,r=(void 0===o?[]:o).map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode,r=e.errorInfo;return{userID:Xt(n)?t:n,code:o,message:r}}));return a.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(s," fail count:").concat(r.length)).end(),qe.l("".concat(n," ok. fail count:").concat(r.length,".")),Ts({failureUserList:r})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setMessage("".concat(s)).setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"unsubscribeUserStatus",value:function(e){var t=this;if(!this._userModule.canIUse(V.USER_STATUS))return As({code:Va});var n="".concat(this._n,".unsubscribeUserStatus"),o=(e||{}).userIDList,r=void 0===o?[]:o,i=_(r);r.length>this.MAX_UNSUBSCRIBE_USER_COUNT&&(qe.w("".concat(n," ").concat(Wt(this.MAX_UNSUBSCRIBE_USER_COUNT))),i=r.slice(0,this.MAX_UNSUBSCRIBE_USER_COUNT));var a=new cs("unsubscribeUserStatus"),s="userID count:".concat(r.length);qe.l("".concat(n," ").concat(s));var c={userIDList:i};return 0===i.length&&(c.userIDList=void 0,c.unsubscribeAll=1),this._userModule.request({protocolName:li,requestData:c}).then((function(e){var o=e.data.failureUserList,r=(void 0===o?[]:o).map((function(e){var t=e.userID,n=e.invalidUserID,o=e.errorCode,r=e.errorInfo;return{userID:Xt(n)?t:n,code:o,message:r}}));return a.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(s," fail count:").concat(r.length)).end(),qe.l("".concat(n," ok. fail count:").concat(r.length,".")),Ts({failureUserList:r})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setMessage("".concat(s)).setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"reset",value:function(){this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100}}]),e}(),Ac=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="UserModule",r._profileHandler=new Tc(f(r)),r._blacklistHandler=new Ic(f(r)),r._userStatusHandler=new Dc(f(r)),r.getInnerEmitterInstance().on(Os,r.onContextUpdated,f(r)),r}return i(n,[{key:"onContextUpdated",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:"onProfileModified",value:function(e){this._profileHandler.onProfileModified(e)}},{key:"onRelationChainModified",value:function(e){var t=e.dataList;if(!Xt(t)){var n=[];t.forEach((function(e){e.blackListDelAccount&&n.push.apply(n,_(e.blackListDelAccount))})),n.length>0&&this._blacklistHandler.onAccountDeleted(n);var o=[];t.forEach((function(e){e.blackListAddAccount&&o.push.apply(o,_(e.blackListAddAccount))})),o.length>0&&this._blacklistHandler.onAccountAdded(o)}}},{key:"onConversationsProfileUpdated",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:"getMyAccount",value:function(){return this.getMyUserID()}},{key:"getMyProfile",value:function(){return this._profileHandler.getMyProfile()}},{key:"getStorageModule",value:function(){return this.getModule(Hn)}},{key:"filterProfanity",value:function(e,t){var n=this.getModule(io);if(!n)return!0;var o=n.filterText(t[e],W),r=o.isAllowedToSend,i=o.modifiedText;return!0===r&&(t[e]=i,!0)}},{key:"isMyFriend",value:function(e){var t=this.getModule(Gn);return!!t&&t.isMyFriend(e)}},{key:"getUserProfile",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:"getNickAndAvatarByUserID",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:"getLocalBlacklist",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return Ds(e)}},{key:"addBlacklist",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:"deleteBlacklist",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:"onUserStatusUpdated",value:function(e){this._userStatusHandler.onUserStatusUpdated(e)}},{key:"setSelfStatus",value:function(e){return this._userStatusHandler.setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._userStatusHandler.getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._userStatusHandler.subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._userStatusHandler.unsubscribeUserStatus(e)}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._profileHandler.reset(),this._blacklistHandler.reset(),this._userStatusHandler.reset()}}]),n}(lo),Lc=function(){function e(t,n){o(this,e),this._m=t,this._isLoggedIn=!1,this._SDKAppID=n.SDKAppID,this._userID=n.userID||"",this._userSig=n.userSig||"",this._version="2.27.0",this._a2Key="",this._tinyID="",this._customStatus="",this._contentType="json",this._unlimitedAVChatRoom=n.unlimitedAVChatRoom,this._scene=n.scene||"",this._oversea=n.oversea,this._instanceID=n.instanceID,this._statusInstanceID=0,this._isDevMode=n.devMode,this._proxyServer=n.proxyServer,this._fileUploadProxy=n.fileUploadProxy,this._fileDownloadProxy=n.fileDownloadProxy}return i(e,[{key:"isLoggedIn",value:function(){return this._isLoggedIn}},{key:"isOversea",value:function(){return this._oversea}},{key:"isPrivateNetWork",value:function(){return this._proxyServer}},{key:"isDevMode",value:function(){return this._isDevMode}},{key:"isSingaporeSite",value:function(){return this._SDKAppID>=2e7&&this._SDKAppID<3e7||this._SDKAppID>=172e7&&this._SDKAppID<173e7}},{key:"isKoreaSite",value:function(){return this._SDKAppID>=3e7&&this._SDKAppID<4e7||this._SDKAppID>=173e7&&this._SDKAppID<174e7}},{key:"isGermanySite",value:function(){return this._SDKAppID>=4e7&&this._SDKAppID<5e7||this._SDKAppID>=174e7&&this._SDKAppID<175e7}},{key:"isIndiaSite",value:function(){return this._SDKAppID>=5e7&&this._SDKAppID<6e7||this._SDKAppID>=175e7&&this._SDKAppID<176e7}},{key:"isJapanSite",value:function(){return this._SDKAppID>=6e7&&this._SDKAppID<7e7||this._SDKAppID>=176e7&&this._SDKAppID<177e7}},{key:"isUSASite",value:function(){return this._SDKAppID>=7e7&&this._SDKAppID<8e7||this._SDKAppID>=177e7&&this._SDKAppID<178e7}},{key:"isIntl",value:function(){return 0===(e=this._SDKAppID)||e>=2e7&&e<8e7||e>=172e7&&e<178e7;var e}},{key:"isUnlimitedAVChatRoom",value:function(){return this._unlimitedAVChatRoom}},{key:"setUserID",value:function(e){this._userID=e}},{key:"getUserID",value:function(){return this._userID}},{key:"setUserSig",value:function(e){this._userSig=e}},{key:"getUserSig",value:function(){return this._userSig}},{key:"getSDKAppID",value:function(){return this._SDKAppID}},{key:"setTinyID",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:"getTinyID",value:function(){return this._tinyID}},{key:"setCustomStatus",value:function(e){this._customStatus=e}},{key:"getCustomStatus",value:function(){return this._customStatus}},{key:"getScene",value:function(){return De?window.tencent_cloud_im_csig_flutter_for_web_25F_cy:this._isTUIKit()?"tuikit":this._scene}},{key:"getInstanceID",value:function(){return this._instanceID}},{key:"getStatusInstanceID",value:function(){return this._statusInstanceID}},{key:"setStatusInstanceID",value:function(e){this._statusInstanceID=e}},{key:"getVersion",value:function(){return this._version}},{key:"getA2Key",value:function(){return this._a2Key}},{key:"setA2Key",value:function(e){this._a2Key=e}},{key:"getContentType",value:function(){return this._contentType}},{key:"getProxyServer",value:function(){return this._proxyServer}},{key:"getFileUploadProxy",value:function(){return this._fileUploadProxy}},{key:"getFileDownloadProxy",value:function(){return this._fileDownloadProxy}},{key:"_isTUIKit",value:function(){var e=!1,t=!1,n=!1,o=!1,r=[];le&&(r=Object.keys(de)),ue&&(r=ce?Object.keys(uni):Object.keys(window));for(var i=0,a=r.length;i<a;i++)if(r[i].toLowerCase().includes("uikit")){e=!0;break}if(r=null,le&&!ct(de.createGamePortal)&&ct(Pm)&&!at(Pm())){var s=Pm().globalData;rt(s)&&!0===s.isTUIKit&&(t=!0)}!0===this._m.getModule(Hn).getStorageSync("TIM_".concat(this._SDKAppID,"_isTUIKit"))&&(n=!0);var c=null;if(te&&!oe&&"undefined"==typeof uni&&__wxConfig&&(c=__wxConfig.pages),ne&&"undefined"==typeof uni&&__qqConfig&&(c=__qqConfig.pages),it(c)&&c.length>0){for(var l=0,u=c.length;l<u;l++)if(c[l].toLowerCase().includes("tui")){o=!0;break}c=null}return e||t||n||o}},{key:"reset",value:function(){this._isLoggedIn=!1,this._userSig="",this._a2Key="",this._tinyID="",this._customStatus="",this._statusInstanceID=0}}]),e}(),Rc=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="SignModule",r._helloInterval=120,r._lastLoginTs=0,r._lastWsHelloTs=0,r._isWebUniapp=0,Ps.mixin(f(r)),r}return i(n,[{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:"login",value:function(e){var t="";if(this.isLoggedIn()){var n=this.getMyUserID();return(t=this.getErrorMessage("RepeatLogin",n))&&qe.w(t),Ds({actionStatus:"OK",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return this.outputWarning("LoggingIn",e.userID),As({code:Mi});qe.l("".concat(this._n,".login userID:").concat(e.userID));var o=this._checkLoginInfo(e);if(0!==o.code)return As(o);var r=this.getModule(Vn),i=e.userID,a=e.userSig;return r.setUserID(i),r.setUserSig(a),this.getModule(Xn).updateProtocolConfig(),this._login()}},{key:"_login",value:function(){var e=this,t=this.getModule(Vn),n=t.getScene(),o=0,r=new cs("login");r.setMessage("".concat(n)).setMoreMessage("identifier:".concat(this.getMyUserID())),ce?"tuikit"===n?r.setUIPlatform(4):r.setUIPlatform(3):le?"tuikit"===n?r.setUIPlatform(12):r.setUIPlatform(11):ue&&(De?"flutter_web_uikit"===n?r.setUIPlatform(21):r.setUIPlatform(20):this._isReactUIKit()?Ee?r.setUIPlatform(25):r.setUIPlatform(24):Ee?"tuikit"===n?r.setUIPlatform(17):r.setUIPlatform(16):"tuikit"===n?r.setUIPlatform(14):r.setUIPlatform(13));var i=this.getModule(ro);if(i.canIUseOfflinePush()){this._isWebUniapp=i.getUniAppPlatform();var a=this._getStatusInstanceID();t.setStatusInstanceID(a),this.getModule(Xn).updateProtocolConfig(),o=i.getDeviceBrand()}var s="".concat(this._n,"._login");return this._lastLoginTs=Date.now(),this.request({protocolName:uo,requestData:{deviceBrand:o,isWebUniapp:this._isWebUniapp}}).then((function(o){e._lastLoginTs=0;var i=Date.now(),a=null,c=o.data,l=c.a2Key,u=c.tinyID,d=c.helloInterval,p=c.instanceID,h=c.timeStamp,f=c.customStatus,g=void 0===f?"":f;qe.l("".concat(s," ok. scene:").concat(n," helloInterval:").concat(d," instanceID:").concat(p," timeStamp:").concat(h));var v=1e3*h,m=i-r.getStartTs(),_=v+parseInt(m/2)-i,y=r.getStartTs()+_;if(r.start(y),function(e,t){xe=t;var n=new Date;n.setTime(e),qe.i("baseTime from server:".concat(n," offset:").concat(xe))}(v,_),!u)throw a=new Ss({code:_i}),r.setError(a,!0,e.getNetworkType()).end(),a;if(!l)throw a=new Ss({code:yi}),r.setError(a,!0,e.getNetworkType()).end(),a;var b=Ec(g);r.setNetworkType(e.getNetworkType()).setMoreMessage("helloInterval:".concat(d," instanceID:").concat(p," offset:").concat(_," customStatus:").concat(b)).end(),t.setA2Key(l),t.setTinyID(u),t.setStatusInstanceID(p),t.setCustomStatus(b),e.getModule(Xn).updateProtocolConfig(),e.emitInnerEvent(Os),e._helloInterval=d,e.triggerReady();var M=e.getModule(ro);return M.canIUseOfflinePush()&&(I_("timUniAppInstanceID",p),M.init()),e._fetchCloudControlConfig(),e.getModule(io).init(),o})).catch((function(t){return e.probeNetwork().then((function(e){var n=m(e,2),o=n[0],i=n[1];r.setError(t,o,i).end(!0)})),e._m.setNotReadyReason(Na),qe.e("".concat(s," failed. error:"),t),e._lastLoginTs=0,e._m.onLoginFailed(),As(t)}))}},{key:"logout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return As({code:bi});new cs("logout").setNetworkType(this.getNetworkType()).setMessage("identifier:".concat(this.getMyUserID())).end(!0);var n="".concat(this._n,".logout");return qe.i("".concat(n," type:").concat(t)),0===t&&this._m.setNotReadyReason(Ba),this.request({protocolName:po,requestData:{type:t}}).then((function(){return e.resetReady(),Ds({})})).catch((function(t){return qe.e("".concat(n," error:"),t),e.resetReady(),Ds({})}))}},{key:"_fetchCloudControlConfig",value:function(){this.getModule(Qn).fetchConfig()}},{key:"_getStatusInstanceID",value:function(){return A_("timUniAppInstanceID")}},{key:"_hello",value:function(){var e=this;this._lastWsHelloTs=Date.now(),this.request({protocolName:ho,requestData:{isWebUniapp:this._isWebUniapp}}).catch((function(t){qe.w("".concat(e._n,"._hello error:"),t)}))}},{key:"getLastWsHelloTs",value:function(){return this._lastWsHelloTs}},{key:"_checkLoginInfo",value:function(e){var t=0;return Xt(this.getModule(Vn).getSDKAppID())?t=gi:Xt(e.userID)?t=vi:Xt(e.userSig)&&(t=mi),{code:t}}},{key:"_isReactUIKit",value:function(){return ue&&void 0!==window.tencent_cloud_im_csig_react_uikit_23F_xa}},{key:"onMultipleAccountKickedOut",value:function(e){var t=this;new cs("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(S.KICKED_OUT_MULT_ACCOUNT," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),qe.w("".concat(this._n,".onMultipleAccountKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(T.KICKED_OUT,{type:S.KICKED_OUT_MULT_ACCOUNT}),t._m.setNotReadyReason(Ua),t._m.reset()}))}},{key:"onMultipleDeviceKickedOut",value:function(e){var t=this;new cs("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(S.KICKED_OUT_MULT_DEVICE," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),qe.w("".concat(this._n,".onMultipleDeviceKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(T.KICKED_OUT,{type:S.KICKED_OUT_MULT_DEVICE}),t._m.setNotReadyReason(Pa),t._m.reset()}))}},{key:"onUserSigExpired",value:function(){new cs("kickedOut").setNetworkType(this.getNetworkType()).setMessage(S.KICKED_OUT_USERSIG_EXPIRED).end(!0),qe.w("".concat(this._n,".onUserSigExpired: userSig expired")),0!==this.getModule(Vn).getStatusInstanceID()&&(this.emitOuterEvent(T.KICKED_OUT,{type:S.KICKED_OUT_USERSIG_EXPIRED}),this._m.setNotReadyReason(Ga),this._m.reset())}},{key:"onRestApiKickedOut",value:function(e){new cs("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(S.KICKED_OUT_REST_API," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),qe.w("".concat(this._n,".onRestApiKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),0!==this.getModule(Vn).getStatusInstanceID()&&(this.emitOuterEvent(T.KICKED_OUT,{type:S.KICKED_OUT_REST_API}),this._m.setNotReadyReason(Fa),this._m.reset(),this.getModule(Jn).onRestApiKickedOut())}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0,this._isWebUniapp=0}}]),n}(lo);function Oc(){return null}var xc=function(){function e(t){o(this,e),this._m=t,this._n="StorageModule",this._storageQueue=new Map,this._errorTolerantHandle()}return i(e,[{key:"_errorTolerantHandle",value:function(){le||!at(window)&&this._canIUseCookies()||(this.getItem=Oc,this.setItem=Oc,this.removeItem=Oc,this.clear=Oc)}},{key:"onCheckTimer",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:"_doFlush",value:function(){try{var e,t=w(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];this._setStorageSync(this._getKey(o),r)}}catch(i){t.e(i)}finally{t.f()}this._storageQueue.clear()}catch(a){qe.w("".concat(this._n,"._doFlush error:"),a)}}},{key:"_getPrefix",value:function(){var e=this._m.getModule(Vn);return"TIM_".concat(e.getSDKAppID(),"_").concat(e.getUserID(),"_")}},{key:"_getKey",value:function(e){return"".concat(this._getPrefix()).concat(e)}},{key:"getItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this.getStorageSync(n)}catch(o){return qe.w("".concat(this._n,".getItem error:"),o),{}}}},{key:"setItem",value:function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var n=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?e:this._getKey(e);this._setStorageSync(n,t)}else this._storageQueue.set(e,t)}},{key:"clear",value:function(){try{le?de.clearStorageSync():this._canIUseCookies()&&localStorage.clear()}catch(e){qe.w("".concat(this._n,".clear error:"),e)}}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(o){qe.w("".concat(this._n,".removeItem error:"),o)}}},{key:"getSize",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"b";try{var o={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(o,"leftSize",{enumerable:!0,get:function(){return o.limitSize-o.size}}),le&&(o.limitSize=1024*de.getStorageInfoSync().limitSize),e)o.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(le)de.getStorageInfoSync().keys.forEach((function(e){o.size+=JSON.stringify(t.getStorageSync(e)).length+t._getKey(e).length}));else if(this._canIUseCookies())for(var r in localStorage)localStorage.hasOwnProperty(r)&&(o.size+=localStorage.getItem(r).length+r.length);return this._convertUnit(o)}catch(i){qe.w("".concat(this._n," error:"),i)}}},{key:"_convertUnit",value:function(e){var t={},n=e.unit;for(var o in t.unit=n,e)"number"==typeof e[o]&&("kb"===n.toLowerCase()?t[o]=Math.round(e[o]/1024):"mb"===n.toLowerCase()?t[o]=Math.round(e[o]/1024/1024):t[o]=e[o]);return t}},{key:"_setStorageSync",value:function(e,t){le?ie?my.setStorageSync({key:e,data:t}):de.setStorageSync(e,t):this._canIUseCookies()&&localStorage.setItem(e,JSON.stringify(t))}},{key:"getStorageSync",value:function(e){return le?ie?my.getStorageSync({key:e}).data:de.getStorageSync(e):this._canIUseCookies()?JSON.parse(localStorage.getItem(e)):{}}},{key:"_removeStorageSync",value:function(e){le?ie?my.removeStorageSync({key:e}):de.removeStorageSync(e):this._canIUseCookies()&&localStorage.removeItem(e)}},{key:"_canIUseCookies",value:function(){return navigator&&navigator.cookieEnabled&&localStorage}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._doFlush()}}]),e}(),Nc=function(){function e(t){o(this,e),this._n="SSOLogBody",this._report=[]}return i(e,[{key:"pushIn",value:function(e){qe.d("".concat(this._n,".pushIn"),this._report.length,e),this._report.push(e)}},{key:"backfill",value:function(e){var t;it(e)&&0!==e.length&&(qe.d("".concat(this._n,".backfill"),this._report.length,e.length),(t=this._report).unshift.apply(t,_(e)))}},{key:"getLogsNumInMemory",value:function(){return this._report.length}},{key:"isEmpty",value:function(){return 0===this._report.length}},{key:"_reset",value:function(){this._report.length=0,this._report=[]}},{key:"getLogsInMemory",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),Pc=function(e){var t=e.getModule(Vn);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:Ne()}},Uc=function(e){s(r,e);var n=v(r);function r(e){var t;o(this,r),(t=n.call(this,e))._n="EventStatModule",t.TAG="im-ssolog-event",t._reportBody=new Nc,t.MIN_THRESHOLD=20,t.MAX_THRESHOLD=100,t.WAITING_TIME=6e4,t.REPORT_LEVEL=[4,5,6],t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._lastReportTime=Date.now();var i=t.getInnerEmitterInstance();return i.on(Os,t._onLoginSuccess,f(t)),i.on(xs,t._onCloudConfigUpdated,f(t)),t}return i(r,[{key:"reportAtOnce",value:function(){qe.d("".concat(this._n,".reportAtOnce")),this._report()}},{key:"_onLoginSuccess",value:function(){var e=this,t=this.getModule(Hn),n=t.getItem(this.TAG,!1);!Xt(n)&&ct(n.forEach)&&(qe.l("".concat(this._n,"._onLoginSuccess get ssolog in storage, count:").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("evt_rpt_threshold"),t=this.getCloudConfig("evt_rpt_waiting"),n=this.getCloudConfig("evt_rpt_level"),o=this.getCloudConfig("evt_rpt_sdkappid_bl"),r=this.getCloudConfig("evt_rpt_tinyid_wl");at(e)||(this.MIN_THRESHOLD=Number(e)),at(t)||(this.WAITING_TIME=Number(t)),at(n)||(this.REPORT_LEVEL=n.split(",").map((function(e){return Number(e)}))),at(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(",").map((function(e){return Number(e)}))),at(r)||(this.REPORT_TINYID_WHITELIST=r.split(","))}},{key:"pushIn",value:function(e){e instanceof cs&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:"onCheckTimer",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:"_filterLogs",value:function(e){var t=this,n=this.getModule(Vn),o=n.getSDKAppID(),r=n.getTinyID();return Ft(this.REPORT_SDKAPPID_BLACKLIST,o)&&!qt(this.REPORT_TINYID_WHITELIST,r)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:"_report",value:function(){var e=this;if(!this._reportBody.isEmpty()){var n=this._reportBody.getLogsInMemory(),o=this._filterLogs(n);if(0!==o.length){var r={header:Pc(this),event:o};this.request({protocolName:Hr,requestData:t({},r)}).then((function(){e._lastReportTime=Date.now()})).catch((function(t){qe.w("".concat(e._n,".report failed. networkType:").concat(e.getNetworkType()," error:"),t),e._reportBody.backfill(n),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:"_flushAtOnce",value:function(){var e=this.getModule(Hn),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory(),o="".concat(this._n,"._flushAtOnce");if(Xt(t))qe.l("".concat(o," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var r=n.concat(t);r.length>this.MAX_THRESHOLD&&(r=r.slice(0,this.MAX_THRESHOLD)),qe.l("".concat(o," count:").concat(r.length)),e.setItem(this.TAG,r,!0,!1)}}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),r}(lo),Gc="none",Bc="online",Fc=[Aa,Wa],qc=function(){function e(t){o(this,e),this._m=t,this._networkType="",this._n="NetMonitorModule",this.MAX_WAIT_TIME=3e3,this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null}return i(e,[{key:"start",value:function(){var e=this;le?(de.getNetworkType({success:function(t){e._networkType=t.networkType||t.subtype||"",t.networkType===Gc?qe.w("".concat(e._n,".start no network, please check!")):qe.i("".concat(e._n,".start networkType:").concat(t.networkType))}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),de.onNetworkStatusChange(this._mpNetworkStatusCallback)):(this._networkType=Bc,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window&&(window.addEventListener("online",this._webOnlineCallback),window.addEventListener("offline",this._webOfflineCallback)))}},{key:"_onWebOnline",value:function(){this._onNetworkStatusChange({isConnected:!0,networkType:Bc})}},{key:"_onWebOffline",value:function(){this._onNetworkStatusChange({isConnected:!1,networkType:Gc})}},{key:"_onNetworkStatusChange",value:function(e){var t=e.isConnected,n=e.networkType,o="".concat(this._n,"._onNetworkStatusChange"),r=!1;t?(qe.i("".concat(o," previous:").concat(this._networkType," current:").concat(n)),this._networkType!==n&&(r=!0,this._m.getModule(Jn).reConnect(!0))):this._networkType!==n&&(r=!0,qe.w("".concat(o," no network, please check!")),this._m.getModule(Jn).offline()),r&&(new cs("networkChange").setMessage("isConnected:".concat(t," previousNetworkType:").concat(this._networkType," networkType:").concat(n)).end(),this._networkType=n)}},{key:"probe",value:function(e){var t=this;if(!at(e)&&Fc.includes(e.code))return Promise.resolve([!0,this._networkType]);var n="".concat(this._n,".probe");return new Promise((function(e,o){le?de.getNetworkType({success:function(o){t._networkType=o.networkType,o.networkType===Gc?(qe.w("".concat(n," no network, please check!")),e([!1,o.networkType])):(qe.i("".concat(n," networkType:").concat(o.networkType)),e([!0,o.networkType]))}}):t._networkType===Gc?e([!1,Gc]):e([!0,Bc])}))}},{key:"getNetworkType",value:function(){return this._networkType}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),le?null!==this._mpNetworkStatusCallback&&(de.offNetworkStatusChange&&(se||oe?de.offNetworkStatusChange(this._mpNetworkStatusCallback):de.offNetworkStatusChange()),this._mpNetworkStatusCallback=null):window&&(null!==this._webOnlineCallback&&(window.removeEventListener("online",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener("offline",this._webOfflineCallback),this._webOfflineCallback=null))}}]),e}(),Vc=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=Object.prototype.hasOwnProperty,n="~";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,o,i,a){if("function"!=typeof o)throw new TypeError("The listener must be a function");var s=new r(o,i||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,i=o.length,a=new Array(i);r<i;r++)a[r]=o[r].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},s.prototype.emit=function(e,t,o,r,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,o),!0;case 4:return u.fn.call(u.context,t,o,r),!0;case 5:return u.fn.call(u.context,t,o,r,i),!0;case 6:return u.fn.call(u.context,t,o,r,i,a),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,o);break;case 4:u[l].fn.call(u[l].context,t,o,r);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,o,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||r&&!s.once||o&&s.context!==o||a(this,i);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==t||r&&!s[c].once||o&&s[c].context!==o)&&l.push(s[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})),Hc=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="BigDataChannelModule",r.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},r._bdh_download_server="grouptalk.c2c.qq.com",r._BDHBizID=10001,r._authKey="",r._expireTime=0,r.getInnerEmitterInstance().on(Os,r._getAuthKey,f(r)),r}return i(n,[{key:"_getAuthKey",value:function(){var e=this;this.isIntl()||this.request({protocolName:vo}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:"_isFromOlderVersion",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:"parseElements",value:function(e,t){if(!it(e)||!t)return[];for(var n=[],o=null,r=0;r<e.length;r++)o=e[r],this._needParse(o)?n.push(this._parseElement(o,t)):n.push(e[r]);return n}},{key:"_needParse",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==S.MSG_AUDIO&&e.type!==S.MSG_FILE&&e.type!==S.MSG_VIDEO)}},{key:"_parseElement",value:function(e,t){switch(e.type){case S.MSG_AUDIO:return this._parseAudioElement(e,t);case S.MSG_FILE:return this._parseFileElement(e,t);case S.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:"_parseAudioElement",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:"_parseFileElement",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:"_parseVideoElement",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:"_genAudioUrl",value:function(e,t){if(""===this._authKey)return"";var n=this.getModule(Vn).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.SOUND,"&openid=").concat(t,"&ver=0")}},{key:"_genFileUrl",value:function(e,t,n){if(""===this._authKey)return"";n||(n="".concat(Math.floor(1e5*Math.random()),"-").concat(Date.now()));var o=this.getModule(Vn).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(o,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.FILE,"&openid=").concat(t,"&ver=0&filename=").concat(encodeURIComponent(n))}},{key:"_genVideoUrl",value:function(e,t){if(""===this._authKey)return"";var n=this.getModule(Vn).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.VIDEO,"&openid=").concat(t,"&ver=0")}},{key:"reset",value:function(){this._authKey="",this.expireTime=0}}]),n}(lo),zc=["requestSnapshotUrl"],jc=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="UploadModule",t.TIMUploadPlugin=null,t.timUploadPlugin=null,t.COSSDK=null,t._cosUploadMethod=null,t.expiredTimeLimit=600,t.appid=0,t.bucketName="",t.ciUrl="",t.directory="",t.downloadUrl="",t.uploadUrl="",t.region="ap-shanghai",t.cos=null,t.cosOptions={secretId:"",secretKey:"",sessionToken:"",expiredTime:0},t.uploadFileType="",t.duration=900,t.tryCount=0,t.getInnerEmitterInstance().on(Os,t._init,f(t)),t}return i(r,[{key:"_init",value:function(){var e=this.getModule(Kn);if(this.TIMUploadPlugin=e.getPlugin("tim-upload-plugin"),this.TIMUploadPlugin)this._initUploaderMethod();else{var t=le?"cos-wx-sdk":"cos-js-sdk";this.COSSDK=e.getPlugin(t),this.COSSDK?(this._getAuthorizationKey(),this.outputWarning("CosReplacement",t)):this.outputWarning("PluginUndetected")}}},{key:"_getAuthorizationKey",value:function(){var e=this,t="".concat(this._n,".").concat("_getAuthorizationKey"),n=new cs("_getAuthorizationKey"),o=Math.ceil(Date.now()/1e3);this.request({protocolName:Fr,requestData:{duration:this.expiredTimeLimit}}).then((function(r){var i=r.data;qe.l("".concat(t," ok. data:"),i);var a=i.expiredTime-o;n.setMessage("requestId:".concat(i.requestId," requestTime:").concat(o," expiredTime:").concat(i.expiredTime," diff:").concat(a,"s")).setNetworkType(e.getNetworkType()).end(),!le&&i.region&&(e.region=i.region),e.appid=i.appid,e.bucketName=i.bucketName,e.ciUrl=i.ciUrl,e.directory=i.directory,e.downloadUrl=i.downloadUrl,e.uploadUrl=i.uploadUrl,e.cosOptions={secretId:i.secretId,secretKey:i.secretKey,sessionToken:i.sessionToken,expiredTime:i.expiredTime},qe.l("".concat(t," ok. region:").concat(e.region," bucketName:").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(o){e.probeNetwork().then((function(e){var t=m(e,2),r=t[0],i=t[1];n.setError(o,r,i).end()})),qe.w("".concat(t," failed. error:"),o)}))}},{key:"_getCosPreSigUrl",value:function(e){var t=this,n="".concat(this._n,".").concat("_getCosPreSigUrl"),o=Math.ceil(Date.now()/1e3),r=new cs("_getCosPreSigUrl");return this.request({protocolName:qr,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var i=e.data||{},a=i.expiredTime-o;return qe.l("".concat(n," ok. data:"),i),r.setMessage("requestId:".concat(i.requestId," expiredTime:").concat(i.expiredTime," diff:").concat(a,"s")).setNetworkType(t.getNetworkType()).end(),i})).catch((function(o){return-1===o.code&&(o.code=ki),t.probeNetwork().then((function(e){var t=m(e,2),n=t[0],i=t[1];r.setError(o,n,i).end()})),qe.w("".concat(n," failed. error:"),o),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,As({code:ki}))}))}},{key:"_initUploaderMethod",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=le?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=le?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:"onCheckTimer",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:"_getAuthorization",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:"upload",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(no);switch(e.type){case S.MSG_IMAGE:return t.addTotalCount(es),this._uploadImage(e);case S.MSG_FILE:return t.addTotalCount(es),this._uploadFile(e);case S.MSG_AUDIO:return t.addTotalCount(es),this._uploadAudio(e);case S.MSG_VIDEO:return t.addTotalCount(es),this._uploadVideo(e);default:return Promise.resolve()}}},{key:"_uploadImage",value:function(e){var n=this,o=this.getModule(On),r=e.getElements()[0],i=o.getMessageOption(e.clientSequence);return this.doUploadImage({file:i.payload.file,to:i.to,onProgress:function(e){if(r.updatePercent(e),ct(i.onProgress))try{i.onProgress(e)}catch(t){return As({code:Di})}}}).then((function(o){var i,a,s=o.location,c=o.fileType,l=o.fileSize,u=o.width,d=o.height,p=o.smallImageUrl,h=o.smallImageWidth,f=o.smallImageHeight,g=o.largeImageUrl,v=o.largeImageWidth,m=o.largeImageHeight,_=n.isPrivateNetWork()?s:Ct(s);return r.updateImageFormat(c),p&&g?(i={url:p,width:h,height:f},a={url:g,width:v,height:m}):(i=Pt({originUrl:_,originWidth:u,originHeight:d,min:198}),a=Pt({originUrl:_,originWidth:u,originHeight:d,min:720})),r.updateImageInfoArray([{size:l,url:_,width:u,height:d},t({},a),t({},i)]),e}))}},{key:"_uploadFile",value:function(e){var t=this,n=this.getModule(On),o=e.getElements()[0],r=n.getMessageOption(e.clientSequence);return this.doUploadFile({file:r.payload.file,to:r.to,onProgress:function(e){if(o.updatePercent(e),ct(r.onProgress))try{r.onProgress(e)}catch(t){return As({code:Di})}}}).then((function(n){var r=n.location,i=t.isPrivateNetWork()?r:Ct(r);return o.updateFileUrl(i),e}))}},{key:"_uploadAudio",value:function(e){var t=this,n=this.getModule(On),o=e.getElements()[0],r=n.getMessageOption(e.clientSequence);return this.doUploadAudio({file:r.payload.file,to:r.to,onProgress:function(e){if(o.updatePercent(e),ct(r.onProgress))try{r.onProgress(e)}catch(t){return As({code:Di})}}}).then((function(n){var r=n.location,i=t.isPrivateNetWork()?r:Ct(r);return o.updateAudioUrl(i),e}))}},{key:"_uploadVideo",value:function(e){var t=this,n=this.getModule(On),o=e.getElements()[0],r=n.getMessageOption(e.clientSequence);return this.doUploadVideo({file:r.payload.file,to:r.to,onProgress:function(e){if(o.updatePercent(e),ct(r.onProgress))try{r.onProgress(e)}catch(t){return As({code:Di})}}}).then((function(n){var r=n.location,i=n.snapshotInfo,a=t.isPrivateNetWork()?r:Ct(r);return o.updateVideoUrl(a),Xt(i)||o.updateSnapshotInfo(i),e}))}},{key:"doUploadImage",value:function(e){var t=this;if(!e.file)return As({code:Ui});var n=this._checkImageType(e.file);if(!0!==n)return n;var o=this._checkImageSize(e.file);if(!0!==o)return o;var r=null;return this._setUploadFileType(Bs),this.uploadByCOS(e).then((function(e){return r=e,t.isPrivateNetWork()?Rt(e.location):Rt("https://".concat(e.location))})).then((function(e){return r.width=e.width,r.height=e.height,Promise.resolve(r)}))}},{key:"_checkImageType",value:function(e){var t="";return t=le?e.url.slice(e.url.lastIndexOf(".")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(".")+1),Us.indexOf(t.toLowerCase())>=0||As({code:Gi})}},{key:"_checkImageSize",value:function(e){var t=0;return 0===(t=le?e.size:e.files[0].size)?As({code:Ei}):t<20971520||As({code:Bi})}},{key:"doUploadFile",value:function(e){return e.file?e.file.files[0].size>104857600?As({code:Wi}):0===e.file.files[0].size?As({code:Ei}):(this._setUploadFileType(Vs),this.uploadByCOS(e)):As({code:$i})}},{key:"doUploadVideo",value:function(e){return e.file.videoFile.size>104857600?As({code:Hi}):0===e.file.videoFile.size?As({code:Ei}):-1===Gs.indexOf(e.file.videoFile.type)?As({code:zi}):(this._setUploadFileType(Fs),le?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):ue?this.handleVideoUpload(e):void 0)}},{key:"handleVideoUpload",value:function(e){var t=this;return new Promise((function(n,o){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){o(new Ss({code:Vi}))}))}))}))}},{key:"doUploadAudio",value:function(e){return e.file?e.file.size>20971520?As({code:qi}):0===e.file.size?As({code:Ei}):(this._setUploadFileType(qs),this.uploadByCOS(e)):As({code:Fi})}},{key:"uploadByCOS",value:function(e){var t=this;if(!ct(this._cosUploadMethod))return this.outputWarning("PluginUndetected"),As({code:Ci});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var n=new cs("upload"),o="".concat(this._n,".uploadByCOS"),r=Date.now(),i=this._getFile(e);return new Promise((function(a,s){var c=le?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),l=t;t._cosUploadMethod(c,(function(e,c){var u=Object.create(null);if(c){if(e||it(c.files)&&c.files[0].error){var d=new Ss({code:ji});return n.setError(d,!0,t.getNetworkType()).end(),qe.l("".concat(o," failed. error:"),c.files[0].error),403===c.files[0].error.statusCode&&(qe.w("".concat(o," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),void s(d)}u.fileName=i.name,u.fileSize=i.size,u.fileType=i.type.slice(i.type.indexOf("/")+1).toLowerCase(),u.location=le?c.Location:c.files[0].data.Location;var p=Date.now()-r,h=l._formatFileSize(i.size),f=l._formatSpeed(1e3*i.size/p),g="size:".concat(h," time:").concat(p,"ms speed:").concat(f);qe.l("".concat(o," success. name:").concat(i.name," ").concat(g)),a(u);var v=t.getModule(no);return v.addCost(es,p),v.addFileSize(es,i.size),void n.setNetworkType(t.getNetworkType()).setMessage(g).end()}var m=new Ss({code:ji});n.setError(m,!0,l.getNetworkType()).end(),qe.w("".concat(o," failed. error:"),e),403===e.statusCode&&(qe.w("".concat(o," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),s(m)}))}))}},{key:"_uploadWithPreSigUrl",value:function(e){var t=this,n="".concat(this._n,"._uploadWithPreSigUrl"),o=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(r,i){var a=new cs("upload"),s=e.requestSnapshotUrl,c=void 0===s?void 0:s,l=h(e,zc),u=Date.now();t._cosUploadMethod(l,(function(e,s){if(e||403===s.statusCode)return a.setError(new Ss(e),!0,t.getNetworkType()).end(),qe.l("".concat(n," failed, error:"),e),void i(new Ss({code:ji}));var d=Object.create(null),p=s.data.location||"";t.isPrivateNetWork()||0!==p.indexOf("https://")&&0!==p.indexOf("http://")||(p=p.split("//")[1]),d.fileName=o.name,d.fileSize=o.size,d.fileType=o.type.slice(o.type.indexOf("/")+1).toLowerCase(),d.location=p;var h=Date.now()-u,f=t._formatFileSize(o.size),g=t._formatSpeed(1e3*o.size/h),v="size:".concat(f,",time:").concat(h,"ms,speed:").concat(g," res:").concat(JSON.stringify(s.data));qe.l("".concat(n," success name:").concat(o.name,",").concat(v)),a.setNetworkType(t.getNetworkType()).setMessage(v).end();var m=t.getModule(no);m.addCost(es,h),m.addFileSize(es,o.size);var _=[];if(l.thumbUrl&&l.largeUrl&&(_=[t._getSmallImageInfoByUrl(l.thumbUrl,d),t._getLargeImageInfoByUrl(l.largeUrl,d)]),c&&_.push(t._getSnapshotInfoByUrl(c,d)),_.length>0)return Promise.all(_).then((function(){r(d)}));r(d)}))}))}))}},{key:"_getRawOrUploadProxyUrl",value:function(e){var t=this.getModule(Vn).getFileUploadProxy(),n=e;return t&&(n=e.replace(/^https:\/\/[^/]+/,t)),n}},{key:"_getFile",value:function(e){var t;return it(e.file.files)||(t=e.file.files,"filelist"===ut(t))?e.file.files[0]:e.file}},{key:"_formatFileSize",value:function(e){return e<1024?e+"B":e<1048576?Math.floor(e/1024)+"KB":Math.floor(e/1048576)+"MB"}},{key:"_formatSpeed",value:function(e){return e<=1048576?Bt(e/1024,1)+"KB/s":Bt(e/1048576,1)+"MB/s"}},{key:"_createCosOptionsWeb",value:function(e){var t=this._getFile(e),n=t.name,o=n.slice(n.lastIndexOf(".")),r=this._genFileName("".concat(mt(999999)).concat(o));return{files:[{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(r),Body:t}],SliceSize:1048576,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){qe.w("onProgress callback error:",n)}},onFileFinish:function(e,t,n){}}}},{key:"_createCosOptionsWXMiniApp",value:function(e){var t=this._getFile(e),n=this._genFileName(t.name),o=t.url;return{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(n),FilePath:o,onProgress:function(t){if(qe.l(JSON.stringify(t)),"function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){qe.w("onProgress callback error:",n)}}}}},{key:"_createCosOptionsPreSigUrl",value:function(e){var t=this,n="",o="",r=0,i=this._getFile(e);if(le)n=this._genFileName(i.name),o=i.url,r=1;else{var a=i.name,s=a.slice(a.lastIndexOf("."));n=this._genFileName("".concat(mt(999999)).concat(s)),o=i,r=0}return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:r,duration:this.duration}).then((function(r){var i=r.uploadUrl,a=r.downloadUrl,s=r.requestSnapshotUrl,c=void 0===s?void 0:s,l=r.thumbUrl,u=r.largeUrl;return{url:t._getRawOrUploadProxyUrl(i),fileType:t.uploadFileType,fileName:n,resources:o,downloadUrl:a,requestSnapshotUrl:c,thumbUrl:l,largeUrl:u,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){qe.w("onProgress callback error:",n),qe.e(n)}}}}))}},{key:"_genFileName",value:function(e){return"".concat(Ot(),"-").concat(e)}},{key:"_setUploadFileType",value:function(e){this.uploadFileType=e}},{key:"_getSnapshotInfoByUrl",value:function(e,t){var n=this,o=new cs("getSnapshotInfo");return this.request({protocolName:Vr,requestData:{platform:this.getPlatform(),coverName:this._genFileName(mt(99999)),requestSnapshotUrl:e}}).then((function(e){var n=(e.data||{}).snapshotUrl;return o.setMessage("snapshotUrl:".concat(n)).end(),Xt(n)?{}:Rt(n).then((function(e){t.snapshotInfo={snapshotUrl:n,snapshotWidth:e.width,snapshotHeight:e.height}}))})).catch((function(e){return qe.w("".concat(n._n,"._getSnapshotInfoByUrl failed. error:"),e),o.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}}))}},{key:"_getSmallImageInfoByUrl",value:function(e,t){return Rt(e).then((function(n){t.smallImageUrl=e,t.smallImageWidth=n.width,t.smallImageHeight=n.height}))}},{key:"_getLargeImageInfoByUrl",value:function(e,t){return Rt(e).then((function(n){t.largeImageUrl=e,t.largeImageWidth=n.width,t.largeImageHeight=n.height}))}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset"))}}]),r}(lo),$c=["downloadKey","pbDownloadKey","messageList"],Wc=function(){function e(t){o(this,e),this._n="MergerMessageHandler",this._messageModule=t}return i(e,[{key:"uploadMergerMessage",value:function(e,t){var n=this,o="".concat(this._n,".").concat("uploadMergerMessage");qe.d("".concat(o," message:"),e,"messageBytes:".concat(t));var r=e.payload.messageList,i=r.length,a=new cs("uploadMergerMessage");return this._messageModule.request({protocolName:Yr,requestData:{messageList:r}}).then((function(e){qe.d("".concat(o," ok. response:"),e.data);var r=e.data,s=r.pbDownloadKey,c=r.downloadKey,l={pbDownloadKey:s,downloadKey:c,messageNumber:i};return a.setNetworkType(n._messageModule.getNetworkType()).setMessage("".concat(i,"-").concat(t,"-").concat(c)).end(),l})).catch((function(e){throw qe.w("".concat(o," failed. error:"),e),n._messageModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),e}))}},{key:"downloadMergerMessage",value:function(e){var n=this,o="".concat(this._n,".").concat("downloadMergerMessage");qe.d("".concat(o," message:"),e);var r=e.payload.downloadKey,i=this._messageModule.getFileDownloadProxy(),a=new cs("downloadMergerMessage");return a.setMessage("downloadKey:".concat(r)),this._messageModule.request({protocolName:Xr,requestData:{downloadKey:r}}).then((function(r){if(qe.d("".concat(o," ok. response:"),r.data),ct(e.clearElement)){var s=e.payload,c=(s.downloadKey,s.pbDownloadKey,s.messageList,h(s,$c));e.clearElement(),e.setElement({type:e.type,content:t({messageList:r.data.messageList},c)},i)}else{var l=[];r.data.messageList.forEach((function(e){if(!Xt(e)){var t=new Ms(e,i);l.push(t)}})),e.payload.messageList=l,e.payload.downloadKey="",e.payload.pbDownloadKey=""}return a.setNetworkType(n._messageModule.getNetworkType()).end(),e})).catch((function(e){throw qe.w("".concat(o," failed. key:").concat(r," error:"),e),n._messageModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),e}))}},{key:"createMergerMessagePack",value:function(e,t,n){return e.conversationType===S.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:"_createC2CMergerMessagePack",value:function(e,t,n){var o=null;t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0}));var r=[];if(rt(t)&&rt(t.messageControlInfo)){var i=t.messageControlInfo,a=i.excludedFromUnreadCount,s=i.excludedFromLastMessage,c=i.excludedFromContentModeration;!0===a&&r.push("NoUnread"),!0===s&&r.push("NoLastMsg"),!0===c&&r.push("NoMsgCheck")}var l="";nt(e.cloudCustomData)&&e.cloudCustomData.length>0&&(l=e.cloudCustomData);var u=n.pbDownloadKey,d=n.downloadKey,p=n.messageNumber,h=e.payload,f=h.title,g=h.abstractList,v=h.compatibleText,m=this._messageModule.getModule(Pn),_=m&&m.isOnlineMessage(e,t)?0:void 0;return{protocolName:mo,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:u,downloadKey:d,title:f,abstractList:g,compatibleText:v,messageNumber:p}}],cloudCustomData:l,clientTime:e.clientTime,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:_,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||"",desc:o.description||"",ext:o.extension||"",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||""}}:void 0,messageControlInfo:0!==_?r:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}},{key:"_createGroupMergerMessagePack",value:function(e,t,n){var o=null;t&&t.offlinePushInfo&&(o=t.offlinePushInfo);var r=[];if(rt(t)&&rt(t.messageControlInfo)){var i=t.messageControlInfo,a=i.excludedFromUnreadCount,s=i.excludedFromLastMessage,c=i.excludedFromContentModeration;!0===a&&r.push("NoUnread"),!0===s&&r.push("NoLastMsg"),!0===c&&r.push("NoMsgCheck")}var l="";nt(e.cloudCustomData)&&e.cloudCustomData.length>0&&(l=e.cloudCustomData);var u=n.pbDownloadKey,d=n.downloadKey,p=n.messageNumber,h=e.payload,f=h.title,g=h.abstractList,v=h.compatibleText,m=this._messageModule.getModule(Un),_=m&&m.isOnlineMessage(e,t)?1:0;return{protocolName:_o,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:u,downloadKey:d,title:f,abstractList:g,compatibleText:v,messageNumber:p}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:l,onlineOnlyFlag:_,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||"",desc:o.description||"",ext:o.extension||"",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||""}}:void 0,clientTime:e.clientTime,needReadReceipt:!0!==e.needReadReceipt||m.isMessageFromOrToAVChatroom(e.to)?0:1,messageControlInfo:0===_?r:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}}]),e}(),Kc={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},Yc=[Di,Ui,Gi,Ei,Bi,$i,Wi,Hi,zi,Fi,qi,Ci];function Xc(e){var t=!1;return Object.values(Kc).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}var Jc=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="MessageModule",t._messageOptionsMap=new Map,t._mergerMessageHandler=new Wc(f(t)),t}return i(r,[{key:"createTextMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new ws(e),o="string"==typeof e.payload?e.payload:e.payload.text,r=new ls({text:o}),i=this._getNickAndAvatarByUserID(t);return n.setElement(r),n.setNickAndAvatar(i),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createImageMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new ws(e);if(le){var o=e.payload.file;if(Qe(o))return void this.outputWarning("FileUnsupportedInMP","createImageMessage");var r=o.tempFiles[0].path||o.tempFiles[0].tempFilePath,i={url:r,name:r.slice(r.lastIndexOf("/")+1),size:o.tempFiles&&o.tempFiles[0].size||1,type:r.slice(r.lastIndexOf(".")+1).toLowerCase()};e.payload.file=i}else if(ue)if(Qe(e.payload.file)){var a=e.payload.file;e.payload.file={files:[a]}}else if(rt(e.payload.file)&&"undefined"!=typeof uni){var s=e.payload.file.tempFiles[0];e.payload.file={files:[s]}}var c=new us({imageFormat:Ve.UNKNOWN,uuid:this._generateUUID(e.payload.file),file:e.payload.file}),l=this._getNickAndAvatarByUserID(t);return n.setElement(c),n.setNickAndAvatar(l),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.clientSequence,e),n}},{key:"createAudioMessage",value:function(e){var t=e.payload.file;if(le){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf("/")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(".")+1).toLowerCase()};e.payload.file=n}var o=this.getMyUserID();e.currentUser=o,e.senderTinyID=this.getMyTinyID();var r=new ws(e),i=new ps({second:Math.floor(t.duration/1e3),size:t.fileSize||t.size,url:t.tempFilePath,uuid:this._generateUUID(e.payload.file)}),a=this._getNickAndAvatarByUserID(o);return r.setElement(i),r.setNickAndAvatar(a),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.clientSequence,e),r}},{key:"createVideoMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID(),e.payload.file.thumbUrl="",e.payload.file.thumbSize=0;var n={};if(le){if(ie)return void this.outputWarning("VideoUnsupportedInAlipay");if(Qe(e.payload.file))return void this.outputWarning("FileUnsupportedInMP","createVideoMessage");var o=e.payload.file;it(o.tempFiles)&&(o=o.tempFiles[0]),n.url=o.tempFilePath,n.name=o.tempFilePath.slice(o.tempFilePath.lastIndexOf("/")+1),n.size=o.size||1,n.second=o.duration||0,n.type=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(".")+1).toLowerCase()}else if(ue){if(Qe(e.payload.file)){var r=e.payload.file;e.payload.file.files=[r]}else if(rt(e.payload.file)&&"undefined"!=typeof uni){var i=e.payload.file.tempFile;e.payload.file.files=[i]}var a=e.payload.file;n.url=window.URL.createObjectURL(a.files[0]),n.name=a.files[0].name,n.size=a.files[0].size||1,n.second=a.files[0].duration||0,n.type=a.files[0].type.split("/")[1]}e.payload.file.videoFile=n;var s=new ws(e),c=new ys({videoFormat:n.type,videoSecond:Bt(n.second,0),videoSize:n.size,remoteVideoUrl:"",videoUrl:n.url,videoUUID:this._generateUUID(e.payload.file.videoFile),thumbUUID:this._generateUUID(e.payload.file.videoFile),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(".")+1).toLowerCase()}),l=this._getNickAndAvatarByUserID(t);return s.setElement(c),s.setNickAndAvatar(l),s.setNameCard(this._getNameCardByGroupID(s)),this._messageOptionsMap.set(s.clientSequence,e),s}},{key:"createCustomMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new ws(e),o=new _s({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createFaceMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new ws(e),o=new ds(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createMergerMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=this._getNickAndAvatarByUserID(t),o=new ws(e),r=new Cs(e.payload);return o.setElement(r),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),o.setRelayFlag(!0),o}},{key:"createForwardMessage",value:function(e){var t=e.to,n=e.conversationType,o=e.priority,r=e.payload,i=e.needReadReceipt,a=e.receiverList,s=this.getMyUserID(),c=this._getNickAndAvatarByUserID(s);if(r.type===S.MSG_GRP_TIP)return As({code:Zi});var l={to:t,conversationType:n,conversationID:"".concat(n).concat(t),priority:o,isPlaceMessage:0,status:en.UNSEND,currentUser:s,senderTinyID:this.getMyTinyID(),cloudCustomData:e.cloudCustomData||r.cloudCustomData||"",needReadReceipt:i,receiverList:a,isSupportExtension:e.isSupportExtension||!1},u=new ws(l);return u.setElement(r.getElements()[0]),u.setNickAndAvatar(c),u.setNameCard(this._getNameCardByGroupID(r)),u.setRelayFlag(!0),u}},{key:"downloadMergerMessage",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:"createFileMessage",value:function(e){if(le){if(!te&&!ne&&!se)return;var n=de.getSystemInfoSync().SDKVersion;if(te&&Nt(n,"2.5.0")<0)return void this.outputWarning("WXChooseMessageFile");if(ne&&Nt(n,"1.18.0")<0)return void this.outputWarning("QQChooseMessageFile")}if(ue||se){if(Qe(e.payload.file)){var o=e.payload.file;e.payload.file={files:[o]}}else if(rt(e.payload.file)&&"undefined"!=typeof uni){var r=e.payload.file,i=r.tempFiles,a=r.files,s=null;it(i)?s=i[0]:it(a)&&(s=a[0]),e.payload.file={files:[s]}}}else if(te||ne){var c=e.payload.file.tempFiles,l=t(t({},c[0]),{},{url:c[0].path});e.payload.file={files:[l]}}var u=this.getMyUserID();e.currentUser=u,e.senderTinyID=this.getMyTinyID();var d=new ws(e),p=new ms({uuid:this._generateUUID(e.payload.file),file:e.payload.file}),h=this._getNickAndAvatarByUserID(u);return d.setElement(p),d.setNickAndAvatar(h),d.setNameCard(this._getNameCardByGroupID(d)),this._messageOptionsMap.set(d.clientSequence,e),d}},{key:"createLocationMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new ws(e),o=new bs(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"_onCannotFindModule",value:function(){return As({code:Ra})}},{key:"sendMessageInstance",value:function(e,t){var n=this;if(!1===this.getModule(io).filterMessage(e,t))return this._onSendMessageFailed(e,new Ss({code:Ha}));var o,r=null;switch(e.conversationType){case S.CONV_C2C:if(!(r=this.getModule(Pn)))return this._onCannotFindModule();break;case S.CONV_GROUP:if(!(r=this.getModule(Un)))return this._onCannotFindModule();if(St({groupID:e.to})){var i=r.getLocalGroupProfile(e.to);if(i&&i.isSupportTopic)return As({code:xi})}break;default:return As({code:Ii})}var a=this.getModule(Wn),s=this.getModule(Un);return a.upload(e).then((function(){return n._getSendMessageSpecifiedKey(e)===Qa&&n.getModule(no).addSuccessCount(es),s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return As({code:Ki});n._addSendMessageTotalCount(e),o=Date.now();var i=function(e){var t="utf-8";ue&&document&&(t=document.charset.toLowerCase());var n,o,r=0;if(o=e.length,"utf-8"===t||"utf8"===t)for(var i=0;i<o;i++)(n=e.codePointAt(i))<=127?r+=1:n<=2047?r+=2:n<=65535?r+=3:(r+=4,i++);else if("utf-16"===t||"utf16"===t)for(var a=0;a<o;a++)(n=e.codePointAt(a))<=65535?r+=2:(r+=4,a++);else r=e.replace(/[^\x00-\xff]/g,"aa").length;return r}(JSON.stringify(e));return e.type===S.MSG_MERGER&&i>11264?n._mergerMessageHandler.uploadMergerMessage(e,i).then((function(o){var r=n._mergerMessageHandler.createMergerMessagePack(e,t,o);return n.request(r)})):(n.getModule(qn).setMessageRandom(e),e.conversationType===S.CONV_C2C||e.conversationType===S.CONV_GROUP?r.sendMessage(e,t):void 0)})).then((function(i){var a=i.data,s=a.time,c=a.sequence,l=a.readReceiptCode;et(l)&&0!==l&&(new cs("sendMessageWithReceipt").setMessage("from:".concat(e.from," to:").concat(e.to," sequence:").concat(c," readReceiptCode:").concat(l)).end(),qe.w("".concat(n._n,".sendMessageInstance readReceiptCode:").concat(l," message:").concat(n.getErrorMessage(l)))),n._addSendMessageSuccessCount(e,o),n._messageOptionsMap.delete(e.clientSequence);var u=n.getModule(qn);e.status=en.SUCCESS,e.time=s;var d=!1;if(e.conversationType===S.CONV_GROUP)e.sequence=c;else if(e.conversationType===S.CONV_C2C){var p=u.getLatestMessageSentByMe(e.conversationID);if(p){var h=p.nick,f=p.avatar;h===e.nick&&f===e.avatar||(d=!0)}}if(d&&u.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),r.isOnlineMessage(e,t))e._onlineOnlyFlag=!0;else{u.appendToMessageList(e);var g=e;rt(t)&&rt(t.messageControlInfo)&&(!0===t.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,g=""),!0===t.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0));var v=e.conversationType;It(e.to)&&(v=S.CONV_TOPIC,n.getModule(Fn).onMessageSent({groupID:Vt(e.to),topicID:e.to,lastMessage:g})),u.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:v,subType:e.conversationSubType,lastMessage:g}]})}return e.getRelayFlag()||"TIMImageElem"!==e.type||Ut(e.payload.imageInfoArray),Ts({message:e})}))})).catch((function(t){return n._onSendMessageFailed(e,t)}))}},{key:"_onSendMessageFailed",value:function(e,t){e.status=en.FAIL,this.getModule(qn).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new cs("sendMessage");return n.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var o=m(e,2),r=o[0],i=o[1];n.setError(t,r,i).end()})),qe.e("".concat(this._n,"._onSendMessageFailed error:"),t),As(new Ss({code:t&&t.code?t.code:wi,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if([S.MSG_IMAGE,S.MSG_AUDIO,S.MSG_VIDEO,S.MSG_FILE].includes(e.type))return Qa;if(e.conversationType===S.CONV_C2C)return Xa;if(e.conversationType===S.CONV_GROUP){var t=this.getModule(Un).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return Tt(n)?Za:Ja}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(no).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var r=this.getModule(no);r.addSuccessCount(o),r.addCost(o,n)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var n,o,r=t.code,i=void 0===r?-1:r,a=this.getModule(no),s=this._getSendMessageSpecifiedKey(e);s===Qa&&(n=i,o=!1,Yc.includes(n)&&(o=!0),o)?a.addFailedCountOfUserSide(es):Xc(i)&&s&&a.addFailedCountOfUserSide(s)}},{key:"resendMessage",value:function(e){return e.isResend=!0,e.status=en.UNSEND,this.sendMessageInstance(e)}},{key:"revokeMessage",value:function(e){var t=this,n=null;if(e.conversationType===S.CONV_C2C?n=this.getModule(Pn):e.conversationType===S.CONV_GROUP&&(n=this.getModule(Un)),!n)return this._onCannotFindModule();var o=new cs("revokeMessage");o.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to));var r="".concat(this._n,".").concat("revokeMessage");return n.revokeMessage(e).then((function(n){var i=n.data.recallRetList;if(!Xt(i)&&0!==i[0].retCode){var a=new Ss({code:i[0].retCode,data:{message:e}});return o.setCode(a.code).setMoreMessage(a.message).end(),As(a)}return qe.i("".concat(r," ok. ID:").concat(e.ID)),e.isRevoked=!0,o.end(),t.getModule(qn).onMessageRevoked([e]),Ts({message:e})})).catch((function(n){t.probeNetwork().then((function(e){var t=m(e,2),r=t[0],i=t[1];o.setError(n,r,i).end()}));var i=new Ss({code:n&&n.code?n.code:Ai,message:n&&n.message?n.message:void 0,data:{message:e}});return qe.w("".concat(r," failed. error:"),n),As(i)}))}},{key:"deleteMessage",value:function(e){var t=this,n=null,o=e[0],r=o.conversationID,i="",a=[],s=[];if(o.conversationType===S.CONV_C2C)n=this.getModule(Pn),i=r.replace(S.CONV_C2C,""),e.forEach((function(e){e&&e.status===en.SUCCESS&&e.conversationID===r&&(e._onlineOnlyFlag||a.push("".concat(e.sequence,"_").concat(e.random,"_").concat(e.time)),s.push(e))}));else if(o.conversationType===S.CONV_GROUP)n=this.getModule(Un),i=r.replace(S.CONV_GROUP,""),e.forEach((function(e){e&&e.status===en.SUCCESS&&e.conversationID===r&&(e._onlineOnlyFlag||a.push("".concat(e.sequence)),s.push(e))}));else if(o.conversationType===S.CONV_SYSTEM)return As({code:Ni});if(!n)return this._onCannotFindModule();if(0===a.length)return this._onMessageDeleted(s);a.length>30&&(a=a.slice(0,30),s=s.slice(0,30));var c=new cs("deleteMessage");c.setMessage("to:".concat(i," count:").concat(a.length));var l="".concat(this._n,".").concat("deleteMessage");return n.deleteMessage({to:i,keyList:a}).then((function(e){return c.end(),qe.i("".concat(l," ok")),t._onMessageDeleted(s)})).catch((function(e){t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),qe.w("".concat(l," failed. error:"),e);var n=new Ss({code:e&&e.code?e.code:Li,message:e&&e.message?e.message:void 0});return As(n)}))}},{key:"_onMessageDeleted",value:function(e){return this.getModule(qn).onMessageDeleted(e),Ds({messageList:e})}},{key:"translateText",value:function(e){var n="".concat(this._n,".").concat("translateText"),o=e.sourceTextList,r=e.sourceLanguage,i=e.targetLanguage,a=new cs("translateText");return a.setMessage("sourceLanguage:".concat(r," targetLanguage:").concat(i)),this.request({protocolName:fi,requestData:{sourceTextList:o,source:r||"auto",target:i,from:this.getMyTinyID(),SDKAppID:this.getSDKAppID()}}).then((function(e){var o=e.data,r=o.error,i=o.requestID,s=o.translatedTextList;if(0===r.code)return a.end(),qe.i("".concat(n," ok. requestID:").concat(i)),Ts({translatedTextList:s});throw t(t({},r),{},{requestID:i})})).catch((function(e){return a.setCode(e.code).setMoreMessage(e.requestID).end(),qe.w("".concat(n," failed. error:"),e),As({code:Pi})}))}},{key:"modifyRemoteMessage",value:function(e){var t=this,n=null,o=e.conversationType,r=e.to;if(this.getModule(Un).isMessageFromOrToAVChatroom(r))return As({code:ea,data:{message:e}});if(!1===this.getModule(io).filterMessage(e))return As({code:Ha,data:{message:e}});o===S.CONV_C2C?n=this.getModule(Pn):o===S.CONV_GROUP&&(n=this.getModule(Un));var i=new cs("modifyMessage");i.setMessage("to:".concat(r));var a="".concat(this._n,".modifyRemoteMessage");return n.modifyRemoteMessage(e).then((function(n){i.end(),qe.i("".concat(a," ok"));var o=t._onModifyRemoteMessageResp(e,n.data);return Ts({message:o})})).catch((function(n){if(i.setCode(n.code).setMoreMessage(n.message).end(),qe.w("".concat(a," failed. error:"),n),20027===n.code){var o=t._onModifyRemoteMessageResp(e,n.data);return As({code:Qi,data:{message:o}})}return As({code:n.code,message:n.message,data:{message:e}})}))}},{key:"_onModifyRemoteMessageResp",value:function(e,t){qe.d("".concat(this._n,"._onModifyRemoteMessageResp options:"),t);var n=e.conversationType,o=e.from,r=e.to,i=e.random,a=e.sequence,s=e.time,c=t.elements,l=t.messageVersion,u=t.cloudCustomData,d=void 0===u?"":u;return this.getModule(qn).onMessageModified({conversationType:n,from:o,to:r,time:s,random:i,sequence:a,elements:c,cloudCustomData:d,messageVersion:l})}},{key:"_generateUUID",value:function(e){var t=this.getModule(Vn),n="".concat(t.getSDKAppID(),"-").concat(t.getUserID(),"-").concat(function(){for(var e="",t=32;t>0;--t)e+=_t[Math.floor(Math.random()*yt)];return e}()),o=e.name||e.value||e.url||e.tempFilePath,r=o&&o.slice(o.lastIndexOf(".")+1);return r&&(n="".concat(n,".").concat(r)),n}},{key:"getMessageOption",value:function(e){return this._messageOptionsMap.get(e)}},{key:"_getNickAndAvatarByUserID",value:function(e){return this.getModule(Nn).getNickAndAvatarByUserID(e)}},{key:"_getNameCardByGroupID",value:function(e){if(e.conversationType===S.CONV_GROUP){var t=this.getModule(Un);if(t)return t.getMyNameCardByGroupID(e.to)}return""}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._messageOptionsMap.clear()}}]),r}(lo),Zc=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="MessageExtensionModule",r.messageExtensionMap=new Map,r.globalSeqMap=new Map,r.getMessageExtensionsMap=new Map,r}return i(n,[{key:"onMessageExtensionNotify",value:function(e){var t=this,n=e.dataList,o=n.messageInfo,r=n.operateType,i=n.operateResultList,a=n.tinyID,s=n.globalSequence,c=o.clientTime,l=o.random,u="".concat(a,"-").concat(c,"-").concat(l),d=[],p=[];qe.l("".concat(this._n,".onMessageExtensionNotify messageID:").concat(u," operateType:").concat(r," globalSequence:").concat(s)),this._updateGlobalSequence(u,s);var h=!1,f=!1;i.forEach((function(e){var n=e.extensions,o=void 0===n?[]:n,i=e.clearSequence;1===r?(h=!0,o.forEach((function(e){d.push({key:e.key,value:e.value})})),t._updateLocalExtension(u,o)):2===r?(f=!0,o.forEach((function(e){p.push(e.key)})),t._updateLocalExtension(u,o)):3===r&&(f=!0,t._hasLocalExtension(u)&&t._getLocalExtension(u).forEach((function(e,t){e.seq<=i&&!Xt(e.value)&&p.push(t)})),t._clearLocalExtension(u,i))})),h&&this.emitOuterEvent(T.MESSAGE_EXTENSIONS_UPDATED,{messageID:u,extensions:d}),f&&this.emitOuterEvent(T.MESSAGE_EXTENSIONS_DELETED,{messageID:u,keyList:p})}},{key:"setMessageExtensions",value:function(e,t){var n=this;if(!this.canIUse(V.MSG_EXT))return As({code:Va});var o="".concat(this._n,".").concat("setMessageExtensions"),r=e.ID,i=e.conversationID,a=e.sequence,s=e.time,c=_(t);t.length>20&&(c=t.slice(0,20),qe.w("".concat(o,". the length of extensions cannot exceed 20.")));var l="conversationID:".concat(i," messageID:").concat(r," sequence:").concat(a," time:").concat(s," count:").concat(c.length),u=new cs("setMessageExtensions");return u.setMessage(l),qe.l("".concat(o," ").concat(l)),this._modifyMessageExtensions(e,c).then((function(e){var t=e.resultList,n=e.successCount,r=e.failureCount,i="success count:".concat(n," fail count:").concat(r);return u.setMoreMessage(i).end(),qe.l("".concat(o," ok. ").concat(i)),Ts({extensions:t})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}},{key:"getMessageExtensions",value:function(e){var t=this;if(!this.canIUse(V.MSG_EXT))return As({code:Va});var n="".concat(this._n,".").concat("getMessageExtensions"),o=e.ID,r=e.conversationID,i=e.sequence,a=e.time,s="conversationID:".concat(r," messageID:").concat(o," sequence:").concat(i," time:").concat(a),c=new cs("getMessageExtensions");c.setMessage(s),qe.l("".concat(n," ").concat(s));var l=void 0;return this.getMessageExtensionsMap.has(o)&&(l=this._getGlobalSequence(o)),this._getMessageExtensions(e,l).then((function(e){return c.end(),qe.l("".concat(n," ok. total count:").concat(e.length)),at(l)&&e.length>0&&t.getMessageExtensionsMap.set(o,1),Ts({extensions:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"deleteMessageExtensions",value:function(e,t){var n=this;if(!this.canIUse(V.MSG_EXT))return As({code:Va});var o="".concat(this._n,".").concat("deleteMessageExtensions"),r=[],i=3;Xt(t)||(i=2,t.forEach((function(e){r.push({key:e,value:"",seq:0})})));var a=e.ID,s=e.conversationID,c=e.sequence,l=e.time,u="conversationID:".concat(s," messageID:").concat(a," sequence:").concat(c," time:").concat(l," operateType:").concat(i),d=new cs("deleteMessageExtensions");return d.setMessage(u),qe.l("".concat(o," ").concat(u)),this._modifyMessageExtensions(e,r,i).then((function(e){var t=e.resultList,n=e.successCount,r=e.failureCount,a="";return 2===i&&(a="success count:".concat(n," fail count:").concat(r)),d.setMoreMessage("".concat(a)).end(),qe.l("".concat(o," ok. ").concat(a)),Ts({extensions:t})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];d.setError(e,o,r).end()})),qe.e("".concat(o," failed. error:"),e),As(e)}))}},{key:"_modifyMessageExtensions",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=It(e.to)?S.CONV_TOPIC:e.conversationType,i=void 0;3!==o&&(i=this._getRequestExtensions(e,t));var a=null;switch(r){case S.CONV_C2C:a=this.getModule(Pn);break;case S.CONV_GROUP:a=this.getModule(Un);break;case S.CONV_TOPIC:a=this.getModule(Fn);break;default:return As({code:Ra})}return a.modifyMessageExtensions(e,i,o).then((function(t){var o=t.data,r=o.extensions,i=o.seq,a=[],s=0,c=0,l=[];return(r=Xt(r)?[]:r).forEach((function(e){var t=e.errorCode,n=e.extension,o=n.key,r=n.value,i=n.seq;a.push({code:t,key:o,value:r}),0===t?s++:c++,l.push({key:o,value:r,seq:i})})),n._updateGlobalSequence(e.ID,i),l.length>0&&(n._updateLocalExtension(e.ID,l),l=null),{resultList:a,successCount:s,failureCount:c}})).catch((function(e){return As(e)}))}},{key:"_getRequestExtensions",value:function(e,t){var n=[];if(this._hasLocalExtension(e.ID)){var o=this._getLocalExtension(e.ID);return t.forEach((function(e){var t=e.key,r=e.value,i=0;o.has(t)&&(i=o.get(t).seq),n.push({key:t,value:r,seq:i})})),n}return t.forEach((function(e){var t=e.key,o=e.value;n.push({key:t,value:o,seq:0})})),n}},{key:"_getMessageExtensions",value:function(e,t){var n=this,o="".concat(this._n,"._getMessageExtensions"),r=e.ID,i=e.to,a=null;switch(It(i)?S.CONV_TOPIC:e.conversationType){case S.CONV_C2C:a=this.getModule(Pn);break;case S.CONV_GROUP:a=this.getModule(Un);break;case S.CONV_TOPIC:a=this.getModule(Fn);break;default:return As({code:Ra})}return a.getMessageExtensions(e,t).then((function(t){var i=t.data,a=i.extensions,s=i.completeFlag,c=i.globalSequence,l=i.clearSequence;if(a=Xt(a)?[]:a,qe.l("".concat(o," ok. completeFlag:").concat(s," globalSequence:").concat(c," clearSequence:").concat(l," count:").concat(a.length)),n._updateLocalExtension(r,a),n._clearLocalExtension(r,l),n._updateGlobalSequence(r,c),1!==s){var u=a.slice(-1)[0].seq+1;return n._getMessageExtensions(e,u)}return n._getLocalExtensions(r)})).catch((function(e){return As(e)}))}},{key:"_hasLocalExtension",value:function(e){return this.messageExtensionMap.has(e)}},{key:"_getLocalExtension",value:function(e){return this.messageExtensionMap.get(e)}},{key:"_updateLocalExtension",value:function(e,t){this._hasLocalExtension(e)||this.messageExtensionMap.set(e,new Map);var n=this._getLocalExtension(e);t.forEach((function(e){var t=e.key,o=e.value,r=void 0===o?"":o,i=e.seq;n.set(t,{value:r,seq:i})}))}},{key:"_clearLocalExtension",value:function(e,t){if(!(t<=0)&&this._hasLocalExtension(e)){var n=this._getLocalExtension(e);n.forEach((function(e,o){e.seq<=t&&n.delete(o)}))}}},{key:"_getLocalExtensions",value:function(e){var t=[];return this._hasLocalExtension(e)&&this._getLocalExtension(e).forEach((function(e,n){var o=e.value;Xt(o)||t.push({key:n,value:o})})),t}},{key:"_getGlobalSequence",value:function(e){return this.globalSeqMap.get(e)}},{key:"_updateGlobalSequence",value:function(e,t){this.globalSeqMap.set(e,t)}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this.messageExtensionMap.clear(),this.globalSeqMap.clear(),this.getMessageExtensionsMap.clear()}}]),n}(lo),Qc=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="ComboMessageModule",r}return i(n,[{key:"sendMessage",value:function(e){var t=this,n=this._constructMessageInstance(e);if(null===n)return As({code:wi});this._addSendMessageTotalCount(n);var o=Date.now();return this.getModule(qn).setMessageRandom(n),this._sendComboMessage(n,e).then((function(e){var r=e.data,i=r.time,a=r.sequence,s=r.readReceiptCode;et(s)&&0!==s&&(new cs("sendMessageWithReceipt").setMessage("from:".concat(n.from," to:").concat(n.to," sequence:").concat(a," readReceiptCode:").concat(s)).end(),qe.w("".concat(t._n,".sendMessage readReceiptCode:").concat(s," message:").concat(t.getErrorMessage(s)))),t._addSendMessageSuccessCount(n,o);var c=t.getModule(qn);n.status=en.SUCCESS,n.time=i,n.conversationType===S.CONV_GROUP&&(n.sequence=a),c.appendToMessageList(n);var l=n;return!0===n._isExcludedFromLastMessage&&(l=""),c.onMessageSent({conversationOptionsList:[{conversationID:n.conversationID,unreadCount:0,type:n.conversationType,subType:n.conversationSubType,lastMessage:l}]}),Ts({message:n})})).catch((function(e){return t._onSendMessageFailed(n,e)}))}},{key:"_sendComboMessage",value:function(e,t){var n=this._m.getModule(Xn),o="";return e.conversationType===S.CONV_C2C&&(o="".concat(q.NAME.OPEN_IM,".").concat(q.CMD.SEND_MESSAGE)),e.conversationType===S.CONV_GROUP&&(o="".concat(q.NAME.GROUP,".").concat(q.CMD.SEND_GROUP_MESSAGE)),n.sendComboMessage({servcmd:o,data:t})}},{key:"_constructMessageInstance",value:function(e){var t="".concat(this._n,"._constructMessageInstance"),n=null;try{var o=this.getMyUserID(),r={};if(r.senderTinyID=this.getMyTinyID(),r.currentUser=o,r.from=e.From_Account||o,e.GroupId?(r.conversationID="".concat(S.CONV_GROUP).concat(e.GroupId),r.conversationType=S.CONV_GROUP,r.to=e.GroupId):e.To_Account&&(r.conversationID="".concat(S.CONV_C2C).concat(e.To_Account),r.conversationType=S.CONV_C2C,r.to=e.To_Account),r.time=e.MsgTimeStamp||0,r.random=e.Random||e.MsgRandom||0,r.priority=e.MsgPriority,nt(e.CloudCustomData)&&e.CloudCustomData.length>0&&(r.cloudCustomData=e.CloudCustomData),it(e.SendMsgControl)&&(r.messageControlInfo={},e.SendMsgControl.includes("NoUnread")&&(r.messageControlInfo.excludedFromUnreadCount=1),e.SendMsgControl.includes("NoLastMsg")&&(r.messageControlInfo.excludedFromLastMessage=1)),r.conversationType===S.CONV_GROUP&&it(e.To_Account)&&e.To_Account.length>0){var i=e.To_Account;e.To_Account.length>50&&(i=e.To_Account.slice(0,50),qe.w("".concat(t," To_Account must be less than or equal to 50."))),r.receiverList=_(i),e.To_Account=_(i)}1!==e.IsNeedReadReceipt&&1!==e.NeedReadReceipt||(r.needReadReceipt=!0),1===e.SupportMessageExtension&&(r.isSupportExtension=!0),(n=new ws(r)).status=en.UNSEND,e.MsgClientTime=n.clientTime,n.conversationType===S.CONV_C2C&&(e.MsgSeq=n.sequence);for(var a,s=e.MsgBody.length,c=0;c<s;c++)"TIMTextElem"===(a=e.MsgBody[c]).MsgType?n.setTextElement(a.MsgContent.Text):"TIMCustomElem"===a.MsgType?n.setCustomElement({data:a.MsgContent.Data||"",description:a.MsgContent.Desc||"",extension:a.MsgContent.Ext||""}):"TIMFaceElem"===a.MsgType&&n.setFaceElement({index:a.MsgContent.Index,data:a.MsgContent.Data});var l=n.getElements();n.payload=l[0].content,n.type=l[0].type}catch(u){n=null,qe.e("".concat(t," failed. error:"),u)}return n}},{key:"_onSendMessageFailed",value:function(e,t){e.status=en.FAIL,this.getModule(qn).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new cs("sendMessage");return n.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var o=m(e,2),r=o[0],i=o[1];n.setError(t,r,i).end()})),qe.e("".concat(this._n,"._onSendMessageFailed error:"),t),As(new Ss({code:t&&t.code?t.code:wi,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if(e.conversationType===S.CONV_C2C)return Xa;if(e.conversationType===S.CONV_GROUP){var t=this.getModule(Un).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return Tt(n)?Za:Ja}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(no).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var r=this.getModule(no);r.addSuccessCount(o),r.addCost(o,n)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var n=t.code,o=void 0===n?-1:n,r=this.getModule(no),i=this._getSendMessageSpecifiedKey(e);Xc(o)&&i&&r.addFailedCountOfUserSide(i)}}]),n}(lo),el=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="PluginModule",r.plugins={},r}return i(n,[{key:"registerPlugin",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.plugins[n]=e[n]})),new cs("registerPlugin").setMessage("".concat(Object.keys(e))).end()}},{key:"getPlugin",value:function(e){return this.plugins[e]}},{key:"reset",value:function(){}}]),n}(lo),tl=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="SyncUnreadMessageModule",t._cookie="",t._onlineSyncFlag=!1,t.getInnerEmitterInstance().on(Os,t._onLoginSuccess,f(t)),t}return i(r,[{key:"_onLoginSuccess",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"_startSync",value:function(e){var n=this,o=e.cookie,r=e.syncFlag,i=e.isOnlineSync,a="".concat(this._n,"._startSync");qe.l("".concat(a," cookie:").concat(o," syncFlag:").concat(r," isOnlineSync:").concat(i)),this.request({protocolName:go,requestData:{cookie:o,syncFlag:r,isOnlineSync:i}}).then((function(e){var o=e.data,r=o.cookie,i=o.syncFlag;n._cookie=r,Xt(r)||(0===i||1===i?(n._dispatchUnreadMessage(t(t({},e.data),{},{isSyncingEnded:!1})),n._startSync({cookie:r,syncFlag:i,isOnlineSync:0})):2===i&&n._dispatchUnreadMessage(t(t({},e.data),{},{isSyncingEnded:!0})))})).catch((function(e){qe.e("".concat(a," failed. error:"),e)}))}},{key:"_dispatchUnreadMessage",value:function(e){e.eventArray&&this.getModule(Xn).onMessage({head:{},body:{eventArray:e.eventArray,isInstantMessage:this._onlineSyncFlag,isSyncingEnded:e.isSyncingEnded}}),this.getModule(Pn).onNewC2CMessage({dataList:e.messageList,isInstantMessage:!!e.isSyncingEnded&&this._onlineSyncFlag,C2CRemainingUnreadList:e.C2CRemainingUnreadList,C2CPairUnreadList:e.C2CPairUnreadList})}},{key:"startOnlineSync",value:function(){qe.l("".concat(this._n,".startOnlineSync")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:"startSyncOnReconnected",value:function(){qe.l("".concat(this._n,".startSyncOnReconnected.")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._onlineSyncFlag=!1,this._cookie=""}}]),r}(lo),nl={request:{toAccount:"To_Account",fromAccount:"From_Account",to:"To_Account",from:"From_Account",groupID:"GroupId",groupAtUserID:"GroupAt_Account",extension:"Ext",data:"Data",description:"Desc",elements:"MsgBody",sizeType:"Type",downloadFlag:"Download_Flag",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",videoUrl:"",imageUrl:"URL",fileUrl:"Url",uuid:"UUID",priority:"MsgPriority",receiverUserID:"To_Account",receiverGroupID:"GroupId",messageSender:"SenderId",messageReceiver:"ReceiverId",nick:"From_AccountNick",avatar:"From_AccountHeadurl",messageNumber:"MsgNum",pbDownloadKey:"PbMsgKey",downloadKey:"JsonMsgKey",applicationType:"PendencyType",userIDList:"To_Account",groupNameList:"GroupName",userID:"To_Account",groupAttributeList:"GroupAttr",mainSequence:"AttrMainSeq",avChatRoomKey:"BytesKey",attributeControl:"AttrControl",sequence:"seq",messageControlInfo:"SendMsgControl",updateSequence:"UpdateSeq",clientTime:"MsgClientTime",sequenceList:"MsgSeqList",topicID:"TopicId",customData:"CustomString",isSupportTopic:"SupportTopic",isWebUniapp:"is_web_uniapp",isSupportExtension:"SupportMessageExtension",messageSequence:"MsgSeq",messageKey:"MsgKey",startSequence:"startSeq",simplifiedMessage:"DownsizeFlag"},response:{MsgPriority:"priority",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",Download_Flag:"downloadFlag",GroupId:"groupID",Member_Account:"userID",MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",MsgSeq:"sequence",MsgRandom:"random",MsgTime:"time",MsgTimeStamp:"time",MsgContent:"content",MsgBody:"elements",From_AccountNick:"nick",From_AccountHeadurl:"avatar",GroupWithdrawInfoArray:"revokedInfos",GroupReadInfoArray:"groupMessageReadNotice",LastReadMsgSeq:"lastMessageSeq",WithdrawC2cMsgNotify:"c2cMessageRevokedNotify",C2cWithdrawInfoArray:"revokedInfos",C2cReadedReceipt:"c2cMessageReadReceipt",ReadC2cMsgNotify:"c2cMessageReadNotice",LastReadTime:"peerReadTime",MsgRand:"random",MsgType:"type",MsgShow:"messageShow",NextMsgSeq:"nextMessageSeq",FaceUrl:"avatar",ProfileDataMod:"profileModify",Profile_Account:"userID",ValueBytes:"value",ValueNum:"value",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation",Operator_Account:"operatorID",OpType:"operationType",ReportType:"operationType",UserId:"userID",User_Account:"userID",List_Account:"userIDList",MsgOperatorMemberExtraInfo:"operatorInfo",MsgMemberExtraInfo:"memberInfoList",ImageUrl:"avatar",NickName:"nick",MsgGroupNewInfo:"newGroupProfile",MsgAppDefinedData:"groupCustomField",Owner_Account:"ownerID",GroupFaceUrl:"avatar",GroupIntroduction:"introduction",GroupNotification:"notification",GroupApplyJoinOption:"joinOption",MsgKey:"messageKey",GroupInfo:"groupProfile",ShutupTime:"muteTime",Desc:"description",Ext:"extension",GroupAt_Account:"groupAtUserID",MsgNum:"messageNumber",PbMsgKey:"pbDownloadKey",JsonMsgKey:"downloadKey",MsgModifiedFlag:"isModified",PendencyItem:"applicationItem",PendencyType:"applicationType",AddTime:"time",AddSource:"source",AddWording:"wording",ProfileImImage:"avatar",PendencyAdd:"friendApplicationAdded",FrienPencydDel_Account:"friendApplicationDeletedUserIDList",Peer_Account:"userID",GroupAttr:"groupAttributeList",GroupAttrAry:"groupAttributeList",AttrMainSeq:"mainSequence",seq:"sequence",GroupAttrOption:"groupAttributeOption",BytesChangedKeys:"changedKeyList",GroupAttrInfo:"groupAttributeList",GroupAttrSeq:"mainSequence",PushChangedAttrValFlag:"isWithChangedAttributeInfo",SubKeySeq:"sequence",Val:"value",MsgGroupFromCardName:"senderNameCard",MsgGroupFromNickName:"senderNick",C2cNick:"peerNick",C2cImage:"peerAvatar",SendMsgControl:"messageControlInfo",NoLastMsg:"excludedFromLastMessage",NoUnread:"excludedFromUnreadCount",UpdateSeq:"updateSequence",MuteNotifications:"muteFlag",MsgClientTime:"clientTime",TinyId:"tinyID",GroupMsgReceiptList:"readReceiptList",ReadNum:"readCount",UnreadNum:"unreadCount",TopicId:"topicID",MillionGroupFlag:"communityType",SupportTopic:"isSupportTopic",MsgTopicNewInfo:"newTopicInfo",ShutupAll:"muteAllMembers",CustomString:"customData",TopicFaceUrl:"avatar",TopicIntroduction:"introduction",TopicNotification:"notification",TopicIdArray:"topicIDList",MsgVersion:"messageVersion",C2cMsgModNotifys:"c2cMessageModified",GroupMsgModNotifys:"groupMessageModified",ApplyJoinOption:"joinOption",MsgFlag:"messageRemindType",AtInfoList:"groupAtInfoList",AtFlagList:"groupAtType",AtMsgSeq:"sequence",BanDuration:"duration",BanDescription:"reason",NotVisible:"invisible",BytesTag:"tag",BytesValue:"value",RptBytesValue:"value",LatestSeq:"globalSequence",ClearSeq:"clearSequence",SupportMessageExtension:"isSupportExtension",ExtensionList:"extensions",GroupCounter:"counterList",Revoker_Account:"revoker",MsgExtensionNotify:"messageExtensionNotify",ExtensionC2cMsgInfo:"messageInfo",ExtensionGroupMsgInfo:"messageInfo",MsgOptType:"operateType",SetKVInfo:"operateResultList",DeleteKVInfo:"operateResultList",ClearKVInfo:"operateResultList",MsgKeyValue:"extensions",ClearMsgSeq:"clearSequence",MsgLastSeq:"globalSequence",InviteJoinOption:"inviteOption",MemberList_Account:"inviteeList",MsgMemberExtraInfoList:"inviteeInfoList",E:"event",GInf:"groupProfile",MCT:"clientTime",MR:"random",MP:"priority",MTS:"time",GId:"groupID",MS:"sequence",CCD:"cloudCustomData",F_Account:"from",F_Hd:"avatar",F_NN:"nick",GN:"groupName",GT:"groupType",IsSys:"isSystemMessage",OpInf:"operatorInfo",Img:"avatar",NN:"nick",OnlineInf:"onlineMemberInfo",ET:"expireTime",Num:"onlineMemberNum",Opt:"operationType",O_Account:"operatorID",RT:"operationType",UDF:"userDefinedField",L_Account:"userIDList"},ignoreKeyWord:["C2C","ID","USP"]};function ol(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");var n;return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=rl(e)),n=e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\d+(\w|$)/g,(function(e){return e.toUpperCase()})),t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}var rl=function(e){for(var t=!1,n=!1,o=!1,r=0;r<e.length;r++){var i=e[r];t&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(e=e.slice(0,r)+"-"+e.slice(r),t=!1,o=n,n=!0,r++):n&&o&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(e=e.slice(0,r-1)+"-"+e.slice(r-1),o=n,n=!1,t=!0):(t=i.toLowerCase()===i&&i.toUpperCase()!==i,o=n,n=i.toUpperCase()===i&&i.toLowerCase()!==i)}return e};function il(e,t){var n=0;return function e(t,o){if(++n>100)return n--,t;if(it(t)){var r=t.map((function(t){return ot(t)?e(t,o):t}));return n--,r}if(ot(t)){var i=(a=t,s=function(e,t){if(!dt(t))return!1;if((r=t)!==ol(r))for(var n=0;n<nl.ignoreKeyWord.length&&!t.includes(nl.ignoreKeyWord[n]);n++);var r,i;return at(o[t])?"OPPOChannelID"===(i=t)?i:i[0].toUpperCase()+ol(i).slice(1):o[t]},c=Object.create(null),Object.keys(a).forEach((function(e){var t=s(a[e],e);t&&(c[t]=a[e])})),c);return i=Lt(i,(function(t,n){return it(t)||ot(t)?e(t,o):t})),n--,i}var a,s,c}(e,t)}function al(e,t){if(it(e))return e.map((function(e){return ot(e)?al(e,t):e}));if(ot(e)){var n=(o=e,r=function(e,n){return at(t[n])?ol(n):t[n]},i={},Object.keys(o).forEach((function(e){i[r(o[e],e)]=o[e]})),i);return Lt(n,(function(e){return it(e)||ot(e)?al(e,t):e}))}var o,r,i}var sl=String.fromCharCode,cl=function(e){var t=0|e.charCodeAt(0);if(55296<=t)if(t<56320){var n=0|e.charCodeAt(1);if(56320<=n&&n<=57343){if((t=(t<<10)+n-56613888|0)>65535)return sl(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}else t<=57343&&(t=65533);return t<=2047?sl(192|t>>>6,128|63&t):sl(224|t>>>12,128|t>>>6&63,128|63&t)},ll=function(e){for(var t=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,cl),n=0|t.length,o=new Uint8Array(n),r=0;r<n;r=r+1|0)o[r]=0|t.charCodeAt(r);return o},ul=function(e){for(var t=new Uint8Array(e),n="",o=0,r=t.length;o<r;){var i=t[o],a=0,s=0;if(i<=127?(a=0,s=255&i):i<=223?(a=1,s=31&i):i<=239?(a=2,s=15&i):i<=244&&(a=3,s=7&i),r-o-a>0)for(var c=0;c<a;)s=s<<6|63&(i=t[o+c+1]),c+=1;else s=65533,a=r-o;n+=String.fromCodePoint(s),o+=a+1}return n},dl=function(){function e(t){o(this,e),this._handler=t;var n=t.getURL();if(this._socket=null,this._workerSocket=null,this._id=mt(),this._handler.getIsWorkerEnabled()){var r=URL.createObjectURL(new Blob([';let _socket = null;onmessage = function(event) {  if (event.data.cmd === "start") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = "arraybuffer";    _socket.onopen = function() {      postMessage({ callback: "onOpen" });    };    _socket.onclose = function(e) {      postMessage({ callback: "onOpen", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: "onMessage", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: "onError", e: { isTrusted: "true" } });    };  } else if (event.data.cmd === "sendMessage") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === "stop") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};'],{type:"application/javascript; charset=utf-8"}));this._workerSocket=new Worker(r);var i=this;this._workerSocket.onmessage=function(e){var t=e.data,n=t.callback,o=t.e;"onOpen"===n?i._onOpen():"onClose"===n?i._onClose(o):"onError"===n?i._onError(o):"onMessage"===n&&i._onMessage(e.data)},this._workerSocket.postMessage({cmd:"start",id:this._id,url:n})}else le?ie?(de.connectSocket({url:n,header:{"content-type":"application/json"}}),de.onSocketClose(this._onClose.bind(this)),de.onSocketOpen(this._onOpen.bind(this)),de.onSocketMessage(this._onMessage.bind(this)),de.onSocketError(this._onError.bind(this))):(this._socket=de.connectSocket({url:n,header:{"content-type":"application/json"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):ue&&(this._socket=new WebSocket(n),this._socket.binaryType="arraybuffer",this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this));this._canIUseBinaryFrame=t.canIUseBinaryFrame()}return i(e,[{key:"getID",value:function(){return this._id}},{key:"_onOpen",value:function(){this._handler.onOpen({id:this._id})}},{key:"_onClose",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:"_onMessage",value:function(e){this._handler.onMessage({data:this._canIUseBinaryFrame?ul(e.data):e.data})}},{key:"_onError",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:"setIsWorkerEnabled",value:function(e){this._isWorkerEnabled=!0}},{key:"close",value:function(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:"stop",code:e}),this._workerSocket.terminate(),this._workerSocket=null),ie)return de.offSocketClose(),de.offSocketMessage(),de.offSocketOpen(),de.offSocketError(),void de.closeSocket();this._socket&&(le?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):ue&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),re?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:"send",value:function(e){if(this._workerSocket)this._workerSocket.postMessage({cmd:"sendMessage",data:this._canIUseBinaryFrame?ll(e.data).buffer:e.data});else{if(ie)return void de.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}});this._socket&&(le?this._socket.send({data:this._canIUseBinaryFrame?ll(e.data).buffer:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):ue&&this._socket.send(this._canIUseBinaryFrame?ll(e.data).buffer:e.data))}}}]),e}(),pl=4e3,hl=4001,fl=["keyMap"],gl=["keyMap"],vl="connected",ml="connecting",_l="disconnected",yl=function(){function e(t){o(this,e),this._channelModule=t,this._n="SocketHandler",this._promiseMap=new Map,this._readyState=_l,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=mt(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url="",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._setWebsocketHost(),this._initConnection()}return i(e,[{key:"_setWebsocketHost",value:function(){var e=this._channelModule.getModule(Vn),t=O;this._channelModule.isOversea()&&(t=x),e.isSingaporeSite()?t=N:e.isKoreaSite()?t=P:e.isGermanySite()?t=U:e.isIndiaSite()?t=G:e.isJapanSite()?t=B:e.isUSASite()&&(t=F),q.HOST.setCurrent(t)}},{key:"_initConnection",value:function(){at(q.HOST.CURRENT.BACKUP)||""===this._url?this._url=q.HOST.CURRENT.DEFAULT:this._url===q.HOST.CURRENT.DEFAULT?this._url=q.HOST.CURRENT.BACKUP:this._url===q.HOST.CURRENT.BACKUP?this._url=this._canIUseAnyCast()?q.HOST.CURRENT.ANYCAST:q.HOST.CURRENT.DEFAULT:this._url===q.HOST.CURRENT.ANYCAST&&(q.HOST.CURRENT.ANYCAST="",this._url=q.HOST.CURRENT.DEFAULT);var e=this._channelModule.getModule(Vn).getProxyServer();Xt(e)||(this._url=e),this._connect(),this._nextPingTs=0}},{key:"_canIUseAnyCast",value:function(){return ue&&q.HOST.CURRENT.ANYCAST}},{key:"onCheckTimer",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:"_checkPromiseMap",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.reject,r=t.timestamp,i=15e3;-1!==n.indexOf(uo)&&(i=9e4),Date.now()-r>=i&&(qe.l("".concat(e._n,"._checkPromiseMap request timeout, delete requestID:").concat(n)),e._promiseMap.delete(n),o(new Ss({code:Sa})),e._channelModule.onRequestTimeout(n))}))}},{key:"onOpen",value:function(e){if(""!==this._readyState){this._onOpenTs=Date.now();var t=e.id;this._socketID=t;var n=Date.now()-this._startTs;qe.l("".concat(this._n,"._onOpen cost ").concat(n," ms. socketID:").concat(t)),new cs("wsOnOpen").setMessage(n).setCostTime(n).setMoreMessage("socketID:".concat(t)).end(),e.id===this._socketID&&(this._readyState=vl,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}}},{key:"onClose",value:function(e){var t=new cs("wsOnClose"),n=e.id,o=e.e,r="sourceSocketID:".concat(n," currentSocketID:").concat(this._socketID," code:").concat(o.code," reason:").concat(o.reason),i=0;0!==this._onOpenTs&&(i=Date.now()-this._onOpenTs),t.setMessage(i).setCostTime(i).setMoreMessage(r).setCode(o.code).end(),qe.l("".concat(this._n,"._onClose ").concat(r," onlineTime:").concat(i)),n===this._socketID&&(this._readyState=_l,i<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:"onError",value:function(e){var t=e.id,n=e.e,o="sourceSocketID:".concat(t," currentSocketID:").concat(this._socketID);new cs("wsOnError").setMessage(n.errMsg||gt(n)).setMoreMessage(o).setLevel("error").end(),qe.w("".concat(this._n,"._onError"),n,o),t===this._socketID&&(this._readyState="",this._channelModule.onError())}},{key:"onMessage",value:function(e){var t;try{t=JSON.parse(e.data)}catch(l){new cs("jsonParseError").setMessage(e.data).end()}if(t&&t.head){var n=this._getRequestIDFromHead(t.head),o=t.body;if(!n.startsWith(q.NAME.TUIROOM_SVR)){var r=Gt(t.head);o=al(t.body,this._getResponseKeyMap(r))}if(qe.d("".concat(this._n,".onMessage ret:").concat(JSON.stringify(o)," requestID:").concat(n," has:").concat(this._promiseMap.has(n))),this._setNextPingTs(),this._promiseMap.has(n)){var i=this._promiseMap.get(n),a=i.resolve,s=i.reject,c=i.timestamp;return this._promiseMap.delete(n),this._calcRTT(c),void(o.errorCode&&0!==o.errorCode?(this._channelModule.onErrorCodeNotZero(o),s(new Ss({code:o.errorCode,message:o.errorInfo||"",data:n.includes(Lo)||n.includes(Mr)?{elements:o.elements,messageVersion:o.messageVersion,cloudCustomData:o.cloudCustomData}:void 0}))):a(Ts(o)))}this._channelModule.onMessage({head:t.head,body:o})}}},{key:"_calcRTT",value:function(e){var t=Date.now()-e;this._channelModule.getModule(no).addRTT(t)}},{key:"_connect",value:function(){this._startTs=Date.now(),this._onOpenTs=0,this._socket=new dl(this),this._socketID=this._socket.getID(),this._readyState=ml,qe.l("".concat(this._n,"._connect isWorkerEnabled:").concat(this.getIsWorkerEnabled()," socketID:").concat(this._socketID," url:").concat(this.getURL())),new cs("wsConnect").setMessage("socketID:".concat(this._socketID," url:").concat(this.getURL())).end()}},{key:"getURL",value:function(){this._channelModule.isDevMode()&&(this._canIUseBinaryFrame=!1);var e=xt();(ie||te&&"windows"===e||se)&&(this._canIUseBinaryFrame=!1);var t=-1;"ios"===e?t=be||-1:"android"===e&&(t=Ce||-1);var n=this._channelModule.getModule(Vn),o=this._channelModule.getPlatform(),r=n.getSDKAppID(),i=n.getInstanceID(),a="sdkappid=".concat(r,"&instanceid=").concat(i,"&random=").concat(this._getRandom(),"&platform=").concat(o,"&host=").concat(e,"&version=").concat(t);return this._canIUseBinaryFrame?"".concat(this._url,"/binfo?").concat(a):"".concat(this._url,"/info?").concat(a)}},{key:"_closeConnection",value:function(e){qe.l("".concat(this._n,"._closeConnection socketID:").concat(this._socketID)),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=_l)}},{key:"_resend",value:function(){var e=this;if(qe.l("".concat(this._n,"._resend reConnectFlag:").concat(this._reConnectFlag),"promiseMap.size:".concat(this._promiseMap.size," simpleRequestMap.size:").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,n){var o=t.uplinkData,r=t.resolve,i=t.reject;e._promiseMap.set(n,{resolve:r,reject:i,timestamp:Date.now(),uplinkData:o}),e._execute(n,o)})),this._simpleRequestMap.size>0){var t,n=w(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var o=m(t.value,2),r=o[0],i=o[1];this._execute(r,i)}}catch(a){n.e(a)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:"send",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var n=h(e,fl),o=this._getRequestIDFromHead(e.head),r=JSON.stringify(n);return new Promise((function(e,i){t._promiseMap.set(o,{resolve:e,reject:i,timestamp:Date.now(),uplinkData:r}),qe.d("".concat(t._n,".send uplinkData:").concat(JSON.stringify(n)," requestID:").concat(o," readyState:").concat(t._readyState)),t._readyState!==vl?t._reConnect():(t._execute(o,r),t._channelModule.getModule(no).addRequestCount())}))}},{key:"simplySend",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var t=h(e,gl),n=this._getRequestIDFromHead(e.head),o=JSON.stringify(t);this._readyState!==vl?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(n,o):qe.l("".concat(this._n,".simplySend. simpleRequestMap is full, drop request!")),this._reConnect()):this._execute(n,o)}},{key:"_execute",value:function(e,t){this._socket.send({data:t,fail:le?this._onSendFail.bind(this):void 0,requestID:e})}},{key:"_onSendFail",value:function(e){qe.l("".concat(this._n,"._onSendFail requestID:").concat(e))}},{key:"_getSequence",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=mt()),e}},{key:"_getRequestIDFromHead",value:function(e){return e.servcmd+e.seq}},{key:"_getResponseKeyMap",value:function(e){var n=this._channelModule.getKeyMap(e);return t(t({},nl.response),n.response)}},{key:"_reConnect",value:function(){this._readyState!==vl&&this._readyState!==ml&&this.forcedReconnect()}},{key:"forcedReconnect",value:function(){var e=this,t="".concat(this._n,".forcedReconnect");qe.l("".concat(t," count:").concat(this._reConnectCount," readyState:").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(hl),this._initConnection()):(this._reConnectCount=0,this._channelModule.probeNetwork().then((function(n){var o=m(n,2),r=o[0];o[1],r?(qe.w("".concat(t," disconnected from wsserver but network is ok, continue...")),e._closeConnection(hl),e._initConnection()):e._channelModule.onReconnectFailed()})))}},{key:"getReconnectFlag",value:function(){return this._reConnectFlag}},{key:"_setNextPingTs",value:function(){this._nextPingTs=Date.now()+1e4}},{key:"getNextPingTs",value:function(){return this._nextPingTs}},{key:"isConnected",value:function(){return this._readyState===vl}},{key:"canIUseBinaryFrame",value:function(){return this._canIUseBinaryFrame}},{key:"setIsWorkerEnabled",value:function(e){qe.l("".concat(this._n,".setIsWorkerEnabled flag:").concat(e)),this._isWorkerEnabled=e}},{key:"getIsWorkerEnabled",value:function(){return this._isWorkerEnabled&&Ie}},{key:"_getRandom",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:"_resetRandom",value:function(){this._random=0}},{key:"close",value:function(){qe.l("".concat(this._n,".close")),this._closeConnection(pl),this._promiseMap.clear(),this._startSequence=mt(),this._readyState=_l,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url="",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}]),e}(),bl=function(e){s(n,e);var t=v(n);function n(e){var r;if(o(this,n),(r=t.call(this,e))._n="ChannelModule",r._socketHandler=new yl(f(r)),r._probing=!1,r._isAppShowing=!0,r._previousState=S.NET_STATE_CONNECTED,le&&"function"==typeof de.onAppShow&&"function"==typeof de.onAppHide){var i=r._onAppHide.bind(f(r)),a=r._onAppShow.bind(f(r));"function"==typeof de.offAppHide&&de.offAppHide(i),"function"==typeof de.offAppShow&&de.offAppShow(a),de.onAppHide(i),de.onAppShow(a)}return r._timerForNotLoggedIn=-1,r._timerForNotLoggedIn=setInterval(r.onCheckTimer.bind(f(r)),1e3),r._fatalErrorFlag=!1,r}return i(n,[{key:"onCheckTimer",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:"onErrorCodeNotZero",value:function(e){this.getModule(Xn).onErrorCodeNotZero(e)}},{key:"onMessage",value:function(e){this.getModule(Xn).onMessage(e)}},{key:"send",value:function(e){return this._socketHandler?this._previousState!==S.NET_STATE_CONNECTED&&e.head.servcmd.includes(Hr)?(this.reConnect(),this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}},{key:"_sendLogViaHTTP",value:function(e){var t=q.HOST.CURRENT.STAT;return new Promise((function(n,o){var r="".concat(t,"/v4/imopenstat/tim_web_report_v2?sdkappid=").concat(e.head.sdkappid,"&reqtime=").concat(Date.now()),i=JSON.stringify(e.body),a="application/x-www-form-urlencoded;charset=UTF-8";if(le)de.request({url:r,data:i,method:"POST",timeout:3e3,header:{"content-type":a},success:function(){n()},fail:function(){o(new Ss({code:Ta}))}});else{var s=new XMLHttpRequest,c=setTimeout((function(){s.abort(),o(new Ss({code:Sa}))}),3e3);s.onreadystatechange=function(){4===s.readyState&&(clearTimeout(c),200===s.status||304===s.status?n():o(new Ss({code:Ta})))},s.open("POST",r,!0),s.setRequestHeader("Content-type",a),s.send(i)}}))}},{key:"simplySend",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:"onOpen",value:function(){this._ping()}},{key:"onClose",value:function(){this._socketHandler&&this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(S.NET_STATE_DISCONNECTED),this.reConnect()}},{key:"onError",value:function(){le&&!se&&this.outputWarning("DomainNameInMP"),this._emitNetStateChangeEvent(S.NET_STATE_DISCONNECTED)}},{key:"getKeyMap",value:function(e){return this.getModule(Xn).getKeyMap(e)}},{key:"_onAppHide",value:function(){this._isAppShowing=!1}},{key:"_onAppShow",value:function(){this._isAppShowing=!0}},{key:"onRequestTimeout",value:function(e){}},{key:"onReconnected",value:function(){qe.l("".concat(this._n,".onReconnected")),this._m.restartTimer(),this.getModule(Xn).onReconnected(),this._emitNetStateChangeEvent(S.NET_STATE_CONNECTED)}},{key:"onReconnectFailed",value:function(){qe.l("".concat(this._n,".onReconnectFailed")),this._emitNetStateChangeEvent(S.NET_STATE_DISCONNECTED)}},{key:"setIsWorkerEnabled",value:function(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}},{key:"offline",value:function(){this._emitNetStateChangeEvent(S.NET_STATE_DISCONNECTED)}},{key:"reConnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!1;this._socketHandler&&(t=this._socketHandler.getReconnectFlag());var n="forcedFlag:".concat(e," fatalErrorFlag:").concat(this._fatalErrorFlag," previousState:").concat(this._previousState," reconnectFlag:").concat(t);if(qe.l("".concat(this._n,".reConnect ").concat(n)),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===S.NET_STATE_CONNECTING&&t)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(S.NET_STATE_CONNECTING)}}},{key:"_emitNetStateChangeEvent",value:function(e){this._previousState!==e&&(qe.l("".concat(this._n,"._emitNetStateChangeEvent from ").concat(this._previousState," to ").concat(e)),this._previousState=e,this.emitOuterEvent(T.NET_STATE_CHANGE,{state:e}))}},{key:"_ping",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule(Xn).getProtocolData({protocolName:zr});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(qe.w("".concat(e._n,"._ping failed. error:"),t),e._probing=!1,t&&60002===t.code)return new cs("error").setMessage("code:".concat(t.code," message:").concat(t.message)).setNetworkType(e.getModule(jn).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(S.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];qe.l("".concat(e._n,"._ping failed. probe network, isAppShowing:").concat(e._isAppShowing," online:").concat(o," networkType:").concat(r)),o?e.reConnect():e._emitNetStateChangeEvent(S.NET_STATE_DISCONNECTED)}))}))}}},{key:"_checkNextPing",value:function(){this._socketHandler&&this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping()}},{key:"dealloc",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:"onRestApiKickedOut",value:function(){this._socketHandler&&(this._socketHandler.close(),this.reConnect(!0))}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._previousState=S.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),n}(lo),Ml=["a2","tinyid"],Cl=["a2","tinyid"],kl=function(){function e(t){o(this,e),this._n="ProtocolHandler",this._sessionModule=t,this._configMap=new Map,this._fillConfigMap()}return i(e,[{key:"_fillConfigMap",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),n=this._sessionModule.genCosSpecifiedHead(),o=this._sessionModule.genSSOReportHead(),r=this._sessionModule.isIntl();this._configMap.set(uo,{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.LOGIN)}),body:{state:"Online",isWebUniapp:0,deviceBrand:0},keyMap:{request:{deviceBrand:"InstType"},response:{InstId:"instanceID",HelloInterval:"helloInterval"}}}),this._configMap.set(po,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:"wslogout_type"}}}}(e)),this._configMap.set(ho,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.HELLO)}),body:{isWebUniapp:0},keyMap:{response:{NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(fo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.STAT_SERVICE,".").concat(q.CMD.KICK_OTHER)}),body:{}}}(e)),this._configMap.set(Fr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_COS_SIGN,".").concat(q.CMD.COS_SIGN)}),body:{cmd:"open_im_cos_svc",subCmd:"get_cos_token",duration:300,version:2},keyMap:{request:{userSig:"usersig",subCmd:"sub_cmd",cmd:"cmd",duration:"duration",version:"version"},response:{expired_time:"expiredTime",bucket_name:"bucketName",session_token:"sessionToken",tmp_secret_id:"secretId",tmp_secret_key:"secretKey"}}}}(n)),this._configMap.set(qr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.CUSTOM_UPLOAD,".").concat(q.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:"usersig",fileType:"file_type",fileName:"file_name",uploadMethod:"upload_method"},response:{expired_time:"expiredTime",request_id:"requestId",head_url:"headUrl",upload_url:"uploadUrl",download_url:"downloadUrl",ci_url:"ciUrl",snapshot_url:"requestSnapshotUrl"}}}}(n)),this._configMap.set(Vr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.CUSTOM_UPLOAD,".").concat(q.CMD.VIDEO_COVER)}),body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{request:{version:"version",platform:"platform",coverName:"cover_name",requestSnapshotUrl:"snapshot_url"},response:{error_code:"errorCode",error_msg:"errorInfo",download_url:"snapshotUrl"}}}}(n)),this._configMap.set(Qr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_CONFIG_MANAGER,".").concat(q.CMD.FETCH_COMMERCIAL_CONFIG)}),body:{SDKAppID:0},keyMap:{request:{SDKAppID:"uint32_sdkappid"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(ei,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_CONFIG_MANAGER,".").concat(q.CMD.PUSHED_COMMERCIAL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(Jr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_CONFIG_MANAGER,".").concat(q.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:"uint32_sdkappid",version:"uint64_version"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set(Zr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_CONFIG_MANAGER,".").concat(q.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set(ti,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OVERLOAD_PUSH,".").concat(q.CMD.OVERLOAD_NOTIFY)}),body:{},keyMap:{response:{OverLoadServCmd:"overloadCommand",DelaySecs:"waitingTime"}}}}(e)),this._configMap.set(go,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.GET_MESSAGES)}),body:{cookie:"",syncFlag:0,needAbstract:1,isOnlineSync:0,needSignaling:1},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",from:"From_Account",to:"To_Account",time:"MsgTimeStamp",sequence:"MsgSeq",random:"MsgRandom",elements:"MsgBody"},response:{MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",ClientSeq:"clientSequence",MsgSeq:"sequence",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",ToGroupId:"to",MsgKey:"messageKey",GroupTips:"groupTips",MsgBody:"elements",MsgType:"type",C2CRemainingUnreadCount:"C2CRemainingUnreadList",C2CPairUnreadCount:"C2CPairUnreadList"}}}}(e)),r||(this._configMap.set(vo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(hi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_MSG_AUDIT_MGR,".").concat(q.CMD.GET_RPOFANITY_LIST)}),body:{version:0,deviceID:"",startIndex:void 0},keyMap:{request:{version:"uint64_version",deviceID:"str_device_id",startIndex:"uint64_start_index"},response:{msg_cmd_error_code:"errorInfo",str_err_msg:"errorMessage",uint32_code:"errorCode",msg_scene_ctl_config:"filterConfig",uint64_c2c_custom_msg_flag:"c2c_custom_message",uint64_c2c_text_msg_flag:"c2c_text_message",uint64_group_custom_msg_flag:"group_custom_message",uint64_group_text_msg_flag:"group_text_message",uint64_group_info_flag:"group_profile",uint64_group_member_info_flag:"group_member_profile",uint64_relation_chain_flag:"sns",uint64_user_info_flag:"user_profile",rpt_msg_dirty_word:"lexicon",str_dirty_word:"profanity",str_replaced_content:"replacement",uint64_filter_type:"filterType",uint64_id:"id",uint64_word_type:"profanityType",uint64_complete_flag:"completeFlag",uint64_next_start_index:"nextStartIndex",uint64_version:"version",uint64_expired_time:"expiredTime"}}}}(e))),this._configMap.set(mo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.SEND_MESSAGE)}),body:{fromAccount:"",toAccount:"",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:"",avatar:"",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:""}},messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,isSupportExtension:0},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",count:"MaxCnt",lastMessageTime:"LastMsgTime",messageKey:"MsgKey",peerAccount:"Peer_Account",data:"Data",description:"Desc",extension:"Ext",type:"MsgType",content:"MsgContent",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",nick:"From_AccountNick",avatar:"From_AccountHeadurl",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"IsNeedReadReceipt"}}}}(e)),this._configMap.set(_o,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:"",groupID:"",random:0,clientSequence:0,priority:"",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:""}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,topicID:void 0,receiverList:void 0,isSupportExtension:0},keyMap:{request:{to:"GroupId",extension:"Ext",data:"Data",description:"Desc",random:"Random",sequence:"ReqMsgSeq",count:"ReqMsgNumber",type:"MsgType",priority:"MsgPriority",content:"MsgContent",elements:"MsgBody",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",clientSequence:"ClientSeq",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"NeedReadReceipt",receiverList:"To_Account"},response:{MsgTime:"time",MsgSeq:"sequence"}}}}(e)),this._configMap.set(wo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:"",toAccount:"",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:"MsgInfo",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom"}}}}(e)),this._configMap.set(sr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.REVOKE_GROUP_MESSAGE)}),body:{groupID:"",msgSeqList:void 0,topicID:""},keyMap:{request:{msgSeqList:"MsgSeqList",msgSeq:"MsgSeq"}}}}(e)),this._configMap.set(Eo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:"",count:15,lastMessageTime:0,messageKey:"",withRecalledMessage:1,direction:0},keyMap:{request:{messageKey:"MsgKey",peerAccount:"Peer_Account",count:"MaxCnt",lastMessageTime:"LastMsgTime",withRecalledMessage:"WithRecalledMsg",direction:"GetDirection"},response:{LastMsgTime:"lastMessageTime",IsNeedReadReceipt:"needReadReceipt",IsPeerRead:"readReceiptSentByPeer"}}}}(e)),this._configMap.set(Lo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.MODIFY_C2C_MESSAGE)}),body:{from:"",to:"",sequence:0,random:0,time:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}}(e)),this._configMap.set(ur,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:"",count:15,sequence:"",topicID:void 0},keyMap:{request:{sequence:"ReqMsgSeq",count:"ReqMsgNumber",withRecalledMessage:"WithRecalledMsg"},response:{Random:"random",MsgTime:"time",MsgSeq:"sequence",ReqMsgSeq:"sequence",RspMsgList:"messageList",IsPlaceMsg:"isPlaceMessage",IsSystemMsg:"isSystemMessage",ToGroupId:"to",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgPriority:"priority",MsgBody:"elements",MsgType:"type",MsgContent:"content",IsFinished:"complete",Download_Flag:"downloadFlag",ClientSeq:"clientSequence",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",ToTopicId:"topicID",InvisibleMsgSeq:"invisibleSequenceList"}}}}(e)),this._configMap.set(To,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:"LastedMsgTime"}}}}(e)),this._configMap.set(So,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{userIDList:void 0,muteFlag:0},keyMap:{request:{userIDList:"Peer_Account",muteFlag:"Mute_Notifications"}}}}(e)),this._configMap.set(Io,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{updateSequence:0},keyMap:{response:{MuteNotificationsList:"muteFlagList"}}}}(e)),this._configMap.set(cr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0,topicID:void 0},keyMap:{request:{messageReadSeq:"MsgReadedSeq"}}}}(e)),this._configMap.set(lr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.SET_ALL_MESSAGE_READ)}),body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{request:{readAllC2CMessage:"C2CReadAllMsg",groupMessageReadInfoList:"GroupReadInfo",messageSequence:"MsgSeq"},response:{C2CReadAllMsg:"readAllC2CMessage",GroupReadInfoArray:"groupMessageReadInfoList"}}}}(e)),this._configMap.set(Ao,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:"",to:"",keyList:void 0},keyMap:{request:{keyList:"MsgKeyList"}}}}(e)),this._configMap.set(br,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:"",deleter:"",keyList:void 0,topicID:void 0},keyMap:{request:{deleter:"Deleter_Account",keyList:"Seqs"}}}}(e)),this._configMap.set(fi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_TRANSLATE,".").concat(q.CMD.TRANSLATE_TEXT)}),body:{sourceTextList:void 0,SDKAppID:0,from:0,source:"",target:""},keyMap:{request:{sourceTextList:"SourceText",SDKAppID:"SdkAppId",from:"FromAccount"},response:{TargetText:"translatedTextList",RequestId:"requestID",CmdErrorCode:"error",ErrorCode:"code",ErrorInfo:"message"}}}}(e)),this._configMap.set(Mr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.MODIFY_GROUP_MESSAGE)}),body:{groupID:"",topicID:void 0,sequence:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:"MsgSeq",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}}(e)),this._configMap.set(dr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{request:{sequence:"MsgSeq"}}}}(e)),this._configMap.set(hr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.SEND_C2C_READ_RECEIPT)}),body:{peerAccount:"",messageInfoList:void 0},keyMap:{request:{peerAccount:"Peer_Account",messageInfoList:"C2CMsgInfo",fromAccount:"From_Account",toAccount:"To_Account",sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",clientTime:"MsgClientTime"}}}}(e)),this._configMap.set(pr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.SEND_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{request:{sequenceList:"MsgSeqList",sequence:"MsgSeq"}}}}(e)),this._configMap.set(fr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_READ_RECEIPT_DETAIL)}),body:{groupID:"",sequence:void 0,flag:0,cursor:0,count:0},keyMap:{request:{sequence:"MsgSeq",count:"Num"},response:{ReadList:"readUserIDList",Read_Account:"userID",UnreadList:"unreadUserIDList",Unread_Account:"userID",IsFinish:"isCompleted"}}}}(e)),this._configMap.set(Ro,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM_MSG_EXT,".").concat(q.CMD.MODIFY_C2C_MESSAGE_EXTENSIONS)}),body:{from:void 0,to:void 0,messageKey:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(Oo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM_MSG_EXT,".").concat(q.CMD.GET_C2C_MESSAGE_EXTENSIONS)}),body:{from:void 0,to:void 0,messageKey:void 0,startSequence:void 0}}}(e)),this._configMap.set(Ir,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM_MSG_EXT,".").concat(q.CMD.MODIFY_GROUP_MESSAGE_EXTENSIONS)}),body:{groupID:void 0,topicID:void 0,messageSequence:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(Er,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM_MSG_EXT,".").concat(q.CMD.GET_GROUP_MESSAGE_EXTENSIONS)}),body:{groupID:void 0,topicID:void 0,messageSequence:void 0,startSequence:void 0}}}(e)),this._configMap.set(Do,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:"To_Account"},response:{ReadTime:"peerReadTimeList"}}}}(e)),this._configMap.set(No,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime"}}}}(e)),this._configMap.set(xo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:15},keyMap:{request:{messageAssistFlag:"MsgAssistFlags",assistFlag:"AssistFlags",pinnedTimeStamp:"TopTimeStamp",pinnedStartIndex:"TopStartIndex"},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime",LastMsgFlags:"lastMessageFlag",TopFlags:"isPinned",TopTimeStamp:"pinnedTimeStamp",TopStartIndex:"pinnedStartIndex",GroupId:"convGroupID"}}}}(e)),this._configMap.set(Po,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.DELETE_CONVERSATION)}),body:{fromAccount:"",conversationList:void 0,clearHistoryMessage:void 0},keyMap:{request:{toGroupID:"ToGroupid",clearHistoryMessage:"ClearRamble",conversationList:"ContactItem"},response:{ResultItem:"resultList",ToGroupid:"toGroupID",ResultCode:"code",ResultInfo:"info"}}}}(e)),this._configMap.set(Uo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.CLEAR_HISTORY_MESSAGE)}),body:{fromAccount:"",toAccount:void 0,type:1,toGroupID:void 0},keyMap:{request:{toGroupID:"ToGroupid"}}}}(e)),this._configMap.set(Go,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.PIN_CONVERSATION)}),body:{fromAccount:"",operationType:1,itemList:void 0},keyMap:{request:{itemList:"RecentContactItem"}}}}(e)),this._configMap.set(Bo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(Fo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.MARK_CONVERSATION)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},response:{ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(qo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.MARK_CONVERSATION)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},response:{ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(Vo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.CREATE_CONVERSATION_GROUP)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"GroupContactItem",groupID:"ToGroupId"},response:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(Ho,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.DELETE_CONVERSATION_GROUP)}),body:{fromAccount:"",groupName:void 0},keyMap:{request:{},response:{GroupId:"convGroupID"}}}}(e)),this._configMap.set(zo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{request:{oldName:"OldGroupName",newName:"NewGroupName",groupID:"ToGroupId",operationType:"ContactOptType",groupName:"OldGroupName",updateItem:"ContactUpdateItem"},response:{ContactOptType:"operationType",ToGroupId:"groupID",GroupId:"convGroupID"}}}}(e)),this._configMap.set(jo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:{groupName:void 0,updateGroupType:void 0,updateItem:void 0}},keyMap:{request:{},response:{}}}}(e)),this._configMap.set($o,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(Wo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.RECENT_CONTACT,".").concat(q.CMD.GET_CONVERSATION_GROUP_LIST)}),body:{fromAccount:"",startTime:void 0,startIndex:void 0},keyMap:{request:{},response:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType",CustomMark:"customData",ContactGroupId:"convGroupIDList"}}}}(e)),this._configMap.set(yo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.PROFILE,".").concat(q.CMD.PORTRAIT_GET)}),body:{fromAccount:"",userItem:[]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(bo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.PROFILE,".").concat(q.CMD.PORTRAIT_SET)}),body:{fromAccount:"",profileItem:[{tag:He.NICK,value:""},{tag:He.GENDER,value:""},{tag:He.ALLOWTYPE,value:""},{tag:He.AVATAR,value:""}]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(Mo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.FRIEND,".").concat(q.CMD.GET_BLACKLIST)}),body:{fromAccount:"",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:"currentSequence"}}}}(e)),this._configMap.set(Co,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.FRIEND,".").concat(q.CMD.ADD_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(ko,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.FRIEND,".").concat(q.CMD.DELETE_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(ai,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.SET_SELF_STATUS)}),body:{customStatus:""},keyMap:{}}}(e)),this._configMap.set(si,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.GET_USER_STATUS)}),body:{userIDList:void 0},keyMap:{response:{UserStatusList:"successUserList",ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID",Status:"statusType"}}}}(e)),this._configMap.set(ci,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.SUBSCRIBE_USER_STATUS)}),body:{userIDList:void 0},keyMap:{response:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}}(e)),this._configMap.set(li,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.UNSUBSCRIBE_USER_STATUS)}),body:{userIDList:void 0,unsubscribeAll:void 0},keyMap:{response:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}}(e)),this._configMap.set(Ko,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:"",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0},isSupportTopic:0},keyMap:{request:{memberAccount:"Member_Account"},response:{GroupIdList:"groups",NoUnreadSeqList:"excludedUnreadSequenceList",MsgSeq:"readedSequence",LastRecallTime:"_lastRevokedTime"}}}}(e)),this._configMap.set(Yo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:"GroupIdList",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",groupCustomFieldFilter:"AppDefinedDataFilter_Group",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{GroupIdList:"groups",AppDefinedData:"groupCustomField",AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_Group:"groupCustomFieldFilter",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",InfoSeq:"infoSequence",MemberList:"members",GroupInfo:"groups",ShutUpUntil:"muteUntil",ShutUpAllMember:"muteAllMembers"}}}}(e)),this._configMap.set(Xo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:"",isSupportTopic:void 0,inviteOption:void 0},keyMap:{request:{ownerID:"Owner_Account",userID:"Member_Account",avatar:"FaceUrl",maxMemberNum:"MaxMemberCount",joinOption:"ApplyJoinOption",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",inviteOption:"InviteJoinOption"},response:{HugeGroupFlag:"avChatRoomFlag",OverJoinedGroupLimit_Account:"overLimitUserIDList"}}}}(e)),this._configMap.set(Jo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Zo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0,inviteOption:void 0},keyMap:{request:{groupCustomField:"AppDefinedData",muteAllMembers:"ShutUpAllMember",joinOption:"ApplyJoinOption",avatar:"FaceUrl",inviteOption:"InviteJoinOption"},response:{AppDefinedData:"groupCustomField",ShutUpAllMember:"muteAllMembers"}}}}(e)),this._configMap.set(Qo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{request:{applyMessage:"ApplyMsg",historyMessageFlag:"HugeGroupHistoryMsgFlag"},response:{HugeGroupFlag:"avChatRoomFlag",AVChatRoomKey:"avChatRoomKey",RspMsgList:"messageList",ToGroupId:"to"}}}}(e)),this._configMap.set(er,function(e){return e.a2,e.tinyid,{head:t(t({},h(e,Ml)),{},{servcmd:"".concat(q.NAME.BIG_GROUP_NO_AUTH,".").concat(q.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:"ApplyMsg"},response:{HugeGroupFlag:"avChatRoomFlag"}}}}(e)),this._configMap.set(tr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(nr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption","InviteJoinOption"]}},keyMap:{response:{}}}}(e)),this._configMap.set(or,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:"NewOwner_Account"}}}}(e)),this._configMap.set(rr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:"Applicant_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(ir,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.HANDLE_INVITE_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,invitee:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,userDefinedField:void 0},keyMap:{request:{applicant:"Applicant_Account",invitee:"Invited_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg"}}}}(e)),this._configMap.set(ar,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:"Inviter_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(gr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:"Handle_Account"},response:{To_Account:"userID"}}}}(e)),this._configMap.set(vr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(mr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.BIG_GROUP_LONG_POLLING,".").concat(q.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,startBroadcastSeq:void 0,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}}}(e)),this._configMap.set(_r,function(e){return e.a2,e.tinyid,{head:t(t({},h(e,Cl)),{},{servcmd:"".concat(q.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,".").concat(q.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}}}(e)),this._configMap.set(yr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(Cr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(kr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(wr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key"}}}}(e)),this._configMap.set(Tr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]}}}(e)),this._configMap.set(Sr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP_ATTR,".").concat(q.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:"Key",groupType:"GroupType"}}}}(e)),this._configMap.set(Dr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_GROUP_NOTIFY)}),body:{notifyType:1,groupID:"",beginTime:0,endTime:0,limit:20},keyMap:{request:{},response:{NextMsgTime:"nextRevokedTime",NotifyMsgList:"notifyList"}}}}(e)),this._configMap.set(Ar,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.UPDATE_GROUP_COUNTER)}),body:{groupID:void 0,counterList:void 0,avChatRoomKey:void 0,mode:void 0},keyMap:{request:{counterList:"GroupCounter"}}}}(e)),this._configMap.set(Lr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_GROUP_COUNTER)}),body:{groupID:void 0,keyList:[],avChatRoomKey:void 0},keyMap:{request:{keyList:"GroupCounterKeys"}}}}(e)),this._configMap.set(ni,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP_COMMUNITY,".").concat(q.CMD.CREATE_TOPIC)}),body:{groupID:void 0,topicName:void 0,avatar:void 0,customData:void 0,topicID:void 0,notification:void 0,introduction:void 0},keyMap:{request:{avatar:"FaceUrl"}}}}(e)),this._configMap.set(oi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP_COMMUNITY,".").concat(q.CMD.DELETE_TOPIC)}),body:{groupID:void 0,topicIDList:void 0},keyMap:{request:{topicIDList:"TopicIdList"},response:{DestroyResultItem:"resultList"}}}}(e)),this._configMap.set(ri,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP_COMMUNITY,".").concat(q.CMD.UPDATE_TOPIC_PROFILE)}),body:{groupID:void 0,topicID:void 0,avatar:void 0,customData:void 0,notification:void 0,introduction:void 0,muteAllMembers:void 0,topicName:void 0},keyMap:{request:{avatar:"FaceUrl",muteAllMembers:"ShutUpAllMember"}}}}(e)),this._configMap.set(ii,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP_COMMUNITY,".").concat(q.CMD.GET_TOPIC_LIST)}),body:{groupID:void 0,topicIDList:void 0,MemberInfoFilter:["NoUnreadSeqList"]},keyMap:{request:{topicIDList:"TopicIdList"},response:{TopicAndSelfInfo:"topicInfoList",TopicInfo:"topic",GroupID:"groupID",ShutUpTime:"muteTime",ShutUpAllFlag:"muteAllMembers",LastMsgTime:"lastMessageTime",MsgSeq:"readedSequence",LastMsgSeq:"sequence",NoUnreadSeqList:"excludedUnreadSequenceList"}}}}(e)),this._configMap.set(Rr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:["Role","NameCard","ShutUpUntil","JoinTime"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",MemberList:"members",ShutUpUntil:"muteUntil"}}}}(e)),this._configMap.set(Or,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP_AVCHATROOM,".").concat(q.CMD.GET_AVCHATROOM_MEMBER_LIST)}),body:{groupID:void 0,offset:void 0,filter:void 0},keyMap:{request:{offset:"Timestamp",filter:"Mark"},response:{NextTimestamp:"offset"}}}}(e)),this._configMap.set(xr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:"Member_List_Account",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{MemberList:"members",ShutUpUntil:"muteUntil",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",AppMemberDefinedData:"memberCustomField"}}}}(e)),this._configMap.set(Nr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:"Member_Account",userIDList:"MemberList"},response:{MemberList:"members"}}}}(e)),this._configMap.set(Pr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:"MemberToDel_Account"}}}}(e)),this._configMap.set(Ur,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.BAN_AVCHATROOM_MEMBER)}),body:{groupID:void 0,userIDList:void 0,duration:void 0,reason:""},keyMap:{request:{userIDList:"Members_Account",duration:"Duration",reason:"Description"}}}}(e)),this._configMap.set(Gr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP,".").concat(q.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,topicID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:"Member_Account",memberCustomField:"AppMemberDefinedData",muteTime:"ShutUpTime",messageRemindType:"MsgFlag"}}}}(e)),this._configMap.set(Br,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.GROUP_AVCHATROOM,".").concat(q.CMD.MARK_AVCHATROOM_MEMBER_INFO)}),body:{groupID:void 0,operationType:1,memberList:[]},keyMap:{request:{operationType:"CommandType",memberList:"MemberList",markType:"Marks",userID:"Member_Account"},response:{CommandType:"operationType",Marks:"markType",Member_Account:"userID"}}}}(e)),this._configMap.set(Hr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STAT,".").concat(q.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:"sdk_type",SDKVersion:"sdk_version",deviceType:"device_type",platform:"platform",instanceID:"instance_id",traceID:"trace_id",SDKAppID:"sdk_app_id",userID:"user_id",tinyID:"tiny_id",extension:"extension",timestamp:"timestamp",networkType:"network_type",eventType:"event_type",code:"error_code",message:"error_message",moreMessage:"more_message",duplicate:"duplicate",costTime:"cost_time",level:"level",qualityType:"quality_type",reportIndex:"report_index",wholePeriod:"whole_period",totalCount:"total_count",rttCount:"success_count_business",successRateOfRequest:"percent_business",countLessThan1Second:"success_count_business",percentOfCountLessThan1Second:"percent_business",countLessThan3Second:"success_count_platform",percentOfCountLessThan3Second:"percent_platform",successCountOfBusiness:"success_count_business",successRateOfBusiness:"percent_business",successCountOfPlatform:"success_count_platform",successRateOfPlatform:"percent_platform",successCountOfMessageReceived:"success_count_business",successRateOfMessageReceived:"percent_business",avgRTT:"average_value",avgDelay:"average_value",avgValue:"average_value",uiPlatform:"ui_platform"}}}}(o)),this._configMap.set(zr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.HEARTBEAT,".").concat(q.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set(jr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_PUSH,".").concat(q.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:"C2CMessageArray",GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",C2cNotifyMsgArray:"C2CNotifyMessageArray",C2cMsgInfo:"C2CReadReceiptArray",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyAdd_Account:"userID",ProfileImNick:"nick",PendencyType:"applicationType",C2CReadAllMsg:"readAllC2CMessage",IsNeedReadReceipt:"needReadReceipt",Status:"statusType"}}}}(e)),this._configMap.set($r,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_PUSH,".").concat(q.CMD.MULTI_MESSAGE_PUSH)}),body:{},keyMap:{response:{GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyType:"applicationType"}}}}(e)),this._configMap.set(Wr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.OPEN_IM,".").concat(q.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:"SessionData"}}}}(e)),this._configMap.set(Kr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.STATUS_FORCE_OFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:"C2CNotifyMessageArray",NoticeSeq:"noticeSequence",KickoutMsgNotify:"kickoutMsgNotify",NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(Xr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_LONG_MESSAGE,".").concat(q.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:""},keyMap:{response:{Data:"data",Desc:"description",Ext:"extension",Download_Flag:"downloadFlag",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}}}}(e)),this._configMap.set(Yr,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_LONG_MESSAGE,".").concat(q.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",type:"MsgType",content:"MsgContent",data:"Data",description:"Desc",extension:"Ext",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"}}}}(e)),this._configMap.set(pi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.SET_TOKEN)}),body:{tokenID:"",pushMsg:0,sdkAppID:0,businessID:"",deviceBrand:"",deviceToken:"",isTpns:0,isWebUniapp:0},keyMap:{request:{tokenID:"TokenID",pushMsg:"PushMsg",sdkAppID:"EnterVersion",businessID:"BusiID",deviceBrand:"InstType",deviceToken:"VarToken",isTpns:"IsTpns"}}}}(e)),this._configMap.set(di,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.STAT_FOREGROUND)}),body:{isWebUniapp:0}}}(e)),this._configMap.set(ui,function(e){return{head:t(t({},e),{},{servcmd:"".concat(q.NAME.IM_OPEN_STATUS,".").concat(q.CMD.STAT_BACKGROUND)}),body:{C2CUnread:0,GroupUnread:0,isWebUniapp:0},keyMap:{request:{c2cUnreadCount:"C2cUnread",groupUnreadCount:"GrpUnread"}}}}(e))}},{key:"has",value:function(e){return this._configMap.has(e)}},{key:"get",value:function(e){return this._configMap.get(e)}},{key:"update",value:function(){this._fillConfigMap()}},{key:"getKeyMap",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(qe.w("".concat(this._n,".getKeyMap unknown protocolName:").concat(e)),{})}},{key:"getProtocolData",value:function(e){var t=e.protocolName,n=e.requestData,o=this.get(t),r=null;if(n){var i=this._simpleDeepCopy(o),a=this._updateService(n,i),s=a.body,c=Object.create(null);for(var l in s)if(Object.prototype.hasOwnProperty.call(s,l)){if(c[l]=s[l],void 0===n[l])continue;c[l]=n[l]}a.body=c,r=this._getUplinkData(a)}else r=this._getUplinkData(o);return r}},{key:"_getUplinkData",value:function(e){var t=this._requestDataCleaner(e),n=Gt(t.head),o=il(t.body,this._getRequestKeyMap(n));return t.body=o,t}},{key:"_updateService",value:function(e,t){var n=Gt(t.head);if(this._isFromGroupRequest(t)){var o=e.type,r=e.groupID,i=void 0===r?void 0:r,a=e.groupIDList,s=void 0===a?[]:a;at(i)&&(i=s[0]||""),St({type:o,groupID:i})&&(t.head.servcmd="".concat(q.NAME.GROUP_COMMUNITY,".").concat(n))}return t}},{key:"_isFromGroupRequest",value:function(e){return e.head.servcmd.includes(q.NAME.GROUP)||e.head.servcmd.includes(q.NAME.GROUP_ATTR)}},{key:"_getRequestKeyMap",value:function(e){var n=this.getKeyMap(e);return t(t({},nl.request),n.request)}},{key:"_requestDataCleaner",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&dt(o)&&null!==e[o]&&void 0!==e[o]&&("object"!==n(e[o])?t[o]=e[o]:t[o]=this._requestDataCleaner.bind(this)(e[o]));return t}},{key:"_simpleDeepCopy",value:function(e){for(var t,n=Object.keys(e),o={},r=0,i=n.length;r<i;r++)t=n[r],it(e[t])?o[t]=Array.from(e[t]):ot(e[t])?o[t]=this._simpleDeepCopy(e[t]):o[t]=e[t];return o}}]),e}(),wl=[Wr],Tl=function(){function e(t){o(this,e),this._sessionModule=t,this._n="DownlinkHandler",this._eventHandlerMap=new Map,this._eventHandlerMap.set("C2CMessageArray",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupMessageArray",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupTips",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set("C2CNotifyMessageArray",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set("C2CReadReceiptArray",this._C2CReadReceiptArrayHandler.bind(this)),this._eventHandlerMap.set("profileModify",this._profileHandler.bind(this)),this._eventHandlerMap.set("friendListMod",this._relationChainHandler.bind(this)),this._eventHandlerMap.set("recentContactMod",this._recentContactHandler.bind(this)),this._eventHandlerMap.set("readAllC2CMessage",this._allMessageReadHandler.bind(this)),this._eventHandlerMap.set("c2cMessageModified",this._c2cMessageModifiedHandler.bind(this)),this._eventHandlerMap.set("groupMessageModified",this._groupMessageModifiedHandler.bind(this)),this._eventHandlerMap.set("userStatusList",this._userStatusListHandler.bind(this)),this._eventHandlerMap.set("messageExtensionNotify",this._messageExtensionNotifyHandler.bind(this)),this._keys=_(this._eventHandlerMap.keys())}return i(e,[{key:"_c2cMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(Pn);t&&(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync&&this._sessionModule.getModule(Yn).startOnlineSync(),t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0}))}},{key:"_c2cMessageModifiedHandler",value:function(e){var t=this._sessionModule.getModule(Pn);t&&t.onC2CMessageModified(e)}},{key:"_groupMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(Un);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:"_groupMessageModifiedHandler",value:function(e){var t=this._sessionModule.getModule(Un);t&&t.onGroupMessageModified(e)}},{key:"_groupTipsHandler",value:function(e){var t=this._sessionModule.getModule(Un);if(t){var n=e.event,o=e.dataList,r=e.isInstantMessage,i=void 0===r||r,a=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:o});break;case 5:for(var s=0;s<o.length;s++)if(it(o[s].elements.revokedInfos))t.onGroupMessageRevoked({dataList:o});else if(it(o[s].elements.groupMessageReadNotice))t.onGroupMessageReadNotice({dataList:o});else{if(!it(o[s].elements.readReceiptList)){t.onNewGroupSystemNotice({dataList:o,isInstantMessage:i,isSyncingEnded:a});break}t.onReadReceiptList({dataList:o})}break;case 12:this._sessionModule.getModule(qn).onNewGroupAtTips({dataList:o});break;default:qe.l("".concat(this._n,"._groupTipsHandler unknown event:").concat(n," dataList:"),o)}}}},{key:"_C2CNotifyMessageArrayHandler",value:function(e){var t=this,n=e.dataList;if(it(n)){var o=this._sessionModule.getModule(Pn);n.forEach((function(e){if(rt(e))if(e.hasOwnProperty("kickoutMsgNotify")){var r=e.kickoutMsgNotify,i=r.kickType,a=r.newInstanceInfo,s=void 0===a?{}:a;1===i?t._sessionModule.onMultipleAccountKickedOut(s):2===i?t._sessionModule.onMultipleDeviceKickedOut(s):3===i&&t._sessionModule.onRestApiKickedOut(s)}else e.hasOwnProperty("c2cMessageRevokedNotify")?o&&o.onC2CMessageRevoked({dataList:n}):e.hasOwnProperty("c2cMessageReadReceipt")?o&&o.onC2CMessageReadReceipt({dataList:n}):e.hasOwnProperty("c2cMessageReadNotice")?o&&o.onC2CMessageReadNotice({dataList:n}):e.hasOwnProperty("muteNotificationsSync")&&t._sessionModule.getModule(qn).onC2CMessageRemindTypeSynced({dataList:n})}))}}},{key:"_C2CReadReceiptArrayHandler",value:function(e){this._sessionModule.getModule(Pn).onReadReceiptList(e)}},{key:"_profileHandler",value:function(e){this._sessionModule.getModule(Nn).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(Gn);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:"_relationChainHandler",value:function(e){this._sessionModule.getModule(Nn).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(Gn);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:"_recentContactHandler",value:function(e){var t=e.dataList;if(it(t)){var n=this._sessionModule.getModule(qn);n&&t.forEach((function(e){var t=e.pushType;if(1===t){var o=e.recentContactDeleteItem;n.onConversationDeleted(o.recentContactList)}else if(2===t){var r=e.recentContactTopItem;n.onConversationPinned(r.recentContactList)}else if(3===t){var i=e.recentContactTopItem;n.onConversationUnpinned(i.recentContactList)}else if(4===t){var a=e.recentContactMarkContact;n.onConversationMarkUpdated(a.recentContactMarkContactItem)}else if(5===t){var s=e.recentContactCreateContactGroup;n.onConversationGroupCreated(s.msgContactGroupContactItem)}else if(6===t){var c=e.recentContactDelContactGroup;n.onConversationGroupDeleted(c.msgGroupItem)}else if(7===t){var l=e.recentContactUpdateContactGroup,u=l.updateType,d=l.msgUpdateGroup,p=l.msgUpdateContact;if(1===u){var h=d.updateGroupType;1===h?n.onConversationGroupNameUpdated(d):2===h&&n.onConversationInGroupUpdated(d)}else 2===u&&n.onConversationAddedToOrDeletedFromGroup(p)}}))}}},{key:"_allMessageReadHandler",value:function(e){var t=e.dataList,n=this._sessionModule.getModule(qn);n&&n.onPushedAllMessageRead(t)}},{key:"_userStatusListHandler",value:function(e){this._sessionModule.getModule(Nn).onUserStatusUpdated(e)}},{key:"_messageExtensionNotifyHandler",value:function(e){this._sessionModule.getModule(xn).onMessageExtensionNotify(e)}},{key:"onMessage",value:function(e){var t=this,n=e.body;if(this._filterMessageFromIMOpenPush(e)){var o=n.eventArray,r=n.isInstantMessage,i=n.isSyncingEnded,a=n.needSync;if(it(o))for(var s=null,c=null,l=0,u=0,d=o.length;u<d;u++){l=(s=o[u]).event;var p=Object.keys(s).find((function(e){return-1!==t._keys.indexOf(e)}));p?(c=14===l?{readAllC2CMessage:s[p],groupMessageReadInfoList:s.groupMessageReadNotice||[]}:16===l?{userID:s.userID,readReceiptList:s[p]}:s[p],this._eventHandlerMap.get(p)({event:l,dataList:c,isInstantMessage:r,isSyncingEnded:i,needSync:a})):qe.l("".concat(this._n,".onMessage unknown eventItem:").concat(s))}}}},{key:"_filterMessageFromIMOpenPush",value:function(e){var t=e.head,n=e.body,o=t.servcmd,r=!1;if(at(o)||(r=o.includes(q.NAME.IM_CONFIG_MANAGER)||o.includes(q.NAME.OVERLOAD_PUSH)||o.includes(q.NAME.STAT_SERVICE)),!r)return!0;if(o.includes(q.CMD.PUSHED_CLOUD_CONTROL_CONFIG))this._sessionModule.getModule(Qn).onPushedCloudControlConfig(n);else if(o.includes(q.CMD.PUSHED_COMMERCIAL_CONFIG))this._sessionModule.getModule(oo).onPushedConfig(n);else if(o.includes(q.CMD.OVERLOAD_NOTIFY))this._sessionModule.onPushedServerOverload(n);else if(o.includes(q.CMD.KICK_OTHER)){var i=Date.now();this._sessionModule.reLoginOnKickOther();var a=new cs("kickOther"),s=this._sessionModule.getModule(Rn).getLastWsHelloTs(),c=i-s;a.setMessage("last wshello time:".concat(s," diff:").concat(c,"ms")).setNetworkType(this._sessionModule.getNetworkType()).end()}return!1}}]),e}(),Sl=[{cmd:q.CMD.GET_GROUP_INFO,interval:1,count:20},{cmd:q.CMD.GET_AVCHATROOM_MEMBER_LIST,interval:3,count:1},{cmd:q.CMD.GET_GROUP_APPLICATION,interval:1,count:15},{cmd:q.CMD.GET_TOPIC_LIST,interval:1,count:10},{cmd:q.CMD.SET_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:q.CMD.MODIFY_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:q.CMD.DELETE_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:q.CMD.CLEAR_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:q.CMD.GET_GROUP_ATTRIBUTES,interval:5,count:20},{cmd:q.CMD.UPDATE_GROUP_COUNTER,interval:5,count:20},{cmd:q.CMD.GET_GROUP_COUNTER,interval:5,count:20},{cmd:q.CMD.SET_ALL_MESSAGE_READ,interval:1,count:1},{cmd:q.CMD.GET_USER_STATUS,interval:5,count:20},{cmd:q.CMD.SUBSCRIBE_USER_STATUS,interval:5,count:20},{cmd:q.CMD.UNSUBSCRIBE_USER_STATUS,interval:5,count:20}],Il=function(e){s(r,e);var n=v(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._n="SessionModule",t._platform=t.getPlatform(),t._protocolHandler=new kl(f(t)),t._messageDispatcher=new Tl(f(t)),t._commandFrequencyLimitMap=new Map,t._commandRequestInfoMap=new Map,t._serverOverloadInfoMap=new Map,t._init(),t.getInnerEmitterInstance().on(xs,t._onCloudConfigUpdated,f(t)),t}return i(r,[{key:"_init",value:function(){this._updateCommandFrequencyLimitMap(Sl)}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("cmd_frequency_limit");at(e)||(e=JSON.parse(e),this._updateCommandFrequencyLimitMap(e))}},{key:"_updateCommandFrequencyLimitMap",value:function(e){var t=this;e.forEach((function(e){t._commandFrequencyLimitMap.set(e.cmd,{interval:e.interval,count:e.count})}))}},{key:"updateProtocolConfig",value:function(){this._protocolHandler.update()}},{key:"request",value:function(e){qe.d("".concat(this._n,".request options:"),e);var t=e.protocolName,n=e.tjgID;if(!this._protocolHandler.has(t))return qe.w("".concat(this._n,".request unknown protocol:").concat(t)),As({code:La});var o=this.getProtocolData(e),r=o.head.servcmd;if(this._isFrequencyOverLimit(r))return As({code:Aa});if(this._isServerOverload(r))return As({code:Wa});Xt(n)||(o.head.tjgID=n);var i=this.getModule(Jn);return wl.includes(t)?i.simplySend(o):i.send(o)}},{key:"getKeyMap",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:"genCommonHead",value:function(){var e=this.getModule(Vn);return{ver:"v4",platform:this._platform,websdkappid:R,websdkversion:L,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:192371,tjgID:""}}},{key:"genCosSpecifiedHead",value:function(){var e=this.getModule(Vn);return{ver:"v4",platform:this._platform,websdkappid:R,websdkversion:L,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:192371}}},{key:"genSSOReportHead",value:function(){var e=this.getModule(Vn);return{ver:"v4",platform:this._platform,websdkappid:R,websdkversion:L,sdkappid:e.getSDKAppID(),contenttype:"",reqtime:0,identifier:"",usersig:"",status_instid:e.getStatusInstanceID(),sdkability:192371}}},{key:"getProtocolData",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:"trans",value:function(e){var n=e.servcmd,o=e.data,r={head:t(t({},this.genCommonHead()),{},{servcmd:n}),body:o};return this.getModule(Jn).send(r)}},{key:"sendComboMessage",value:function(e){var n=e.servcmd,o=e.data,r={head:t(t({},this.genCommonHead()),{},{servcmd:n}),body:o};return this.getModule(Jn).send(r)}},{key:"onErrorCodeNotZero",value:function(e){var t=e.errorCode;if(t===$a){var n=e.kickType,o=e.newInstanceInfo,r=void 0===o?{}:o;1===n?this.onMultipleAccountKickedOut(r):2===n?this.onMultipleDeviceKickedOut(r):3===n&&this.onRestApiKickedOut(r)}t!==za&&t!==ja||(this._onUserSigExpired(),this.getModule(Jn).reConnect())}},{key:"onMessage",value:function(e){var t=e.body,n=t.needAck,o=void 0===n?0:n,r=t.sessionData;1===o&&this._sendACK(r),this._messageDispatcher.onMessage(e)}},{key:"onReconnected",value:function(){this._reLoginOnReconnected()}},{key:"reLoginOnKickOther",value:function(){qe.l("".concat(this._n,".reLoginOnKickOther")),this._reLogin()}},{key:"_reLoginOnReconnected",value:function(){qe.l("".concat(this._n,"._reLoginOnReconnected")),this._reLogin()}},{key:"_reLogin",value:function(){var e=this;if(this.isLoggedIn()){var t=0,n=this.getModule(ro);n.canIUseOfflinePush()&&(t=n.getUniAppPlatform()),this.request({protocolName:uo,requestData:{isWebUniapp:t}}).then((function(t){var n=t.data.instanceID;e.getModule(Vn).setStatusInstanceID(n),qe.l("".concat(e._n,"._reLogin ok. start to sync unread messages")),e.getModule(qn).syncConversationList().then((function(){e.getModule(to).start()})),e.getModule(Un).updateLocalMainSequenceOnReconnected();var o=e.getModule(Fn);o.resetGetTopicTime(),o.getTopicListOnReconnected()}))}}},{key:"onMultipleAccountKickedOut",value:function(e){this.getModule(Rn).onMultipleAccountKickedOut(e)}},{key:"onMultipleDeviceKickedOut",value:function(e){this.getModule(Rn).onMultipleDeviceKickedOut(e)}},{key:"_onUserSigExpired",value:function(){this.getModule(Rn).onUserSigExpired()}},{key:"onRestApiKickedOut",value:function(e){this.getModule(Rn).onRestApiKickedOut(e)}},{key:"_sendACK",value:function(e){this.request({protocolName:Wr,requestData:{sessionData:e}})}},{key:"_isFrequencyOverLimit",value:function(e){var t=e.split(".")[1];if(!this._commandFrequencyLimitMap.has(t))return!1;if(!this._commandRequestInfoMap.has(t))return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;var n=this._commandFrequencyLimitMap.get(t),o=n.count,r=n.interval,i=this._commandRequestInfoMap.get(t),a=i.startTime,s=i.requestCount;if(Date.now()-a>1e3*r)return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;s+=1,this._commandRequestInfoMap.set(t,{startTime:a,requestCount:s});var c=!1;return s>o&&(c=!0),c}},{key:"_isServerOverload",value:function(e){if(!this._serverOverloadInfoMap.has(e))return!1;var t=this._serverOverloadInfoMap.get(e),n=t.overloadTime,o=t.waitingTime,r=!1;return Date.now()-n<=1e3*o?r=!0:(this._serverOverloadInfoMap.delete(e),r=!1),r}},{key:"onPushedServerOverload",value:function(e){var t=e.overloadCommand,n=e.waitingTime;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:n}),qe.w("".concat(this._n,".onPushedServerOverload waitingTime:").concat(n,"s"))}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._updateCommandFrequencyLimitMap(Sl),this._commandRequestInfoMap.clear(),this._serverOverloadInfoMap.clear()}}]),r}(lo),El=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="MessageLossDetectionModule",r._maybeLostSequencesMap=new Map,r._firstRoundRet=[],r}return i(n,[{key:"onMessageMaybeLost",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var o=this._maybeLostSequencesMap.get(e),r=0;r<n;r++)-1===o.indexOf(t+r)&&o.push(t+r)}},{key:"detectFirstRound",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!Xt(n)&&!Xt(t)){var o=n.filter((function(e){return-1===t.indexOf(e)}));0===o.length?qe.i("".concat(this._n,".detectFirstRound no message loss. conversationID:").concat(e)):this._firstRoundRet=this._firstRoundRet.concat(o),n.length=0}}},{key:"detectSecondRound",value:function(e,t){if(!Xt(this._firstRoundRet)&&!Xt(t)){var n=this._firstRoundRet.filter((function(e){return-1===t.indexOf(e)}));this._firstRoundRet.length=0;var o,r=n.length;0!==r&&(r<=5?o=e+"-"+n.join("-"):(n.sort((function(e,t){return e-t})),o=e+" start:"+n[0]+" end:"+n[r-1]+" count:"+r),new cs("messageLoss").setMessage(o).setNetworkType(this.getNetworkType()).setLevel("warning").end(),qe.i("".concat(this._n,".detectSecondRound message loss detected. conversationID:").concat(e," lostSequences:").concat(n)))}}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._maybeLostSequencesMap.clear(),this._firstRoundRet.length=0}}]),n}(lo),Dl=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="CloudControlModule",r._cloudConfig=new Map,r._expiredTime=0,r._version=0,r._isFetching=!1,r}return i(n,[{key:"getCloudConfig",value:function(e){return at(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:"_canFetchConfig",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetchConfig();if(qe.l("".concat(this._n,".fetchConfig canFetchConfig:").concat(t)),t){var n=new cs("fetchCloudControlConfig"),o=this.getModule(Vn).getSDKAppID();this._isFetching=!0,this.request({protocolName:Jr,requestData:{SDKAppID:o,version:this._version}}).then((function(t){e._isFetching=!1,n.setMessage("version:".concat(e._version," newVersion:").concat(t.data.version," config:").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),qe.l("".concat(e._n,".fetchConfig ok")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],i=o[1];n.setError(t,r,i).end()})),qe.l("".concat(e._n,".fetchConfig failed. error:"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:"onPushedCloudControlConfig",value:function(e){qe.l("".concat(this._n,".onPushedCloudControlConfig")),new cs("pushedCloudControlConfig").setNetworkType(this.getNetworkType()).setMessage("newVersion:".concat(e.version," config:").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:"onCheckTimer",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:"_parseCloudControlConfig",value:function(e){var t=this,n="".concat(this._n,"._parseCloudControlConfig"),o=e.errorCode,r=e.errorMessage,i=e.cloudControlConfig,a=e.version,s=e.expiredTime;if(0===o){if(this._version!==a){var c=null;try{c=JSON.parse(i)}catch(l){this.isPrivateNetWork()||qe.e("".concat(n," JSON parse error. cloudControlConfig:"),i)}c&&(this._cloudConfig.clear(),Object.keys(c).forEach((function(e){t._cloudConfig.set(e,c[e])})),this._version=a,this.emitInnerEvent(xs))}this._expiredTime=Date.now()+1e3*s}else at(o)?(qe.l("".concat(n," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(qe.e("".concat(n," errorCode:").concat(o," errorMessage:").concat(r)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),n}(lo),Al=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="RecoverMessageModule",r.PULL_LIMIT_COUNT=15,r}return i(n,[{key:"start",value:function(){this._recoverGroupChat(),this._recoverC2CChat()}},{key:"_recoverGroupChat",value:function(){var e,t,n=this,o=this._getLocalConversationList().filter((function(e){return e.type===S.CONV_GROUP&&e.groupProfile.type!==S.GRP_AVCHATROOM})),r=this.getModule(qn),i=0,a=0,s=0;o.forEach((function(o){var c=o.conversationID,l=o.lastMessage;t=c.replace(S.CONV_GROUP,""),e=r.getLocalLastMessage(c),l&&0!==l.lastSequence&&e?(a=l.lastSequence,i=e.sequence,s=a-i,i>0&&s>=1&&s<300?n._recoverGroupMessage({groupID:t,localLastMessageSequence:i,remoteLastMessageSequence:a}):n._getGroupNotify(t)):n._getGroupNotify(t)}))}},{key:"_recoverC2CChat",value:function(){var e,t=this,n=this._getLocalConversationList().filter((function(e){return e.type===S.CONV_C2C})),o=this.getModule(qn),r=0,i=0,a=0,s=[Promise.resolve()];n.forEach((function(n){var c=n.conversationID,l=n.lastMessage;e=o.getLocalLastMessage(c),l&&0!==l.lastTime&&e&&(i=l.lastTime,r=e.time,a=i-r,r>0&&a>=1&&a<=600&&s.push(t._recoverC2CMessage({conversationID:c,localLastMessageTime:r,remoteLastMessageTime:i})))})),Promise.all(s).then((function(){qe.l("".concat(t._n,"._recoverC2CChat all promise fulfilled, start to sync unread messages")),t.getModule(Yn).startSyncOnReconnected()}))}},{key:"_getLocalConversationList",value:function(){return this.getModule(qn).getLocalConversationList()}},{key:"_recoverGroupMessage",value:function(e){var t=this,n="".concat(this._n,"._recoverGroupMessage");qe.l("".concat(n," options:"),e);var o=e.groupID,r=e.localLastMessageSequence,i=e.remoteLastMessageSequence;this._getGroupRomaingMessage({groupID:o,sequence:r}).then((function(e){var r=e.data,a=r.complete,s=r.messageList;if(!at(s)){var c=s[0].sequence;qe.l("".concat(n," pkgLastMessageSequence:").concat(c," complete:").concat(a)),c<i&&2!==a&&t._recoverGroupMessage({groupID:o,localLastMessageSequence:c,remoteLastMessageSequence:i}),new cs("recoverMessage").setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(o," complete:").concat(a," messageList length:").concat(s.length)).end(),t.getModule(Un).onNewGroupMessage({dataList:s,isInstantMessage:!1,updateUnreadCount:!1}),t._getGroupNotify(o)}}))}},{key:"_getGroupNotify",value:function(e){this.getModule(Un).getGroupNotify(e)}},{key:"_getGroupRomaingMessage",value:function(e){var t=e.groupID,n=e.sequence;return this.request({protocolName:ur,requestData:{groupID:t,count:this.PULL_LIMIT_COUNT,sequence:n+this.PULL_LIMIT_COUNT-1}})}},{key:"_recoverC2CMessage",value:function(e){var t=this,n="".concat(this._n,"._recoverC2CMessage");qe.l("".concat(this._n,"._recoverC2CMessage options:"),e);var o=e.conversationID,r=e.localLastMessageTime,i=e.remoteLastMessageTime;return this._getC2CRoamingMessage({conversationID:o,time:r}).then((function(e){var r=e.data,a=r.complete,s=r.messageList;if(!at(s)){new cs("recoverMessage").setNetworkType(t.getNetworkType()).setMessage("".concat(o," complete:").concat(a," messageList length:").concat(c)).end(),t.getModule(Pn).onNewC2CMessage({dataList:s,isInstantMessage:!0});var c=s.length,l=s[c-1].time;if(qe.l("".concat(n," pkgLastMessageTime:").concat(l," complete:").concat(a)),l<i&&1!==a)return t._recoverC2CMessage({conversationID:o,localLastMessageTime:l,remoteLastMessageTime:i})}}))}},{key:"_getC2CRoamingMessage",value:function(e){var t=e.conversationID,n=e.time;return this.request({protocolName:Eo,requestData:{peerAccount:t.replace(S.CONV_C2C,""),count:this.PULL_LIMIT_COUNT+1,lastMessageTime:n,direction:1}})}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset"))}}]),n}(lo),Ll=function(){function e(){o(this,e),this._n="AvgE2EDelay",this._e2eDelayArray=[]}return i(e,[{key:"addMessageDelay",value:function(e){var t=Ue()-e;t>=0&&this._e2eDelayArray.push(t)}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),Bt(n/t,1)}},{key:"_calcCountWithLimit",value:function(e){var t=e.e2eDelayArray,n=e.min,o=e.max;return t.filter((function(e){return n<=e&&e<o})).length}},{key:"_calcPercent",value:function(e,t){var n=Bt(e/t*100,2);return n>100&&(n=100),n}},{key:"_checkE2EDelayException",value:function(e,t){var n=e.filter((function(e){return e>t}));if(n.length>0){var o=n.length,r=Math.min.apply(Math,_(n)),i=Math.max.apply(Math,_(n)),a=this._calcAvg(n,o),s=Bt(o/e.length*100,2);s>50&&new cs("messageE2EDelayException").setMessage("count:".concat(o," min:").concat(r," max:").concat(i," avg:").concat(a," percent:").concat(s)).setLevel("warning").end()}}},{key:"getStatResult",value:function(){var e=this._e2eDelayArray.length;if(0===e)return null;var t=_(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),r=this._calcPercent(n,e),i=this._calcPercent(o,e),a=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:r,countLessThan3Second:o,percentOfCountLessThan3Second:i,avgDelay:a}}},{key:"reset",value:function(){this._e2eDelayArray.length=0}}]),e}(),Rl=function(){function e(){o(this,e),this._n="AvgRTT",this._requestCount=0,this._rttArray=[]}return i(e,[{key:"addRequestCount",value:function(){this._requestCount+=1}},{key:"addRTT",value:function(e){this._rttArray.push(e)}},{key:"_calcTotalCount",value:function(){return this._requestCount}},{key:"_calcRTTCount",value:function(e){return e.length}},{key:"_calcSuccessRateOfRequest",value:function(e,t){if(0===t)return 0;var n=Bt(e/t*100,2);return n>100&&(n=100),n}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcMax",value:function(){return Math.max.apply(Math,_(this._rttArray))}},{key:"_calcMin",value:function(){return Math.min.apply(Math,_(this._rttArray))}},{key:"getStatResult",value:function(){var e=this._calcTotalCount(),t=_(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(n,e),r=this._calcAvg(t,n);return qe.l("".concat(this._n,".getStatResult max:").concat(this._calcMax()," min:").concat(this._calcMin()," avg:").concat(r)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:o,avgRTT:r}}},{key:"reset",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),Ol=function(){function e(){o(this,e),this._map=new Map}return i(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:"addTotalCount",value:function(e){return!(at(e)||!this._map.has(e)||(this._map.get(e).totalCount+=1,0))}},{key:"addSuccessCount",value:function(e){return!(at(e)||!this._map.has(e)||(this._map.get(e).successCount+=1,0))}},{key:"addFailedCountOfUserSide",value:function(e){return!(at(e)||!this._map.has(e)||(this._map.get(e).failedCountOfUserSide+=1,0))}},{key:"addCost",value:function(e,t){return!(at(e)||!this._map.has(e)||(this._map.get(e).costArray.push(t),0))}},{key:"addFileSize",value:function(e,t){return!(at(e)||!this._map.has(e)||(this._map.get(e).fileSizeArray.push(t),0))}},{key:"_calcSuccessRateOfBusiness",value:function(e){if(at(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=Bt(t.successCount/t.totalCount*100,2);return n>100&&(n=100),n}},{key:"_calcSuccessRateOfPlatform",value:function(e){if(at(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(n=Bt(n,2))>100&&(n=100),n}},{key:"_calcTotalCount",value:function(e){return at(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:"_calcSuccessCountOfBusiness",value:function(e){return at(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:"_calcSuccessCountOfPlatform",value:function(e){if(at(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:"_calcAvg",value:function(e){return at(e)||!this._map.has(e)?-1:e===es?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:"_calcAvgCost",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcAvgSpeed",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:"getStatResult",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),r=this._calcSuccessCountOfPlatform(e),i=this._calcSuccessRateOfPlatform(e),a=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:o,successCountOfPlatform:r,successRateOfPlatform:i,avgValue:a}}},{key:"reset",value:function(e){at(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),xl=function(){function e(){o(this,e),this._lastMap=new Map,this._currentMap=new Map}return i(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:"addMessageSequence",value:function(e){var t=e.key,n=e.message;if(at(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var o=n.conversationID,r=n.sequence,i=o.replace(S.CONV_GROUP,"");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(i)){var a=this._lastMap.get(t).get(i),s=a.length-1;r>a[0]&&r<a[s]?(a.push(r),a.sort(),this._lastMap.get(t).set(i,a)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:"_addCurrentMap",value:function(e){var t=e.key,n=e.message,o=n.conversationID,r=n.sequence,i=o.replace(S.CONV_GROUP,"");this._currentMap.get(t).has(i)||this._currentMap.get(t).set(i,[]),this._currentMap.get(t).get(i).push(r)}},{key:"_copyData",value:function(e){if(!at(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),o=w(this._currentMap.get(e));try{for(o.s();!(t=o.n()).done;){var r=m(t.value,2),i=r[0],a=r[1];n.set(i,a)}}catch(s){o.e(s)}finally{o.f()}n=null,this._currentMap.set(e,new Map)}}},{key:"getStatResult",value:function(e){if(at(this._currentMap.get(e))||at(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,o){var r=_(e.values()),i=r.length,a=r[i-1]-r[0]+1;t+=a,n+=i})),0===t)return null;var o=Bt(n/t*100,2);return o>100&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:o}}},{key:"reset",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),Nl=function(e){s(r,e);var n=v(r);function r(e){var t;o(this,r),(t=n.call(this,e))._n="QualityStatModule",t.TAG="im-ssolog-quality-stat",t.reportIndex=0,t.wholePeriod=!1,t._qualityItems=[Ka,Ya,Xa,Ja,Za,Qa,es,ts,ns,os],t._messageSentItems=[Xa,Ja,Za,Qa,es],t._messageReceivedItems=[ts,ns,os],t.REPORT_INTERVAL=120,t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._statInfoArr=[],t._avgRTT=new Rl,t._avgE2EDelay=new Ll,t._rateMessageSent=new Ol,t._rateMessageReceived=new xl;var i=t.getInnerEmitterInstance();return i.on(Os,t._onLoginSuccess,f(t)),i.on(xs,t._onCloudConfigUpdated,f(t)),t}return i(r,[{key:"_onLoginSuccess",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(Hn),n=t.getItem(this.TAG,!1);!Xt(n)&&ct(n.forEach)&&(qe.l("".concat(this._n,"._onLoginSuccess get quality stat logs from local storage, count:").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("q_rpt_interval"),t=this.getCloudConfig("q_rpt_sdkappid_bl"),n=this.getCloudConfig("q_rpt_tinyid_wl");at(e)||(this.REPORT_INTERVAL=Number(e)),at(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(",").map((function(e){return Number(e)}))),at(n)||(this.REPORT_TINYID_WHITELIST=n.split(","))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:"addRequestCount",value:function(){this._avgRTT.addRequestCount()}},{key:"addRTT",value:function(e){this._avgRTT.addRTT(e)}},{key:"addMessageDelay",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:"addTotalCount",value:function(e){this._rateMessageSent.addTotalCount(e)||qe.w("".concat(this._n,".addTotalCount invalid key:"),e)}},{key:"addSuccessCount",value:function(e){this._rateMessageSent.addSuccessCount(e)||qe.w("".concat(this._n,".addSuccessCount invalid key:"),e)}},{key:"addFailedCountOfUserSide",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||qe.w("".concat(this._n,".addFailedCountOfUserSide invalid key:"),e)}},{key:"addCost",value:function(e,t){this._rateMessageSent.addCost(e,t)||qe.w("".concat(this._n,".addCost invalid key or cost:"),e,t)}},{key:"addFileSize",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||qe.w("".concat(this._n,".addFileSize invalid key or size:"),e,t)}},{key:"addMessageSequence",value:function(e){this._rateMessageReceived.addMessageSequence(e)||qe.w("".concat(this._n,".addMessageSequence invalid key:"),e.key)}},{key:"_getQualityItem",value:function(e){var n={},o=as[this.getNetworkType()];at(o)&&(o=8);var r={qualityType:rs[e],timestamp:Ne(),networkType:o,extension:""};switch(e){case Ka:n=this._avgRTT.getStatResult();break;case Ya:n=this._avgE2EDelay.getStatResult();break;case Xa:case Ja:case Za:case Qa:case es:n=this._rateMessageSent.getStatResult(e);break;case ts:case ns:case os:n=this._rateMessageReceived.getStatResult(e)}return null===n?null:t(t({},r),n)}},{key:"_report",value:function(e){var t=this,n=[],o=null;at(e)?this._qualityItems.forEach((function(e){null!==(o=t._getQualityItem(e))&&(o.reportIndex=t.reportIndex,o.wholePeriod=t.wholePeriod,n.push(o))})):null!==(o=this._getQualityItem(e))&&(o.reportIndex=this.reportIndex,o.wholePeriod=this.wholePeriod,n.push(o)),qe.d("".concat(this._n,"._report"),n),this._statInfoArr.length>0&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]);var r=this.getModule(Vn),i=r.getSDKAppID(),a=r.getTinyID();Ft(this.REPORT_SDKAPPID_BLACKLIST,i)&&!qt(this.REPORT_TINYID_WHITELIST,a)&&(n=[]),n.length>0&&this._doReport(n)}},{key:"_doReport",value:function(e){var n=this,o={header:Pc(this),quality:e};this.request({protocolName:Hr,requestData:t({},o)}).then((function(){n.reportIndex++,n.wholePeriod=!1})).catch((function(t){qe.w("".concat(n._n,"._doReport, online:").concat(n.getNetworkType()," error:"),t),n._statInfoArr=n._statInfoArr.concat(e),n._flushAtOnce()}))}},{key:"_flushAtOnce",value:function(){var e=this.getModule(Hn),t=e.getItem(this.TAG,!1),n=this._statInfoArr,o="".concat(this._n,"._flushAtOnce");if(Xt(t))qe.l("".concat(o," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var r=n.concat(t);r.length>10&&(r=r.slice(0,10)),qe.l("".concat(o," count:").concat(r.length)),e.setItem(this.TAG,r,!0,!1)}this._statInfoArr=[]}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),r}(lo),Pl=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="WorkerTimerModule",r._isWorkerEnabled=!0,r._workerTimer=null,r._timerID=-1,r._init(),r.getInnerEmitterInstance().on(xs,r._onCloudConfigUpdated,f(r)),r}return i(n,[{key:"isWorkerEnabled",value:function(){return this._isWorkerEnabled&&Ie}},{key:"startWorkerTimer",value:function(){qe.l("".concat(this._n,".startWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("start")}},{key:"stopWorkerTimer",value:function(){qe.l("".concat(this._n,".stopWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("stop")}},{key:"_init",value:function(){if(Ie){var e=URL.createObjectURL(new Blob(['let interval = -1;onmessage = function(event) {  if (event.data === "start") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage("");    }, 1000);    postMessage(interval);  } else if (event.data === "stop") {    clearInterval(interval);    interval = -1;  }};'],{type:"application/javascript; charset=utf-8"}));this._workerTimer=new Worker(e);var t=this;this._workerTimer.onmessage=function(e){e.data?(t._timerID=e.data,qe.l("".concat(t._n,"._init seed:").concat(t._timerID))):t._m.onCheckTimer()}}}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("enable_worker");qe.l("".concat(this._n,"._onCloudConfigUpdated enableWorker:").concat(e)),at(e)||"1"===e?!this._isWorkerEnabled&&Ie&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._m.onWorkerTimerEnabled()):this._isWorkerEnabled&&Ie&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._m.onWorkerTimerDisabled())}},{key:"terminate",value:function(){qe.l("".concat(this._n,".terminate")),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null,this._timerID=-1)}},{key:"getTimerID",value:function(){return this._timerID}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset"))}}]),n}(lo),Ul=function(){function e(){o(this,e),this._n="PurchasedFeatureHandler",this._purchasedFeatureMap=new Map}return i(e,[{key:"isValidPurchaseBits",value:function(e){return e&&"string"==typeof e&&e.length>=1&&e.length<=64&&/[01]{1,64}/.test(e)}},{key:"parsePurchaseBits",value:function(e){var t="".concat(this._n,".parsePurchaseBits");if(this.isValidPurchaseBits(e)){this._purchasedFeatureMap.clear();for(var n=null,o=e.length-1,r=0;o>=0;o--,r++)n=r<32?new E(0,Math.pow(2,r)).toString():new E(Math.pow(2,r-32),0).toString(),"1"===e[o]?this._purchasedFeatureMap.set(n,!0):this._purchasedFeatureMap.set(n,!1)}else qe.w("".concat(t," invalid purchase bits:").concat(e))}},{key:"hasPurchasedFeature",value:function(e){return!!this._purchasedFeatureMap.get(e)}},{key:"isFeatureEnabled",value:function(e){for(var t=parseInt(e).toString(2),n=void 0,o=!0,r=t.length-1,i=0;r>=0;r--,i++)if("1"===t.charAt(r)&&(n=i<32?new E(0,Math.pow(2,i)).toString():new E(Math.pow(2,i-32),0).toString(),!this._purchasedFeatureMap.get(n))){o=!1;break}return qe.l("".concat(this._n,".isFeatureEnabled decimalNumber:").concat(e," binaryString:").concat(t," ret:").concat(o)),Ds({enabled:o})}},{key:"clear",value:function(){this._purchasedFeatureMap.clear()}}]),e}(),Gl=function(){function e(t){o(this,e),this._m=t,this._n="CommercialConfigModule",this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler=new Ul}return i(e,[{key:"_canFetch",value:function(){return this._getModule(Vn).isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}},{key:"onCheckTimer",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetch(),n="".concat(this._n,".fetchConfig");if(qe.l("".concat(n," canFetch:").concat(t)),t){var o=this._getModule(jn),r=new cs("fetchCommercialConfig");r.setNetworkType(o.getNetworkType());var i=this._getModule(Vn).getSDKAppID(),a=this._getModule(Xn);this._isFetching=!0,a.request({protocolName:Qr,requestData:{SDKAppID:i}}).then((function(t){r.setMessage("purchaseBits:".concat(t.data.purchaseBits)).end(),qe.l("".concat(n," ok.")),e._parseConfig(t.data),e._isFetching=!1})).catch((function(t){o.probe().then((function(e){var n=m(e,2),o=n[0],i=n[1];r.setError(t,o,i).end()})),e._isFetching=!1}))}}},{key:"onPushedConfig",value:function(e){var t="".concat(this._n,".onPushedConfig");qe.l("".concat(t)),new cs("pushedCommercialConfig").setNetworkType(this._getModule(jn).getNetworkType()).setMessage("purchaseBits:".concat(e.purchaseBits)).end(),this._parseConfig(e)}},{key:"_parseConfig",value:function(e){var t="".concat(this._n,"._parseConfig"),n=e.errorCode,o=e.errorMessage,r=e.purchaseBits,i=e.expiredTime;0===n?(this._purchasedFeatureHandler.parsePurchaseBits(r),this._expiredTime=Date.now()+1e3*i):at(n)?(qe.l("".concat(t," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(qe.e("".concat(t," errorCode:").concat(n," errorMessage:").concat(o)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"canIUse",value:function(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}},{key:"isFeatureEnabled",value:function(e){return this._purchasedFeatureHandler.isFeatureEnabled(e)}},{key:"_getModule",value:function(e){return this._m.getModule(e)}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}]),e}(),Bl=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._m=e,r._n="OfflinePushModule",r._offlinePushPlugin=void 0,r._androidPushConfig={huaweiPushBussinessId:"",xiaomiPushBussinessId:"",xiaomiPushAppId:"",xiaomiPushAppKey:"",meizuPushBussinessId:"",meizuPushAppId:"",meizuPushAppKey:"",vivoPushBussinessId:"",fcmPushBussinessId:"",oppoPushBussinessId:"",oppoPushAppKey:"",oppoPushAppSecret:"",honorPushBussinessId:""},r._deviceToken="",r._businessID=0,r._iosBusinessID=0,r._c2cUnreadCount=0,r._groupUnreadCount=0,r._isWebUniapp=0,r}return i(n,[{key:"registerPlugin",value:function(e){if(se){this._offlinePushPlugin=e["tim-offline-push-plugin"];var t=e.offlinePushConfig||{},n=t.huaweiBusinessID,o=t.xiaomiBusinessID,r=t.xiaomiAppID,i=t.xiaomiAppKey,a=t.meizuBusinessID,s=t.meizuAppID,c=t.meizuAppKey,l=t.vivoBusinessID,u=t.oppoBusinessID,d=t.oppoAppKey,p=t.oppoAppSecret,h=t.honorBusinessID,f=t.iosBusinessID;this._androidPushConfig.huaweiPushBussinessId=n,this._androidPushConfig.xiaomiPushBussinessId=o,this._androidPushConfig.xiaomiPushAppId=r,this._androidPushConfig.xiaomiPushAppKey=i,this._androidPushConfig.meizuPushBussinessId=a,this._androidPushConfig.meizuPushAppId=s,this._androidPushConfig.meizuPushAppKey=c,this._androidPushConfig.vivoPushBussinessId=l,this._androidPushConfig.oppoPushBussinessId=u,this._androidPushConfig.oppoPushAppKey=d,this._androidPushConfig.oppoPushAppSecret=p,this._androidPushConfig.honorPushBussinessId=h,new cs("registerPlugin").setMessage("tim-offline-push-plugin").setMoreMessage("isExist:".concat(!at(this._offlinePushPlugin))).end(!0),qe.l("".concat(this._n,".").concat("registerPlugin"," ok. offlinePushConfig:").concat(JSON.stringify(e.offlinePushConfig))),this._iosBusinessID=f,this._setAppShowListener()}else this.outputWarning("OfflinePushInUniapp")}},{key:"init",value:function(){this._isWebUniapp=this.getUniAppPlatform(),this._getDeviceToken()}},{key:"_getDeviceToken",value:function(){var e=this,t="".concat(this._n,".").concat("_getDeviceToken");if(ct(this._offlinePushPlugin.getDeviceToken)){var n="androidPushConfig:".concat(JSON.stringify(this._androidPushConfig),", iosBusinessID:").concat(this._iosBusinessID);qe.l("".concat(t," start. ").concat(n)),new cs("_getDeviceToken").setMessage("".concat(n)).end(!0),this._offlinePushPlugin.getDeviceToken(this._androidPushConfig,(function(o){var r=new cs("getDeviceTokenRes"),i=o.code,a=o.msg;if(0===i){var s=o.data,c=s.deviceToken,l=s.deviceBrand,u=s.deviceType,d=s.bussinessId;e._deviceToken=c,e._businessID=d||e._iosBusinessID,n="deviceToken:".concat(c,", deviceBrand:").concat(l||u,", businessID:").concat(e._businessID),qe.l("".concat(t," ok. ").concat(n)),r.setMessage(n).end(!0),e._setToken()}else r.setMessage("code:".concat(i,", msg:").concat(a)).end(!0),qe.e("".concat(t," failed. error:"),o)}))}else qe.e("".concat(t," getDeviceToken is not a function"))}},{key:"canIUseOfflinePush",value:function(){return se&&!at(this._offlinePushPlugin)}},{key:"_setAppShowListener",value:function(){var e=this,t="".concat(this._n,".").concat("_setAppShowListener");at(this._offlinePushPlugin)?qe.e("".concat(t," offlinePushPlugin is undefined")):ct(this._offlinePushPlugin.setAppShowListener)?(new cs("_setAppShowListener").end(!0),qe.l("".concat(t," start")),this._offlinePushPlugin.setAppShowListener((function(n){var o=(n||{}).appShow;new cs("setAppShowListenerRes").setMessage("appShow:".concat(o)).end(!0),qe.l("".concat(t," ok. appShow:").concat(o)),e._m.isReady()&&(0===o?(e._getConvUnreadCount(),e._onBackground()):1===o&&e._onForeground())}))):qe.e("".concat(t," setAppShowListener is not a function"))}},{key:"getDeviceBrand",value:function(){if(!at(this._offlinePushPlugin)&&ct(this._offlinePushPlugin.getDeviceType)){var e=(this._offlinePushPlugin.getDeviceType()||{}).deviceType;return qe.l("".concat(this._n,".getDeviceBrand ok. deviceType:").concat(e)),e}}},{key:"_setToken",value:function(){var e,t=this,n="".concat(this._n,"._setToken"),o=this.getModule(Vn),r=1,i="",a="";Xt(this._deviceToken)&&(r=0);var s=this.getUniAppPlatform(),c=this.getDeviceBrand();s===A.IOS||s===A.IPAD||s===A.MAC?a=this._deviceToken:s===A.ANDROID&&(i=this._deviceToken);var l=new cs("offlinePushSetToken");return e="deviceToken:".concat(a||i,", businessID:").concat(this._businessID,", ")+"deviceBrand:".concat(c,", isWebUniapp:").concat(this._isWebUniapp,", pushMsg:").concat(r,", platform:").concat(s),l.setMessage("".concat(e)),qe.l("".concat(n," ").concat(e)),this.request({protocolName:pi,requestData:{tokenID:i,pushMsg:r,sdkAppID:o.getSDKAppID(),businessID:parseInt(this._businessID),deviceBrand:c,deviceToken:a,isWebUniapp:this._isWebUniapp}}).then((function(e){return l.end(),qe.l("".concat(n," ok")),e})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),qe.e("".concat(n," failed. error:"),e),As(e)}))}},{key:"_getConvUnreadCount",value:function(){var e=this;this._c2cUnreadCount=0,this._groupUnreadCount=0,this.getModule(qn).getLocalConversationList().forEach((function(t){t.type===S.CONV_C2C&&(e._c2cUnreadCount+=t.unreadCount),t.type===S.CONV_GROUP&&(e._groupUnreadCount+=t.unreadCount)}))}},{key:"_onBackground",value:function(){var e=this,t="".concat(this._n,".").concat("_onBackground"),n=new cs("_onBackground");this.request({protocolName:ui,requestData:{c2cUnreadCount:this._c2cUnreadCount,groupUnreadCount:this._groupUnreadCount,isWebUniapp:this._isWebUniapp}}).then((function(o){return n.setMessage("c2cUnreadCount: ".concat(e._c2cUnreadCount,", groupUnreadCount: ").concat(e._groupUnreadCount)).end(),qe.l("".concat(t," ok")),o})).catch((function(o){e.probeNetwork().then((function(e){var t=m(e,2),r=t[0],i=t[1];n.setError(o,r,i).end()})),qe.e("".concat(t," failed. error:"),o)}))}},{key:"_onForeground",value:function(){var e=this,t="".concat(this._n,".").concat("_onForeground"),n=new cs("_onForeground");this.request({protocolName:di,requestData:{isWebUniapp:this._isWebUniapp}}).then((function(e){return n.end(),qe.l("".concat(t," ok")),e})).catch((function(o){e.probeNetwork().then((function(e){var t=m(e,2),r=t[0],i=t[1];n.setError(o,r,i).end()})),qe.e("".concat(t," failed. error:"),o)}))}},{key:"getUniAppPlatform",value:function(){var e=k_().platform,t=this.getDeviceBrand();return"ios"===e?A.IOS:"android"===e?A.ANDROID:1002===t?A.IPAD:1001===t?A.MAC:void 0}},{key:"reset",value:function(){this._deviceToken="",this._businessID=0,this._c2cUnreadCount=0,this._groupUnreadCount=0,this._isWebUniapp=0,qe.l("".concat(this._n,".reset"))}}]),n}(lo),Fl=function(e){s(n,e);var t=v(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._n="ProfanityFilterModule",r._plugin=null,r._filterConfigMap=new Map,r._startIndex=0,r._version=0,r._canIUseLexicon=!1,r._isFetching=!1,r._expiredTime=0,r}return i(n,[{key:"init",value:function(){var e=this.getModule(Kn).getPlugin("tim-profanity-filter-plugin");e?(this._plugin=new e({logger:qe,isArray:it,isMap:Ze,isDevMode:this.isDevMode()}),this._getLexicon()):this.outputWarning("ProfanityPluginNotFound")}},{key:"onCheckTimer",value:function(){this._plugin&&this._canIUseLexicon&&this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime&&this._getLexicon()}},{key:"filterMessage",value:function(e,t){var n=!0;if(!this._plugin||!this._canIUseLexicon)return n;if(t&&t.messageControlInfo&&!0===t.messageControlInfo.excludedFromContentModeration)return n;var o=e.type,r=e.conversationType;if(o!==S.MSG_TEXT&&o!==S.MSG_CUSTOM)return n;var i,a="".concat(this._n,".filterMessage");if(qe.l("".concat(a)),o===S.MSG_TEXT){if(r===S.CONV_C2C?i=H:r===S.CONV_GROUP&&(i=j),!this._isConfigOn(i))return n;var s=this._plugin.filter(e.payload.text),c=s.type,l=s.modifiedText;1===c?n=!1:2===c&&(e.payload.text=l)}else if(o===S.MSG_CUSTOM){if(r===S.CONV_C2C?i=z:r===S.CONV_GROUP&&(i=$),!this._isConfigOn(i))return n;var u=this._plugin.filter(e.payload.data),d=this._plugin.filter(e.payload.description),p=this._plugin.filter(e.payload.extension);1===u.type||1===d.type||1===p.type?n=!1:(2===u.type&&(e.payload.data=u.modifiedText),2===d.type&&(e.payload.description=d.modifiedText),2===p.type&&(e.payload.extension=p.modifiedText))}return qe.l("".concat(a," done. isAllowedToSend:").concat(n)),n}},{key:"filterText",value:function(e,t){var n="".concat(this._n,".filterText"),o={isAllowedToSend:!0,modifiedText:e};if(!this._plugin||!this._canIUseLexicon)return o;if(!this._isConfigOn(t))return o;qe.l("".concat(n));var r=this._plugin.filter(e),i=r.type,a=r.modifiedText;return 1===i?o.isAllowedToSend=!1:2===i&&(o.modifiedText=a),qe.l("".concat(n," done. ret:"),o),o}},{key:"_getLexicon",value:function(){var e=this,t=new cs("profanityFilter"),n="".concat(this._n,"._getLexicon");this._isFetching=!0,this.request({protocolName:hi,requestData:{startIndex:this._startIndex,version:this._version}}).then((function(o){var r=o.data,i=r.errorInfo,a=r.filterConfig,s=r.lexicon,c=r.strToken,l=r.completeFlag,u=r.nextStartIndex,d=r.version,p=r.expiredTime,h=i.errorCode,f=i.errorMessage;return 0!==h?(e._isFetching=!1,qe.w("".concat(n," failed. error:"),i),void t.setCode(h).setMessage(f).end()):(e._onFilterConfig(a),e._getToken(c),1===l?(qe.l("".concat(n," done. version:").concat(d," expiredTime:").concat(p)),e._version=d,e._canIUseLexicon=!0,e._isFetching=!1,e._expiredTime=Date.now()+1e3*p,void e._plugin.onLexiconCompleted(s)):(e._startIndex=u,e._plugin.onLexiconSliced(s),void e._getLexicon()))})).catch((function(o){e.probeNetwork().then((function(e){var n=m(e,2),r=n[0],i=n[1];t.setError(o,r,i).end()})),e._isFetching=!1,qe.l("".concat(n," failed. error:"),o)}))}},{key:"_onFilterConfig",value:function(e){var t=this;Xt(e)||(this._filterConfigMap.clear(),Object.keys(e).forEach((function(n){t._filterConfigMap.set(n,e[n])})),qe.l("".concat(this._n,"._onFilterConfig. keys:").concat(Array.from(this._filterConfigMap.keys())," values:").concat(Array.from(this._filterConfigMap.values()))))}},{key:"_isConfigOn",value:function(e){return 1===this._filterConfigMap.get(e)}},{key:"_getToken",value:function(e){if(nt(e)){var t=e.length,n="";if(t%2==0)for(var o=0;o<=t-1;o+=2)n+=e[o+1],n+=e[o];else{for(var r=0;r<t-1;r+=2)n+=e[r+1],n+=e[r];n+=e[t-1]}this._plugin.onToken(n)}}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),this._plugin&&(this._plugin.reset(),this._plugin=null),this._filterConfigMap.clear(),this._startIndex=0,this._version=0,this._canIUseLexicon=!1,this._isFetching=!1,this._expiredTime=0}}]),n}(lo),ql=function(){function e(t){o(this,e),this._m=t,this._n="TransCmdModule"}return i(e,[{key:"sendTRTCCustomData",value:function(e){return this._trans(t({serv:q.NAME.TUIROOM_SVR},e))}},{key:"_trans",value:function(e){qe.d("".concat(this._n,"._trans. options:").concat(JSON.stringify(e)));var t=e.serv,n=e.data;return this._m.getModule(Xn).trans({servcmd:"".concat(t,".*"),data:nt(n)?JSON.parse(n):n})}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset"))}}]),e}(),Vl=function(){function e(t){o(this,e),this._m=t,this._n="ErrorMessageModule",this.TIM_ERROR_ASSISTANCE="tim_error_assistance",this.STORAGE_EXPIRES_TIME=6048e5,this._map=new Map,this._init()}return i(e,[{key:"_init",value:function(){var e=this._getStorageModule().getItem(this.TIM_ERROR_ASSISTANCE,!1);if(e){var t=JSON.parse(e);this._needToUpdate(t)?this._fetch():this._fillMap(t.message)}else this._fetch()}},{key:"_needToUpdate",value:function(e){var t=e.localSavedTime,n=e.localSavedVersion,o=t&&(new Date).getTime()-t>=this.STORAGE_EXPIRES_TIME,r=!n||"2.27.0"!==n;return qe.l("".concat(this._n,"._needToUpdate isTimeout:").concat(o," isDifferentVersion:").concat(r)),o||r}},{key:"_fetch",value:function(){if(!this._m.getModule(Vn).isPrivateNetWork()){var e="https://web.sdk.qcloud.com/im/download/error-message/0.0.1/tim-error-message.txt",t="application/x-www-form-urlencoded;charset=UTF-8",n="".concat(this._n,"._fetch ok in"),o=this;if(le)de.request({url:e,method:"GET",timeout:3e3,header:{"content-type":t},dataType:"text",success:function(e){o._fillAndSave(e.data),qe.l("".concat(n," mini program"))},fail:function(){}});else{var r=new XMLHttpRequest,i=setTimeout((function(){r.abort()}),3e3);r.onreadystatechange=function(){4===r.readyState&&(clearTimeout(i),200!==r.status&&304!==r.status||(qe.l("".concat(n," browser")),o._fillAndSave(r.responseText)))},r.open("GET",e,!0),r.setRequestHeader("Content-type",t),r.send()}}}},{key:"_fillAndSave",value:function(e){this._fillMap(e),this._getStorageModule().setItem(this.TIM_ERROR_ASSISTANCE,JSON.stringify({message:e,localSavedTime:(new Date).getTime(),localSavedVersion:"2.27.0"}),!0,!1)}},{key:"_getStorageModule",value:function(){return this._m.getModule(Hn)}},{key:"_fillMap",value:function(e){this._map.clear();for(var t,n,o,r=e.split(";\n"),i=r.length,a=new RegExp(/'/g),s=0;s<i;s++)if(t=r[s].indexOf(":"),n=r[s].slice(0,t),o=r[s].slice(t+1,r[s].length),!n.startsWith("//")){if(at(o))continue;this._map.set(n,o.replace(a,""))}}},{key:"get",value:function(e){var t=e.isIntl,n=e.key,o=e.replacement1,r=e.replacement2,i="".concat(n,t?"_en":"_cn");!this._map.has(i)&&this._map.has(n)&&(i=n);var a="";return this._map.has(i)?(a=this._map.get(i),at(o)||(a=a.replace("$replacement1",o)),at(r)||(a=a.replace("$replacement2",r)),a):a}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset"))}}]),e}(),Hl=function(){function e(t){o(this,e);var n=new cs("sdkConstruct");this._n="ModuleManager",this._isReady=!1,this._reason=bi,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(Vn,new Lc(this,t)),this._moduleMap.set(oo,new Gl(this)),this._moduleMap.set(Qn,new Dl(this)),this._moduleMap.set(eo,new Pl(this)),this._moduleMap.set(no,new Nl(this)),this._moduleMap.set(Jn,new bl(this)),this._moduleMap.set(Xn,new Il(this)),this._moduleMap.set(Rn,new Rc(this)),this._moduleMap.set(On,new Jc(this)),this._moduleMap.set(xn,new Zc(this)),this._moduleMap.set(so,new Qc(this)),this._moduleMap.set(Nn,new Ac(this)),this._moduleMap.set(Pn,new Ls(this)),this._moduleMap.set(qn,new Zs(this)),this._moduleMap.set(Un,new _c(this)),this._moduleMap.set(Bn,new bc(this)),this._moduleMap.set(Fn,new wc(this)),this._moduleMap.set(Hn,new xc(this)),this._moduleMap.set(co,new Vl(this)),this._moduleMap.set(zn,new Uc(this)),this._moduleMap.set(jn,new qc(this)),this._moduleMap.set($n,new Hc(this)),this._moduleMap.set(Wn,new jc(this)),this._moduleMap.set(Kn,new el(this)),this._moduleMap.set(Yn,new tl(this)),this._moduleMap.set(Zn,new El(this)),this._moduleMap.set(to,new Al(this)),this._moduleMap.set(ro,new Bl(this)),this._moduleMap.set(io,new Fl(this)),this._moduleMap.set(ao,new ql(this)),this._eventThrottleMap=new Map;var r=t.instanceID,i=t.oversea,a=t.SDKAppID,s="instanceID:".concat(r," SDKAppID:").concat(a," host:").concat(xt()," oversea:").concat(i," inBrowser:").concat(ue," inMiniApp:").concat(le)+" workerAvailable:".concat(Ie," UserAgent:").concat(pe);cs.bindEventStatModule(this._moduleMap.get(zn)),n.setMessage("".concat(s," ").concat(function(){var e="";if(le)try{var t=de.getSystemInfoSync(),n=t.model,o=t.version,r=t.system,i=t.platform,a=t.SDKVersion;e="model:".concat(n," version:").concat(o," system:").concat(r," platform:").concat(i," SDKVersion:").concat(a)}catch(s){e=""}return e}())).end(),qe.i("SDK ".concat(s)),Ss.prototype._getErrorMessage=this.getErrorMessage.bind(this),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return i(e,[{key:"_startTimer",value:function(){var e=this._moduleMap.get(eo),t=e.isWorkerEnabled();qe.l("".concat(this._n,".startTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.startWorkerTimer():this._startMainThreadTimer()}},{key:"_startMainThreadTimer",value:function(){this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3)),qe.l("".concat(this._n,"._startMainThreadTimer seed:").concat(this._checkTimer))}},{key:"stopTimer",value:function(){var e=this._moduleMap.get(eo),t=e.isWorkerEnabled();qe.l("".concat(this._n,".stopTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.stopWorkerTimer():this._stopMainThreadTimer()}},{key:"_stopMainThreadTimer",value:function(){qe.l("".concat(this._n,"._stopMainThreadTimer")),this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:"_stopMainThreadSocket",value:function(){qe.l("".concat(this._n,"._stopMainThreadSocket"));var e=this._moduleMap.get(Jn);e.setIsWorkerEnabled(!0),e.reConnect()}},{key:"_startMainThreadSocket",value:function(){qe.l("".concat(this._n,"._startMainThreadSocket"));var e=this._moduleMap.get(Jn);e.setIsWorkerEnabled(!1),e.reConnect()}},{key:"onWorkerTimerEnabled",value:function(){qe.l("".concat(this._n,".onWorkerTimerEnabled, disable main thread timer and socket")),this._stopMainThreadTimer(),this._stopMainThreadSocket()}},{key:"onWorkerTimerDisabled",value:function(){qe.l("".concat(this._n,".onWorkerTimerDisabled, enable main thread timer and socket")),this._startMainThreadTimer(),this._startMainThreadSocket()}},{key:"onCheckTimer",value:function(){this._checkCount+=1;var e,t=w(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(o){t.e(o)}finally{t.f()}}},{key:"_initReadyList",value:function(){var e=this;this._readyList=[this._moduleMap.get(Rn),this._moduleMap.get(qn)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:"_onModuleReady",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(T.SDK_READY);var t=Date.now()-this._startLoginTs;qe.w("SDK is ready. cost ".concat(t," ms")),this._startLoginTs=Date.now();var n=this._moduleMap.get(jn).getNetworkType(),o=this._ssoLogForReady.getStartTs()+xe;this._ssoLogForReady.setNetworkType(n).setMessage(t).start(o).end()}}},{key:"login",value:function(){0===this._startLoginTs&&(Pe(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(jn).start(),this._ssoLogForReady=new cs("sdkReady"),this._reason=xa)}},{key:"onLoginFailed",value:function(){this._startLoginTs=0}},{key:"getOuterEmitterInstance",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new Vc,Es(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var n=this;if(e===T.CONVERSATION_LIST_UPDATED||e===T.FRIEND_LIST_UPDATED||e===T.GROUP_LIST_UPDATED||e===T.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED)if(this._eventThrottleMap.has(e)){var o=Date.now(),r=this._eventThrottleMap.get(e);o-r.last<1e3?(r.timeoutID&&clearTimeout(r.timeoutID),r.timeoutID=setTimeout((function(){r.last=o,n._outerEmitter._emit.apply(n._outerEmitter,[e,{name:e,data:n._getEventData(e)}])}),500)):(r.last=o,this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]))}else this._eventThrottleMap.set(e,{last:Date.now(),timeoutID:-1}),this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]);else this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:arguments[1]}])}.bind(this)),this._outerEmitter}},{key:"_getEventData",value:function(e){return e===T.CONVERSATION_LIST_UPDATED?this._moduleMap.get(qn).getLocalConversationList():e===T.FRIEND_LIST_UPDATED?this._moduleMap.get(Gn).getLocalFriendList(!1):e===T.GROUP_LIST_UPDATED?this._moduleMap.get(Un).getLocalGroupList():e===T.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED?this._moduleMap.get(qn).getTotalUnreadMessageCount():void 0}},{key:"getInnerEmitterInstance",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new Vc,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var n;n=rt(arguments[1])&&arguments[1].data?[e,{name:arguments[0],data:arguments[1].data}]:[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,n)}.bind(this)),this._innerEmitter}},{key:"hasModule",value:function(e){return this._moduleMap.has(e)}},{key:"getModule",value:function(e){return this._moduleMap.get(e)}},{key:"isReady",value:function(){return this._isReady}},{key:"isIntl",value:function(){return this.getModule(Vn).isIntl()}},{key:"getNotReadyReason",value:function(){return this._reason}},{key:"setNotReadyReason",value:function(e){this._reason=e}},{key:"getErrorMessage",value:function(e,t,n){return this._moduleMap.get(co).get({key:e,replacement1:t,replacement2:n,isIntl:this.isIntl()})}},{key:"outputWarning",value:function(e,t,n){var o=this.getErrorMessage(e,t,n);o&&qe.w(o)}},{key:"onError",value:function(e){var t="code:".concat(e.code," message:").concat(e.message);qe.w("Oops! ".concat(t)),new cs("error").setMessage(t).setNetworkType(this.getModule(jn).getNetworkType()).setLevel("error").end(),this.getOuterEmitterInstance().emit(T.ERROR,e)}},{key:"restartTimer",value:function(){qe.l("".concat(this._n,".restartTimer")),this.stopTimer(),this._startTimer(),this.getModule(Un).restartPolling()}},{key:"getTimerID",value:function(){var e=this._moduleMap.get(eo);return e.isWorkerEnabled()?e.getTimerID():this._checkTimer}},{key:"reset",value:function(){qe.l("".concat(this._n,".reset")),Pe();var e,t=w(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.reset&&n.reset()}}catch(a){t.e(a)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(T.SDK_NOT_READY);var o,r=w(this._eventThrottleMap);try{for(r.s();!(o=r.n()).done;){var i=m(o.value,2)[1];i.timeoutID&&clearTimeout(i.timeoutID)}}catch(a){r.e(a)}finally{r.f()}this._eventThrottleMap.clear()}}]),e}(),zl=function(){function e(t){o(this,e),this._funcMap=new Map,this._m=t}return i(e,[{key:"defense",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("string"!=typeof e)return null;if(0===e.length)return null;if("function"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,n),this._funcMap.get(e).set(t,o)),o}},{key:"defenseOnce",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return"function"!=typeof t?null:this._pack(e,t,n)}},{key:"find",value:function(e,t){return"string"!=typeof e||0===e.length||"function"!=typeof t?null:this._funcMap.has(e)&&this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(this._m.outputWarning("ListenerFnNotFound",e),null)}},{key:"delete",value:function(e,t){return"function"==typeof t&&!!this._funcMap.has(e)&&!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)}},{key:"_pack",value:function(e,t,n){var o=this;return function(){try{t.apply(n,Array.from(arguments))}catch(s){var r=Object.values(T).indexOf(e),i="CallbackError";if(-1!==r){var a=Object.keys(T)[r];o._m.outputWarning(i,a,s)}new cs(i).setMessage("eventName:".concat(e)).setMoreMessage(s.message).end()}}}}]),e}(),jl=function(){function e(t){o(this,e);var n={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||"",oversea:t.oversea||!1,instanceID:Ot(),devMode:t.devMode||!1,proxyServer:t.proxyServer||void 0,fileUploadProxy:t.fileUploadProxy||void 0,fileDownloadProxy:t.fileDownloadProxy||t.fileUploadProxy||void 0};this._m=new Hl(n),this._safetyCallbackFactory=new zl(this._m)}return i(e,[{key:"onError",value:function(e){this._m.onError(e)}},{key:"login",value:function(e){return this._m.login(),this._getModule(Rn).login(e)}},{key:"logout",value:function(){var e=this;return this._getModule(Rn).logout().then((function(t){return e._m.reset(),t}))}},{key:"isReady",value:function(){return this._m.isReady()}},{key:"isIntl",value:function(){return this._m.isIntl()}},{key:"getNotReadyReason",value:function(){return this._m.getNotReadyReason()}},{key:"getErrorMessage",value:function(e,t,n){return this._m.getErrorMessage(e,t,n)}},{key:"_getModule",value:function(e){return this._m.getModule(e)}},{key:"destroy",value:function(){var e=this;return this.logout().finally((function(){e._m.stopTimer(),e._getModule(eo).terminate(),e._getModule(Jn).dealloc();var t=e._m.getOuterEmitterInstance(),n=e._getModule(Vn);t.emit(T.SDK_DESTROY,{SDKAppID:n.getSDKAppID()})}))}},{key:"on",value:function(e,t,n){qe.d("on","eventName:".concat(e)),this._m.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:"once",value:function(e,t,n){qe.d("once","eventName:".concat(e)),this._m.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:"off",value:function(e,t,n,o){qe.d("off","eventName:".concat(e));var r=this._safetyCallbackFactory.find(e,t);null!==r&&(this._m.getOuterEmitterInstance().off(e,r,n,o),this._safetyCallbackFactory.delete(e,t))}},{key:"registerPlugin",value:function(e){at(e["tim-offline-push-plugin"])?this._getModule(Kn).registerPlugin(e):this._getModule(ro).registerPlugin(e)}},{key:"setLogLevel",value:function(e){if(e<=0){var t=this.getErrorMessage("TIM_ASCII_ART");t&&console.log(t);var n=this.getErrorMessage("API_REFER");n&&($t()?console.log("%c ".concat("IM SDK API ->"," %c"),"background:#ff9d00; padding:1px; border-radius:3px; color: #fff","background:transparent",n):console.log("IM SDK API ->",n));var o=this.getErrorMessage("DOCS_GUIDE");o&&console.log(o)}qe.setLevel(e)}},{key:"createTextMessage",value:function(e){return this._getModule(On).createTextMessage(e)}},{key:"createTextAtMessage",value:function(e){return this._getModule(On).createTextMessage(e)}},{key:"createImageMessage",value:function(e){return this._getModule(On).createImageMessage(e)}},{key:"createAudioMessage",value:function(e){return this._getModule(On).createAudioMessage(e)}},{key:"createVideoMessage",value:function(e){return this._getModule(On).createVideoMessage(e)}},{key:"createCustomMessage",value:function(e){return this._getModule(On).createCustomMessage(e)}},{key:"createFaceMessage",value:function(e){return this._getModule(On).createFaceMessage(e)}},{key:"createFileMessage",value:function(e){return this._getModule(On).createFileMessage(e)}},{key:"createLocationMessage",value:function(e){return this._getModule(On).createLocationMessage(e)}},{key:"createMergerMessage",value:function(e){return this._getModule(On).createMergerMessage(e)}},{key:"downloadMergerMessage",value:function(e){return e.type!==S.MSG_MERGER?As({code:Yi}):Xt(e.payload.downloadKey)?As({code:Xi}):this._getModule(On).downloadMergerMessage(e).catch((function(e){return As({code:Ji})}))}},{key:"createForwardMessage",value:function(e){return this._getModule(On).createForwardMessage(e)}},{key:"sendMessage",value:function(e,t){return e instanceof ws?this._getModule(On).sendMessageInstance(e,t):As({code:Si})}},{key:"callExperimentalAPI",value:function(e,t){return"sendComboMessage"===e?this._getModule(so).sendMessage(t):"handleGroupInvitation"===e?this._getModule(Un).handleGroupInvitation(t):"isCommercialAbilityEnabled"===e?this._getModule(oo).isFeatureEnabled(t):"isIntl"===e?this.isIntl():"sendTRTCCustomData"===e?this._getModule(ao).sendTRTCCustomData(t):"getTimerID"===e?this._m.getTimerID():As({code:Da})}},{key:"revokeMessage",value:function(e){return this._getModule(On).revokeMessage(e)}},{key:"resendMessage",value:function(e){return this._getModule(On).resendMessage(e)}},{key:"deleteMessage",value:function(e){return this._getModule(On).deleteMessage(e)}},{key:"translateText",value:function(e){return this._getModule(On).translateText(e)}},{key:"setMessageExtensions",value:function(e,t){return this._getModule(xn).setMessageExtensions(e,t)}},{key:"getMessageExtensions",value:function(e){return this._getModule(xn).getMessageExtensions(e)}},{key:"deleteMessageExtensions",value:function(e,t){return this._getModule(xn).deleteMessageExtensions(e,t)}},{key:"modifyMessage",value:function(e){return this._getModule(On).modifyRemoteMessage(e)}},{key:"getMessageList",value:function(e){return this._getModule(qn).getMessageList(e)}},{key:"getMessageListHopping",value:function(e){return this._getModule(qn).getMessageListHopping(e)}},{key:"sendMessageReadReceipt",value:function(e){return this._getModule(qn).sendReadReceipt(e)}},{key:"getMessageReadReceiptList",value:function(e){return this._getModule(qn).getReadReceiptList(e)}},{key:"getGroupMessageReadMemberList",value:function(e){return this._getModule(Un).getReadReceiptDetail(e)}},{key:"findMessage",value:function(e){return this._getModule(qn).findMessage(e)}},{key:"setMessageRead",value:function(e){return this._getModule(qn).setMessageRead(e)}},{key:"getConversationList",value:function(e){return this._getModule(qn).getConversationList(e)}},{key:"getConversationProfile",value:function(e){return this._getModule(qn).getConversationProfile(e)}},{key:"deleteConversation",value:function(e){return this._getModule(qn).deleteConversation(e)}},{key:"clearHistoryMessage",value:function(e){return this._getModule(qn).clearHistoryMessage(e)}},{key:"pinConversation",value:function(e){return this._getModule(qn).pinConversation(e)}},{key:"setAllMessageRead",value:function(e){return this._getModule(qn).setAllMessageRead(e)}},{key:"setMessageRemindType",value:function(e){return this._getModule(qn).setMessageRemindType(e)}},{key:"getTotalUnreadMessageCount",value:function(){return this._getModule(qn).getTotalUnreadMessageCount()}},{key:"setConversationCustomData",value:function(e){return this._getModule(qn).setConversationCustomData(e)}},{key:"markConversation",value:function(e){return this._getModule(qn).markConversation(e)}},{key:"getConversationGroupList",value:function(){return this._getModule(qn).getConversationGroupList()}},{key:"createConversationGroup",value:function(e){return this._getModule(qn).createConversationGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._getModule(qn).deleteConversationGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._getModule(qn).renameConversationGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._getModule(qn).addConversationsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._getModule(qn).deleteConversationsFromGroup(e)}},{key:"getMyProfile",value:function(){return this._getModule(Nn).getMyProfile()}},{key:"getUserProfile",value:function(e){return this._getModule(Nn).getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._getModule(Nn).updateMyProfile(e)}},{key:"getBlacklist",value:function(){return this._getModule(Nn).getLocalBlacklist()}},{key:"addToBlacklist",value:function(e){return this._getModule(Nn).addBlacklist(e)}},{key:"removeFromBlacklist",value:function(e){return this._getModule(Nn).deleteBlacklist(e)}},{key:"setSelfStatus",value:function(e){return this._getModule(Nn).setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._getModule(Nn).getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._getModule(Nn).subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._getModule(Nn).unsubscribeUserStatus(e)}},{key:"getFriendList",value:function(){var e=this._getModule(Gn);return e?e.getLocalFriendList():As({code:Ra})}},{key:"addFriend",value:function(e){var t=this._getModule(Gn);return t?t.addFriend(e):As({code:Ra})}},{key:"deleteFriend",value:function(e){var t=this._getModule(Gn);return t?t.deleteFriend(e):As({code:Ra})}},{key:"checkFriend",value:function(e){var t=this._getModule(Gn);return t?t.checkFriend(e):As({code:Ra})}},{key:"getFriendProfile",value:function(e){var t=this._getModule(Gn);return t?t.getFriendProfile(e):As({code:Ra})}},{key:"updateFriend",value:function(e){var t=this._getModule(Gn);return t?t.updateFriend(e):As({code:Ra})}},{key:"getFriendApplicationList",value:function(){var e=this._getModule(Gn);return e?e.getLocalFriendApplicationList():As({code:Ra})}},{key:"acceptFriendApplication",value:function(e){var t=this._getModule(Gn);return t?t.acceptFriendApplication(e):As({code:Ra})}},{key:"refuseFriendApplication",value:function(e){var t=this._getModule(Gn);return t?t.refuseFriendApplication(e):As({code:Ra})}},{key:"deleteFriendApplication",value:function(e){var t=this._getModule(Gn);return t?t.deleteFriendApplication(e):As({code:Ra})}},{key:"setFriendApplicationRead",value:function(){var e=this._getModule(Gn);return e?e.setFriendApplicationRead():As({code:Ra})}},{key:"getFriendGroupList",value:function(){var e=this._getModule(Gn);return e?e.getLocalFriendGroupList():As({code:Ra})}},{key:"createFriendGroup",value:function(e){var t=this._getModule(Gn);return t?t.createFriendGroup(e):As({code:Ra})}},{key:"deleteFriendGroup",value:function(e){var t=this._getModule(Gn);return t?t.deleteFriendGroup(e):As({code:Ra})}},{key:"addToFriendGroup",value:function(e){var t=this._getModule(Gn);return t?t.addToFriendGroup(e):As({code:Ra})}},{key:"removeFromFriendGroup",value:function(e){var t=this._getModule(Gn);return t?t.removeFromFriendGroup(e):As({code:Ra})}},{key:"renameFriendGroup",value:function(e){var t=this._getModule(Gn);return t?t.renameFriendGroup(e):As({code:Ra})}},{key:"getGroupList",value:function(e){return this._getModule(Un).getGroupList(e)}},{key:"getGroupProfile",value:function(e){return this._getModule(Un).getGroupProfile(e)}},{key:"createGroup",value:function(e){return this._getModule(Un).createGroup(e)}},{key:"dismissGroup",value:function(e){return this._getModule(Un).dismissGroup(e)}},{key:"updateGroupProfile",value:function(e){return this._getModule(Un).updateGroupProfile(e)}},{key:"joinGroup",value:function(e){return this._getModule(Un).joinGroup(e)}},{key:"quitGroup",value:function(e){return this._getModule(Un).quitGroup(e)}},{key:"searchGroupByID",value:function(e){return this._getModule(Un).searchGroupByID(e)}},{key:"getGroupOnlineMemberCount",value:function(e){return this._getModule(Un).getGroupOnlineMemberCount(e)}},{key:"changeGroupOwner",value:function(e){return this._getModule(Un).changeGroupOwner(e)}},{key:"getGroupApplicationList",value:function(){return this._getModule(Un).getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){return this._getModule(Un).handleGroupApplication(e)}},{key:"initGroupAttributes",value:function(e){return this._getModule(Un).initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._getModule(Un).setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._getModule(Un).deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._getModule(Un).getGroupAttributes(e)}},{key:"setGroupCounters",value:function(e){return this._getModule(Un).setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._getModule(Un).increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._getModule(Un).decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._getModule(Un).getGroupCounters(e)}},{key:"getGroupMemberList",value:function(e){return this._getModule(Bn).getGroupMemberList(e)}},{key:"getGroupMemberProfile",value:function(e){return this._getModule(Bn).getGroupMemberProfile(e)}},{key:"addGroupMember",value:function(e){return this._getModule(Bn).addGroupMember(e)}},{key:"deleteGroupMember",value:function(e){return this._getModule(Bn).deleteGroupMember(e)}},{key:"setGroupMemberMuteTime",value:function(e){return this._getModule(Bn).setGroupMemberMuteTime(e)}},{key:"setGroupMemberRole",value:function(e){return this._getModule(Bn).setGroupMemberRole(e)}},{key:"setGroupMemberNameCard",value:function(e){return this._getModule(Bn).setGroupMemberNameCard(e)}},{key:"setGroupMemberCustomField",value:function(e){return this._getModule(Bn).setGroupMemberCustomField(e)}},{key:"markGroupMemberList",value:function(e){return this._getModule(Bn).markGroupMemberList(e)}},{key:"getJoinedCommunityList",value:function(){return this._getModule(Fn).getJoinedCommunityList()}},{key:"createTopicInCommunity",value:function(e){return this._getModule(Fn).createTopicInCommunity(e)}},{key:"deleteTopicFromCommunity",value:function(e){return this._getModule(Fn).deleteTopicFromCommunity(e)}},{key:"updateTopicProfile",value:function(e){return this._getModule(Fn).updateTopicProfile(e)}},{key:"getTopicList",value:function(e){return this._getModule(Fn).getTopicList(e)}}]),e}(),$l={login:1,logout:1,destroy:1,on:1,off:1,ready:1,setLogLevel:1,joinGroup:1,quitGroup:1,registerPlugin:1,getGroupOnlineMemberCount:1};function Wl(e,t){if(e.isReady()||1===$l[t])return!0;var n=e.getNotReadyReason(),o={code:n,message:"".concat(e.getErrorMessage(n)," | ").concat(t," | ").concat(e.getErrorMessage(Oa))};return e.onError(o),o}var Kl={},Yl={create:function(e){var n=0,o=e.SDKAppID;if(et(o))n=o;else if(n=parseInt(o),isNaN(o))return qe.e("".concat("TIM.create"," failed. Failed to parse the SDKAppID, please check the arguments")),null;if(n&&Kl[n])return Kl[n];qe.l("".concat("TIM.create"));var r=new jl(t(t({},e),{},{SDKAppID:n}));r.on(T.SDK_DESTROY,(function(e){Kl[e.data.SDKAppID]=null,delete Kl[e.data.SDKAppID]}));var i,a,s=(i=r,a=Object.create(null),Object.keys(Ln).forEach((function(e){if(i[e]){var t=new I;a[e]=function(){var n=Array.from(arguments);return t.use((function(t,n){var o=Wl(i,e);return!0===o?n():As(o)})).use((function(t,n){if(!0===Jt(t,An[e],e))return n()})).use((function(t,n){return i[e].apply(i,t)})),t.run(n)}}})),a);return Kl[n]=s,An.hookGetAPITips(r.getErrorMessage.bind(r)),qe.l("".concat("TIM.create"," ok")),s}};return Yl.TYPES=S,Yl.EVENT=T,Yl.VERSION="2.27.0",qe.l("TIM.VERSION:".concat(Yl.VERSION)),Yl}();const PD=ND;var UD,GD={};UD=function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s="undefined"!=typeof wx&&"function"==typeof k_&&Boolean(k_().fontSizeSetting),c="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),l="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),u="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),d="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),p="undefined"!=typeof uni&&"undefined"==typeof window,h=p&&"ios"===M_().platform.toLocaleLowerCase(),f=(p&&M_().platform.toLocaleLowerCase(),s||c||l||u||d||p),g=c?qq:l?tt:u?swan:d?my:s?wx:p?uni:{},v=function(e){if("object"!==n(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var o=t;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return t===o};function m(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(v(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1}var _=function(){function e(){o(this,e)}return i(e,[{key:"request",value:function(e,t){var n=this,o=e.downloadUrl||"",r=(e.method||"PUT").toUpperCase(),i=e.url;if(e.qs){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=";return m(e)?"":v(e)?Object.keys(e).map((function(o){var r=encodeURIComponent(o)+n;return Array.isArray(e[o])?e[o].map((function(e){return r+encodeURIComponent(e)})).join(t):r+encodeURIComponent(e[o])})).filter(Boolean).join(t):void 0}(e.qs);a&&(i+="".concat(-1===i.indexOf("?")?"?":"&").concat(a))}var s=new XMLHttpRequest;s.open(r,i,!0),s.responseType=e.dataType||"text";var c=e.headers||{};if(!m(c))for(var l in c)c.hasOwnProperty(l)&&"content-length"!==l.toLowerCase()&&"user-agent"!==l.toLowerCase()&&"origin"!==l.toLowerCase()&&"host"!==l.toLowerCase()&&s.setRequestHeader(l,c[l]);return s.onload=function(){if(200===s.status)t(null,n._xhrRes(s,n._xhrBody(s,o)));else{var e={code:s.status,message:JSON.stringify(s.responseText)};t(e,n._xhrRes(s,n._xhrBody(s)))}},s.onerror=function(e){var o=n._xhrBody(s),r={code:s.status,message:JSON.stringify(s.responseText)};o||s.statusText||0!==s.status||(e.message="CORS blocked or network error"),t(r,n._xhrRes(s,o)),r=null},e.onProgress&&s.upload&&(s.upload.onprogress=function(t){var n=t.total,o=t.loaded,r=Math.floor(100*o/n);e.onProgress({total:n,loaded:o,percent:(r>=100?100:r)/100})}),s.send(e.resources),s}},{key:"_xhrRes",value:function(e,t){var n={};return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){if(e){var t=e.indexOf(":"),o=e.substr(0,t).trim().toLowerCase(),r=e.substr(t+1).trim();n[o]=r}})),{statusCode:e.status,statusMessage:e.statusText,headers:n,data:t}}},{key:"_xhrBody",value:function(e,t){return 200===e.status&&t?{location:t}:{response:e.responseText}}}]),e}(),y=["unknown","image","video","audio","log"],b=["name"],M=function(){function e(){o(this,e)}return i(e,[{key:"request",value:function(e,n){var o=this,r=e.resources,i=void 0===r?"":r,a=e.headers,s=void 0===a?{}:a,c=e.url,l=e.downloadUrl,u=void 0===l?"":l,p=c,f=null,v=u.match(/^(https?:\/\/[^/]+\/)([^/]*\/?)(.*)$/),m=decodeURIComponent(v[3]),_={key:m.indexOf("?")>-1?m.split("?")[0]:m,success_action_status:200,"Content-Type":""},M={};if(h){var C=c.split("?sign=");if(C.length>1){var k=C[1];p="".concat(C[0],"?sign=").concat(encodeURIComponent("".concat(k))),M.sign=decodeURIComponent(k),M.signature=decodeURIComponent(k)}}var w={url:p,header:s,name:"file",filePath:i,formData:t(t({},_),M),timeout:e.timeout||3e5};if(d){var T=w;T.name,w=t(t({},function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(T,b)),{},{fileName:"file",fileType:y[e.fileType]})}return(f=g.uploadFile(t(t({},w),{},{success:function(e){o._handleResponse({response:e,downloadUrl:u,callback:n})},fail:function(e){o._handleResponse({response:e,downloadUrl:u,callback:n})}}))).onProgressUpdate&&f.onProgressUpdate((function(t){e.onProgress&&e.onProgress({total:t.totalBytesExpectedToSend,loaded:t.totalBytesSent,percent:Math.floor(t.progress)/100})})),f}},{key:"_handleResponse",value:function(e){var n=e.downloadUrl,o=e.response,r=e.callback,i=o.header,a={};if(i)for(var s in i)i.hasOwnProperty(s)&&(a[s.toLowerCase()]=i[s]);var c=+o.statusCode;200===c?r(null,{statusCode:c,headers:a,data:t(t({},o.data),{},{location:n})}):r({code:c,message:JSON.stringify(o.data)},{statusCode:c,headers:a,data:void 0})}}]),e}();return function(){function e(){o(this,e),console.log("TIMUploadPlugin.VERSION: ".concat("1.1.0")),this.retry=1,this.tryCount=0,this.systemClockOffset=0,this.httpRequest=f?new M:new _}return i(e,[{key:"uploadFile",value:function(e,t){var n=this;return this.httpRequest.request(e,(function(o,r){o&&n.tryCount<n.retry&&n.allowRetry(o)?(n.tryCount++,n.uploadFile(e,t)):(n.tryCount=0,t(o,r))}))}},{key:"allowRetry",value:function(e){var t=!1,n=!1;if(e){var o=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var r=e.error&&e.error.Code,i=e.error&&e.error.Message;("RequestTimeTooSkewed"===r||"AccessDenied"===r&&"Request has expired"===i)&&(n=!0)}catch(c){}if(n&&o){var a=Date.now(),s=Date.parse(o);Math.abs(a+this.systemClockOffset-s)>=3e4&&(this.systemClockOffset=s-a,t=!0)}else 5===Math.floor(e.statusCode/100)&&(t=!0)}return t}}]),e}()},{get exports(){return GD},set exports(e){GD=e}}.exports=UD();const BD=GD;var FD={};({get exports(){return FD},set exports(e){FD=e}}).exports=function(){var e,t;function n(t){this.name="__st"+(1e9*Math.random()>>>0)+e+"__",null!=t&&t.forEach(this.add,this),e+=1}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],r=0;r<n;){var i=t[r];if(e.call(o,i,r,t))return i;r+=1}}}),window.WeakSet||(e=Date.now()%1e9,n.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},n.prototype.delete=function(e){return!!e[this.name]&&!(e[this.name]=void 0)},n.prototype.has=function(e){return!!e[this.name]},t=n,Object.defineProperty(window,"WeakSet",{value:function(e){return new t(e)}})),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if(null!=(o=arguments[n]))for(var o=Object(o),r=Object.keys(Object(o)),i=0,a=r.length;i<a;i++){var s=r[i],c=Object.getOwnPropertyDescriptor(o,s);null!=c&&c.enumerable&&(t[s]=o[s])}return t}});var o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function i(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o}function a(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}var s,c=/_?t(\d)?(imestamp)?=\d+&?/g,l=["aegis.qq.com","tamaegis.com","/aegis-sdk","rumt-","/flog.core.min.js","pingfore.qq.com/pingd","h.trace.qq.com/kv","beacon.qq.com","dmplog.qq.com","qq.com/report","pcmgrmonitor.3g.qq.com","report.qqweb.qq.com","tpstelemetry.tencent.com","insight.cloud.tencent.com","www.googletagmanager.com","report.idqqimg.com","google-analytics.com","arms-retcode.aliyuncs.com","px.effirst.com","sentry","hot-update.json","u.c.b.r.o.w.s.e.r","report.url.cn","sockjs-node"],u=["ResizeObserver loop limit exceeded","Failed to execute 'transaction'","window.indexedDB.deleteDatabase is not a function"],d=["ext1","ext2","ext3","level","trace","tag","seq","code"],p=["static","fetch"],h=(g.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},g.prototype.on=function(e,t,n){var o;if(void 0===n&&(n=0),this)return(o=this.eventsList[e])||(this.eventsList[e]=[],o=this.eventsList[e]),-1===this.indexOf(o,t)&&o.push({name:e,type:n||0,callback:t}),this},g.prototype.one=function(e,t){this.on(e,t,1)},g.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(o){}}return null}},g.prototype.clear=function(){this.eventsList={}},g),f=function(e){if(!e||0===e.length)return"{}";e=Array.isArray(e)?e:[e];var t=Object.keys(e[0]),n={};return t.forEach((function(t){n[t]=e.map((function(e){return e[t]}))})),n.count=e.length,q(n)};function g(){var e=this;this.emit=function(t,n){if(e){var o;if(null!=(r=e.eventsList[t])&&r.length)for(var r=r.slice(),i=0;i<r.length;i++){o=r[i];try{var a=o.callback.apply(e,[n]);if(1===o.type&&e.remove(t,o.callback),!1===a)break}catch(s){throw s}}return e}},this.eventsList={}}function v(e,t){return"number"==typeof e||"string"==typeof e?e:t?s.string:s.number}function m(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e}function _(e,t){return void 0===t&&(t=2048),String(e).replace(c,"").slice(0,t)}function y(e){return"string"==typeof e&&/^\//.test(e)?"https:"===(null===location||void 0===location?void 0:location.protocol):/^https/.test(e)}function b(e,t,n){var o,r;try{if("function"==typeof(null==t?void 0:t.retCodeHandler))return{code:void 0===(i=(r=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx,null==n?void 0:n.payload)||{}).code)?"unknown":i,isErr:r.isErr};"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null==(o=null==t?void 0:t.ret)?void 0:o.join)&&(G=[].concat(t.ret.map((function(e){return e.toLowerCase()}))));var i,a=Object.getOwnPropertyNames(e).filter((function(e){return-1!==G.indexOf(e.toLowerCase())}));return a.length?{code:""+(i="未知"!==(i=e[a[0]])&&""!==i?i:"unknown"),isErr:0!==i&&"0"!==i&&"unknown"!==i}:{code:"unknown",isErr:!1}}catch(s){return{code:"unknown",isErr:!1}}}function M(e,t,n){try{var o="function"==typeof t?t(e,null==n?void 0:n.url)||"":e;return V(o).slice(0,102400)}catch(r){return""}}function C(e,t){return"string"!=typeof e||!e||t&&-1<e.indexOf(t)||j.test(e)||l.some((function(t){return-1<e.indexOf(t)}))}function k(e,t){var n,o=[],r=e.config;return e.lifeCycle.on("destroy",(function(){o.length=0})),function(i,a){Array.isArray(i)?o=o.concat(i):o.push(i),t&&o.length>=t||e.sendNow&&0<o.length?(o=$(o),a(o.splice(0,o.length)),n&&clearTimeout(n)):(n&&clearTimeout(n),n=setTimeout((function(){n=null,0<(o=$(o)).length&&a(o.splice(0,o.length))}),r.delay))}}function w(e,t){return Array.isArray(e)?t(e.map((function(e){return t=r(r({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(F).join(" ")}),d.forEach((function(e){t[e]||delete t[e]})),t;var t}))):t([r(r({},e),{msg:"string"==typeof e.msg?e.msg:F(e.msg)})])}function T(e,t){return function(n,o){var i,a,s,c=Array.isArray(n),l=c?n:[n],u=(e.lifeCycle.emit("beforeRequest",n),e.config.beforeRequest);(l="function"==typeof u?l.map((function(e){try{var n=u({logs:e,logType:t});return(null==n?void 0:n.logType)===t&&null!=n&&n.logs?n.logs:!1!==n&&e}catch(o){return e}})).filter((function(e){return!1!==e})):l).length&&(i=l,n=d,!Array.isArray(i)||i.length<=1||(a=[],s=[],!(s="string"==typeof n?[n]:n))||s.length<=0||(s.forEach((function(e){i.forEach((function(t){null!=t&&t[e]&&a.push(e)}))})),0<a.length&&(i=i.map((function(e){var t={};return a.forEach((function(e){t[e]=""})),r(r({},t),e)})))),l=i,o(c?l:l[0]))}}function S(e){return function(t,n){e.lifeCycle.emit("modifyRequest",t);var o=e.config.modifyRequest;if("function"==typeof o)try{var r=o(t);"object"==typeof r&&"url"in r&&(t=r)}catch(i){console.error(i)}n(t)}}function I(e){return function(t,n){null!=(o=e.lifeCycle)&&o.emit("afterRequest",t);var o=(e.config||{}).afterRequest;"function"==typeof o&&!1===o(t)||n(t)}}function E(e){if(e&&e.reduce&&e.length)return 1===e.length?function(t,n){e[0](t,n||Q)}:e.reduce((function(e,t){return function(n,o){return void 0===o&&(o=Q),e(n,(function(e){return null==t?void 0:t(e,o)}))}}));throw new TypeError("createPipeline need at least one function param")}function D(e,t){Object.getOwnPropertyNames(e).forEach((function(n){"function"==typeof e[n]&&"constructor"!==n&&(t?t[n]="sendPipeline"===n?function(){return function(){}}:function(){}:e[n]=function(){})}))}function A(){return void 0!==window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now}function L(e,t){function n(o){"pagehide"!==o.type&&"hidden"!==document.visibilityState||(e(o),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)}function R(e){return-1!==ae.indexOf(e)}(ee=s=s||{})[ee.number=-1]="number",ee.string="";var O,x,N,P=["application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/x-javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video","video/mp2t"],U=/\.(json|js|css|jpg|jpeg|png|svg|apng|webp|gif|bmp|mp4|mp3|ts|mpeg|wav|webm|ogg|flv|m3u8|ttf|woff2|otf|eot|woff|html|htm|shtml|shtm|)$/gi,G=["ret","retcode","code","errcode"],B=function(){var e=new WeakSet;return function(t,n){if(n instanceof Error)return"Error.message: "+n.message+" \n  Error.stack: "+n.stack;if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular "+(t||"root")+"]";e.add(n)}return n}},F=function(e){if("string"==typeof e)return e;try{return e instanceof Error?(JSON.stringify(e,B(),4)||"undefined").replace(/"/gim,""):JSON.stringify(e,B(),4)||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},q=function(e){if("string"==typeof e)return e;try{return JSON.stringify(e,B())||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},V=function(e,t){void 0===t&&(t=3);var n,o,r,i="";return Array.isArray(e)?(i+="[",n=e.length,e.forEach((function(e,o){i=(i+="object"==typeof e&&1<t?V(e,t-1):z(e))+(o===n-1?"":",")})),i+="]"):e instanceof Object?(i="{",o=Object.keys(e),r=o.length,o.forEach((function(n,a){"object"==typeof e[n]&&1<t?i+='"'+n+'":'+V(e[n],t-1):i+=H(n,e[n]),i+=a===r-1||a<r-1&&void 0===e[o[a+1]]?"":","})),i+="}"):i+=e,i},H=function(e,t){var n=typeof t,o="";return"string"==n||"object"==n?o+='"'+e+'":"'+t+'"':"function"==typeof t?o+='"'+e+'":"function '+t.name+'"':"symbol"==typeof t?o+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!=n||(o+='"'+e+'": '+t),o},z=function(e){var t=typeof e;return""+("undefined"==t||"symbol"==t||"function"==t?"null":"string"==t||"object"==t?'"'+e+'"':e)},j=/data:(image|text)\/.*;base64/,$=((ee=O=O||{}).INFO_ALL="-1",ee.API_RESPONSE="1",ee.INFO="2",ee.ERROR="4",ee.PROMISE_ERROR="8",ee.AJAX_ERROR="16",ee.SCRIPT_ERROR="32",ee.IMAGE_ERROR="64",ee.CSS_ERROR="128",ee.CONSOLE_ERROR="256",ee.MEDIA_ERROR="512",ee.RET_ERROR="1024",ee.REPORT="2048",ee.PV="4096",ee.EVENT="8192",ee.PAGE_NOT_FOUND_ERROR="16384",ee.WEBSOCKET_ERROR="32768",ee.BRIDGE_ERROR="65536",ee.LAZY_LOAD_ERROR="131072",(ee=x=x||{}).LOG="log",ee.SPEED="speed",ee.PERFORMANCE="performance",ee.OFFLINE="offline",ee.WHITE_LIST="whiteList",ee.VITALS="vitals",ee.PV="pv",ee.CUSTOM_PV="customPV",ee.EVENT="event",ee.CUSTOM="custom",ee.SDK_ERROR="sdkError",ee.SET_DATA="setData",ee.LOAD_PACKAGE="loadPackage",(ee=N=N||{}).production="production",ee.development="development",ee.gray="gray",ee.pre="pre",ee.daily="daily",ee.local="local",ee.test="test",ee.others="others",function(e){return e.filter((function(t,n){return"static"!==t.type||!e.find((function(e,o){return t.url===e.url&&200===t.status&&n<o}))}))}),W=function(e){e.level===O.INFO_ALL&&(e.level=O.INFO)},K={},Y={},X=function(e){return K[e]||(K[e]=setTimeout((function(){Y[e]={},K[e]=null}),6e4)),K[e]},J=function(e){return(Array.isArray(e)?e:[e]).map((function(e){return Object.getOwnPropertyNames(e).reduce((function(t,n){return"ctx"!==n&&(t[n]=e[n]),t}),{level:O.INFO,msg:""})}))},Z=function(e){return function(t){return e.sendPipeline([function(t,n){return n({url:e.config.url||"",data:f(J(t)),method:"post",contentType:"application/json",type:x.LOG,log:t,requestConfig:{timeout:5e3},success:function(){var o=e.config.onReport;"function"==typeof o&&t.forEach((function(e){o(e)})),"function"==typeof n&&n([])}})}],x.LOG)(t)}},Q=function(){},ee=(Object.defineProperty(le.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.37.1"},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),O},enumerable:!1,configurable:!0}),le.prototype.init=function(e){this.setConfig(e);for(var t=0;t<le.installedPlugins.length;t++)try{le.installedPlugins[t].patch(this)}catch(n){this.sendSDKError(n)}this.lifeCycle.emit("onInited")},le.prototype.setConfig=function(e){Object.assign(this.config,e);var t=(e=this.config).id,n=e.uin,o=e.version,r=e.ext1,i=e.ext2,a=e.ext3,s=e.aid,c=void 0===(l=e.env)?"production":l,l=e.pageUrl;return e=this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==s,this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=o||"1.37.1",this.bean.aid=s||"",this.bean.env=function(){switch(c){case N.production:case N.development:case N.gray:case N.pre:case N.daily:case N.local:case N.test:case N.others:return 1;default:return}}()?c:N.others,l&&this.extendBean("from",encodeURIComponent(l.slice(0,2048))),r&&this.extendBean("ext1",encodeURIComponent(r)),i&&this.extendBean("ext2",encodeURIComponent(i)),a&&this.extendBean("ext3",encodeURIComponent(a)),e&&this.lifeCycle.emit("onConfigChange",this.config),this.config},le.use=function(e){-1===le.installedPlugins.indexOf(e)&&e.aegisPlugin&&le.installedPlugins.push(e)},le.unuse=function(e){-1!==(e=le.installedPlugins.indexOf(e))&&le.installedPlugins.splice(e,1)},le.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:O.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(n,r({},e[0]),{level:O.INFO}),this.normalLogPipeline(n)},le.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:O.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(n,r({},e[0]),{level:O.INFO_ALL}),this.normalLogPipeline(n)},le.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:O.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(n,r({},e[0])),this.normalLogPipeline(n)},le.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:O.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(n,r({},e[0]),{level:O.ERROR}),this.normalLogPipeline(n)},le.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},le.prototype.reportPv=function(e){var t,n=this;e&&(console.warn("reportPv is deprecated, please use reportEvent"),t=""+Object.getOwnPropertyNames(this.bean).filter((function(e){return"id"!==e})).map((function(e){return e+"="+n.bean[e]})).join("&"),this.sendPipeline([function(o,r){r({url:n.config.url+"/"+e+"?"+t,addBean:!1,type:x.CUSTOM_PV})}],x.CUSTOM_PV)(null))},le.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?("string"!=typeof e.name&&(console.warn("reportEvent params name must be string"),e.name=String(e.name)),this.eventPipeline(e)):console.warn("reportEvent params error"))},le.prototype.reportTime=function(e,t){if("object"==typeof e)return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},le.prototype.reportT=function(e){var t=e.name,n=e.duration,o=void 0===(o=e.ext1)?"":o,r=void 0===(r=e.ext2)?"":r,i=void 0===(i=e.ext3)?"":i;if(e=e.from,"string"==typeof t&&"number"==typeof n&&"string"==typeof o&&"string"==typeof r&&"string"==typeof i){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,o,r,i,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},le.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},le.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},le.prototype.submitCustomTime=function(e,t,n,o,r,i){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:o||this.config.ext2,ext3:r||this.config.ext3,from:i||void 0})},le.prototype.extendBean=function(e,t){this.bean[e]=t},le.prototype.sendPipeline=function(e,t){var n,o=this;return E(i([function(e,t){if("number"!=typeof n.config.random&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||t(e);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,t(e);n.isHidden=!0}},T(n=this,t)],e,[S(this),function(e,t){o.request(e,(function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];o.failRequestCount=0,t({isErr:!1,result:r,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null!=(n=null==e?void 0:e.success)&&n.call.apply(n,i([e],r))}),(function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];60<=++o.failRequestCount&&o.destroy(),-1<(""+r[0]).indexOf("403 forbidden")&&o.destroy(),t({isErr:!0,result:r,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null!=(n=null==e?void 0:e.fail)&&n.call.apply(n,i([e],r))}))},I(this)]))},le.prototype.send=function(e,t,n){var o=this;return E([S(this),function(e,r){o.request(e,(function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r({isErr:!1,result:n,logType:e.type,logs:e.log}),null!=t&&t.apply(void 0,n)}),(function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];r({isErr:!0,result:t,logType:e.type,logs:e.log}),null!=n&&n.apply(void 0,t)}))},I(this)])(e)},le.prototype.ready=function(e,t,n){throw new Error('You need to override "ready" method')},le.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},le.prototype.sendSDKError=function(e){var t=this;this.sendPipeline([function(e,n){n({url:t.config.url+"?id=1085&msg[0]="+encodeURIComponent(F(e))+"&level[0]=2&from="+t.config.id+"&count=1&version="+t.config.id+"(1.37.1)",addBean:!1,method:"get",type:x.SDK_ERROR,log:e})}],x.SDK_ERROR)(e)},le.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,o=le.instances.indexOf(this);-1!==o&&le.instances.splice(o,1);for(var r=le.installedPlugins.length-1;0<=r;r--)try{le.installedPlugins[r].unpatch(this)}catch(a){this.sendSDKError(a)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach((function(e){n[e].writable&&(t[e]=null)})),Object.setPrototypeOf(this,null);else{for(var i=this;i.constructor!==Object&&D(i,this),i=Object.getPrototypeOf(i););0===le.instances.length&&(D(o=Object.getPrototypeOf(this).constructor),D(le))}},le.version="1.37.1",le.instances=[],le.logType=O,le.environment=N,le.installedPlugins=[],le),te=(ce.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},ce.prototype.unpatch=function(e){var t=this.instances.indexOf(e);-1!==t&&(this.instances.splice(t,1),0===this.instances.length)&&this.uninstall(e)},ce.prototype.countInstance=function(){return this.instances.length},ce.prototype.uninstall=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.destroy)&&t.apply(this,[e])},ce.prototype.walk=function(e){var t=this;this.instances.forEach((function(n){var o=t.canUse(n);o&&e(n,o)}))},ce.prototype.canUse=function(e){return!(!(e=this.getConfig(e))||"object"!=typeof e)||!!e},ce.prototype.getConfig=function(e){return null==(e=e.config)?void 0:e[this.name]},ce.prototype.exist=function(e){return-1===this.instances.indexOf(e)},ce.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null==(t=null==(t=this.option)?void 0:t.init))||t.call(this.option,this.getConfig(e))},ce.prototype.triggerOnNewAegis=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.onNewAegis)&&t.call(this.option,e,this.getConfig(e))},ce),ne=new te({name:"aid",aid:"",init:function(e){try{var t=!0!==e&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch(n){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),oe=function(e){var t;return e.payload?(t={},Object.keys(e).forEach((function(n){"payload"!==n&&(t[n]=e[n])})),t):e},re=new te({name:"reportAssetSpeed"}),ie=re=new te({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;A()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(e,t){this.$walk((function(n){n===t&&n.speedLogPipeline(e)}))},publishMany:function(e,t){for(var n=t.config,o=0,r=e.length;o<r;o++){var i=e[o];-1===this.ASSETS_INITIATOR_TYPE.indexOf(i.initiatorType)||C(i.name,n.hostUrl)||this.publish(this.generateLog(i,n),t)}},collectSuccessLog:function(e){var t,n,o=this;"function"==typeof window.PerformanceObserver?(this.publishMany(performance.getEntriesByType(this.collectEntryType),e),(t=new window.PerformanceObserver((function(t){o.publishMany(t.getEntries(),e)}))).observe({entryTypes:[this.collectEntryType]}),e.lifeCycle.on("destroy",(function(){0===re.countInstance()&&t.disconnect()}))):(n=setInterval((function(){var t=performance.getEntriesByType(o.collectEntryType),n=t.slice(o.collectCur);o.collectCur=t.length,o.publishMany(n,e)}),3e3),e.lifeCycle.on("destroy",(function(){0===re.countInstance()&&clearInterval(n)})))},collectFailLog:function(e){function t(t){var r,i;t&&(t=t.target||t.srcElement,!(r=(null==t?void 0:t.src)||(null==t?void 0:t.href))||"string"!=typeof r||-1<window.location.href.indexOf(r)||(t="function"==typeof(null==(t=o.api)?void 0:t.resourceTypeHandler)?null==(t=o.api)?void 0:t.resourceTypeHandler(r):"",i=performance.getEntriesByType(n.collectEntryType).find((function(e){return e.name===r})),C(r,o.hostUrl))||(i={url:_(r),status:400,duration:Number(((null==i?void 0:i.duration)||0).toFixed(2)),method:"get",type:t||"static",isHttps:y(r),urlQuery:m(r,!0),nextHopProtocol:"",domainLookup:0,connectTime:0},n.publish(i,e)))}var n=this,o=e.config;window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",(function(){0===re.countInstance()&&window.document.removeEventListener("error",t,!0)}))},generateLog:function(e,t){t="function"==typeof(null==(n=t.api)?void 0:n.resourceTypeHandler)?null==(n=t.api)?void 0:n.resourceTypeHandler(e.name):"";var n=e.transferSize;return{url:_(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:t||"static",isHttps:y(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:m(e.name,!0),domainLookup:v(e.domainLookupEnd-e.domainLookupStart),connectTime:v(e.connectEnd-e.connectStart),transferSize:0<n?n:-1}},collectNotReportedLog:function(e){var t,n;A()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,"function"!=typeof window.PerformanceObserver)&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e,!0))},destroy:function(){this.option.publish=function(){}}}),ae=window.navigator.userAgent.toLowerCase(),se={};function ce(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function le(e){var t,n,o,r,i,a,s,c,l,u,d,p,f,g,v=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:60,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,reportLoadPackageSpeed:!0,hostUrl:"https://aegis.qq.com",env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:"",reportImmediately:!0},this.isWhiteList=!1,this.lifeCycle=new h,this.bean={},this.normalLogPipeline=E([k(this,5),w,function(e,n){var o=t.config;n(e=e.map((function(e){var t,n=o.maxLength||102400;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null==(t=e.msg)?void 0:t.substring(0,n)}catch(r){e.msg=F(e.msg).substring(0,o.maxLength)}return e})))},(g=(t=this).config,function(e,t){var n="number"==typeof g.repeat?g.repeat:60;if(n<=0)return t(e);var o=(null==g?void 0:g.id)+"_error",r=Y[o]||{};t(e.filter((function(e){if(e.level===O.ERROR||e.level===O.PROMISE_ERROR||e.level===O.AJAX_ERROR||e.level===O.SCRIPT_ERROR||e.level===O.IMAGE_ERROR||e.level===O.CSS_ERROR||e.level===O.MEDIA_ERROR||e.level===O.RET_ERROR||e.level===O.BRIDGE_ERROR||e.level===O.PAGE_NOT_FOUND_ERROR||e.level===O.WEBSOCKET_ERROR||e.level===O.LAZY_LOAD_ERROR){if(e=e.msg.slice(0,200),r[e]>n)return K[o]||X(o),!1;r[e]=1+~~r[e],Y[o]=r}return!0})))}),(p=this.lifeCycle.emit,f=this.config,function(e,t){var n,o=f.logCreated;return"function"==typeof o?(n=e.filter((function(e){return!1!==o(e)})),p("beforeWrite",n),t(n)):(p("beforeWrite",e),t(e))}),(d=this,setTimeout((function(){var e=void 0===(t=(n=d.config).pvUrl)?"":t,t=n.spa,n=-1<["web-sdk","mp-sdk"].indexOf("web-sdk");e&&(n&&!t||!n)&&d.sendPipeline([function(t,n){n({url:e,type:x.PV})}],x.PV)(null)}),100),function(e,t){t(e)}),(l=c=s=!1,u=[],(i=this).lifeCycle.on("onConfigChange",(function(){a&&clearTimeout(a),a=setTimeout((function(){var e,t;!l&&i.config&&(l=!0,e=i.config.whiteListUrl,(t=void 0===e?"":e)&&i.sendPipeline([function(e,n){n({url:t,type:x.WHITE_LIST,success:function(e){c=!0;try{var t=e.data||JSON.parse(e),n=t.retcode,o=t.result,r=void 0===o?{}:o,a=(0===n&&(s=r.is_in_white_list,i.isWhiteList=s,0<=r.rate)&&r.rate<=1&&(i.config.random=r.rate,i.isGetSample=!1),i.isWhiteList&&u.length?Z(i)(u.splice(0),(function(){})):!i.isWhiteList&&u.length&&(u.length=0),i.config.onWhitelist);"function"==typeof a&&a(s)}catch(l){}},fail:function(){c=!0}})}],x.WHITE_LIST)(null),l=!1)}),i.config.uin?50:500)})),i.lifeCycle.on("destroy",(function(){u.length=0})),function(e,t){var n;s||null!=(n=null==(n=i.config)?void 0:n.api)&&n.reportRequest?t(e.concat(u.splice(0)).map((function(e){return W(e),e}))):(n=e.filter((function(e){return e.level!==O.INFO&&e.level!==O.API_RESPONSE?(W(e),!0):(c||(u.push(e),200<=u.length&&(u.length=200)),!1)}))).length&&t(n)}),function(e,t){try{var n=JSON.parse(JSON.stringify(e)),o=(v.lifeCycle.emit("beforeReport",n),v.config.beforeReport);(e="function"==typeof o?e.filter((function(e){return!1!==o(e)})):e).length&&t(e)}catch(r){}},Z(this)]),this.eventPipeline=E([k(this,10),(r=this,function(e){r.sendPipeline([function(e,t){var n=e.map((function(e){return{name:e.name,ext1:e.ext1||r.config.ext1||"",ext2:e.ext2||r.config.ext2||"",ext3:e.ext3||r.config.ext3||""}}));t({url:r.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:x.EVENT,log:e})}],x.EVENT)(e)})]),this.timeMap={},this.failRequestCount=0,this.customTimePipeline=E([k(this,10),(o=this,function(e){return o.sendPipeline([function(e,t){t({url:o.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:x.CUSTOM,log:e})}],x.CUSTOM)(e)})]),this.config=(n=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),n.url=n.url||e+"/collect",n.offlineUrl=n.offlineUrl||e+"/offline",n.whiteListUrl=n.whiteListUrl||e+"/collect/whitelist",n.pvUrl=n.pvUrl||e+"/collect/pv",n.eventUrl=n.eventUrl||e+"/collect/events",n.speedUrl=n.speedUrl||e+"/speed",n.customTimeUrl=n.customTimeUrl||e+"/speed/custom",n.performanceUrl=n.performanceUrl||e+"/speed/performance",n.webVitalsUrl=n.webVitalsUrl||e+"/speed/webvitals",n.setDataReportUrl=n.SetDataReportUrl||e+"/speed/miniProgramData",n),le.instances.push(this)}function ue(e,t,n){return null!=t&&t.length&&"object"==typeof e?t.reduce((function(t,o){var r=e instanceof Headers?e.get(o):e[o];return r?t+(""===t?"\n":"\n\n")+n+" header "+o+": "+r:t}),""):""}function de(e){var t,n="";return"object"==typeof e&&(t=(e=function(e,t){for(var n=0;n<t.length;n++){var o=t[n],r=e[o]||"function"==typeof e.get&&e.get(o);if(r)return[o,r]}return["",""]}(e,Object.keys(we)))[0],e=e[1],t)?we[t](e):n}se.macos=function(){return R("mac")},se.ios=function(){return se.iphone()||se.ipod()||se.ipad()},se.iphone=function(){return!se.windows()&&R("iphone")},se.ipod=function(){return R("ipod")},se.ipad=function(){var e="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return R("ipad")||e},se.android=function(){return!se.windows()&&R("android")},se.androidPhone=function(){return se.android()&&R("mobile")},se.androidTablet=function(){return se.android()&&!R("mobile")},se.blackberry=function(){return R("blackberry")||R("bb10")},se.blackberryPhone=function(){return se.blackberry()&&!R("tablet")},se.blackberryTablet=function(){return se.blackberry()&&R("tablet")},se.windows=function(){return R("windows")},se.windowsPhone=function(){return se.windows()&&R("phone")},se.windowsTablet=function(){return se.windows()&&R("touch")&&!se.windowsPhone()},se.fxos=function(){return(R("(mobile")||R("(tablet"))&&R(" rv:")},se.fxosPhone=function(){return se.fxos()&&R("mobile")},se.fxosTablet=function(){return se.fxos()&&R("tablet")},se.meego=function(){return R("meego")},se.cordova=function(){return window.cordova&&"file:"===location.protocol},se.nodeWebkit=function(){return"object"==typeof window.process},se.mobile=function(){return se.androidPhone()||se.iphone()||se.ipod()||se.windowsPhone()||se.blackberryPhone()||se.fxosPhone()||se.meego()},se.tablet=function(){return se.ipad()||se.androidTablet()||se.blackberryTablet()||se.windowsTablet()||se.fxosTablet()},se.desktop=function(){return!se.tablet()&&!se.mobile()};var pe,he,fe,ge,ve,me,_e,ye=!(se.isIE=function(){return"ActiveXObject"in window}),be=[],Me=/^\/[^/]/,Ce=!1,ke=[],we={sw8:function(e){return(e=e.split("-")[1])?atob(e):""},traceparent:function(e){return e.split("-")[1]},b3:function(e){return e.split("-")[0]},"sentry-trace":function(e){return e.split("-")[0]}},Te=(new te({name:"reportApiSpeed"}),new te({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config,e),this.overrideXhr(e.config,e))},getRequestType:function(e,t,n){var o,r;return void 0===t&&(t=""),e="function"==typeof(null==(r=e.api)?void 0:r.resourceTypeHandler)?null==(r=e.api)?void 0:r.resourceTypeHandler(n):"",-1===p.indexOf(e)&&(o=void 0===t?"":t,r=(void 0===n?"":n).split("?")[0],e=U.test(r)||P.some((function(e){return-1!==String(o).indexOf(e)}))?"static":"fetch"),e},overrideFetch:function(e,t){var n=this,o={name:this.name,then:function(o,r,i,a){var s,c;C(i,e.hostUrl)||(s=o.headers?o.headers.get("content-type"):"","fetch"===(c=n.getRequestType(e,s,i))?o.clone().text().then((function(s){var l,u=o.status<=0||400<=o.status,d=(null==(d=e.api)?void 0:d.reqHeaders)||[],p=ue(null==a?void 0:a.headers,d,"req"),h=(d=(null==(d=e.api)?void 0:d.resHeaders)||[],ue(o.headers,d,"res")),f=de(null==a?void 0:a.headers),g=(d=b(s,e.api,{url:i,ctx:o,payload:null==a?void 0:a.body})).code,v=d.isErr,m=(d=null==(d=e.api)?void 0:d.apiDetail)?M(null==a?void 0:a.body,null==(l=e.api)?void 0:l.reqParamHandler,{url:i}):"",_=d?M(s,null==(l=e.api)?void 0:l.resBodyHandler,{url:i,ctx:o}):"";setTimeout((function(){var l=n.getPerformanceEntryByUrl(e,{url:i,duration:r,type:c,status:o.status||0,method:(null==a?void 0:a.method)||"get"}),d=(u?"FETCH_ERROR: "+s+" \n\n":"")+"fetch req url: "+i+" \n                    \nres status: "+(o.status||0)+" \n                    \nres duration: "+l.duration+"ms \n                    \nreq method: "+((null==a?void 0:a.method)||"get")+" \n                    \nres retcode: "+g+"\n                    \nreq param: "+m+"\n                    \nres data: "+_+"\n                    "+p+"\n                    "+h;l.payload=null==a?void 0:a.body,l.ret=g,l.isErr=+v,n.publishNormalLog({msg:d,level:u?O.AJAX_ERROR:v?O.RET_ERROR:O.API_RESPONSE,code:g,trace:f},t),n.publishSpeed(l,t)}),0)})):setTimeout((function(){var s=n.getPerformanceEntryByUrl(e,{url:i,duration:r,type:c,status:o.status||0,method:(null==a?void 0:a.method)||"get"});s.type="static",s.urlQuery=m(i,!0),n.publishSpeed(s,t)}),0))},catch:function(o,r,i,a){var s,c,l,u,d;throw C(i,e.hostUrl)||(s=n.getRequestType(e,"",i),c=(null==(c=e.api)?void 0:c.reqHeaders)||[],l=ue(null==a?void 0:a.headers,c,"req"),u=de(null==a?void 0:a.headers),d=null!=(c=e.api)&&c.apiDetail?M(null==a?void 0:a.body,null==(c=e.api)?void 0:c.reqParamHandler,{url:i}):"",setTimeout((function(){var c=n.getPerformanceEntryByUrl(e,{url:i,duration:r,type:s,status:0,method:(null==a?void 0:a.method)||"get"});n.publishSpeed(c,t),c="AJAX_ERROR: "+o+"\n                          \nreq url: "+i+"\n                          \nres status: 0\n                          \nres duration: "+c.duration+"ms\n                          \nreq method: "+((null==a?void 0:a.method)||"get")+"\n                          \nreq param:"+d+"\n                          "+l,n.publishNormalLog({msg:c,level:O.AJAX_ERROR,code:-400,trace:u},t)}),0)),o}},r=(this.hackFetchOptions=o,this.hackFetchOptions);if(ke.find((function(e){return e.name===r.name})))throw new Error("name '"+r.name+"' is already in hackFetch option list");ke.push(r),!Ce&&window.fetch&&(Ce=!0,ge=window.fetch,window.fetch=function(e,t){void 0===t&&(t={});var n="string"==typeof e?e:null==e?void 0:e.url;Me.test(n)&&(n=""+location.origin+n);for(var o=0;o<ke.length;o++){var r=ke[o];try{"function"==typeof r.beforeFetch&&r.beforeFetch(n,t)}catch(a){}}var i=Date.now();return ge(e,t).then((function(e){for(var o=e.clone(),r=0;r<ke.length;r++){var a=ke[r];try{"function"==typeof a.then&&a.then(o,Date.now()-i,n,t)}catch(s){}}return o})).catch((function(e){for(var o=0;o<ke.length;o++){var r=ke[o];try{"function"==typeof r.catch&&r.catch(e,Date.now()-i,n,t)}catch(a){}}throw e}))})},overrideXhr:function(e,t){var n,o=this,r={name:this.name,send:function(n,r){var i=Date.now();n.addEventListener("loadend",(function(){var a,s,c,l,u=n.aegisUrl||"";C(u,e.hostUrl)||"abort"===n.failType||(a="",(n.failType||!n.status||400<=n.status)&&(a=n.failType||"failed"),s=Date.now()-i,c=n.getResponseHeader("content-type"),l=o.getRequestType(e,c,u),setTimeout((function(){var i=o.getPerformanceEntryByUrl(e,{url:u,duration:s,type:l,status:n.status,method:n.aegisMethod||"get"});if("fetch"===l){var c=(null==(c=e.api)?void 0:c.reqHeaders)||[],d=ue(n.aegisXhrReqHeader,c,"req"),p=(c=(null==(c=e.api)?void 0:c.resHeaders)||[],n.getAllResponseHeaders().split("\r\n").reduce((function(e,t){return(t=t.split(": "))[0]&&t[1]&&(e[t[0]]=t[1]),e}),{})),h=ue(p,c,"res"),f=de(n.aegisXhrReqHeader),g=(c=null==(p=e.api)?void 0:p.apiDetail)?M(r,null==(p=e.api)?void 0:p.reqParamHandler,{url:u}):"",v=c?M(n.response,null==(p=e.api)?void 0:p.resBodyHandler,{url:u}):"";try{var _,y,b,C,k=n.response,w=e.api,T={url:u,ctx:n,payload:r},S=function(e){var n=e.code,s=(e=e.isErr,(a?"AJAX_ERROR: request "+a+" \n\n":"")+"fetch req url: "+u+" \n                      \nres status: "+i.status+"\n                      \nres duration: "+i.duration+"ms\n                      \nreq method: "+i.method+"\n                      \nres retcode: "+n+"\n                      \nreq param: "+g+"\n                      \nres data: "+v+"\n                      "+d+"\n                      "+h);i.ret=n,i.isErr=+e,i.payload=r,o.publishNormalLog({msg:s,level:a?O.AJAX_ERROR:e?O.RET_ERROR:O.API_RESPONSE,code:n,trace:f},t),o.publishSpeed(i,t)};try{if("function"==typeof(null==w?void 0:w.retCodeHandlerAsync))return void w.retCodeHandlerAsync(k,null==T?void 0:T.url,null==T?void 0:T.ctx,(function(e){var t=e.code;e=e.isErr,null!=S&&S({code:void 0===t?"unknown":t,isErr:e})}));if("function"==typeof(null==w?void 0:w.retCodeHandler))return b=(y=w.retCodeHandler(k,null==T?void 0:T.url,null==T?void 0:T.ctx,null==T?void 0:T.payload)||{}).code,C=y.isErr,void(null!=S&&S({code:void 0===b?"unknown":b,isErr:C}));"string"==typeof k&&(k=JSON.parse(k)),"function"==typeof(null==(_=null==w?void 0:w.ret)?void 0:_.join)&&(G=[].concat(w.ret.map((function(e){return e.toLowerCase()}))));var I=Object.getOwnPropertyNames(k).filter((function(e){return-1!==G.indexOf(e.toLowerCase())}));if(I.length)return"未知"!==(b=k[I[0]])&&""!==b||(b="unknown"),void(null!=S&&S({code:""+b,isErr:0!==b&&"0"!==b&&"unknown"!==b}));null!=S&&S({code:"unknown",isErr:!1})}catch(E){null!=S&&S({code:"unknown",isErr:!1})}}catch(D){i.ret="unknown",o.publishSpeed(i,t)}}else i.type="static",i.urlQuery=m(u,!0),o.publishSpeed(i,t)}),0))})),["abort","error","timeout"].map((function(e){n.addEventListener(e,(function(){n.failType=e}))}))}};this.hackXHROptions=r,n=this.hackXHROptions,be.find((function(e){return e.name===n.name}))||(be.push(n),!ye&&window.XMLHttpRequest&&(pe=window.XMLHttpRequest.prototype.send,he=window.XMLHttpRequest.prototype.open,fe=window.XMLHttpRequest.prototype.setRequestHeader,ye=!0,window.XMLHttpRequest.prototype.open=function(){this.aegisMethod=arguments[0];var e=arguments[1];if(Me.test(e)&&(e=""+location.origin+e),this.aegisUrl=e,this.aegisXhrStartTime=Date.now(),this.sendByAegis)se.isIE()||(this.timeout=5e3);else for(var t=0;t<be.length;t++){var n=be[t];try{"function"==typeof n.open&&n.open(this)}catch(o){}}return he.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0],t=arguments[1];return this.aegisXhrReqHeader=this.aegisXhrReqHeader||{},this.aegisXhrReqHeader[e]=t,fe.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<be.length;e++){var t=be[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(n){}}return pe.apply(this,arguments)}))},getPerformanceEntryByUrl:function(e,t){return null!=(e=e.api)&&e.usePerformanceTiming&&"string"==typeof t.url&&(e=null==(e=performance.getEntriesByName(t.url))?void 0:e.pop())?{url:t.url,isHttps:y(t.url),method:t.method,type:t.type,status:t.status,duration:Number(e.duration.toFixed(2)),nextHopProtocol:e.nextHopProtocol||"",domainLookup:v(e.domainLookupEnd-e.domainLookupStart),connectTime:v(e.connectEnd-e.connectStart)}:{url:t.url,isHttps:y(t.url),method:t.method,type:t.type,status:t.status,duration:Number(t.duration.toFixed(2)),nextHopProtocol:"",domainLookup:s.number,connectTime:s.number}},publishSpeed:function(e,t){var n=this;this.$walk((function(o){var i;o===t&&(i=n.$getConfig(o),"fetch"===e.type&&i&&"function"==typeof i.urlHandler?o.speedLogPipeline(r(r({},e),{url:m(i.urlHandler(e.url,e.payload))})):(e.url=m(e.url),o.speedLogPipeline(e)))}))},publishNormalLog:function(e,t){this.$walk((function(n){n===t&&n.normalLogPipeline(e)}))},destroy:function(){var e,t,n;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&(e=this.option.hackXHROptions,-1!==(n=be.findIndex((function(t){return t.name===e.name}))))&&be.splice(n,1),this.option.hackFetchOptions&&(t=this.option.hackFetchOptions,-1!==(n=ke.findIndex((function(e){return e.name===t.name}))))&&ke.splice(n,1),this.option.override=!1}})),Se={},Ie=new te({name:"reportBridgeSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideBridge(e))},publishSpeed:function(e,t){this.$walk((function(n){n===t&&n.speedLogPipeline(e)}))},overrideBridge:function(e){var t=this,n=e.config;n.reportBridgeSpeed&&n.h5Bridge&&n.h5BridgeFunc.length&&n.h5BridgeFunc.forEach((function(o){var r=n.h5Bridge[o];Se[o]=r,n.h5Bridge[o]=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=o[0],s=o[1],c=o[2],l=o[3],u=Date.now();r(a,s,c,(function(o){var r=(i=b(o,n.api)).code,i=i.isErr;r={url:a+"-"+s,name:a+"-"+s,duration:Date.now()-u,type:"bridge",ret:r,isErr:+i},t.publishSpeed(r,e),l(o)}))}}))},unHackBridge:function(e){Object.keys(Se).forEach((function(t){Se[t]&&(e.config.h5Bridge[t]=Se[t])})),Se={}},destroy:function(e){this.option.publishSpeed=function(){},this.option.unHackBridge(e),this.option.override=!1}});function Ee(e,t,n,o){return void 0===n&&(n=3e4),void 0===o&&(o=0),(t=void 0===t?0:t)<=e&&e<=n?e:o}(Ge=ve=ve||{})[Ge.unknown=100]="unknown",Ge[Ge.wifi=1]="wifi",Ge[Ge.net2g=2]="net2g",Ge[Ge.net3g=3]="net3g",Ge[Ge.net4g=4]="net4g",Ge[Ge.net5g=5]="net5g",Ge[Ge.net6g=6]="net6g",(Ge=me=me||{})[Ge.android=1]="android",Ge[Ge.ios=2]="ios",Ge[Ge.windows=3]="windows",Ge[Ge.macos=4]="macos",Ge[Ge.linux=5]="linux",Ge[Ge.other=100]="other",(Ge=_e=_e||{})[Ge.unknown=100]="unknown",Ge[Ge.normal=0]="normal",Ge[Ge.weak=1]="weak",Ge[Ge.disconnected=2]="disconnected";var De,Ae,Le,Re,Oe,xe,Ne,Pe,Ue,Ge=new te({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",ve.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e),this.refreshNetworkStatusToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var e={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},t=Object.keys(e).find((function(t){return e[t].test(navigator.userAgent)}));return t?me[t]:me.other},refreshNetworkTypeToBean:function(e){var t=this,n=e.config;n&&("function"==typeof n.getNetworkType?n.getNetworkType:Be)((function(n){ve[n]||(n=ve.unknown),e.extendBean("netType",n),t.NetworkRefreshTimer=setTimeout((function(){t.refreshNetworkTypeToBean(e),clearTimeout(t.NetworkRefreshTimer)}),1e4)}))},refreshNetworkStatusToBean:function(e){var t,n=this,o=e.config;o&&null!=(t="function"==typeof o.getNetworkStatus?o.getNetworkStatus:t)&&t((function(t){void 0===_e[t]&&(t=_e.unknown),e.extendBean("netStatus",t),n.NetworkStatusRefreshTimer=setTimeout((function(){n.refreshNetworkStatusToBean(e),clearTimeout(n.NetworkStatusRefreshTimer)}),1e4)}))}}),Be=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||"unknown",0<=(n=String(n).toLowerCase()).indexOf("4g")?ve.net4g:0<=n.indexOf("wifi")?ve.wifi:0<=n.indexOf("5g")?ve.net5g:0<=n.indexOf("6g")?ve.net6g:0<=n.indexOf("3g")?ve.net3g:0<=n.indexOf("2g")?ve.net2g:ve.unknown))},Fe=window.WebSocket,qe=[],Ve={construct:function(e,t){var n=new e(t[0],t[1]);return n.originSend=n.send,n.addEventListener("error",(function(e){var t=(e=(null==e?void 0:e.currentTarget)||{}).url,n=e.readyState;null!=qe&&qe.forEach((function(e){null!=(e=e.onErr)&&e({msg:"无法获知具体错误信息，需在浏览器控制台查看！",readyState:n,connectUrl:t})}))})),Object.defineProperty(n,"send",{get:function(){return function(e){null!=(t=n.originSend)&&t.call(n,e);var t=n.readyState,o=(e=WebSocket.OPEN,WebSocket.CLOSED),i=WebSocket.CONNECTING,a=WebSocket.CLOSING;if(t!==e){var s={readyState:t,connectUrl:n.url};switch(t){case o:qe.forEach((function(e){null!=(e=e.sendErr)&&e(r({msg:"消息发送失败，连接已关闭！"},s))}));break;case i:qe.forEach((function(e){(0,e.sendErr)(r({msg:"消息发送失败，正在连接中！"},s))}));break;case a:qe.forEach((function(e){(0,e.sendErr)(r({msg:"消息发送失败，连接正在关闭！"},s))}))}}}}}),n}},He=new te({name:"onError"}),ze=He=new te({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(e){function t(t){(t=t&&F(t.reason))&&c.publishErrorLog({msg:"PROMISE_ERROR: "+t,level:O.PROMISE_ERROR},e)}function n(t){var n;if(t=(null==t?void 0:t.target)||(null==t?void 0:t.srcElement)){var o=t.src||t.href||"";if(t=void 0===(t=t.tagName)?"script":t,!(C(n=o,e.config.hostUrl)||-1<window.location.href.indexOf(n))){var r={msg:t+" load fail: "+o,level:O.INFO};if(/\.js$/.test(o))r.level=O.SCRIPT_ERROR;else if(/\.css$/.test(o))r.level=O.CSS_ERROR;else switch(t.toLowerCase()){case"script":r.level=O.SCRIPT_ERROR;break;case"link":r.level=O.CSS_ERROR;break;case"img":r.level=O.IMAGE_ERROR;break;case"audio":case"video":r.level=O.MEDIA_ERROR;break;default:return}c.publishErrorLog(r,e)}}}var o,r,a,s,c=this,l=window.onerror;window.onerror=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o,r=F(t[0]);"string"==typeof(o=r)&&o&&!u.some((function(e){return-1<o.indexOf(e)}))&&c.publishErrorLog({msg:(r||"")+" @ ("+(F(t[1])||"")+":"+(t[2]||0)+":"+(t[3]||0)+")\n          \n"+F(t[4]||""),level:O.ERROR},e),null!=l&&l.call.apply(l,i([window],t))},window.addEventListener("unhandledrejection",t),window.document.addEventListener("error",n,!0),e.lifeCycle.on("destroy",(function(){0===He.countInstance()&&(window.document.removeEventListener("unhandledrejection",t),window.document.removeEventListener("error",n,!0))})),e.config.websocketHack&&(o={key:e.config.id+"-"+this.name,onErr:function(t){var n;null!=(n=c.publishWsErrorLog)&&n.call(c,t,e)},sendErr:function(t){var n;null!=(n=c.publishWsErrorLog)&&n.call(c,t,e)}},this.hackWebsocketConfig=o,o=this.hackWebsocketConfig,window.Proxy)&&window.WebSocket&&(r=window.WebSocket,window&&!r.isHack&&(a=new Proxy(WebSocket,Ve),r.isHack=!0,window.WebSocket=a),s=o,qe.find((function(e){return e.key===s.key}))||s&&qe.push(s))},publishErrorLog:function(e,t){this.$walk((function(n){n===t&&n.normalLogPipeline(e)}))},publishWsErrorLog:function(e,t){var n=e.connectUrl,o=e.msg;e=e.readyState,this.publishErrorLog({msg:"WEBSOCKET_ERROR: \n              connect: "+n+"\n              readyState: "+e+"\n              msg: "+o,level:O.WEBSOCKET_ERROR},t)},destroy:function(){var e,t;this.option.publishErrorLog=function(){},this.option.hackWebsocketConfig&&(e=this.option.hackWebsocketConfig,window.WebSocket=Fe,-1!==(t=qe.findIndex((function(t){return t.key===e.key}))))&&qe.splice(t,1)}}),je=(new te({name:"pagePerformance"}),3),$e=new te({name:"pagePerformance",onNewAegis:function(e){A()&&(De?this.publish(De,e):this.startCalcPerformance(e))},publish:function(e,t){var n=this;this.$walk((function(o){o===t&&o.sendPipeline([function(e,t){var r,i=[];for(r in e)i.push(r+"="+e[r]);var a,s=n.$getConfig(o);if(s)return a=-1===(null==(a=o.config.performanceUrl)?void 0:a.indexOf("?"))?"?":"&","function"==typeof s.urlHandler?t({url:o.config.performanceUrl+a+i.join("&")+"&from="+(encodeURIComponent(s.urlHandler())||window.location.href),beanFilter:["from"],type:x.PERFORMANCE,log:e}):t({url:o.config.performanceUrl+a+i.join("&"),type:x.PERFORMANCE,log:e})}],x.PERFORMANCE)(e)}))},startCalcPerformance:function(e){var t=this;try{this.getFirstScreenTiming(e,(function(n){var o=performance.timing;o&&(De={dnsLookup:Ee(o.domainLookupEnd-o.domainLookupStart),tcp:Ee(o.connectEnd-o.connectStart),ssl:Ee(0===o.secureConnectionStart?0:o.requestStart-o.secureConnectionStart),ttfb:Ee(o.responseStart-o.requestStart),contentDownload:Ee(o.responseEnd-o.responseStart),domParse:Ee(o.domInteractive-o.domLoading,0,3e4,1070),resourceDownload:Ee(o.loadEventStart-o.domInteractive,0,3e4,1070),firstScreenTiming:Ee(Math.floor(n),0,6e4)},(o=e.config).extraPerformanceData&&"{}"!==JSON.stringify(o.extraPerformanceData)&&(o=(n=o.extraPerformanceData).engineInit,n=n.bundleLoad,De=r(r({},De),{engineInit:Ee(o,0,1e4),bundleLoad:Ee(n,0,1e4)})),t.publish(De,e))}))}catch(n){}},getFirstScreenTiming:function(e,t){e.lifeCycle.on("destroy",(function(){c&&clearTimeout(c)}));var n=this,o=["script","style","link","br"],r=[],i={},a=new MutationObserver((function(e){var t={roots:[],rootsDomNum:[],time:performance.now()};e.forEach((function(e){e&&e.addedNodes&&e.addedNodes.forEach&&e.addedNodes.forEach((function(e){1===e.nodeType&&e.hasAttribute("AEGIS-FIRST-SCREEN-TIMING")?(Object.prototype.hasOwnProperty.apply(i,[t.time])||(i[t.time]=[]),i[t.time].push(e)):1!==e.nodeType||-1!==o.indexOf(e.nodeName.toLocaleLowerCase())||n.isEleInArray(e,t.roots)||e.hasAttribute("AEGIS-IGNORE-FIRST-SCREEN-TIMING")||(t.roots.push(e),t.rootsDomNum.push(n.walkAndCount(e)||0))}))})),t.roots.length&&r.push(t)})),s=(a.observe(document,{childList:!0,subtree:!0}),function(o){(o=void 0===o?0:o)||(l=0,(d=Object.keys(i)).length?(o=Math.max.apply(null,d),("object"!=typeof(null==(d=e.config)?void 0:d.pagePerformance)||null!=(d=e.config.pagePerformance)&&d.firstScreenInfo)&&(e.firstScreenInfo={element:null==(d=i[o])?void 0:d[0],timing:o,markDoms:i})):r.forEach((function(t){for(var r,i=0;i<t.roots.length;i++)t.rootsDomNum[i]>l&&n.isInFirstScreen(t.roots[i])&&(l=t.rootsDomNum[i],o=t.time,"object"!=typeof(null==(r=e.config)?void 0:r.pagePerformance)||null!=(r=e.config.pagePerformance)&&r.firstScreenInfo)&&(e.firstScreenInfo={element:t.roots[i],timing:o})})),r.length=0,Object.keys(i).forEach((function(e){i[e]=i[e].map((function(e){var t={tagName:e.tagName},n=e.attributes;if(!n)return e;for(var o=0;o<n.length;o++){var r=n[o];r.name&&(t[r.name]=e.getAttribute(r.name))}return t}))})));var l,u=(d=performance.timing).domInteractive-d.domLoading,d=d.loadEventStart-d.domInteractive,p=o;c=null;for(var h=0,f=[u,d,p];h<f.length;h++)if(f[h]<=0&&0<je){c=setTimeout((function(){return s(p)}),3e3);break}c?--je:(a.disconnect(),null!=t&&t(o))}),c=setTimeout((function(){return s()}),3e3)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){var t,n;return!(!e||"function"!=typeof e.getBoundingClientRect)&&(e=e.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth,0<=e.left)&&e.left<n&&0<=e.top&&e.top<t&&0<e.width&&0<e.height},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var o=0;o<n.length;o++)t+=this.walkAndCount(n[o])}return t}});function We(){Oe=[],Le=-1,Ae=null,Xe(addEventListener)}function Ke(e,t){Ae||(Ae=t,Le=e,Re=new Date,Xe(removeEventListener),Ye())}function Ye(){var e;0<=Le&&Le<Re-Ne&&(e={entryType:"first-input",name:Ae.type,target:Ae.target,cancelable:Ae.cancelable,startTime:Ae.timeStamp,processingStart:Ae.timeStamp+Le},Oe.forEach((function(t){t(e)})),Oe=[])}function Xe(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Pe,xe)}))}function Je(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}}function Ze(e,t){try{var n;if(PerformanceObserver.supportedEntryTypes.includes(e)&&("first-input"!==e||"PerformanceEventTiming"in self))return(n=new PerformanceObserver((function(e){return e.getEntries().map(t)}))).observe({type:e,buffered:!0}),n}catch(o){}}function Qe(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)}function et(e,t,n){var o;return function(){0<=t.value&&(n||ct.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(o||0),t.delta||void 0===o)&&(o=t.value,e(t))}}function tt(){st((function(e){e=e.timeStamp,lt=e}),!0)}function nt(){return lt<0&&((lt=self.webVitals.firstHiddenTime)===1/0&&tt(),Qe((function(){setTimeout((function(){lt="hidden"===document.visibilityState?0:1/0,tt()}),0)}))),{get timeStamp(){return lt}}}function ot(e){var t=e.name;0<(e=e.value)&&(ut[t]=e)}function rt(e,t){function n(e){l=e}function o(e){s=s.concat(e)}function i(e,t){c={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}}var s=[],c=null,l=null;ht.useAsyncPlugin(e,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",o),e.lifeCycle.on("uploadLogs",i),e.lifeCycle.on("onConfigChange",n)},onAegisInitAndPluginLoaded:function(e,u){var d,p,h,f,g,v,m=void 0===(m=t.dbConfig)?{}:m,_=void 0===(_=t.url)?ht.urls.aegisCollect:_,y=void 0===(y=t.offlineLogExp)?3:y,b=t.id,M=t.uin;null!=(d=e.lifeCycle)&&d.remove("beforeWrite",o),null!=(d=e.lifeCycle)&&d.remove("uploadLogs",i),null!=(d=e.lifeCycle)&&d.remove("onConfigChange",n),_=Object.assign({lookupUrl:_+"/offlineAuto?id="+b,preservedDay:y,id:b,uin:M,aid:(null==(d=e.bean)?void 0:d.aid)||"",beforeRequest:e.config.beforeRequest,afterRequest:e.config.afterRequest},m,{sessionId:ht.sessionID});try{var C=new u(_);s.forEach((function(e){C.add(r(r({},e),{level:e.level===O.INFO_ALL?O.INFO:e.level}))})),null!=(p=e.lifeCycle)&&p.on("beforeWrite",(function(e){(e=void 0===e?[]:e).forEach((function(e){C.add(r(r({},e),{level:e.level===O.INFO_ALL?O.INFO:e.level}))}))})),null!=(h=e.lifeCycle)&&h.on("uploadLogs",(function(n,o){var r;void 0===n&&(n={}),void 0===o&&(o={}),C.uploadLogs(Object.assign({id:t.id,uin:t.uin,aid:null==(r=e.bean)?void 0:r.aid},n),o)})),null!=(f=e.lifeCycle)&&f.on("onConfigChange",(function(e){C.setConfig(e)})),null!=(g=e.lifeCycle)&&g.on("destroy",(function(){0===ft.countInstance()&&(s.length=0,"function"==typeof((c=null)==C?void 0:C.destroy))&&C.destroy()})),C.on("PERREVENT",(function(n){e.sendPipeline([function(e,n){o={msg:F(e),level:O.INFO};var o=(o=Array.isArray(o)?o:[o]).map((function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return a(n)+"["+t+"]="+(void 0===e[n]?"":a(e[n]))})).join("&")})).join("&")+(o.length?"&count="+o.length:"");n({type:x.OFFLINE,data:o,contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:t.url+"?id=893&sessionId="+ht.sessionID+"&uin="+t.uin+"&from="+t.id+"&count=1&version=1.37.1",log:e})}],x.OFFLINE)(n)})),l&&(C.setConfig(l),l=null),c&&(null!=(v=e.lifeCycle)&&v.emit("uploadLogs",c.conds,c.params),c=null),e.flog=C}catch(k){console.log(k)}}})}xe={passive:!0,capture:!0},Ne=new Date,Pe=function(e){var t,n,o,r;function i(){Ke(n,o),r()}function a(){r()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,o=e,r=function(){removeEventListener("pointerup",i,xe),removeEventListener("pointercancel",a,xe)},addEventListener("pointerup",i,xe),addEventListener("pointercancel",a,xe)):Ke(t,e))},Ue="hidden"===document.visibilityState?0:1/0,addEventListener("visibilitychange",(function e(t){"hidden"===document.visibilityState&&(Ue=t.timeStamp,removeEventListener("visibilitychange",e,!0))}),!0),We(),self.webVitals={firstInputPolyfill:function(e){Oe.push(e),Ye()},resetFirstInputPolyfill:We,get firstHiddenTime(){return Ue}};var it,at,st=function(e,t){function n(o){"pagehide"!==o.type&&"hidden"!==document.visibilityState||(e(o),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},ct=new("function"==typeof WeakSet?WeakSet:Set),lt=-1,ut=(new te({name:"webVitals"}),{FCP:-1,LCP:-1,FID:-1,CLS:-1}),dt=new te({name:"webVitals",onNewAegis:function(e){if(A()&&"function"==typeof window.PerformanceObserver&&"function"==typeof performance.getEntriesByName)try{m=ot,y=nt(),b=Je("FCP"),M=performance.getEntriesByName("first-contentful-paint")[0],C=M?null:Ze("paint",T),(M||C)&&(_=et(m,b,void 0),M&&T(M),Qe((function(e){b=Je("FCP"),_=et(m,b,void 0),requestAnimationFrame((function(){requestAnimationFrame((function(){b.value=performance.now()-e.timeStamp,ct.add(b),_()}))}))}))),d=ot,f=nt(),g=Je("LCP"),(v=Ze("largest-contentful-paint",w))&&(p=et(d,g,void 0),h=function(){ct.has(g)||(v.takeRecords().map(w),v.disconnect(),ct.add(g),p())},["keydown","click"].forEach((function(e){addEventListener(e,h,{once:!0,capture:!0})})),st(h,!0),Qe((function(e){g=Je("LCP"),p=et(d,g,void 0),requestAnimationFrame((function(){requestAnimationFrame((function(){g.value=performance.now()-e.timeStamp,ct.add(g),p()}))}))}))),a=ot,s=nt(),c=Je("FID"),l=Ze("first-input",k),u=et(a,c,void 0),l&&st((function(){l.takeRecords().map(k),l.disconnect()}),!0),l||window.webVitals.firstInputPolyfill(k),Qe((function(){c=Je("FID"),u=et(a,c,void 0),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(k)})),n=ot,r=Je("CLS",0),(i=Ze("layout-shift",t))&&(o=et(n,r,void 0),st((function(){i.takeRecords().map(t),o()})),Qe((function(){r=Je("CLS",0),o=et(n,r,void 0)}))),L(this.publish.bind(this,e),!0)}catch(S){}function t(e){e.hadRecentInput||(r.value+=e.value,r.entries.push(e),o())}var n,o,r,i,a,s,c,l,u,d,p,h,f,g,v,m,_,y,b,M,C;function k(e){e.startTime<s.timeStamp&&(c.value=e.processingStart-e.startTime,c.entries.push(e),ct.add(c),u())}function w(e){var t=e.startTime;t<f.timeStamp&&(g.value=t,g.entries.push(e)),p()}function T(e){"first-contentful-paint"===e.name&&(C&&C.disconnect(),e.startTime<y.timeStamp)&&(b.value=e.startTime,b.entries.push(e),ct.add(b),_())}},publish:function(e){this.$walk((function(t){var n;t===e&&null!=(n=t.sendPipeline)&&n.call(t,[function(e,n){var o,r=[];for(o in e)r.push(o+"="+e[o]);var i=-1===(null==(i=null==(i=t.config)?void 0:i.performanceUrl)?void 0:i.indexOf("?"))?"?":"&";n({url:t.config.webVitalsUrl+i+r.join("&"),type:x.VITALS,log:e,sendBeacon:!0})}],x.VITALS)(ut)}))},destroy:function(){this.option.publish=function(){}}}),pt=0,ht=(o(at=mt,ee=it=ee),at.prototype=null===ee?Object.create(ee):(_t.prototype=ee.prototype,new _t),mt.prototype.getBean=function(e){var t=this;return void 0===e&&(e=[]),""+Object.getOwnPropertyNames(this.bean).filter((function(t){return-1===e.indexOf(t)})).map((function(e){return"from"===e?"from="+t.getCurrentPageUrl():e+"="+t.bean[e]})).join("&")},mt.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href;return e=(e="function"==typeof this.config.urlHandler?this.config.urlHandler():e).slice(0,2048),encodeURIComponent(e)},mt.prototype.ready=function(){function e(){var n,o,r,i;t.reportRequestQueue.length&&(n=t.reportRequestQueue.splice(0,1)[0],o=n.options,r=n.success,i=n.fail,t.$request(o,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return null==r?void 0:r.apply(o,t)}finally{e()}}),(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return null==i?void 0:i.apply(o,t)}finally{e()}})))}var t=this;e(),this.isReportReady=!0},mt.prototype.request=function(e,t,n){this.config.reportImmediately||this.isReportReady?this.$request(e,t,n):this.reportRequestQueue.push({options:e,success:t,fail:n})},mt.prototype.$request=function(e,t,n){var o,r,i,a;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)return a=e.url,!1!==e.addBean&&(a=a+(-1===a.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=a,a=e.method||"get",(e=(r=this.config.onBeforeRequest)?r(e,this):e)?e.url?void((null!=e&&e.sendBeacon||this.sendNow)&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(e.url,e.data):((o=new XMLHttpRequest).sendByAegis=!0,o.addEventListener("readystatechange",(function(){4===o.readyState&&(400<=o.status||0===o.status?null!=n&&n(o.response):null!=t&&t(o.response))})),"get"===a.toLocaleLowerCase()?(o.open("get",(r=e.url,i=e.data,"string"!=typeof r?"":"object"==typeof i&&i?(a=Object.getOwnPropertyNames(i).map((function(e){var t=i[e];return e+"="+("string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)))})).join("&").replace(/eval/gi,"evaI"),r+(-1===r.indexOf("?")?"?":"&")+a):r)),o.send()):(o.open("post",e.url),e.contentType&&o.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),o.send(e.data)))):console.warn("Please handle the parameters reasonably, options.url is necessary"):console.warn("Sending request blocked")},mt.useAsyncPlugin=function(e,t){var n,o=void 0===(n=(t=void 0===t?{}:t).exportsConstructor)?"aegis-plugin-"+pt:n,r=void 0===(n=t.onAegisInit)?function(){}:n,i=void 0===(n=t.onAegisInitAndPluginLoaded)?function(){}:n;if(pt+=1,"string"!=typeof e)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof r||"function"!=typeof i)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new te({name:"asyncPlugin",onNewAegis:function(t){try{r(t),mt.asyncPlugin[e]?i(t,window[mt.asyncPlugin[e]]):(n=e,a=o,s=function(n){n||(mt.asyncPlugin[e]=o,n=window[o],i(t,n))},c=document.createElement("script"),l=document.head,"function"==typeof a&&(s=a,a=""),c.src=n,c.setAttribute("name",a),c.name=a,c.setAttribute("crossorigin","anonymous"),c.crossorigin="anonymous",c.defer=!0,c.hasLoaded=!1,c.onreadystatechange=function(){c.hasLoaded||c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(c.hasLoaded=!0,"function"==typeof s&&s(!1),setTimeout((function(){l.contains(c)&&l.removeChild(c)})))},c.onload=c.onreadystatechange,c.onerror=function(){"function"==typeof s&&s(!0),setTimeout((function(){l.contains(c)&&l.removeChild(c)}))},"complete"===document.readyState?l.appendChild(c):window.addEventListener("load",(function(){l.appendChild(c)})))}catch(u){console.log("error on below is caused by "+e+" "),console.error(u)}var n,a,s,c,l}}))},mt.prototype.publishPluginsLogs=function(){var e=mt.installedPlugins.find((function(e){return"reportAssetSpeed"===e.name}));null!=e&&e.option.collectNotReportedLog(this)},mt.prototype.uploadLogs=function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={}),null!=(n=this.lifeCycle)&&n.emit("uploadLogs",e,t)},mt.sessionID="session-"+Date.now(),mt.asyncPlugin={},mt.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.2/flog.core.min.js"},mt),ft=new te({name:"offlineLog"}),gt=(ee=ft=new te({name:"offlineLog",onNewAegis:function(e){rt(ht.urls.flog,e.config)}}),new te({name:"spa"}),["replaceState","pushState","popstate","hashchange"]),vt=new te({name:"spa",originFireUrl:"",onNewAegis:function(e){var t=this;history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState,this.sendPv=this.sendPv.bind(this,e),e.config.spa&&this.sendPv(),gt.forEach((function(n){return window.addEventListener(n,(function(){return t.sendPv.call(t,e)}))}))},wr:function(e){var t=history[e],n="__"+e+"__hasWrittenByTamSpa";return"function"==typeof t&&!history[n]&&(Object.defineProperty(history,n,{value:!0,enumerable:!1}),function(){var n=t.apply(this,arguments),o=null;return"function"==typeof Event?o=new Event(e):(o=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),window.dispatchEvent(o),n})},sendPv:function(e){var t=this;setTimeout((function(){var n=location.href,o=location.pathname+location.hash;t.$walk((function(r){var i;r===e&&(i=r.config.pvUrl)&&o&&o!==t.originFireUrl&&(r.sendPipeline([function(e,t){t({url:i+"?from="+encodeURIComponent(n),beanFilter:["from"],type:x.PV})}],x.PV)(null),t.originFireUrl=o)}))}),0)},destroy:function(){this.option.sendPv=function(){}}});function mt(e){var t,n,o,i,a=it.call(this,e)||this;a.sendNow=!1,a.isReportReady=!1,a.reportRequestQueue=[],a.speedLogPipeline=E([k(a),(i=a.config,function(e,t){var n,o,r,a="number"==typeof i.repeat?i.repeat:60;!i.speedSample||a<=0?t(e):(n=(null==i?void 0:i.id)||"0",o=Y[n]||{},Array.isArray(e)?(r=e.filter((function(e){var t=!o[e.url]||o[e.url]<a;return t?(o[e.url]=1+~~o[e.url],Y[n]=o):K[n]||X(n),t}))).length&&t(r):!o[e.url]||o[e.url]<a?(o[e.url]=1+~~o[e.url],Y[n]=o,t(e)):K[n]||X(n))}),(o=a,function(e,t){Be((function(n){o.extendBean("netType",n),t(e)}))}),function(e,t){null!=(n=a.lifeCycle)&&n.emit("beforeReportSpeed",e);var n,o=a.config.beforeReportSpeed;if((e="function"==typeof o?e.filter((function(e){return!1!==o(e)})):e).length)return t(e)},function(e){return a.sendPipeline([function(e,t){var n,o,i,s;t({type:x.SPEED,url:""+a.config.speedUrl,method:"post",data:(t=e,n=r(r({},a.bean),{from:a.getCurrentPageUrl()}),i={fetch:[],static:[],bridge:[]},s=new FormData,Array.isArray(t)?t.forEach((function(e){var t=oe(e);i[e.type].push(t)})):(o=oe(t),i[t.type].push(o)),s.append("payload",q(r({duration:i},n))),s),log:e})}],x.SPEED)(e)}]),e.asyncPlugin=!0;try{"undefined"!=typeof document&&(e.uin=e.uin||(null!=(t=document.cookie.match(/\buin=\D+(\d*)/))?t:[])[1]||(null!=(n=document.cookie.match(/\bilive_uin=\D*(\d+)/))?n:[])[1]||""),a.init(e),a.extendBean("sessionId",mt.sessionID),a.extendBean("from",a.getCurrentPageUrl()),"undefined"!=typeof document&&a.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&a.extendBean("ext1",encodeURIComponent(e.ext1)),e.ext2&&a.extendBean("ext2",encodeURIComponent(e.ext2)),e.ext3&&a.extendBean("ext3",encodeURIComponent(e.ext3))}catch(s){console.warn(s),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),a.sendSDKError(s)}return a}function _t(){this.constructor=at}new te({name:"ie"}),new te({name:"onClose"});var yt=new te({name:"onClose",onNewAegis:function(e){var t,n=this;se.desktop()?(t=window.onunload,window.onunload=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n.publishNotReportedLog(e),null!=t&&t.call.apply(t,i([window],o))}):L(this.publishNotReportedLog.bind(this,e),!0)},publishNotReportedLog:function(e){var t=this;this.$walk((function(n){n===e&&(n.sendNow=!0,n.publishPluginsLogs(),t.publishThrottlePipeLogs(n))}))},publishThrottlePipeLogs:function(e){null!=e&&e.speedLogPipeline([]),null!=e&&e.eventPipeline([]),null!=e&&e.customTimePipeline([]),null!=e&&e.normalLogPipeline([])}});return new te({name:"aid"}),ht.use(ze),ht.use(Te),ht.use(ie),ht.use($e),ht.use(dt),ht.use(ne),ht.use(Ge),ht.use(ee),ht.use(vt),ht.use(yt),ht.use(Ie),ht}();const qD=FD;const VD={all:HD=HD||new Map,on:function(e,t){var n=HD.get(e);n?n.push(t):HD.set(e,[t])},off:function(e,t){var n=HD.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):HD.set(e,[]))},emit:function(e,t){var n=HD.get(e);n&&n.slice().map((function(e){e(t)})),(n=HD.get("*"))&&n.slice().map((function(n){n(e,t)}))}};var HD;const zD=new qD({id:RD,reportApiSpeed:!0});uni.$aegis=zD,uni.$TUIKit=PD.create({SDKAppID:1400813717}),uni.$TIM=PD;const jD={data:()=>({isself:!1,tabbar:bk,successSX:1,config:{userID:"",SDKAppID:1400813717,secretKey:"c74d2910cc6c7180b015d75d44e73ba0af399d5f3e3d159c6d09bd5903ff01a0"}}),onLaunch:function(){if(I_("gogx",!0),A_("UUID"));else{let e=function(e,t){var n,o,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||r.length,e)for(n=0;n<e;n++)i[n]=r[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(o=0|16*Math.random(),i[n]=r[19===n?3&o|8:o]);return i.join("")}(32,16);I_("UUID",e),console.log("生成uuid",A_("UUID"))}if(plus.runtime.isAgreePrivacy()){console.log("disfisf");uni.requireNativePlugin("leven-device-UniqueModule").getAll((e=>{console.log(e,"安卓获取设备唯一标识"),I_("deviceInfo",e.data)}))}VD.on("loginOut",(e=>{this.isself=e})),this.bindTIMEvent(),console.log("App Launch"),vw.dispatch("getUserInfo"),th("getUserInfo",(()=>{vw.dispatch("getUserInfo")}))},onShow:function(){this.getcodeInfo();let e=[];for(let t=0;t<=6;t++){let n={};n.timeall=this.time(Date.now()+864e5*t).substring(0,10),e.push(n)}e.forEach((e=>{L_("焦点赛程"+e.timeall),L_("焦点赛果"+e.timeall),L_("足球赛程"+e.timeall),L_("足球赛果"+e.timeall),L_("篮球赛程"+e.timeall),L_("篮球赛果"+e.timeall)}));["即时","进行中","赛程","赛果","收藏"].forEach((e=>{L_("焦点"+e),L_("焦点"+e+"total"),L_("焦点"+e+"page"),L_("焦点"+e+"SX"),L_("足球"+e),L_("足球"+e+"total"),L_("足球"+e+"page"),L_("足球"+e+"SX"),L_("篮球"+e),L_("篮球"+e+"total"),L_("篮球"+e+"page"),L_("篮球"+e+"SX")})),L_("推荐"),console.log("App Show"),this.gettypelist()},onHide:function(){console.log("App Hide")},methods:{bindTIMEvent(){uni.$TUIKit.on(uni.$TIM.EVENT.SDK_READY,this.handleSDKReady),uni.$TUIKit.on(uni.$TIM.EVENT.SDK_NOT_READY,this.handleSDKNotReady,this),uni.$TUIKit.on(uni.$TIM.EVENT.KICKED_OUT,this.handleKickedOut)},handleSDKReady(e){uni.$chat_isSDKReady=!0,jy(),vy({url:"/pages/TUIKit/TUIPages/TUIConversation/index"})},handleSDKNotReady(e){console.log(e),isself||Ly({title:"提示",content:"当前账号已在其他设备登录聊天室",cancelText:"退出登录",confirmText:"重新进入",success:e=>{if(e.confirm){console.log("用户点击确定"),this.config.userID=String(A_("user_Id"));const e=LD(this.config).userSig;uni.$TUIKit.login({userID:String(A_("user_Id")),userSig:e}).then((e=>{}))}else e.cancel&&(console.log("用户点击取消"),vw.commit("CHANGE_USER_ID",""),vw.commit("CHANGE_USER_INFO",{}),L_("user_Id"),I_("currentIndex",0),My({url:"/pages/myView/index",animationType:"pop-in",animationDuration:200}))}})},handleKickedOut(e){Ly({title:"提示",content:"当前账号已在其他设备登录聊天室",cancelText:"退出登录",confirmText:"重新进入",success:e=>{if(e.confirm){console.log("用户点击确定"),this.config.userID=String(A_("user_Id"));const e=LD(this.config).userSig;uni.$TUIKit.login({userID:String(A_("user_Id")),userSig:e}).then((e=>{}))}else e.cancel&&(console.log("用户点击取消"),vw.commit("CHANGE_USER_ID",""),vw.commit("CHANGE_USER_INFO",{}),L_("user_Id"),I_("currentIndex",0),My({url:"/pages/myView/index",animationType:"pop-in",animationDuration:200}))}})},kickedOutReason(e){switch(e){case uni.$TIM.TYPES.KICKED_OUT_MULT_ACCOUNT:return"多实例登录";case uni.$TIM.TYPES.KICKED_OUT_MULT_DEVICE:return"多设备登录";case uni.$TIM.TYPES.KICKED_OUT_USERSIG_EXPIRED:return"userSig 过期";case uni.$TIM.TIM.TYPES.KICKED_OUT_REST_API:return"REST API kick 接口踢出";default:return""}},getWeekDate(e){var t=new Date(e).getDay();return new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六")[t]},time:e=>new Date(e+288e5).toJSON().substring(0,19).replace("T"," "),gettypelist(){Mk("/Live/GetMatchTypeList").then((e=>{e.Result.forEach((e=>{e.ChildList.forEach((e=>{console.log(e),L_(e.name_zh)}))}))})),Mk("/Information/GetInfo_Type_List").then((e=>{e.Result.forEach((e=>{L_(e.Info_Type_Name+"ZX")}))}))},getcodeInfo(){console.log({Code:uni.$Code,Imei:A_("deviceInfo").imei,Oaid:A_("deviceInfo").OAID,GUID:A_("deviceInfo").guid,Android_id:A_("deviceInfo").androidID,UUID:A_("UUID")},"==============uuid"),Mk("/User/Get_CodeInfo",{Code:uni.$Code,Imei:A_("deviceInfo").imei,Oaid:A_("deviceInfo").OAID,GUID:A_("deviceInfo").guid,Android_id:A_("deviceInfo").androidID,UUID:A_("UUID")}).then((e=>{if(I_("New_State",e.Result.New_State),I_("Chat_State",e.Result.Chat_State),I_("Animation_State",e.Result.Animation_State),0==e.Result.New_State&&0==e.Result.Chat_State){var t=this.tabbar.list.findIndex((e=>(console.log(e,"========="),"资讯"==e.text)));-1!=t&&this.tabbar.list.splice(t,1);var n=this.tabbar.list.findIndex((e=>(console.log(e,"========="),"聊天"==e.text)));-1!=n&&this.tabbar.list.splice(n,1)}if(1==e.Result.New_State&&0==e.Result.Chat_State){var o=this.tabbar.list.findIndex((e=>(console.log(e,"========="),"聊天"==e.text)));-1!=o&&this.tabbar.list.splice(o,1)}0==e.Result.New_State&&1==e.Result.Chat_State&&(-1!=this.tabbar.list.findIndex((e=>(console.log(e,"========="),"资讯"==e.text)))&&this.tabbar.list.splice(t,1))}))}}};Bm(jD,{init:Um,setup(e){const t=Yv(),n=()=>{var n;n=e,Object.keys(Nh).forEach((e=>{Nh[e].forEach((t=>{_r(e,t,n)}))}));const{onLaunch:o,onShow:r,onPageNotFound:i,onError:a}=e,s=function({path:e,query:t}){return M(Vf,{path:e,query:t}),M(Hf,Vf),M({},Vf)}({path:t.path.slice(1)||__uniRoutes[0].meta.route,query:ot(t.query)});if(o&&K(o,s),r&&K(r,s),!t.matched.length){const e={notFound:!0,openType:"appLaunch",path:t.path,query:{},scene:1001};i&&K(i,e)}a&&(e.appContext.config.errorHandler=e=>{K(a,e)})};return Po(wl).isReady().then(n),Mr((()=>{window.addEventListener("resize",at(qm,50,{setTimeout:setTimeout,clearTimeout:clearTimeout})),window.addEventListener("message",Vm),document.addEventListener("visibilitychange",Hm),function(){let e=null;try{e=window.matchMedia("(prefers-color-scheme: dark)")}catch(t){}if(e){let t=e=>{qb.emit(he,{theme:e.matches?"dark":"light"})};e.addEventListener?e.addEventListener("change",t):e.addListener(t)}}()})),t.query},before(e){e.mpType="app";const{setup:t}=e,n=()=>(Fi(),ji(Sb));e.setup=(e,o)=>{const r=t&&t(e,o);return D(r)?n:r},e.render=n}});var $D={},WD={get exports(){return $D},set exports(e){$D=e}};var KD={},YD={get exports(){return KD},set exports(e){KD=e}};const XD=xD(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var JD;function ZD(){return JD||(JD=1,YD.exports=(e=e||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==OD&&OD.crypto&&(n=OD.crypto),!n)try{n=XD}catch(g){}var o=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},a=i.lib={},s=a.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,r=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<r;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=a<<24-(o+i)%4*8}else for(var s=0;s<r;s+=4)t[o+s>>>2]=n[s>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new c.init(t,e)}}),l=i.enc={},u=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var i=t[r>>>2]>>>24-r%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new c.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var i=t[r>>>2]>>>24-r%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new c.init(n,t)}},p=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(gS){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,o=this._data,r=o.words,i=o.sigBytes,a=this.blockSize,s=i/(4*a),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*l,i);if(l){for(var d=0;d<l;d+=a)this._doProcessBlock(r,d);n=r.splice(0,l),o.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=h.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=i.algo={};return i}(Math),e)),KD;var e}var QD,eA={},tA={get exports(){return eA},set exports(e){eA=e}};function nA(){return QD||(QD=1,tA.exports=(a=ZD(),n=(t=a).lib,o=n.Base,r=n.WordArray,(i=t.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],o=0;o<t;o++){var i=e[o];n.push(i.high),n.push(i.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),a)),eA;var e,t,n,o,r,i,a}var oA,rA={},iA={get exports(){return rA},set exports(e){rA=e}};function aA(){return oA||(oA=1,iA.exports=(e=ZD(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,o=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,o=[],r=0;r<t;r++)o[r>>>2]|=e[r]<<24-r%4*8;n.call(this,o,t)}else n.apply(this,arguments)};o.prototype=t}}(),e.lib.WordArray)),rA;var e}var sA,cA={},lA={get exports(){return cA},set exports(e){cA=e}};function uA(){return sA||(sA=1,lA.exports=(e=ZD(),function(){var t=e,n=t.lib.WordArray,o=t.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r+=2){var i=t[r>>>2]>>>16-r%4*8&65535;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,o=[],r=0;r<t;r++)o[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return n.create(o,2*t)}},o.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i+=2){var a=r(t[i>>>2]>>>16-i%4*8&65535);o.push(String.fromCharCode(a))}return o.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i++)o[i>>>1]|=r(e.charCodeAt(i)<<16-i%2*16);return n.create(o,2*t)}}}(),e.enc.Utf16)),cA;var e}var dA,pA={},hA={get exports(){return pA},set exports(e){pA=e}};function fA(){return dA||(dA=1,hA.exports=(e=ZD(),function(){var t=e,n=t.lib.WordArray;function o(e,t,o){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=o[e.charCodeAt(a-1)]<<a%4*2|o[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return n.create(r,i)}t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var r=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)r.push(o.charAt(a>>>6*(3-s)&63));var c=o.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return o(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)),pA;var e}var gA,vA={},mA={get exports(){return vA},set exports(e){vA=e}};function _A(){return gA||(gA=1,mA.exports=(e=ZD(),function(){var t=e,n=t.lib.WordArray;function o(e,t,o){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=o[e.charCodeAt(a-1)]<<a%4*2|o[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return n.create(r,i)}t.enc.Base64url={stringify:function(e,t=!0){var n=e.words,o=e.sigBytes,r=t?this._safe_map:this._map;e.clamp();for(var i=[],a=0;a<o;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<o;c++)i.push(r.charAt(s>>>6*(3-c)&63));var l=r.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e,t=!0){var n=e.length,r=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<r.length;a++)i[r.charCodeAt(a)]=a}var s=r.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(n=c)}return o(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url)),vA;var e}var yA,bA={},MA={get exports(){return bA},set exports(e){bA=e}};function CA(){return yA||(yA=1,MA.exports=(e=ZD(),function(t){var n=e,o=n.lib,r=o.WordArray,i=o.Hasher,a=n.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=a.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,r=e[o];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i=this._hash.words,a=e[t+0],c=e[t+1],h=e[t+2],f=e[t+3],g=e[t+4],v=e[t+5],m=e[t+6],_=e[t+7],y=e[t+8],b=e[t+9],M=e[t+10],C=e[t+11],k=e[t+12],w=e[t+13],T=e[t+14],S=e[t+15],I=i[0],E=i[1],D=i[2],A=i[3];I=l(I,E,D,A,a,7,s[0]),A=l(A,I,E,D,c,12,s[1]),D=l(D,A,I,E,h,17,s[2]),E=l(E,D,A,I,f,22,s[3]),I=l(I,E,D,A,g,7,s[4]),A=l(A,I,E,D,v,12,s[5]),D=l(D,A,I,E,m,17,s[6]),E=l(E,D,A,I,_,22,s[7]),I=l(I,E,D,A,y,7,s[8]),A=l(A,I,E,D,b,12,s[9]),D=l(D,A,I,E,M,17,s[10]),E=l(E,D,A,I,C,22,s[11]),I=l(I,E,D,A,k,7,s[12]),A=l(A,I,E,D,w,12,s[13]),D=l(D,A,I,E,T,17,s[14]),I=u(I,E=l(E,D,A,I,S,22,s[15]),D,A,c,5,s[16]),A=u(A,I,E,D,m,9,s[17]),D=u(D,A,I,E,C,14,s[18]),E=u(E,D,A,I,a,20,s[19]),I=u(I,E,D,A,v,5,s[20]),A=u(A,I,E,D,M,9,s[21]),D=u(D,A,I,E,S,14,s[22]),E=u(E,D,A,I,g,20,s[23]),I=u(I,E,D,A,b,5,s[24]),A=u(A,I,E,D,T,9,s[25]),D=u(D,A,I,E,f,14,s[26]),E=u(E,D,A,I,y,20,s[27]),I=u(I,E,D,A,w,5,s[28]),A=u(A,I,E,D,h,9,s[29]),D=u(D,A,I,E,_,14,s[30]),I=d(I,E=u(E,D,A,I,k,20,s[31]),D,A,v,4,s[32]),A=d(A,I,E,D,y,11,s[33]),D=d(D,A,I,E,C,16,s[34]),E=d(E,D,A,I,T,23,s[35]),I=d(I,E,D,A,c,4,s[36]),A=d(A,I,E,D,g,11,s[37]),D=d(D,A,I,E,_,16,s[38]),E=d(E,D,A,I,M,23,s[39]),I=d(I,E,D,A,w,4,s[40]),A=d(A,I,E,D,a,11,s[41]),D=d(D,A,I,E,f,16,s[42]),E=d(E,D,A,I,m,23,s[43]),I=d(I,E,D,A,b,4,s[44]),A=d(A,I,E,D,k,11,s[45]),D=d(D,A,I,E,S,16,s[46]),I=p(I,E=d(E,D,A,I,h,23,s[47]),D,A,a,6,s[48]),A=p(A,I,E,D,_,10,s[49]),D=p(D,A,I,E,T,15,s[50]),E=p(E,D,A,I,v,21,s[51]),I=p(I,E,D,A,k,6,s[52]),A=p(A,I,E,D,f,10,s[53]),D=p(D,A,I,E,M,15,s[54]),E=p(E,D,A,I,c,21,s[55]),I=p(I,E,D,A,y,6,s[56]),A=p(A,I,E,D,S,10,s[57]),D=p(D,A,I,E,m,15,s[58]),E=p(E,D,A,I,w,21,s[59]),I=p(I,E,D,A,g,6,s[60]),A=p(A,I,E,D,C,10,s[61]),D=p(D,A,I,E,h,15,s[62]),E=p(E,D,A,I,b,21,s[63]),i[0]=i[0]+I|0,i[1]=i[1]+E|0,i[2]=i[2]+D|0,i[3]=i[3]+A|0},_doFinalize:function(){var e=this._data,n=e.words,o=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var i=t.floor(o/4294967296),a=o;n[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,o,r,i,a){var s=e+(t&n|~t&o)+r+a;return(s<<i|s>>>32-i)+t}function u(e,t,n,o,r,i,a){var s=e+(t&o|n&~o)+r+a;return(s<<i|s>>>32-i)+t}function d(e,t,n,o,r,i,a){var s=e+(t^n^o)+r+a;return(s<<i|s>>>32-i)+t}function p(e,t,n,o,r,i,a){var s=e+(n^(t|~o))+r+a;return(s<<i|s>>>32-i)+t}n.MD5=i._createHelper(c),n.HmacMD5=i._createHmacHelper(c)}(Math),e.MD5)),bA;var e}var kA,wA={},TA={get exports(){return wA},set exports(e){wA=e}};function SA(){return kA||(kA=1,TA.exports=(s=ZD(),t=(e=s).lib,n=t.WordArray,o=t.Hasher,r=e.algo,i=[],a=r.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],a=n[2],s=n[3],c=n[4],l=0;l<80;l++){if(l<16)i[l]=0|e[t+l];else{var u=i[l-3]^i[l-8]^i[l-14]^i[l-16];i[l]=u<<1|u>>>31}var d=(o<<5|o>>>27)+c+i[l];d+=l<20?1518500249+(r&a|~r&s):l<40?1859775393+(r^a^s):l<60?(r&a|r&s|a&s)-1894007588:(r^a^s)-899497514,c=s,s=a,a=r<<30|r>>>2,r=o,o=d}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=o._createHelper(a),e.HmacSHA1=o._createHmacHelper(a),s.SHA1)),wA;var e,t,n,o,r,i,a,s}var IA,EA={},DA={get exports(){return EA},set exports(e){EA=e}};function AA(){return IA||(IA=1,DA.exports=(e=ZD(),function(t){var n=e,o=n.lib,r=o.WordArray,i=o.Hasher,a=n.algo,s=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),o=2;o<=n;o++)if(!(e%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var o=2,r=0;r<64;)e(o)&&(r<8&&(s[r]=n(t.pow(o,.5))),c[r]=n(t.pow(o,1/3)),r++),o++}();var l=[],u=a.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],i=n[2],a=n[3],s=n[4],u=n[5],d=n[6],p=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var f=l[h-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,v=l[h-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[h]=g+l[h-7]+m+l[h-16]}var _=o&r^o&i^r&i,y=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),b=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+c[h]+l[h];p=d,d=u,u=s,s=a+b|0,a=i,i=r,r=o,o=b+(y+_)|0}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+p|0},_doFinalize:function(){var e=this._data,n=e.words,o=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(o/4294967296),n[15+(r+64>>>9<<4)]=o,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(u),n.HmacSHA256=i._createHmacHelper(u)}(Math),e.SHA256)),EA;var e}var LA,RA={},OA={get exports(){return RA},set exports(e){RA=e}};var xA,NA={},PA={get exports(){return NA},set exports(e){NA=e}};function UA(){return xA||(xA=1,PA.exports=(e=ZD(),nA(),function(){var t=e,n=t.lib.Hasher,o=t.x64,r=o.Word,i=o.WordArray,a=t.algo;function s(){return r.create.apply(r,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var u=a.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],i=n[2],a=n[3],s=n[4],u=n[5],d=n[6],p=n[7],h=o.high,f=o.low,g=r.high,v=r.low,m=i.high,_=i.low,y=a.high,b=a.low,M=s.high,C=s.low,k=u.high,w=u.low,T=d.high,S=d.low,I=p.high,E=p.low,D=h,A=f,L=g,R=v,O=m,x=_,N=y,P=b,U=M,G=C,B=k,F=w,q=T,V=S,H=I,z=E,j=0;j<80;j++){var $,W,K=l[j];if(j<16)W=K.high=0|e[t+2*j],$=K.low=0|e[t+2*j+1];else{var Y=l[j-15],X=Y.high,J=Y.low,Z=(X>>>1|J<<31)^(X>>>8|J<<24)^X>>>7,Q=(J>>>1|X<<31)^(J>>>8|X<<24)^(J>>>7|X<<25),ee=l[j-2],te=ee.high,ne=ee.low,oe=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,re=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=l[j-7],ae=ie.high,se=ie.low,ce=l[j-16],le=ce.high,ue=ce.low;W=(W=(W=Z+ae+(($=Q+se)>>>0<Q>>>0?1:0))+oe+(($+=re)>>>0<re>>>0?1:0))+le+(($+=ue)>>>0<ue>>>0?1:0),K.high=W,K.low=$}var de,pe=U&B^~U&q,he=G&F^~G&V,fe=D&L^D&O^L&O,ge=A&R^A&x^R&x,ve=(D>>>28|A<<4)^(D<<30|A>>>2)^(D<<25|A>>>7),me=(A>>>28|D<<4)^(A<<30|D>>>2)^(A<<25|D>>>7),_e=(U>>>14|G<<18)^(U>>>18|G<<14)^(U<<23|G>>>9),ye=(G>>>14|U<<18)^(G>>>18|U<<14)^(G<<23|U>>>9),be=c[j],Me=be.high,Ce=be.low,ke=H+_e+((de=z+ye)>>>0<z>>>0?1:0),we=me+ge;H=q,z=V,q=B,V=F,B=U,F=G,U=N+(ke=(ke=(ke=ke+pe+((de+=he)>>>0<he>>>0?1:0))+Me+((de+=Ce)>>>0<Ce>>>0?1:0))+W+((de+=$)>>>0<$>>>0?1:0))+((G=P+de|0)>>>0<P>>>0?1:0)|0,N=O,P=x,O=L,x=R,L=D,R=A,D=ke+(ve+fe+(we>>>0<me>>>0?1:0))+((A=de+we|0)>>>0<de>>>0?1:0)|0}f=o.low=f+A,o.high=h+D+(f>>>0<A>>>0?1:0),v=r.low=v+R,r.high=g+L+(v>>>0<R>>>0?1:0),_=i.low=_+x,i.high=m+O+(_>>>0<x>>>0?1:0),b=a.low=b+P,a.high=y+N+(b>>>0<P>>>0?1:0),C=s.low=C+G,s.high=M+U+(C>>>0<G>>>0?1:0),w=u.low=w+F,u.high=k+B+(w>>>0<F>>>0?1:0),S=d.low=S+V,d.high=T+q+(S>>>0<V>>>0?1:0),E=p.low=E+z,p.high=I+H+(E>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(o+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(u),t.HmacSHA512=n._createHmacHelper(u)}(),e.SHA512)),NA;var e}var GA,BA={},FA={get exports(){return BA},set exports(e){BA=e}};var qA,VA={},HA={get exports(){return VA},set exports(e){VA=e}};function zA(){return qA||(qA=1,HA.exports=(e=ZD(),nA(),function(t){var n=e,o=n.lib,r=o.WordArray,i=o.Hasher,a=n.x64.Word,s=n.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var o=(2*e+3*t)%5;e=t%5,t=o}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,i=0;i<24;i++){for(var s=0,d=0,p=0;p<7;p++){if(1&r){var h=(1<<p)-1;h<32?d^=1<<h:s^=1<<h-32}128&r?r=r<<1^113:r<<=1}u[i]=a.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var p=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,o=this.blockSize/2,r=0;r<o;r++){var i=e[t+2*r],a=e[t+2*r+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(E=n[r]).high^=a,E.low^=i}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var h=0,f=0,g=0;g<5;g++)h^=(E=n[p+5*g]).high,f^=E.low;var v=d[p];v.high=h,v.low=f}for(p=0;p<5;p++){var m=d[(p+4)%5],_=d[(p+1)%5],y=_.high,b=_.low;for(h=m.high^(y<<1|b>>>31),f=m.low^(b<<1|y>>>31),g=0;g<5;g++)(E=n[p+5*g]).high^=h,E.low^=f}for(var M=1;M<25;M++){var C=(E=n[M]).high,k=E.low,w=c[M];w<32?(h=C<<w|k>>>32-w,f=k<<w|C>>>32-w):(h=k<<w-32|C>>>64-w,f=C<<w-32|k>>>64-w);var T=d[l[M]];T.high=h,T.low=f}var S=d[0],I=n[0];for(S.high=I.high,S.low=I.low,p=0;p<5;p++)for(g=0;g<5;g++){var E=n[M=p+5*g],D=d[M],A=d[(p+1)%5+5*g],L=d[(p+2)%5+5*g];E.high=D.high^~A.high&L.high,E.low=D.low^~A.low&L.low}E=n[0];var R=u[s];E.high^=R.high,E.low^=R.low}},_doFinalize:function(){var e=this._data,n=e.words;this._nDataBytes;var o=8*e.sigBytes,i=32*this.blockSize;n[o>>>5]|=1<<24-o%32,n[(t.ceil((o+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var d=a[u],p=d.high,h=d.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),l.push(h),l.push(p)}return new r.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=i._createHelper(p),n.HmacSHA3=i._createHmacHelper(p)}(Math),e.SHA3)),VA;var e}var jA,$A={},WA={get exports(){return $A},set exports(e){$A=e}};var KA,YA={},XA={get exports(){return YA},set exports(e){YA=e}};function JA(){return KA||(KA=1,XA.exports=(e=ZD(),n=(t=e).lib.Base,o=t.enc.Utf8,void(t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))),YA;var e,t,n,o}var ZA,QA={},eL={get exports(){return QA},set exports(e){QA=e}};var tL,nL={},oL={get exports(){return nL},set exports(e){nL=e}};function rL(){return tL||(tL=1,oL.exports=(s=ZD(),SA(),JA(),t=(e=s).lib,n=t.Base,o=t.WordArray,r=e.algo,i=r.MD5,a=r.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),a=o.create(),s=a.words,c=r.keySize,l=r.iterations;s.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var u=1;u<l;u++)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*c,a}}),e.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)},s.EvpKDF)),nL;var e,t,n,o,r,i,a,s}var iL,aL={},sL={get exports(){return aL},set exports(e){aL=e}};function cL(){return iL||(iL=1,sL.exports=(e=ZD(),rL(),void(e.lib.Cipher||function(t){var n=e,o=n.lib,r=o.Base,i=o.WordArray,a=o.BufferedBlockAlgorithm,s=n.enc;s.Utf8;var c=s.Base64,l=n.algo.EvpKDF,u=o.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?y:m}return function(t){return{encrypt:function(n,o,r){return e(o).encrypt(t,n,o,r)},decrypt:function(n,o,r){return e(o).decrypt(t,n,o,r)}}}}()});o.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=n.mode={},p=o.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=d.CBC=function(){var e=p.extend();function n(e,n,o){var r,i=this._iv;i?(r=i,this._iv=t):r=this._prevBlock;for(var a=0;a<o;a++)e[n+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize;n.call(this,e,t,r),o.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize,i=e.slice(t,t+r);o.decryptBlock(e,t),n.call(this,e,t,r),this._prevBlock=i}}),e}(),f=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,o=n-e.sigBytes%n,r=o<<24|o<<16|o<<8|o,a=[],s=0;s<o;s+=4)a.push(r);var c=i.create(a,o);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};o.BlockCipher=u.extend({cfg:u.cfg.extend({mode:h,padding:f}),reset:function(){var e;u.reset.call(this);var t=this.cfg,n=t.iv,o=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=o.createEncryptor:(e=o.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(o,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var g=o.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),o=n.words;return 1398893684==o[0]&&1701076831==o[1]&&(t=i.create(o.slice(2,4)),o.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},m=o.SerializableCipher=r.extend({cfg:r.extend({format:v}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var r=e.createEncryptor(n,o),i=r.finalize(t),a=r.cfg;return g.create({ciphertext:i,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(n,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(n.kdf={}).OpenSSL={execute:function(e,t,n,o){o||(o=i.random(8));var r=l.create({keySize:t+n}).compute(e,o),a=i.create(r.words.slice(t),4*n);return r.sigBytes=4*t,g.create({key:r,iv:a,salt:o})}},y=o.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:_}),encrypt:function(e,t,n,o){var r=(o=this.cfg.extend(o)).kdf.execute(n,e.keySize,e.ivSize);o.iv=r.iv;var i=m.encrypt.call(this,e,t,r.key,o);return i.mixIn(r),i},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var r=o.kdf.execute(n,e.keySize,e.ivSize,t.salt);return o.iv=r.iv,m.decrypt.call(this,e,t,r.key,o)}})}()))),aL;var e}var lL,uL={},dL={get exports(){return uL},set exports(e){uL=e}};var pL,hL={},fL={get exports(){return hL},set exports(e){hL=e}};var gL,vL={},mL={get exports(){return vL},set exports(e){vL=e}};function _L(){return gL||(gL=1,mL.exports=(e=ZD(),cL(),
/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */
e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,o=255&e;255===t?(t=0,255===n?(n=0,255===o?o=0:++o):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=o}else e+=1<<24;return e}function o(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0),o(a);var s=a.slice(0);n.encryptBlock(s,0);for(var c=0;c<r;c++)e[t+c]^=s[c]}});return t.Decryptor=r,t}(),e.mode.CTRGladman)),vL;var e}var yL,bL={},ML={get exports(){return bL},set exports(e){bL=e}};var CL,kL={},wL={get exports(){return kL},set exports(e){kL=e}};var TL,SL={},IL={get exports(){return SL},set exports(e){SL=e}};var EL,DL={},AL={get exports(){return DL},set exports(e){DL=e}};var LL,RL={},OL={get exports(){return RL},set exports(e){RL=e}};var xL,NL={},PL={get exports(){return NL},set exports(e){NL=e}};var UL,GL={},BL={get exports(){return GL},set exports(e){GL=e}};var FL,qL={},VL={get exports(){return qL},set exports(e){qL=e}};var HL,zL={},jL={get exports(){return zL},set exports(e){zL=e}};var $L,WL={},KL={get exports(){return WL},set exports(e){WL=e}};function YL(){return $L||($L=1,KL.exports=(e=ZD(),fA(),CA(),rL(),cL(),function(){var t=e,n=t.lib,o=n.WordArray,r=n.BlockCipher,i=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var o=a[n]-1;t[n]=e[o>>>5]>>>31-o%32&1}for(var r=this._subKeys=[],i=0;i<16;i++){var l=r[i]=[],u=c[i];for(n=0;n<24;n++)l[n/6|0]|=t[(s[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(s[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=r[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),p.call(this,1,1431655765);for(var o=0;o<16;o++){for(var r=n[o],i=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((a^r[c])&u[c])>>>0];this._lBlock=a,this._rBlock=i^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,p.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=r._createHelper(d);var f=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),r=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(o.create(t)),this._des2=d.createEncryptor(o.create(n)),this._des3=d.createEncryptor(o.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(f)}(),e.TripleDES)),WL;var e}var XL,JL={},ZL={get exports(){return JL},set exports(e){JL=e}};var QL,eR={},tR={get exports(){return eR},set exports(e){eR=e}};var nR,oR,rR,iR,aR,sR,cR,lR={},uR={get exports(){return lR},set exports(e){lR=e}};WD.exports=function(e){return e}(ZD(),nA(),aA(),uA(),fA(),_A(),CA(),SA(),AA(),LA||(LA=1,OA.exports=(cR=ZD(),AA(),rR=(oR=cR).lib.WordArray,iR=oR.algo,aR=iR.SHA256,sR=iR.SHA224=aR.extend({_doReset:function(){this._hash=new rR.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=aR._doFinalize.call(this);return e.sigBytes-=4,e}}),oR.SHA224=aR._createHelper(sR),oR.HmacSHA224=aR._createHmacHelper(sR),cR.SHA224)),UA(),function(){return GA||(GA=1,FA.exports=(s=ZD(),nA(),UA(),t=(e=s).x64,n=t.Word,o=t.WordArray,r=e.algo,i=r.SHA512,a=r.SHA384=i.extend({_doReset:function(){this._hash=new o.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}}),e.SHA384=i._createHelper(a),e.HmacSHA384=i._createHmacHelper(a),s.SHA384)),BA;var e,t,n,o,r,i,a,s}(),zA(),function(){return jA||(jA=1,WA.exports=(e=ZD(),
/** @preserve
      			(c) 2012 by Cédric Mesnil. All rights reserved.
      
      			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      
      			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
      			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      
      			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      			*/
function(t){var n=e,o=n.lib,r=o.WordArray,i=o.Hasher,a=n.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=r.create([0,1518500249,1859775393,2400959708,2840853838]),p=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,r=e[o];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i,a,h,b,M,C,k,w,T,S,I,E=this._hash.words,D=d.words,A=p.words,L=s.words,R=c.words,O=l.words,x=u.words;for(C=i=E[0],k=a=E[1],w=h=E[2],T=b=E[3],S=M=E[4],n=0;n<80;n+=1)I=i+e[t+L[n]]|0,I+=n<16?f(a,h,b)+D[0]:n<32?g(a,h,b)+D[1]:n<48?v(a,h,b)+D[2]:n<64?m(a,h,b)+D[3]:_(a,h,b)+D[4],I=(I=y(I|=0,O[n]))+M|0,i=M,M=b,b=y(h,10),h=a,a=I,I=C+e[t+R[n]]|0,I+=n<16?_(k,w,T)+A[0]:n<32?m(k,w,T)+A[1]:n<48?v(k,w,T)+A[2]:n<64?g(k,w,T)+A[3]:f(k,w,T)+A[4],I=(I=y(I|=0,x[n]))+S|0,C=S,S=T,T=y(w,10),w=k,k=I;I=E[1]+h+T|0,E[1]=E[2]+b+S|0,E[2]=E[3]+M+C|0,E[3]=E[4]+i+k|0,E[4]=E[0]+a+w|0,E[0]=I},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,i=r.words,a=0;a<5;a++){var s=i[a];i[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return r},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function v(e,t,n){return(e|~t)^n}function m(e,t,n){return e&n|t&~n}function _(e,t,n){return e^(t|~n)}function y(e,t){return e<<t|e>>>32-t}n.RIPEMD160=i._createHelper(h),n.HmacRIPEMD160=i._createHmacHelper(h)}(),e.RIPEMD160)),$A;var e}(),JA(),function(){return ZA||(ZA=1,eL.exports=(c=ZD(),SA(),JA(),t=(e=c).lib,n=t.Base,o=t.WordArray,r=e.algo,i=r.SHA1,a=r.HMAC,s=r.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=a.create(n.hasher,e),i=o.create(),s=o.create([1]),c=i.words,l=s.words,u=n.keySize,d=n.iterations;c.length<u;){var p=r.update(t).finalize(s);r.reset();for(var h=p.words,f=h.length,g=p,v=1;v<d;v++){g=r.finalize(g),r.reset();for(var m=g.words,_=0;_<f;_++)h[_]^=m[_]}i.concat(p),l[0]++}return i.sigBytes=4*u,i}}),e.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)},c.PBKDF2)),QA;var e,t,n,o,r,i,a,s,c}(),rL(),cL(),function(){return lL||(lL=1,dL.exports=(e=ZD(),cL(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,o){var r,i=this._iv;i?(r=i.slice(0),this._iv=void 0):r=this._prevBlock,o.encryptBlock(r,0);for(var a=0;a<n;a++)e[t+a]^=r[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize;n.call(this,e,t,r,o),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize,i=e.slice(t,t+r);n.call(this,e,t,r,o),this._prevBlock=i}}),t}(),e.mode.CFB)),uL;var e}(),function(){return pL||(pL=1,fL.exports=(n=ZD(),cL(),n.mode.CTR=(e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,i=this._counter;r&&(i=this._counter=r.slice(0),this._iv=void 0);var a=i.slice(0);n.encryptBlock(a,0),i[o-1]=i[o-1]+1|0;for(var s=0;s<o;s++)e[t+s]^=a[s]}}),e.Decryptor=t,e),n.mode.CTR)),hL;var e,t,n}(),_L(),function(){return yL||(yL=1,ML.exports=(n=ZD(),cL(),n.mode.OFB=(e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,i=this._keystream;r&&(i=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<o;a++)e[t+a]^=i[a]}}),e.Decryptor=t,e),n.mode.OFB)),bL;var e,t,n}(),function(){return CL||(CL=1,wL.exports=(t=ZD(),cL(),t.mode.ECB=((e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e),t.mode.ECB)),kL;var e,t}(),function(){return TL||(TL=1,IL.exports=(e=ZD(),cL(),e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,o=4*t,r=o-n%o,i=n+r-1;e.clamp(),e.words[i>>>2]|=r<<24-i%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923)),SL;var e}(),function(){return EL||(EL=1,AL.exports=(e=ZD(),cL(),e.pad.Iso10126={pad:function(t,n){var o=4*n,r=o-t.sigBytes%o;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126)),DL;var e}(),function(){return LL||(LL=1,OL.exports=(e=ZD(),cL(),e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971)),RL;var e}(),function(){return xL||(xL=1,PL.exports=(e=ZD(),cL(),e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding)),NL;var e}(),function(){return UL||(UL=1,BL.exports=(e=ZD(),cL(),e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding)),GL;var e}(),function(){return FL||(FL=1,VL.exports=(o=ZD(),cL(),t=(e=o).lib.CipherParams,n=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var o=n.parse(e);return t.create({ciphertext:o})}},o.format.Hex)),qL;var e,t,n,o}(),function(){return HL||(HL=1,jL.exports=(e=ZD(),fA(),CA(),rL(),cL(),function(){var t=e,n=t.lib.BlockCipher,o=t.algo,r=[],i=[],a=[],s=[],c=[],l=[],u=[],d=[],p=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var f=o^o<<1^o<<2^o<<3^o<<4;f=f>>>8^255&f^99,r[n]=f,i[f]=n;var g=e[n],v=e[g],m=e[v],_=257*e[f]^16843008*f;a[n]=_<<24|_>>>8,s[n]=_<<16|_>>>16,c[n]=_<<8|_>>>24,l[n]=_,_=16843009*m^65537*v^257*g^16843008*n,u[f]=_<<24|_>>>8,d[f]=_<<16|_>>>16,p[f]=_<<8|_>>>24,h[f]=_,n?(n=g^e[e[e[m^g]]],o^=e[e[o]]):n=o=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,o=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<o;a++)a<n?i[a]=t[a]:(l=i[a-1],a%n?n>6&&a%n==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=f[a/n|0]<<24),i[a]=i[a-n]^l);for(var s=this._invKeySchedule=[],c=0;c<o;c++){if(a=o-c,c%4)var l=i[a];else l=i[a-4];s[c]=c<4||a<=4?l:u[r[l>>>24]]^d[r[l>>>16&255]]^p[r[l>>>8&255]]^h[r[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,l,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,p,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,r,i,a,s){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],p=e[t+3]^n[3],h=4,f=1;f<c;f++){var g=o[l>>>24]^r[u>>>16&255]^i[d>>>8&255]^a[255&p]^n[h++],v=o[u>>>24]^r[d>>>16&255]^i[p>>>8&255]^a[255&l]^n[h++],m=o[d>>>24]^r[p>>>16&255]^i[l>>>8&255]^a[255&u]^n[h++],_=o[p>>>24]^r[l>>>16&255]^i[u>>>8&255]^a[255&d]^n[h++];l=g,u=v,d=m,p=_}g=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&p])^n[h++],v=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^n[h++],m=(s[d>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[h++],_=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[h++],e[t]=g,e[t+1]=v,e[t+2]=m,e[t+3]=_},keySize:8});t.AES=n._createHelper(g)}(),e.AES)),zL;var e}(),YL(),function(){return XL||(XL=1,ZL.exports=(e=ZD(),fA(),CA(),rL(),cL(),function(){var t=e,n=t.lib.StreamCipher,o=t.algo,r=o.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,o=this._S=[],r=0;r<256;r++)o[r]=r;r=0;for(var i=0;r<256;r++){var a=r%n,s=t[a>>>2]>>>24-a%4*8&255;i=(i+o[r]+s)%256;var c=o[r];o[r]=o[i],o[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,o=0,r=0;r<4;r++){n=(n+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[n],e[n]=i,o|=e[(e[t]+e[n])%256]<<24-8*r}return this._i=t,this._j=n,o}t.RC4=n._createHelper(r);var a=o.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});t.RC4Drop=n._createHelper(a)}(),e.RC4)),JL;var e}(),function(){return QL||(QL=1,tR.exports=(e=ZD(),fA(),CA(),rL(),cL(),function(){var t=e,n=t.lib.StreamCipher,o=t.algo,r=[],i=[],a=[],s=o.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)r[n]^=o[n+4&7];if(t){var i=t.words,a=i[0],s=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,p=u<<16|65535&l;for(r[0]^=l,r[1]^=d,r[2]^=u,r[3]^=p,r[4]^=l,r[5]^=d,r[6]^=u,r[7]^=p,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),e[t+o]^=r[o]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],r=65535&o,s=o>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&o)*o|0)+((65535&o)*o|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=n._createHelper(s)}(),e.Rabbit)),eR;var e}(),function(){return nR||(nR=1,uR.exports=(e=ZD(),fA(),CA(),rL(),cL(),function(){var t=e,n=t.lib.StreamCipher,o=t.algo,r=[],i=[],a=[],s=o.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)o[r]^=n[r+4&7];if(t){var i=t.words,a=i[0],s=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,p=u<<16|65535&l;for(o[0]^=l,o[1]^=d,o[2]^=u,o[3]^=p,o[4]^=l,o[5]^=d,o[6]^=u,o[7]^=p,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),e[t+o]^=r[o]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],r=65535&o,s=o>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&o)*o|0)+((65535&o)*o|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=n._createHelper(s)}(),e.RabbitLegacy)),lR;var e}());const dR=$D,pR={encrypt(e){let t=dR.enc.Utf8.parse("dbvb3ywoqownm8sjgtcrz2lncdwvfwxt"),n=dR.enc.Utf8.parse("hff8q3gdbowligoo"),o=dR.enc.Utf8.parse(e);return dR.AES.encrypt(o,t,{iv:n,mode:dR.mode.CBC,padding:dR.pad.Pkcs7}).toString()},decrypt(e){let t=dR.enc.Utf8.parse(e);var n=dR.enc.Utf8.parse("dbvb3ywoqownm8sjgtcrz2lncdwvfwxt");let o=dR.enc.Utf8.parse("hff8q3gdbowligoo"),r=dR.enc.Utf8.stringify(t);return dR.AES.decrypt(r,n,{iv:o,mode:dR.mode.CBC,padding:dR.pad.Pkcs7}).toString(dR.enc.Utf8)}};var hR={locks:{},zIndex:2e3,touchmoveForbid:!0};In(hR);const fR=In(hR),gR=e=>"string"==typeof e,vR=e=>"boolean"==typeof e,mR=e=>"number"==typeof e,_R=e=>"[object Object]"===Object.prototype.toString.call(e),yR=e=>"function"==typeof e,bR=e=>Array.isArray(e),MR=e=>!!e&&/^(http)|(\.*\/)/.test(e),CR=e=>null==e||""===e||Array.isArray(e)&&!e.length,kR=e=>null==e?0:gR(e)?(e=parseFloat(e),e=Number.isNaN(e)?0:e):vR(e)?Number(e):e,wR=(e,t)=>{if(e.length){const n=e.indexOf(t);if(n>-1)return e.splice(n,1)}},TR=(e,t=200)=>{let n,o=0;return function r(...i){const a=Date.now(),s=a-o;o||(o=a),n&&window.clearTimeout(n),s>=t?(e.apply(this,i),o=a):n=window.setTimeout((()=>{r.apply(this,i)}),t-s)}},SR=()=>"undefined"!=typeof window,IR=e=>[...new Set(e)],ER=e=>e.replace(/-(\w)/g,((e,t)=>t.toUpperCase())),DR=e=>e.replace(/([A-Z])/g," $1").trim().split(" ").join("-").toLowerCase();var AR=e=>null!=e&&(e.startsWith("data:image")||/\.(png|jpg|gif|jpeg|svg|webp)$/.test(e)),LR=e=>null!=e&&(e.startsWith("data:video")||/\.(mp4|webm|ogg)$/.test(e)),RR=e=>e,OR=e=>Math.pow(e,3),xR=e=>e<.5?OR(2*e)/2:1-OR(2*(1-e))/2,NR=(e,t)=>null==e?t:e,PR=()=>"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:self,UR=function(e,t,n){if(void 0===e&&(e=""),void 0===n&&(n=""),e.length>=t)return e;var o=t-e.length,r=Math.floor(o/n.length);return n.repeat(r)+n.slice(0,o%n.length)+e};function GR(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function BR(e){var{top:t}=e.getBoundingClientRect();return t+(document.body.scrollTop||document.documentElement.scrollTop)}function FR(e){var t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function qR(e){var t="scrollLeft"in e?e.scrollLeft:e.pageXOffset;return Math.max(t,0)}function VR(){var e;return e=function*(e){yield tO();var{top:t,bottom:n,left:o,right:r}=e.getBoundingClientRect(),{innerWidth:i,innerHeight:a}=window;return o<=i&&r>=0&&t<=a&&n>=0},VR=function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){GR(i,o,r,a,s,"next",e)}function s(e){GR(i,o,r,a,s,"throw",e)}a(void 0)}))},VR.apply(this,arguments)}function HR(e){var{transform:t}=window.getComputedStyle(e);return+t.slice(t.lastIndexOf(",")+2,t.length-1)}function zR(e){for(var t=e;t&&t.parentNode&&(t=t.parentNode)!==document.body&&t!==document.documentElement;){var n=/(scroll|auto)/,{overflowY:o,overflow:r}=window.getComputedStyle(t);if(n.test(o)||n.test(r))return t}return window}function jR(e,t){if(gR(e)){var n=document.querySelector(e);if(!n)throw Error("[Varlet] "+t+": target element cannot found");return n}if("object"==typeof(o=e)&&null!==o)return e;var o;throw Error("[Varlet] "+t+': type of prop "target" should be a selector or an element object')}var $R=e=>gR(e)&&e.endsWith("rem"),WR=e=>gR(e)&&e.endsWith("vw"),KR=e=>gR(e)&&e.endsWith("vh"),YR=e=>{if(mR(e))return e;if((e=>gR(e)&&e.endsWith("px")||mR(e))(e))return+e.replace("px","");if(WR(e))return+e.replace("vw","")*window.innerWidth/100;if(KR(e))return+e.replace("vh","")*window.innerHeight/100;if($R(e)){var t=+e.replace("rem",""),n=window.getComputedStyle(document.documentElement).fontSize;return t*parseFloat(n)}return gR(e)?kR(e):0},XR=e=>{if(null!=e)return(e=>gR(e)&&e.endsWith("%"))(e)||WR(e)||KR(e)||$R(e)||(e=>gR(e)&&e.startsWith("calc("))(e)||(e=>gR(e)&&e.startsWith("var("))(e)?e:YR(e)+"px"},JR=function(e,t){if(void 0===t&&(t=1),null!=e){var n=XR(e),o=n.match(/(vh|%|rem|px|vw)$/)[0];return""+parseFloat(n)*t+o}};function ZR(e){var t=PR();return t.requestAnimationFrame?t.requestAnimationFrame(e):t.setTimeout(e,16)}function QR(e){var t=PR();t.cancelAnimationFrame?t.cancelAnimationFrame(e):t.clearTimeout(e)}function eO(e){ZR((()=>{ZR(e)}))}function tO(){return new Promise((e=>{ZR((()=>{ZR(e)}))}))}function nO(e,t){var{top:n=0,left:o=0,duration:r=300,animation:i}=t,a=Date.now(),s=FR(e),c=qR(e);return new Promise((t=>{var l=()=>{var u=(Date.now()-a)/r;if(u<1){var d=s+(n-s)*i(u),p=c+(o-c)*i(u);e.scrollTo(p,d),ZR(l)}else e.scrollTo(o,n),t()};ZR(l)}))}function oO(e){return Object.entries(null!=e?e:{}).reduce(((e,t)=>{var[n,o]=t;return e[n.startsWith("--")?n:"--"+DR(n)]=o,e}),{})}function rO(e){return"start"===e||"end"===e?"flex-"+e:e}function iO(e){let t=!1;Mr((()=>{e(),po((()=>{t=!0}))})),lr((()=>{t&&e()}))}function aO(e,t,n,o={}){if(!SR())return;const{passive:r=!1,capture:i=!1}=o;let a=!1,s=!1;const c=e=>{if(a||s)return;const o=jn(e);o&&(o.addEventListener(t,n,{passive:r,capture:i}),a=!0)},l=e=>{if(!a||s)return;const o=jn(e);o&&(o.removeEventListener(t,n,{capture:i}),a=!1)};let u;Fn(e)&&(u=Bo((()=>e.value),((e,t)=>{l(t),c(e)})));return iO((()=>{c(e)})),wr((()=>{l(e)})),ur((()=>{l(e)})),()=>{null==u||u(),l(e),s=!0}}function sO(e,t,n){if(!SR())return;aO(document,t,(t=>{const o=jn(e);o&&!o.contains(t.target)&&n(t)}))}var cO=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};function lO(e){if(!function(e){return e in da().provides}(e))return{index:null,parentProvider:null,bindParent:null};const t=Po(e),{childInstances:n,collect:o,clear:r}=t,i=cO(t,["childInstances","collect","clear"]),a=da();return{index:Ma((()=>n.indexOf(a))),parentProvider:i,bindParent:e=>{Mr((()=>{po().then((()=>{o(a,e)}))})),wr((()=>{po().then((()=>{r(a,e)}))}))}}}function uO(e){const t=da(),n=In([]),o=[],r=Ma((()=>n.length)),i=()=>{const e=function(e){const t=[],n=e=>{(null==e?void 0:e.component)?n(null==e?void 0:e.component.subTree):Array.isArray(null==e?void 0:e.children)&&e.children.forEach((e=>{$i(e)&&(t.push(e),n(e))}))};return n(e),t}(t.subTree);n.sort(((t,n)=>e.indexOf(t.vnode)-e.indexOf(n.vnode)))},a=(e,t)=>{n.push(e),o.push(t),i()},s=(e,t)=>{wR(n,e),wR(o,t)};return{length:r,childProviders:o,bindChildren:t=>{No(e,Object.assign({childInstances:n,collect:a,clear:s},t))}}}function dO(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function pO(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){dO(i,o,r,a,s,"next",e)}function s(e){dO(i,o,r,a,s,"throw",e)}a(void 0)}))}}function hO(){return hO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},hO.apply(this,arguments)}function fO(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]=e[n],t)),{}):e[t]}function gO(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var o={setup:()=>()=>Ca(e,hO({},t,n))},{unmount:r}=function(e){var t=Hs(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}(o);return{unmountInstance:r}}function vO(e){var t=[];return e.forEach((e=>{e.type!==Pi&&(e.type===xi&&bR(e.children)?e.children.forEach((e=>{t.push(e)})):t.push(e))})),t}function mO(){var e=qn(""),t=function(){var t=pO((function*(t,n,o){return!bR(t)||!t.length||!(yield Promise.all(t.map((e=>e(n,o))))).some((t=>!0!==t&&(e.value=String(t),!0)))}));return function(e,n,o){return t.apply(this,arguments)}}(),n=function(){var n=pO((function*(n,o,r,i,a){n.includes(o)&&(yield t(r,i,a))&&(e.value="")}));return function(e,t,o,r,i){return n.apply(this,arguments)}}();return{errorMessage:e,validate:t,resetValidation:()=>{e.value=""},validateWithTrigger:n}}function _O(){var e=qn(!1);return lr((()=>{e.value=!1})),ur((()=>{e.value=!0})),{disabled:e}}function yO(e){var t="var-"+e;return{n:e=>e?"$"===e[0]?e.replace("$","var"):e.startsWith("--")?""+t+e:t+"__"+e:t,classes:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((e=>{if(bR(e)){var[t,n,o=null]=e;return t?n:o}return e}))}}}function bO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return bR(e)?e.map((e=>e(...n))):e?e(...n):void 0}function MO(e){return{type:[Function,Array],default:e}}function CO(){return CO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},CO.apply(this,arguments)}var{n:kO}=yO("ripple"),wO=250;function TO(e){var t=this._ripple;if(t.removeRipple(),!t.disabled&&!t.tasker){t.tasker=window.setTimeout((()=>{t.tasker=null;var{x:n,y:o,centerX:r,centerY:i,size:a}=function(e,t){var{top:n,left:o}=e.getBoundingClientRect(),{clientWidth:r,clientHeight:i}=e,a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2))/2,s=2*a;return{x:t.touches[0].clientX-o-a,y:t.touches[0].clientY-n-a,centerX:(r-2*a)/2,centerY:(i-2*a)/2,size:s}}(this,e),s=document.createElement("div");s.classList.add(kO()),s.style.opacity="0",s.style.transform="translate("+n+"px, "+o+"px) scale3d(.3, .3, .3)",s.style.width=a+"px",s.style.height=a+"px",t.color&&(s.style.backgroundColor=t.color),s.dataset.createdAt=String(performance.now()),function(e){var{zIndex:t,position:n}=window.getComputedStyle(e);e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden","static"===n&&(e.style.position="relative"),"auto"===t&&(e.style.zIndex="1")}(this),this.appendChild(s),window.setTimeout((()=>{s.style.transform="translate("+r+"px, "+i+"px) scale3d(1, 1, 1)",s.style.opacity=".25"}),20)}),30)}}function SO(){var e=()=>{var e=this.querySelectorAll("."+kO());if(e.length){var t=e[e.length-1],n=wO-performance.now()+Number(t.dataset.createdAt);setTimeout((()=>{t.style.opacity="0",setTimeout((()=>{var e;return null==(e=t.parentNode)?void 0:e.removeChild(t)}),wO)}),n)}};this._ripple.tasker?setTimeout(e,30):e()}function IO(){var e=this._ripple;"undefined"!=typeof window&&"ontouchstart"in window&&e.touchmoveForbid&&(e.tasker&&window.clearTimeout(e.tasker),e.tasker=null)}const EO={mounted:function(e,t){var n,o,r;e._ripple=CO({tasker:null},null!=(n=t.value)?n:{},{touchmoveForbid:null!=(o=null==(r=t.value)?void 0:r.touchmoveForbid)?o:fR.touchmoveForbid,removeRipple:SO.bind(e)}),e.addEventListener("touchstart",TO,{passive:!0}),e.addEventListener("touchmove",IO,{passive:!0}),e.addEventListener("dragstart",SO,{passive:!0}),document.addEventListener("touchend",e._ripple.removeRipple,{passive:!0}),document.addEventListener("touchcancel",e._ripple.removeRipple,{passive:!0})},unmounted:function(e){e.removeEventListener("touchstart",TO),e.removeEventListener("touchmove",IO),e.removeEventListener("dragstart",SO),document.removeEventListener("touchend",e._ripple.removeRipple),document.removeEventListener("touchcancel",e._ripple.removeRipple)},updated:function(e,t){var n,o,r,i,a,s,c,l,u,d={touchmoveForbid:null!=(n=null==(o=t.value)?void 0:o.touchmoveForbid)?n:fR.touchmoveForbid,color:null==(r=t.value)?void 0:r.color,disabled:null==(i=t.value)?void 0:i.disabled};d.touchmoveForbid===(null==(a=e._ripple)?void 0:a.touchmoveForbid)&&d.color===(null==(s=e._ripple)?void 0:s.color)&&d.disabled===(null==(c=e._ripple)?void 0:c.disabled)||(e._ripple=CO({tasker:d.disabled?null:null==(l=e._ripple)?void 0:l.tasker,removeRipple:null==(u=e._ripple)?void 0:u.removeRipple},d))},install(e){e.directive("ripple",this)}};var DO={show:{type:Boolean,default:!1},position:{type:String,default:"center",validator:function(e){return["top","bottom","right","left","center"].includes(e)}},transition:{type:String},overlay:{type:Boolean,default:!0},overlayClass:{type:String},overlayStyle:{type:Object},lockScroll:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},defaultStyle:{type:Boolean,default:!0},teleport:{type:String},onOpen:MO(),onOpened:MO(),onClose:MO(),onClosed:MO(),onClickOverlay:MO(),"onUpdate:show":MO(),onRouteChange:MO()};function AO(){Object.keys(fR.locks).length<=0?document.body.classList.remove("var--lock"):document.body.classList.add("var--lock")}function LO(e){fR.locks[e]=1,AO()}function RO(e){delete fR.locks[e],AO()}function OO(e,t){var{uid:n}=da();t&&Bo(t,(t=>{!1===t?RO(n):!0===t&&!0===e()&&LO(n)})),Bo(e,(e=>{t&&!1===t()||(!0===e?LO(n):RO(n))})),br((()=>{t&&!1===t()||!0===e()&&LO(n)})),Tr((()=>{t&&!1===t()||!0===e()&&RO(n)})),lr((()=>{t&&!1===t()||!0===e()&&LO(n)})),ur((()=>{t&&!1===t()||!0===e()&&RO(n)}))}function xO(e,t){var n=qn(fR.zIndex);return Bo(e,(e=>{e&&(fR.zIndex+=t,n.value=fR.zIndex)}),{immediate:!0}),{zIndex:n}}function NO(){return NO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},NO.apply(this,arguments)}var{n:PO,classes:UO}=yO("popup");const GO=er({name:"VarPopup",inheritAttrs:!1,props:DO,setup(e,t){var n,{slots:o,attrs:r}=t,{zIndex:i}=xO((()=>e.show),3),{disabled:a}=_O(),s=()=>{var{closeOnClickOverlay:t,onClickOverlay:n}=e;bO(n),t&&bO(e["onUpdate:show"],!1)};OO((()=>e.show),(()=>e.lockScroll)),Bo((()=>e.show),(t=>{bO(t?e.onOpen:e.onClose)})),n=()=>bO(e.onRouteChange),aO(window,"hashchange",n),aO(window,"popstate",n);var c=()=>{var{overlayClass:t="",overlayStyle:n}=e;return Zi("div",{class:UO(PO("overlay"),t),style:NO({zIndex:i.value-1},n),onClick:s},null)},l=()=>{var{onOpened:t,onClosed:n,show:a,overlay:s,transition:l,position:u}=e;return Zi(Za,{name:PO("$-fade"),onAfterEnter:t,onAfterLeave:n},{default:()=>[Ar(Zi("div",{class:UO(PO("$--box"),PO()),style:{zIndex:i.value-2}},[s&&c(),Zi(Za,{name:l||PO("$-pop-"+u)},{default:()=>[a&&Zi("div",aa({class:UO(PO("content"),PO("--"+e.position),[e.defaultStyle,PO("--content-background-color")],[e.defaultStyle,PO("$-elevation--3")]),style:{zIndex:i.value}},r),[bO(o.default)])]})]),[[Bs,a]])]})};return()=>{var t,n,{teleport:o}=e;return o?Zi(Ri,{to:o,disabled:a.value},"function"==typeof(n=t=l())||"[object Object]"===Object.prototype.toString.call(n)&&!$i(n)?t:{default:()=>[t]}):l()}}});GO.install=function(e){e.component(GO.name,GO)};var BO={name:{type:String},size:{type:[Number,String]},color:{type:String},namespace:{type:String,default:"var-icon"},transition:{type:[Number,String],default:0},animationClass:{type:String},onClick:MO()};function FO(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}var{n:qO,classes:VO}=yO("icon");var HO=er({name:"VarIcon",props:BO,setup(e){var t=qn(""),n=qn(!1),o=function(){var o,r=(o=function*(o,r){var{transition:i}=e;null!=r&&0!==kR(i)?(n.value=!0,yield po(),setTimeout((()=>{null!=r&&(t.value=o),n.value=!1}),kR(i))):t.value=o},function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){FO(i,n,r,a,s,"next",e)}function s(e){FO(i,n,r,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();return Bo((()=>e.name),o,{immediate:!0}),{n:qO,classes:VO,nextName:t,animateInProgress:n,isURL:MR,toNumber:kR,toSizeUnit:XR}}});HO.render=function(e,n){return Fi(),ji(Pr(e.isURL(e.name)?"img":"i"),{class:a(e.classes(e.n(),[e.namespace!==e.n(),e.namespace],e.namespace+"--set",[e.isURL(e.name),e.n("image"),e.namespace+"-"+e.nextName],[e.animateInProgress,null==e.animationClass?e.n("--shrinking"):e.animationClass])),style:t({color:e.color,"transition-duration":e.toNumber(e.transition)+"ms",width:e.isURL(e.name)?e.toSizeUnit(e.size):null,height:e.isURL(e.name)?e.toSizeUnit(e.size):null,fontSize:e.toSizeUnit(e.size)}),src:e.isURL(e.name)?e.nextName:null,onClick:e.onClick},null,8,["class","style","src","onClick"])};const zO=HO;function jO(){return jO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},jO.apply(this,arguments)}zO.install=function(e){e.component(zO.name,zO)};var $O=jO({show:{type:Boolean,default:!1},actions:{type:Array,default:()=>[]},title:{type:String},closeOnClickAction:{type:Boolean,default:!0},onSelect:MO(),"onUpdate:show":MO()},fO(DO,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"]));const WO={dialogTitle:"提示",dialogConfirmButtonText:"确认",dialogCancelButtonText:"取消",actionSheetTitle:"请选择",listLoadingText:"加载中",listFinishedText:"没有更多了",listErrorText:"加载失败",pickerTitle:"请选择",pickerConfirmButtonText:"确认",pickerCancelButtonText:"取消",datePickerMonthDict:{"01":{name:"一月",abbr:"一月"},"02":{name:"二月",abbr:"二月"},"03":{name:"三月",abbr:"三月"},"04":{name:"四月",abbr:"四月"},"05":{name:"五月",abbr:"五月"},"06":{name:"六月",abbr:"六月"},"07":{name:"七月",abbr:"七月"},"08":{name:"八月",abbr:"八月"},"09":{name:"九月",abbr:"九月"},10:{name:"十月",abbr:"十月"},11:{name:"十一月",abbr:"十一月"},12:{name:"十二月",abbr:"十二月"}},datePickerWeekDict:{0:{name:"星期日",abbr:"日"},1:{name:"星期一",abbr:"一"},2:{name:"星期二",abbr:"二"},3:{name:"星期三",abbr:"三"},4:{name:"星期四",abbr:"四"},5:{name:"星期五",abbr:"五"},6:{name:"星期六",abbr:"六"}},datePickerSelected:"个被选择",paginationItem:"条",paginationPage:"页",paginationJump:"前往"};function KO(){return KO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},KO.apply(this,arguments)}function YO(){var e={},t=qn({}),n=n=>{if(!e[n])return console.warn("The "+n+" does not exist. You can mount a language package using the add method"),{};t.value=e[n]};return{packs:e,pack:t,add:(t,n)=>{n.lang=t,e[t]=n},use:n,merge:(t,o)=>{e[t]?(e[t]=KO({},e[t],o),n(t)):console.warn("The "+t+" does not exist. You can mount a language package using the add method")}}}var{packs:XO,pack:JO,add:ZO,use:QO,merge:ex}=YO();ZO("zh-CN",WO),QO("zh-CN");const tx={zhCN:WO,enUS:{dialogTitle:"Hint",dialogConfirmButtonText:"Confirm",dialogCancelButtonText:"Cancel",actionSheetTitle:"Select One",listLoadingText:"Loading",listFinishedText:"No more",listErrorText:"Load fail",pickerTitle:"Pick it",pickerConfirmButtonText:"Confirm",pickerCancelButtonText:"Cancel",datePickerMonthDict:{"01":{name:"January",abbr:"JAN"},"02":{name:"February",abbr:"FEB"},"03":{name:"March",abbr:"MAR"},"04":{name:"April",abbr:"APR"},"05":{name:"May",abbr:"MAY"},"06":{name:"June",abbr:"JUN"},"07":{name:"July",abbr:"JUL"},"08":{name:"August",abbr:"AUG"},"09":{name:"September",abbr:"SEP"},10:{name:"October",abbr:"OCT"},11:{name:"November",abbr:"NOV"},12:{name:"December",abbr:"DEC"}},datePickerWeekDict:{0:{name:"Sunday",abbr:"S"},1:{name:"Monday",abbr:"M"},2:{name:"Tuesday",abbr:"T"},3:{name:"Wednesday",abbr:"W"},4:{name:"Thursday",abbr:"T"},5:{name:"Friday",abbr:"F"},6:{name:"Saturday",abbr:"S"}},datePickerSelected:" selected",paginationItem:"",paginationPage:"page",paginationJump:"Go to"},packs:XO,pack:JO,add:ZO,use:QO,merge:ex,useLocale:YO};var{n:nx,classes:ox}=yO("action-sheet"),rx=["onClick"];var ix=er({name:"VarActionSheet",directives:{Ripple:EO},components:{VarPopup:GO,VarIcon:zO},inheritAttrs:!1,props:$O,setup(e){var t=qn(!1);return Bo((()=>e.show),(e=>{t.value=e}),{immediate:!0}),{n:nx,classes:ox,handlePopupUpdateShow:t=>bO(e["onUpdate:show"],t),popupShow:t,pack:JO,dt:NR,handleSelect:t=>{if(!t.disabled){var{closeOnClickAction:n,onSelect:o}=e;bO(o,t),n&&bO(e["onUpdate:show"],!1)}}}}});ix.render=function(e,n){var o=xr("var-icon"),r=xr("var-popup"),i=Ur("ripple");return Fi(),ji(r,aa({class:e.n("popup-radius"),position:"bottom",overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.closeOnClickOverlay,teleport:e.teleport,show:e.popupShow},{"onUpdate:show":e.handlePopupUpdateShow},{onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange}),{default:Do((()=>[Ji("div",aa({class:e.classes(e.n(),e.n("$--box"))},e.$attrs),[qr(e.$slots,"title",{},(()=>[Ji("div",{class:a(e.n("title"))},p(e.dt(e.title,e.pack.actionSheetTitle)),3)])),qr(e.$slots,"actions",{},(()=>[(Fi(!0),zi(xi,null,Fr(e.actions,(n=>Ar((Fi(),zi("div",{class:a(e.classes(e.n("action-item"),n.className,[n.disabled,e.n("--disabled")])),key:n.name,style:t({color:n.color}),onClick:t=>e.handleSelect(n)},[n.icon?(Fi(),ji(o,{key:0,class:a(e.n("action-icon")),"var-action-sheet-cover":"",name:n.icon,size:n.iconSize},null,8,["class","name","size"])):na("v-if",!0),Ji("div",{class:a(e.n("action-name"))},p(n.name),3)],14,rx)),[[i,{disabled:n.disabled}]]))),128))]))],16)])),_:3},16,["class","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","show","onOpen","onClose","onClosed","onOpened","onRouteChange"])};const ax=ix;function sx(){return sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},sx.apply(this,arguments)}var cx,lx={};function ux(e){return SR()?new Promise((t=>{ux.close();var n=In(function(e){return void 0===e&&(e={}),sx({},lx,e)}(e));n.teleport="body",cx=n;var{unmountInstance:o}=gO(ax,n,{onSelect:e=>{bO(n.onSelect,e),t(e)},onClose:()=>{bO(n.onClose),t("close")},onClosed:()=>{bO(n.onClosed),o(),cx===n&&(cx=null)},onRouteChange:()=>{o(),cx===n&&(cx=null)},"onUpdate:show":e=>{n.show=e}});n.show=!0})):Promise.resolve()}ux.Component=ax,ax.install=function(e){e.component(ax.name,ax)},ux.install=function(e){e.component(ax.name,ax)},Object.assign(ux,{setDefaultOptions:function(e){lx=e},resetDefaultOptions:function(){lx={}},close:function(){if(null!=cx){var e=cx;cx=null,po().then((()=>{e.show=!1}))}}});var dx={color:{type:String},textColor:{type:String},title:{type:String},titlePosition:{type:String,default:"left",validator:function(e){return["left","center","right"].includes(e)}},elevation:{type:Boolean,default:!0},round:{type:Boolean,default:!1},image:{type:String},imageLinearGradient:{type:String}},{n:px,classes:hx}=yO("app-bar");var fx=er({name:"VarAppBar",props:dx,setup(e,t){var{slots:n}=t,o=qn(),r=qn(),i=()=>{o.value=n.left?0:void 0,r.value=n.right?0:void 0},a=Ma((()=>{var{image:t,color:n,textColor:o,imageLinearGradient:r}=e;return null!=t?{"background-image":(r?"linear-gradient("+r+"), ":"")+"url("+t+")","background-position":"center center","background-size":"cover"}:{background:n,color:o}}));return iO(i),kr(i),{n:px,classes:hx,rootStyles:a,paddingLeft:o,paddingRight:r}}});fx.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n(),[e.round,e.n("--round")],[e.elevation,e.n("$-elevation--3")])),style:t(e.rootStyles)},[Ji("div",{class:a(e.n("toolbar"))},[Ji("div",{class:a(e.n("left"))},[qr(e.$slots,"left"),"left"===e.titlePosition?(Fi(),zi("div",{key:0,class:a(e.n("title")),style:t({paddingLeft:e.paddingLeft})},[qr(e.$slots,"default",{},(()=>[ta(p(e.title),1)]))],6)):na("v-if",!0)],2),"center"===e.titlePosition?(Fi(),zi("div",{key:0,class:a(e.n("title"))},[qr(e.$slots,"default",{},(()=>[ta(p(e.title),1)]))],2)):na("v-if",!0),Ji("div",{class:a(e.n("right"))},["right"===e.titlePosition?(Fi(),zi("div",{key:0,class:a(e.n("title")),style:t({paddingRight:e.paddingRight})},[qr(e.$slots,"default",{},(()=>[ta(p(e.title),1)]))],6)):na("v-if",!0),qr(e.$slots,"right")],2)],2),qr(e.$slots,"content")],6)};const gx=fx;function vx(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function mx(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){vx(i,o,r,a,s,"next",e)}function s(e){vx(i,o,r,a,s,"throw",e)}a(void 0)}))}}function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_x.apply(this,arguments)}gx.install=function(e){e.component(gx.name,gx)};var yx,bx,Mx="background-image",Cx="lazy-loading",kx="lazy-error",Tx="lazy-attempt",Sx="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",Ix=[],Ex=[],Dx=(yx=100,{cache:bx=[],has(e){return this.cache.includes(e)},add(e){this.has(e)||(this.cache.length===yx&&bx.shift(),this.cache.push(e))},remove(e){this.has(e)&&wR(this.cache,e)},clear(){this.cache.length=0}}),Ax={loading:Sx,error:Sx,attempt:3,throttleWait:300,events:["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"]},Lx=TR(Bx,Ax.throttleWait);function Rx(e,t){e._lazy.arg===Mx?e.style.backgroundImage="url("+t+")":e.setAttribute("src",t)}function Ox(e,t){Rx(e,t),e._lazy.state="success",qx(e),Bx()}function xx(e){var t;Ex.includes(e)||(Ex.push(e),null==(t=Ax.events)||t.forEach((t=>{e.addEventListener(t,Lx,{passive:!0})})))}function Nx(e,t){var n=new Image;n.src=t,e._lazy.preloadImage=n,n.addEventListener("load",(()=>{e._lazy.attemptLock=!1,Dx.add(t),Ox(e,t)})),n.addEventListener("error",(()=>{e._lazy.attemptLock=!1,e._lazy.currentAttempt>=e._lazy.attempt?function(e){e._lazy.error&&Rx(e,e._lazy.error),e._lazy.state="error",qx(e),Bx()}(e):Px(e)}))}function Px(e){if(!e._lazy.attemptLock){e._lazy.attemptLock=!0,e._lazy.currentAttempt++;var{src:t}=e._lazy;if(Dx.has(t))return Ox(e,t),void(e._lazy.attemptLock=!1);!function(e){e._lazy.loading&&Rx(e,e._lazy.loading),Bx()}(e),Nx(e,t)}}function Ux(e){return Gx.apply(this,arguments)}function Gx(){return Gx=mx((function*(e){(yield function(e){return VR.apply(this,arguments)}(e))&&Px(e)})),Gx.apply(this,arguments)}function Bx(){Ix.forEach((e=>Ux(e)))}function Fx(){return(Fx=mx((function*(e){!Ix.includes(e)&&Ix.push(e),function(e){for(var t=[],n=e;n!==window;)n=zR(n),t.push(n);return t}(e).forEach(xx),yield Ux(e)}))).apply(this,arguments)}function qx(e){wR(Ix,e),0===Ix.length&&(Ex.forEach((e=>{var t;null==(t=Ax.events)||t.forEach((t=>{e.removeEventListener(t,Lx)}))})),Ex.length=0)}function Vx(e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=mx((function*(e,t){!function(e,t){var n,o,r={loading:null!=(n=e.getAttribute(Cx))?n:Ax.loading,error:null!=(o=e.getAttribute(kx))?o:Ax.error,attempt:e.getAttribute(Tx)?Number(e.getAttribute(Tx)):Ax.attempt};e._lazy=_x({src:t.value,arg:t.arg,currentAttempt:0,state:"pending",attemptLock:!1},r),Rx(e,Sx),bO(Ax.filter,e._lazy)}(e,t),yield function(e){return Fx.apply(this,arguments)}(e)})),Hx.apply(this,arguments)}function zx(){return(zx=mx((function*(e,t){!function(e,t){var{src:n,arg:o}=e._lazy;return n!==t.value||o!==t.arg}(e,t)?Ix.includes(e)&&(yield Ux(e)):yield Vx(e,t)}))).apply(this,arguments)}const jx={mounted:Vx,unmounted:qx,updated:function(e,t){return zx.apply(this,arguments)},install(e,t){!function(e){void 0===e&&(e={});var{events:t,loading:n,error:o,attempt:r,throttleWait:i,filter:a}=e;Ax.events=null!=t?t:Ax.events,Ax.loading=null!=n?n:Ax.loading,Ax.error=null!=o?o:Ax.error,Ax.attempt=null!=r?r:Ax.attempt,Ax.throttleWait=null!=i?i:Ax.throttleWait,Ax.filter=a}(t),Lx=TR(Bx,Ax.throttleWait),e.directive("lazy",this)}};var $x=e=>["mini","small","normal","large"].includes(e);function Wx(e){return $x(e)||mR(e)||gR(e)}var Kx={round:{type:Boolean,default:!0},size:{type:[String,Number],validator:Wx,default:"normal"},color:{type:String},src:{type:String},fit:{type:String,validator:function(e){return["fill","contain","cover","none","scale-down"].includes(e)},default:"cover"},bordered:{type:Boolean,default:!1},borderColor:{type:String},loading:{type:String},error:{type:String},lazy:{type:Boolean,default:!1},onClick:MO(),onLoad:MO(),onError:MO()},{n:Yx,classes:Xx}=yO("avatar"),Jx=["src","lazy-loading","lazy-error"],Zx=["src"];var Qx=er({name:"VarAvatar",directives:{Lazy:jx},props:Kx,setup(e){var t=qn(null),n=qn(null),o=qn(1),r=()=>{if(t.value&&n.value){var e=t.value.offsetWidth,r=n.value.offsetWidth;o.value=e>r?1:e/r}else o.value=1};return iO(r),kr(r),{internalSizeValidator:$x,sizeValidator:Wx,toSizeUnit:XR,n:Yx,classes:Xx,avatarElement:t,textElement:n,scale:o,handleLoad:t=>{var n=t.currentTarget,{lazy:o,onLoad:r,onError:i}=e;o?("success"===n._lazy.state&&bO(r,t),"error"===n._lazy.state&&bO(i,t)):bO(r,t)},handleError:t=>{bO(e.onError,t)},handleClick:t=>{bO(e.onClick,t)}}}});Qx.render=function(e,n){var o=Ur("lazy");return Fi(),zi("div",{ref:"avatarElement",class:a(e.classes(e.n(),e.n("$--box"),[e.internalSizeValidator(e.size),e.n("--"+e.size)],[e.round,e.n("--round")],[e.bordered,e.n("--bordered")])),style:t({width:e.internalSizeValidator(e.size)?void 0:e.toSizeUnit(e.size),height:e.internalSizeValidator(e.size)?void 0:e.toSizeUnit(e.size),borderColor:e.borderColor,backgroundColor:e.color}),onClick:n[3]||(n[3]=function(){return e.handleClick&&e.handleClick(...arguments)})},[e.src?(Fi(),zi(xi,{key:0},[e.lazy?Ar((Fi(),zi("img",{key:0,class:a(e.n("image")),src:e.src,style:t({objectFit:e.fit}),"lazy-loading":e.loading,"lazy-error":e.error,onLoad:n[0]||(n[0]=function(){return e.handleLoad&&e.handleLoad(...arguments)})},null,46,Jx)),[[o,e.src]]):(Fi(),zi("img",{key:1,class:a(e.n("image")),src:e.src,style:t({objectFit:e.fit}),onLoad:n[1]||(n[1]=function(){return e.handleLoad&&e.handleLoad(...arguments)}),onError:n[2]||(n[2]=function(){return e.handleError&&e.handleError(...arguments)})},null,46,Zx))],2112)):(Fi(),zi("div",{key:1,ref:"textElement",class:a(e.n("text")),style:t({transform:"scale("+e.scale+")"})},[qr(e.$slots,"default")],6))],6)};const eN=Qx;eN.install=function(e){e.component(eN.name,eN)};var tN={offset:{type:[Number,String]},vertical:{type:Boolean,default:!1}},{n:nN,classes:oN}=yO("avatar-group");var rN=er({name:"VarAvatarGroup",props:tN,setup(e){var t=Ma((()=>null==e.offset?{}:{"--avatar-group-offset":XR(e.offset)}));return{n:nN,classes:oN,toSizeUnit:XR,rootStyles:t}}});rN.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n(),[e.vertical,e.n("--column"),e.n("--row")])),style:t(e.rootStyles)},[qr(e.$slots,"default")],6)};const iN=rN;iN.install=function(e){e.component(iN.name,iN)};var aN={type:{type:String,default:"circle",validator:function(e){return["circle","wave","cube","rect","disappear"].includes(e)}},radius:{type:[String,Number]},size:{type:String,default:"normal",validator:function(e){return["normal","mini","small","large"].includes(e)}},color:{type:String},description:{type:String},loading:{type:Boolean,default:!1}},{n:sN,classes:cN}=yO("loading"),lN=e=>(Io(""),e=e(),Eo(),e),uN=[lN((()=>Ji("svg",{viewBox:"25 25 50 50"},[Ji("circle",{cx:"50",cy:"50",r:"20",fill:"none"})],-1)))];var dN=er({name:"VarLoading",props:aN,setup(e,t){var{slots:n}=t,o=Ma((()=>!bO(n.default)||e.loading));return{n:sN,classes:cN,multiplySizeUnit:JR,loadingTypeDict:{wave:5,cube:4,rect:8,disappear:3},isShow:o}}});dN.render=function(e,n){return Fi(),zi("div",{class:a(e.n())},[e.$slots.default?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("content"),[e.loading,e.n("content--active")]))},[qr(e.$slots,"default"),e.loading?(Fi(),zi("div",{key:0,class:a(e.n("content-mask"))},null,2)):na("v-if",!0)],2)):na("v-if",!0),e.isShow?(Fi(),zi("div",{key:1,class:a(e.classes(e.n("$--box"),e.n("body"),[e.$slots.default,e.n("inside")]))},["circle"===e.type?(Fi(),zi("div",{key:0,class:a(e.n("circle"))},[Ji("span",{class:a(e.classes(e.n("circle-block"),e.n("circle-block--"+e.size))),style:t({width:e.multiplySizeUnit(e.radius,2),height:e.multiplySizeUnit(e.radius,2),color:e.color})},uN,6)],2)):na("v-if",!0),(Fi(!0),zi(xi,null,Fr(e.loadingTypeDict,((n,o)=>(Fi(),zi(xi,{key:o},[e.type===o?(Fi(),zi("div",{key:0,class:a(e.classes(e.n(o),e.n(o+"--"+e.size)))},[(Fi(!0),zi(xi,null,Fr(n,(n=>(Fi(),zi("div",{key:n+o,style:t({backgroundColor:e.color}),class:a(e.classes(e.n(o+"-item"),e.n(o+"-item--"+e.size)))},null,6)))),128))],2)):na("v-if",!0)],64)))),128)),e.$slots.description||e.description?(Fi(),zi("div",{key:1,class:a(e.classes(e.n("description"),e.n("description--"+e.size))),style:t({color:e.color})},[qr(e.$slots,"description",{},(()=>[ta(p(e.description),1)]))],6)):na("v-if",!0)],2)):na("v-if",!0)],2)};const pN=dN;function hN(e){if(!e)return!1;var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return!("desktop"!==e||!t)||"mobile"===e&&!t}function fN(e){var{value:t}=e._hover,n=function(e){var t=e.getAttribute("style");return t?t.split(";").filter(Boolean).reduce(((e,t)=>{var[n,o]=t.split(":").map((e=>e.trim()));return e[ER(n)]=o,e}),{}):{}}(e);Object.keys(t).forEach((o=>{var r=ER(o);null!=t[r]&&n[r]&&(e._hover.rawStyle[r]=n[r])}))}function gN(e,t){Object.keys(t).forEach((n=>{var o=t[n];null!=o&&(e.style[n]=o)}))}function vN(e){!function(e){Object.keys(e._hover.value).forEach((t=>{null!=e._hover.value[t]&&(e.style[t]="")}))}(e),gN(e,e._hover.rawStyle)}function mN(){var{value:e}=this._hover;this._hover.hovering=!0,yR(e)?e(this._hover.hovering):gN(this,e)}function _N(){this._hover.hovering=!1,yR(this._hover.value)?this._hover.value(this._hover.hovering):vN(this)}function yN(e,t){var n,o,{arg:r,value:i}=t;hN(r)||(e._hover={value:i,hovering:null!=(n=null==(o=e._hover)?void 0:o.hovering)&&n,rawStyle:{}},fN(e),e.addEventListener("mouseenter",mN),e.addEventListener("mouseleave",_N))}function bN(e,t){hN(t.arg)||(vN(e),e.removeEventListener("mouseenter",mN),e.removeEventListener("mouseleave",_N))}pN.install=function(e){e.component(pN.name,pN)};const MN={mounted:yN,unmounted:bN,beforeUpdate:function(e,t){bN(e,t)},updated:function(e,t){yN(e,t),function(e,t){return!yR(t.value)&&e._hover.hovering}(e,t)&&gN(e,t.value)},install(e){e.directive("hover",this)}};function CN(){return CN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},CN.apply(this,arguments)}function kN(e){return["default","primary","info","success","warning","danger"].includes(e)}var wN={type:{type:String,validator:kN},nativeType:{type:String,default:"button",validator:function(e){return["button","reset","submit"].includes(e)}},size:{type:String,validator:function(e){return["normal","mini","small","large"].includes(e)}},loading:{type:Boolean,default:!1},round:{type:Boolean,default:!1},block:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},color:{type:String},textColor:{type:String},autoLoading:{type:Boolean,default:!1},loadingRadius:{type:[Number,String]},loadingType:fO(aN,"type"),loadingSize:fO(aN,"size"),loadingColor:CN({},fO(aN,"color"),{default:"currentColor"}),onClick:MO(),onTouchstart:MO()},TN=Symbol("BUTTON_GROUP_BIND_BUTTON_KEY");var{n:SN,classes:IN}=yO("button"),EN=["type","disabled"];var DN=er({name:"VarButton",components:{VarLoading:pN},directives:{Ripple:EO,Hover:MN},props:wN,setup(e){var t=qn(!1),n=qn(!1),{buttonGroup:o}=function(){var{bindParent:e,parentProvider:t,index:n}=lO(TN);return{index:n,buttonGroup:t,bindButtonGroup:e}}(),r=Ma((()=>{if(!o)return{elevation:2,type:null!=e.type?e.type:"default",size:null!=e.size?e.size:"normal",color:e.color,text:e.text,textColor:e.textColor,outline:e.outline};var{type:t,size:n,color:r,textColor:i,mode:a}=o;return{elevation:0,type:null!=e.type?e.type:t.value,size:null!=e.size?e.size:n.value,color:null!=e.color?e.color:r.value,textColor:null!=e.textColor?e.textColor:i.value,text:"normal"!==a.value,outline:"outline"===a.value}})),i=n=>{e.autoLoading&&(t.value=!0,n=bR(n)?n:[n],Promise.all(n).then((()=>{t.value=!1})).catch((()=>{t.value=!1})))};return{n:SN,classes:IN,pending:t,states:r,hovering:n,handleHover:e=>{n.value=e},handleClick:n=>{var{loading:o,disabled:r,onClick:a}=e;!a||o||r||t.value||i(bO(a,n))},handleTouchstart:n=>{var{loading:o,disabled:r,onTouchstart:a}=e;!a||o||r||t.value||i(bO(a,n))}}}});DN.render=function(e,n){var o=xr("var-loading"),r=Ur("ripple"),i=Ur("hover");return Ar((Fi(),zi("button",{class:a(e.classes(e.n(),e.n("$--box"),e.n("--"+e.states.size),[e.block,e.n("$--flex")+" "+e.n("--block"),e.n("$--inline-flex")],[e.disabled,e.n("--disabled")],[e.states.text,e.n("--text-"+e.states.type)+" "+e.n("--text"),e.n("--"+e.states.type)+" "+e.n("$-elevation--"+e.states.elevation)],[e.states.text&&e.disabled,e.n("--text-disabled")],[e.round,e.n("--round")],[e.states.outline,e.n("--outline")])),style:t({color:e.states.textColor,background:e.states.color}),type:e.nativeType,disabled:e.disabled,onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)}),onTouchstart:n[1]||(n[1]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},[e.loading||e.pending?(Fi(),ji(o,{key:0,class:a(e.n("loading")),"var-button-cover":"",color:e.loadingColor,type:e.loadingType,size:e.loadingSize,radius:e.loadingRadius},null,8,["class","color","type","size","radius"])):na("v-if",!0),Ji("div",{class:a(e.classes(e.n("content"),[e.loading||e.pending,e.n("--hidden")]))},[qr(e.$slots,"default")],2),Ji("div",{class:a(e.classes(e.n("overlay"),[e.hovering,e.n("--hovering")]))},null,2)],46,EN)),[[r,{disabled:e.disabled||!e.ripple}],[i,e.handleHover,"desktop"]])};const AN=DN;AN.install=function(e){e.component(AN.name,AN)};var LN={visibilityHeight:{type:[Number,String],default:200},duration:{type:Number,default:300},right:{type:[Number,String]},bottom:{type:[Number,String]},target:{type:[String,Object]},onClick:MO()},{n:RN,classes:ON}=yO("back-top");var xN=er({name:"VarBackTop",components:{VarButton:AN,VarIcon:zO},inheritAttrs:!1,props:LN,setup(e){var t,n=qn(!1),o=qn(null),r=qn(!0),i=TR((()=>{n.value=FR(t)>=YR(e.visibilityHeight)}),200),a=()=>{t.addEventListener("scroll",i)},s=()=>{t.removeEventListener("scroll",i)};return Mr((()=>{t=e.target?jR(e.target,"BackTop"):zR(o.value),a(),r.value=!1})),lr(a),wr(s),ur(s),{disabled:r,show:n,backTopEl:o,toSizeUnit:XR,n:RN,classes:ON,handleClick:n=>{bO(e.onClick,n);var o=qR(t);nO(t,{left:o,duration:e.duration,animation:xR})}}}});xN.render=function(e,t){var n=xr("var-icon"),o=xr("var-button");return Fi(),ji(Ri,{to:"body",disabled:e.disabled},[Ji("div",aa({class:e.classes(e.n(),[e.show,e.n("--active")]),ref:"backTopEl",style:{right:e.toSizeUnit(e.right),bottom:e.toSizeUnit(e.bottom)}},e.$attrs,{onClick:t[0]||(t[0]=Ps((function(){return e.handleClick&&e.handleClick(...arguments)}),["stop"]))}),[qr(e.$slots,"default",{},(()=>[Zi(o,{type:"primary",round:"","var-back-top-cover":""},{default:Do((()=>[Zi(n,{name:"chevron-up"})])),_:1})]))],16)],8,["disabled"])};const NN=xN;NN.install=function(e){e.component(NN.name,NN)};var PN={type:{type:String,default:"default",validator:function(e){return["default","primary","info","success","warning","danger"].includes(e)}},position:{type:String,default:"right-top",validator:function(e){return["right-top","right-bottom","left-top","left-bottom"].includes(e)}},hidden:{type:Boolean,default:!1},value:{type:[String,Number],default:0},maxValue:{type:[String,Number]},dot:{type:Boolean,default:!1},icon:{type:String},color:{type:String}},{n:UN,classes:GN}=yO("badge");var BN=er({name:"VarBadge",components:{VarIcon:zO},inheritAttrs:!1,props:PN,setup(e){var t=Ma((()=>{var{value:t,maxValue:n}=e;return null!=t&&null!=n&&kR(t)>kR(n)?n+"+":t}));return{n:UN,classes:GN,value:t}}});BN.render=function(e,t){var n=xr("var-icon");return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box")))},[qr(e.$slots,"default"),Zi(Za,{name:e.n("$-badge-fade")},{default:Do((()=>[Ar(Ji("span",aa({class:e.classes(e.n("content"),e.n("--"+e.type),[e.$slots.default,e.n("--"+e.position)],[e.dot,e.n("--dot")],[e.icon,e.n("--icon")]),style:{background:e.color}},e.$attrs),[e.icon?(Fi(),ji(n,{key:0,class:a(e.n("icon")),"var-badge-cover":"",name:e.icon},null,8,["class","name"])):na("v-if",!0),qr(e.$slots,"value",{},(()=>[e.icon||e.dot?na("v-if",!0):(Fi(),zi("span",{key:0,class:a(e.n("value"))},p(e.value),3))]))],16),[[Bs,!e.hidden]])])),_:3},8,["name"])],2)};const FN=BN;FN.install=function(e){e.component(FN.name,FN)};var qN={active:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!1},safeArea:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},activeColor:{type:String},inactiveColor:{type:String},onChange:MO(),"onUpdate:active":MO(),onBeforeChange:MO(),onFabClick:MO(),fabProps:{type:Object}},VN=Symbol("BOTTOM_NAVIGATION_BIND_BOTTOM_NAVIGATION_ITEM_KEY");function HN(){return HN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},HN.apply(this,arguments)}var{n:zN,classes:jN}=yO("bottom-navigation"),{n:$N}=yO("bottom-navigation-item"),WN=$N("--right-half-space"),KN=$N("--left-half-space"),YN=$N("--right-space"),XN={type:"primary"};var JN=er({name:"VarBottomNavigation",components:{VarButton:AN},props:qN,setup(e,t){var{slots:n}=t,o=qn(null),r=Ma((()=>e.active)),i=Ma((()=>e.activeColor)),a=Ma((()=>e.inactiveColor)),s=qn({}),{length:c,bottomNavigationItems:l,bindBottomNavigationItem:u}=function(){var{childProviders:e,length:t,bindChildren:n}=uO(VN);return{length:t,bottomNavigationItems:e,bindBottomNavigationItem:n}}(),d=()=>l.find((e=>{var{name:t}=e;return r.value===t.value})),p=()=>l.find((e=>{var{index:t}=e;return r.value===t.value})),h=()=>{mR(r.value)&&(r.value<0?bO(e["onUpdate:active"],0):r.value>c.value-1&&bO(e["onUpdate:active"],c.value-1))},f=t=>{var n=bO(e.onBeforeChange,t);n=bR(n)?n:[n],Promise.all(n).then((e=>{e.some((e=>!e))||g(t)}))},g=t=>{bO(e["onUpdate:active"],t),bO(e.onChange,t)},v=e=>{var t=_(),n=t.length,o=e%2==0;t.forEach(((e,t)=>{m(o,e,t,n)}))},m=(e,t,n,o)=>{if(e||!(n===o-1)){var r=n===o/2;n===o/2-1?t.classList.add(WN):r&&t.classList.add(KN)}else t.classList.add(YN)},_=()=>Array.from(o.value.querySelectorAll("."+$N()));return u({active:r,activeColor:i,inactiveColor:a,onToggle:t=>{r.value!==t&&(e.onBeforeChange?f(t):g(t))}}),Bo((()=>c.value),(()=>{0===c.value||d()||p()||h()})),Bo((()=>e.fabProps),(e=>{s.value=HN({},XN,e)}),{immediate:!0,deep:!0}),iO((()=>{n.fab&&v(c.value)})),kr((()=>{_().forEach((e=>{e.classList.remove(WN,KN,YN)})),n.fab&&v(c.value)})),{n:zN,classes:jN,length:c,bottomNavigationDom:o,handleFabClick:()=>{bO(e.onFabClick)},fabProps:s}}});JN.render=function(e,n){var o=xr("var-button");return Fi(),zi("div",{class:a(e.classes(e.n(),[e.fixed,e.n("--fixed")],[e.border,e.n("--border")],[e.safeArea,e.n("--safe-area")])),ref:"bottomNavigationDom",style:t("z-index:"+e.zIndex)},[qr(e.$slots,"default"),e.$slots.fab?(Fi(),ji(o,aa({key:0,class:e.classes(e.n("fab"),[e.length%2,e.n("--fab-right"),e.n("--fab-center")]),"var-bottom-navigation__fab":"",onClick:e.handleFabClick},e.fabProps,{round:""}),{default:Do((()=>[qr(e.$slots,"fab")])),_:3},16,["class","onClick"])):na("v-if",!0)],6)};const ZN=JN;ZN.install=function(e){e.component(ZN.name,ZN)};var QN={name:{type:String},icon:{type:String},label:{type:String},namespace:{type:String,default:"var-icon"},badge:{type:[Boolean,Object],default:!1},onClick:MO()};var{n:eP,classes:tP}=yO("bottom-navigation-item"),nP={type:"danger",dot:!0};var oP=er({name:"VarBottomNavigationItem",components:{VarBadge:FN,VarIcon:zO},directives:{Ripple:EO},props:QN,setup(e){var t=Ma((()=>e.name)),n=Ma((()=>e.badge)),o=qn({}),{index:r,bottomNavigation:i,bindBottomNavigation:a}=function(){var{parentProvider:e,index:t,bindParent:n}=lO(VN);if(!n)throw Error("<var-bottom-navigation-item/> must in <var-bottom-navigation/>");return{index:t,bottomNavigation:e,bindBottomNavigation:n}}(),{active:s,activeColor:c,inactiveColor:l}=i;return a({name:t,index:r}),Bo((()=>n.value),(e=>{o.value=!0===e?nP:n.value}),{immediate:!0}),{n:eP,classes:tP,index:r,active:s,badge:n,badgeProps:o,computeColorStyle:()=>s.value===t.value||s.value===r.value?c.value:l.value,handleClick:()=>{var n,o=null!=(n=t.value)?n:r.value;bO(e.onClick,o),bO(i.onToggle,o)}}}});oP.render=function(e,n){var o=xr("var-icon"),r=xr("var-badge"),i=Ur("ripple");return Ar((Fi(),zi("button",{class:a(e.classes(e.n(),[e.active===e.index||e.active===e.name,e.n("--active")])),style:t({color:e.computeColorStyle()}),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[e.icon&&!e.$slots.icon?(Fi(),ji(o,{key:0,name:e.icon,namespace:e.namespace,class:a(e.n("icon")),"var-bottom-navigation-item-cover":""},null,8,["name","namespace","class"])):na("v-if",!0),qr(e.$slots,"icon",{active:e.active===e.index||e.active===e.name}),e.badge?(Fi(),ji(r,aa({key:1},e.badgeProps,{class:e.n("badge"),"var-bottom-navigation-item-cover":""}),null,16,["class"])):na("v-if",!0),Ji("span",{class:a(e.n("label"))},[e.$slots.default?na("v-if",!0):(Fi(),zi(xi,{key:0},[ta(p(e.label),1)],2112)),qr(e.$slots,"default")],2)],6)),[[i]])};const rP=oP;rP.install=function(e){e.component(rP.name,rP)};var iP={separator:{type:String},onClick:MO()},aP=Symbol("BREADCRUMBS_BIND_BREADCRUMB_KEY");var{n:sP,classes:cP}=yO("breadcrumb");var lP=er({name:"VarBreadcrumb",props:iP,setup(e){var{index:t,breadcrumb:n,bindBreadcrumb:o}=function(){var{parentProvider:e,bindParent:t,index:n}=lO(aP);if(!t)throw Error("<var-breadcrumb/> must in <var-breadcrumbs/>");return{index:n,breadcrumb:e,bindBreadcrumb:t}}(),r=Ma((()=>t.value===n.length.value-1)),i=Ma((()=>n.separator.value));return o(null),{n:sP,classes:cP,isLast:r,parentSeparator:i,handleClick:t=>{r.value||bO(e.onClick,t)}}}});lP.render=function(e,t){return Fi(),zi("div",{class:a(e.n())},[Ji("div",{class:a(e.classes(e.n("content"),[!e.isLast,e.n("--active")])),onClick:t[0]||(t[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[qr(e.$slots,"default")],2),e.isLast?na("v-if",!0):qr(e.$slots,"separator",{key:0},(()=>{var t;return[Ji("div",{class:a(e.n("separator"))},p(null!=(t=e.separator)?t:e.parentSeparator),3)]}))],2)};const uP=lP;uP.install=function(e){e.component(uP.name,uP)};var dP={separator:{type:String,default:"/"}},{n:pP}=yO("breadcrumbs");var hP=er({name:"VarBreadcrumbs",props:dP,setup(e){var t=Ma((()=>e.separator)),{bindBreadcrumbList:n,length:o}=function(){var{childProviders:e,bindChildren:t,length:n}=uO(aP);return{length:n,breadcrumbList:e,bindBreadcrumbList:t}}();return n({length:o,separator:t}),{n:pP}}});hP.render=function(e,t){return Fi(),zi("div",{class:a(e.n())},[qr(e.$slots,"default")],2)};const fP=hP;fP.install=function(e){e.component(fP.name,fP)};var gP={type:{type:String,default:"default",validator:function(e){return["default","primary","info","success","warning","danger"].includes(e)}},size:{type:String,default:"normal",validator:function(e){return["normal","mini","small","large"].includes(e)}},color:{type:String},textColor:{type:String},mode:{type:String,default:"normal",validator:function(e){return["normal","text","outline"].includes(e)}},elevation:{type:[Number,String],default:2},vertical:{type:Boolean,default:!1}},{n:vP,classes:mP}=yO("button-group");var _P=er({name:"VarButtonGroup",props:gP,setup(e){var{bindButtons:t}=function(){var{bindChildren:e,childProviders:t,length:n}=uO(TN);return{length:n,buttons:t,bindButtons:e}}();return t({elevation:Ma((()=>e.elevation)),type:Ma((()=>e.type)),size:Ma((()=>e.size)),color:Ma((()=>e.color)),textColor:Ma((()=>e.textColor)),mode:Ma((()=>e.mode))}),{n:vP,classes:mP}}});_P.render=function(e,t){return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),[e.mode,""+e.n("--mode-"+e.mode)],[e.vertical,e.n("--vertical"),e.n("--horizontal")],["normal"===e.mode,e.n("$-elevation--"+e.elevation)]))},[qr(e.$slots,"default")],2)};const yP=_P;yP.install=function(e){e.component(yP.name,yP)};var bP={src:{type:String},fit:{type:String,validator:function(e){return["fill","contain","cover","none","scale-down"].includes(e)},default:"cover"},imageHeight:{type:[String,Number]},imageWidth:{type:[String,Number]},outline:{type:Boolean,default:!1},layout:{type:String,default:"column"},floating:{type:Boolean,default:!1},floatingDuration:{type:Number,default:250},alt:{type:String},title:{type:String},subtitle:{type:String},description:{type:String},elevation:{type:[Number,String]},ripple:{type:Boolean,default:!1},onClick:MO(),"onUpdate:floating":MO()};function MP(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function CP(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){MP(i,o,r,a,s,"next",e)}function s(e){MP(i,o,r,a,s,"throw",e)}a(void 0)}))}}var{n:kP,classes:wP}=yO("card"),TP=["src","alt"];var SP=er({name:"VarCard",directives:{Ripple:EO},components:{VarIcon:zO,VarButton:AN},props:bP,setup(e){var t=qn(null),n=qn(null),o=qn("auto"),r=qn("auto"),i=qn("100%"),a=qn("100%"),s=qn("auto"),c=qn("auto"),l=qn(void 0),u=qn("hidden"),d=qn("0px"),p=qn("0"),h=Ma((()=>"row"===e.layout)),f=qn(!1),g=qn(!1),{zIndex:v}=xO((()=>e.floating),1);OO((()=>e.floating),(()=>!h.value));var m="auto",_="auto",y=null,b=qn(null),M=function(){var n=CP((function*(){clearTimeout(b.value),clearTimeout(y),b.value=null,b.value=setTimeout(CP((function*(){var{width:e,height:n,left:h,top:v}=t.value.getBoundingClientRect();o.value=XR(e),r.value=XR(n),i.value=o.value,a.value=r.value,s.value=XR(v),c.value=XR(h),l.value="fixed",m=s.value,_=c.value,f.value=!0,yield tO(),s.value="0",c.value="0",i.value="100vw",a.value="100vh",d.value="auto",p.value="1",u.value="auto",g.value=!0})),e.ripple?500:0)}));return function(){return n.apply(this,arguments)}}();return Bo((()=>e.floating),(t=>{h.value||po((()=>{t?M():(clearTimeout(y),clearTimeout(b.value),b.value=null,i.value=o.value,a.value=r.value,s.value=m,c.value=_,d.value="0px",p.value="0",f.value=!1,y=setTimeout((()=>{o.value="auto",r.value="auto",i.value="100%",a.value="100%",s.value="auto",c.value="auto",m="auto",_="auto",u.value="hidden",l.value=void 0,g.value=!1}),e.floatingDuration))}))}),{immediate:!0}),{n:kP,classes:wP,toSizeUnit:XR,card:t,cardFloater:n,holderWidth:o,holderHeight:r,floater:b,floaterWidth:i,floaterHeight:a,floaterTop:s,floaterLeft:c,floaterPosition:l,floaterOverflow:u,contentHeight:d,opacity:p,zIndex:v,isRow:h,close:()=>{bO(e["onUpdate:floating"],!1)},showFloatingButtons:f,floated:g,handleClick:t=>{bO(e.onClick,t)}}}});SP.render=function(e,n){var o=xr("var-icon"),r=xr("var-button"),i=Ur("ripple");return Ar((Fi(),zi("div",{ref:"card",class:a(e.classes(e.n(),[e.isRow,e.n("--layout-row")],[e.outline,e.n("--outline")],[e.elevation,e.n("$-elevation--"+e.elevation),e.n("$-elevation--1")])),style:t({zIndex:e.floated?e.zIndex:void 0}),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[Ji("div",{ref:"cardFloater",class:a(e.n("floater")),style:t({width:e.floaterWidth,height:e.floaterHeight,top:e.floaterTop,left:e.floaterLeft,overflow:e.floaterOverflow,position:e.floaterPosition,transition:e.floated?"background-color "+e.floatingDuration+"ms, color "+e.floatingDuration+"ms, width "+e.floatingDuration+"ms, height "+e.floatingDuration+"ms, top "+e.floatingDuration+"ms, left "+e.floatingDuration+"ms":void 0})},[qr(e.$slots,"image",{},(()=>[e.src?(Fi(),zi("img",{key:0,class:a(e.n("image")),style:t({objectFit:e.fit,height:e.toSizeUnit(e.imageHeight),width:e.toSizeUnit(e.imageWidth)}),src:e.src,alt:e.alt},null,14,TP)):na("v-if",!0)])),Ji("div",{class:a(e.n("container"))},[qr(e.$slots,"title",{},(()=>[e.title?(Fi(),zi("div",{key:0,class:a(e.n("title"))},p(e.title),3)):na("v-if",!0)])),qr(e.$slots,"subtitle",{},(()=>[e.subtitle?(Fi(),zi("div",{key:0,class:a(e.n("subtitle"))},p(e.subtitle),3)):na("v-if",!0)])),qr(e.$slots,"description",{},(()=>[e.description?(Fi(),zi("div",{key:0,class:a(e.n("description"))},p(e.description),3)):na("v-if",!0)])),e.$slots.extra?(Fi(),zi("div",{key:0,class:a(e.n("footer"))},[qr(e.$slots,"extra")],2)):na("v-if",!0),e.$slots["floating-content"]&&!e.isRow?(Fi(),zi("div",{key:1,class:a(e.n("floating-content")),style:t({height:e.contentHeight,opacity:e.opacity,transition:"opacity "+2*e.floatingDuration+"ms"})},[qr(e.$slots,"floating-content")],6)):na("v-if",!0)],2),e.showFloatingButtons?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("floating-buttons"),e.n("$--box"))),style:t({zIndex:e.zIndex,opacity:e.opacity,transition:"opacity "+2*e.floatingDuration+"ms"})},[qr(e.$slots,"close-button",{},(()=>[Zi(r,{"var-card-cover":"",round:"",class:a(e.classes(e.n("close-button"),e.n("$-elevation--6"))),onClick:Ps(e.close,["stop"])},{default:Do((()=>[Zi(o,{"var-card-cover":"",name:"window-close",class:a(e.n("close-button-icon"))},null,8,["class"])])),_:1},8,["class","onClick"])]))],6)):na("v-if",!0)],6),Ji("div",{class:a(e.n("holder")),style:t({width:e.holderWidth,height:e.holderHeight})},null,6)],6)),[[i,{disabled:!e.ripple||e.floater}]])};const IP=SP;IP.install=function(e){e.component(IP.name,IP)};var EP={title:{type:[Number,String]},icon:{type:String},description:{type:String},border:{type:Boolean,default:!1},borderOffset:{type:[Number,String]},iconClass:{type:String},titleClass:{type:String},descriptionClass:{type:String},extraClass:{type:String},ripple:{type:Boolean,default:!1},onClick:MO()},{n:DP,classes:AP}=yO("cell");var LP=er({name:"VarCell",components:{VarIcon:zO},directives:{Ripple:EO},props:EP,setup(e){var t=Ma((()=>null==e.borderOffset?{}:{"--cell-border-left":XR(e.borderOffset),"--cell-border-right":XR(e.borderOffset)}));return{n:DP,classes:AP,toSizeUnit:XR,borderOffsetStyles:t,handleClick:t=>{bO(e.onClick,t)}}}});LP.render=function(e,n){var o=xr("var-icon"),r=Ur("ripple");return Ar((Fi(),zi("div",{class:a(e.classes(e.n(),[e.border,e.n("--border")],[e.onClick,e.n("--cursor")])),style:t(e.borderOffsetStyles),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[qr(e.$slots,"icon",{},(()=>[e.icon?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("icon"),e.iconClass))},[Zi(o,{name:e.icon},null,8,["name"])],2)):na("v-if",!0)])),Ji("div",{class:a(e.n("content"))},[qr(e.$slots,"default",{},(()=>[e.title?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("title"),e.titleClass))},p(e.title),3)):na("v-if",!0)])),qr(e.$slots,"description",{},(()=>[e.description?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("description"),e.descriptionClass))},p(e.description),3)):na("v-if",!0)]))],2),e.$slots.extra?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("extra"),e.extraClass))},[qr(e.$slots,"extra")],2)):na("v-if",!0)],6)),[[r,{disabled:!e.ripple}]])};const RP=LP;RP.install=function(e){e.component(RP.name,RP)};var OP={errorMessage:{type:String,default:""},extraMessage:{type:String,default:""}},{n:xP}=yO("form-details"),NP={key:0},PP={key:0};var UP=er({name:"VarFormDetails",props:OP,setup:()=>({n:xP})});UP.render=function(e,t){return Fi(),ji(Za,{name:e.n()},{default:Do((()=>[e.errorMessage||e.extraMessage?(Fi(),zi("div",{key:0,class:a(e.n())},[Ji("div",{class:a(e.n("error-message"))},[Zi(Za,{name:e.n("message")},{default:Do((()=>[e.errorMessage?(Fi(),zi("div",NP,p(e.errorMessage),1)):na("v-if",!0)])),_:1},8,["name"])],2),Ji("div",{class:a(e.n("extra-message"))},[Zi(Za,{name:e.n("message")},{default:Do((()=>[e.extraMessage?(Fi(),zi("div",PP,p(e.extraMessage),1)):na("v-if",!0)])),_:1},8,["name"])],2)],2)):na("v-if",!0)])),_:1},8,["name"])};const GP=UP;GP.install=function(e){e.component(GP.name,GP)};var BP={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:MO(),onChange:MO(),"onUpdate:modelValue":MO()},FP=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY");function qP(){return qP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qP.apply(this,arguments)}var VP=Symbol("FORM_BIND_FORM_ITEM_KEY");function HP(){var{parentProvider:e,index:t,bindParent:n}=lO(VP),o=da();return{index:t,form:e,bindForm:n?e=>{n(qP({},e,{instance:o}))}:null}}var{n:zP,classes:jP}=yO("checkbox");var $P=er({name:"VarCheckbox",directives:{Ripple:EO},components:{VarIcon:zO,VarFormDetails:GP},props:BP,setup(e){var t=qn(!1),n=Ma((()=>t.value===e.checkedValue)),o=Ma((()=>e.checkedValue)),r=qn(!1),{checkboxGroup:i,bindCheckboxGroup:a}=function(){var{bindParent:e,parentProvider:t,index:n}=lO(FP);return{index:n,checkboxGroup:t,bindCheckboxGroup:e}}(),{form:s,bindForm:c}=HP(),{errorMessage:l,validateWithTrigger:u,validate:d,resetValidation:p}=mO(),h=n=>{t.value=n;var o,{checkedValue:r,onChange:a}=e;bO(e["onUpdate:modelValue"],t.value),bO(a,t.value),o="onChange",po((()=>{var{validateTrigger:t,rules:n,modelValue:r}=e;u(t,o,n,r)})),n===r?null==i||i.onChecked(r):null==i||i.onUnchecked(r)},f=()=>{bO(e["onUpdate:modelValue"],e.uncheckedValue),p()},g=()=>d(e.rules,e.modelValue);Bo((()=>e.modelValue),(e=>{t.value=e}),{immediate:!0});var v={checkedValue:o,checked:n,sync:n=>{var{checkedValue:o,uncheckedValue:r}=e;t.value=n.includes(o)?o:r},validate:g,resetValidation:p,reset:f,resetWithAnimation:()=>{r.value=!1}};return bO(a,v),bO(c,v),{withAnimation:r,checked:n,errorMessage:l,checkboxGroupErrorMessage:null==i?void 0:i.errorMessage,formDisabled:null==s?void 0:s.disabled,formReadonly:null==s?void 0:s.readonly,n:zP,classes:jP,handleClick:t=>{var{disabled:o,readonly:a,checkedValue:c,uncheckedValue:l,onClick:u}=e;if(!(null!=s&&s.disabled.value||o||(bO(u,t),null!=s&&s.readonly.value||a))){r.value=!0;var d=!!i&&i.checkedCount.value>=Number(i.max.value);!n.value&&d||h(n.value?l:c)}},toggle:t=>{var{checkedValue:o,uncheckedValue:r}=e;![o,r].includes(t)&&(t=n.value?r:o),h(t)},reset:f,validate:g,resetValidation:p}}});$P.render=function(e,n){var o=xr("var-icon"),r=xr("var-form-details"),i=Ur("ripple");return Fi(),zi("div",{class:a(e.n("wrap")),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[Ji("div",{class:a(e.n())},[Ar((Fi(),zi("div",{class:a(e.classes(e.n("action"),[e.checked,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:t({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?qr(e.$slots,"checked-icon",{key:0},(()=>[Zi(o,{class:a(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])):qr(e.$slots,"unchecked-icon",{key:1},(()=>[Zi(o,{class:a(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]))],6)),[[i,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),Ji("div",{class:a(e.classes(e.n("text"),[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[qr(e.$slots,"default")],2)],2),Zi(r,{"error-message":e.errorMessage},null,8,["error-message"])],2)};const WP=$P;WP.install=function(e){e.component(WP.name,WP)};var KP={modelValue:{type:Array,default:()=>[]},max:{type:[String,Number]},direction:{type:String,default:"horizontal",validator:function(e){return["horizontal","vertical"].includes(e)}},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onChange:MO(),"onUpdate:modelValue":MO()},{n:YP,classes:XP}=yO("checkbox-group");var JP=er({name:"VarCheckboxGroup",components:{VarFormDetails:GP},props:KP,setup(e){var t=Ma((()=>e.max)),n=Ma((()=>e.modelValue.length)),{length:o,checkboxes:r,bindCheckboxes:i}=function(){var{bindChildren:e,childProviders:t,length:n}=uO(FP);return{length:n,checkboxes:t,bindCheckboxes:e}}(),{bindForm:a}=HP(),{errorMessage:s,validateWithTrigger:c,validate:l,resetValidation:u}=mO(),d=Ma((()=>s.value)),p=t=>{var n;bO(e["onUpdate:modelValue"],t),bO(e.onChange,t),n="onChange",po((()=>{var{validateTrigger:t,rules:o,modelValue:r}=e;c(t,n,o,r)}))},h=()=>r.forEach((t=>{var{sync:n}=t;return n(e.modelValue)})),f=()=>{r.forEach((e=>e.resetWithAnimation()))},g=()=>{bO(e["onUpdate:modelValue"],[]),u()},v=()=>l(e.rules,e.modelValue);Bo((()=>e.modelValue),h,{deep:!0}),Bo((()=>o.value),h);var m={max:t,checkedCount:n,onChecked:t=>{var{modelValue:n}=e;n.includes(t)||p([...n,t])},onUnchecked:t=>{var{modelValue:n}=e;n.includes(t)&&p(n.filter((e=>e!==t)))},validate:v,resetValidation:u,reset:g,errorMessage:d};return i(m),bO(a,m),{errorMessage:s,n:YP,classes:XP,checkAll:()=>{var t=r.map((e=>{var{checkedValue:t}=e;return t.value})),n=IR(t);return f(),bO(e["onUpdate:modelValue"],n),n},inverseAll:()=>{var t=r.filter((e=>{var{checked:t}=e;return!t.value})).map((e=>{var{checkedValue:t}=e;return t.value})),n=IR(t);return f(),bO(e["onUpdate:modelValue"],n),n},reset:g,validate:v,resetValidation:u}}});JP.render=function(e,t){var n=xr("var-form-details");return Fi(),zi("div",{class:a(e.n("wrap"))},[Ji("div",{class:a(e.classes(e.n(),e.n("--"+e.direction)))},[qr(e.$slots,"default")],2),Zi(n,{"error-message":e.errorMessage},null,8,["error-message"])],2)};const ZP=JP;ZP.install=function(e){e.component(ZP.name,ZP)};var QP={type:{type:String,default:"default",validator:function(e){return["default","primary","info","success","warning","danger"].includes(e)}},size:{type:String,default:"normal",validator:function(e){return["normal","mini","small","large"].includes(e)}},color:{type:String},textColor:{type:String},iconName:fO(BO,"name"),plain:{type:Boolean,default:!1},round:{type:Boolean,default:!0},block:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},onClose:MO()},{n:eU,classes:tU}=yO("chip");var nU=er({name:"VarChip",components:{VarIcon:zO},inheritAttrs:!1,props:QP,setup(e){var t=Ma((()=>{var{plain:t,textColor:n,color:o}=e;return t?{color:n||o,borderColor:o}:{color:n,background:o}})),n=Ma((()=>{var{size:t,block:n,type:o,plain:r,round:i}=e,a=eU(n?"$--flex":"$--inline-flex"),s=r?eU("plain")+" "+eU("plain-"+o):eU("--"+o),c=i?eU("--round"):null;return[eU("--"+t),a,s,c]}));return{n:eU,classes:tU,chipStyles:t,contentClass:n,handleClose:t=>{bO(e.onClose,t)}}}});nU.render=function(e,t){var n=xr("var-icon");return Fi(),ji(Za,{name:e.n("$-fade")},{default:Do((()=>[Ji("span",aa({class:e.classes(e.n(),e.n("$--box"),...e.contentClass),style:e.chipStyles},e.$attrs),[qr(e.$slots,"left"),Ji("span",{class:a(e.n("text-"+e.size))},[qr(e.$slots,"default")],2),qr(e.$slots,"right"),e.closable?(Fi(),zi("span",{key:0,class:a(e.n("--close")),onClick:t[0]||(t[0]=function(){return e.handleClose&&e.handleClose(...arguments)})},[Zi(n,{name:""+(e.iconName?e.iconName:"close-circle")},null,8,["name"])],2)):na("v-if",!0)],16)])),_:3},8,["name"])};const oU=nU;oU.install=function(e){e.component(oU.name,oU)};var rU={span:{type:[String,Number],default:24},offset:{type:[String,Number],default:0},direction:{type:String,default:"row",validator:function(e){return["row","column"].includes(e)}},justify:{type:String,validator:function(e){return["start","end","center","space-around","space-between","flex-start","flex-end"].includes(e)}},align:{type:String,validator:function(e){return["stretch","center","start","end","baseline","initial","inherit","flex-start","flex-end"].includes(e)}},xs:{type:[Object,Number,String]},sm:{type:[Object,Number,String]},md:{type:[Object,Number,String]},lg:{type:[Object,Number,String]},xl:{type:[Object,Number,String]},onClick:MO()},iU=Symbol("ROW_BIND_COL_KEY");var{n:aU,classes:sU}=yO("col");var cU=er({name:"VarCol",props:rU,setup(e){var t=qn({left:0,right:0}),n=Ma((()=>kR(e.span))),o=Ma((()=>kR(e.offset))),{row:r,bindRow:i}=function(){var{parentProvider:e,index:t,bindParent:n}=lO(iU);return{index:t,row:e,bindRow:n}}(),a={setPadding(e){t.value=e}};return Bo([()=>e.span,()=>e.offset],(()=>{null==r||r.computePadding()})),bO(i,a),{n:aU,classes:sU,padding:t,toNumber:kR,toSizeUnit:XR,getSize:(e,t)=>{var n=[];if(null==t)return n;if(_R(t)){var{offset:o,span:r}=t;Number(r)>=0&&n.push(aU("--span-"+e+"-"+r)),o&&n.push(aU("--offset-"+e+"-"+o))}else Number(t)>=0&&n.push(aU("--span-"+e+"-"+t));return n},span:n,offset:o,handleClick:t=>{bO(e.onClick,t)},padStartFlex:rO}}});cU.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),[e.span>=0,e.n("--span-"+e.span)],[e.offset,e.n("--offset-"+e.offset)],...e.getSize("xs",e.xs),...e.getSize("sm",e.sm),...e.getSize("md",e.md),...e.getSize("lg",e.lg),...e.getSize("xl",e.xl))),style:t({flexDirection:e.direction,justifyContent:e.padStartFlex(e.justify),alignItems:e.padStartFlex(e.align),paddingLeft:e.toSizeUnit(e.padding.left),paddingRight:e.toSizeUnit(e.padding.right)}),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[qr(e.$slots,"default")],6)};const lU=cU;lU.install=function(e){e.component(lU.name,lU)};var uU=Symbol("COLLAPSE_BIND_COLLAPSE_ITEM_KEY");var dU={modelValue:{type:[Array,String,Number]},accordion:{type:Boolean,default:!1},offset:{type:Boolean,default:!0},onChange:MO(),"onUpdate:modelValue":MO()},{n:pU}=yO("collapse");var hU=er({name:"VarCollapse",props:dU,setup(e){var{length:t,collapseItem:n,bindCollapseItem:o}=function(){var{childProviders:e,length:t,bindChildren:n}=uO(uU);return{length:t,collapseItem:e,bindCollapseItem:n}}(),r=Ma((()=>e.modelValue)),i=Ma((()=>e.offset)),a=()=>e.accordion||bR(e.modelValue)?!e.accordion||!bR(e.modelValue)||(console.error('[Varlet] Collapse: type of prop "modelValue" should be a String or Number'),!1):(console.error('[Varlet] Collapse: type of prop "modelValue" should be an Array'),!1),s=()=>{if(a()){var t=(()=>{if(e.accordion)return n.find((t=>{var{name:n}=t;return e.modelValue===n.value}));var t=n.filter((t=>{var{name:n}=t;return void 0!==n.value&&e.modelValue.includes(n.value)}));return t.length?t:void 0})()||(e.accordion?n.find((t=>{var{index:n,name:o}=t;return void 0===o.value&&e.modelValue===n.value})):n.filter((t=>{var{index:n,name:o}=t;return void 0===o.value&&e.modelValue.includes(n.value)})));e.accordion&&!t||!e.accordion&&!t.length?n.forEach((t=>{t.init(e.accordion,!1)})):n.forEach((n=>{var o=e.accordion?t===n:t.includes(n);n.init(e.accordion,o)}))}};return o({active:r,offset:i,updateItem:(t,n)=>{var o=((t,n)=>a()?n?e.accordion?t:[...e.modelValue,t]:e.accordion?null:e.modelValue.filter((e=>e!==t)):null)(t,n);bO(e["onUpdate:modelValue"],o),bO(e.onChange,o)}}),Bo((()=>t.value),(()=>po().then(s))),Bo((()=>e.modelValue),(()=>po().then(s))),{n:pU}}});hU.render=function(e,t){return Fi(),zi("div",{class:a(e.n())},[qr(e.$slots,"default")],2)};const fU=hU;fU.install=function(e){e.component(fU.name,fU)};var gU={name:{type:[String,Number]},title:{type:String},icon:{type:String,default:"chevron-down"},disabled:{type:Boolean,default:!1}},{n:vU,classes:mU}=yO("collapse-item");var _U=er({name:"VarCollapseItem",components:{VarIcon:zO},props:gU,setup(e){var{index:t,collapse:n,bindCollapse:o}=function(){var{parentProvider:e,index:t,bindParent:n}=lO(uU);if(!n)throw Error("[Varlet] Collapse: <var-collapse-item/> must in <var-collapse>");return{index:t,collapse:e,bindCollapse:n}}(),r=!0,i=qn(null),a=qn(!1),s=qn(!1),{active:c,offset:l,updateItem:u}=n,d=Ma((()=>e.name)),p=n=>{e.disabled||n||u(e.name||t.value,!s.value)},h=()=>{s.value||(a.value=!1),i.value.style.height=""};return o({index:t,name:d,init:(e,t)=>{void 0===c.value||e&&bR(c.value)||t===s.value||(s.value=t,p(!0))}}),Bo(s,(e=>{e?i.value&&(i.value.style.height="",a.value=!0,po((()=>{var{offsetHeight:e}=i.value;i.value.style.height="0px",ZR((()=>{i.value.style.height=e+"px",r&&eO((()=>{r&&h()}))}))}))):(()=>{if(i.value){var{offsetHeight:e}=i.value;i.value.style.height=e+"px",ZR((()=>{i.value.style.height="0px"}))}})()})),{n:vU,start:()=>{r=!1},classes:mU,show:a,isShow:s,offset:l,toggle:p,contentEl:i,transitionend:h}}});_U.render=function(e,t){var n=xr("var-icon");return Fi(),zi("div",{class:a(e.classes(e.n(),[e.offset&&e.isShow,e.n("--active")],[e.disabled,e.n("--disable")]))},[Ji("div",{class:a(e.n("header")),onClick:t[0]||(t[0]=t=>e.toggle())},[Ji("div",{class:a(e.n("header-title"))},[qr(e.$slots,"title",{},(()=>[ta(p(e.title),1)]))],2),Ji("div",{class:a(e.n("header-icon"))},[qr(e.$slots,"icon",{},(()=>[Zi(n,{name:e.icon,transition:250,class:a(e.classes(e.n("header-icon"),[e.isShow&&"chevron-down"===e.icon,e.n("header-open")],[e.disabled,e.n("header--disable")]))},null,8,["name","class"])]))],2)],2),Ar(Ji("div",{class:a(e.n("content")),ref:"contentEl",onTransitionend:t[1]||(t[1]=function(){return e.transitionend&&e.transitionend(...arguments)}),onTransitionstart:t[2]||(t[2]=function(){return e.start&&e.start(...arguments)})},[Ji("div",{class:a(e.n("content-wrap"))},[qr(e.$slots,"default")],2)],34),[[Bs,e.show]])],2)};const yU=_U;yU.install=function(e){e.component(yU.name,yU)};var bU={time:{type:[String,Number],default:0},format:{type:String,default:"HH : mm : ss"},autoStart:{type:Boolean,default:!0},onEnd:MO(),onChange:MO()},{n:MU}=yO("countdown"),CU=1e3,kU=6e4,wU=36e5,TU=24*wU;var SU=er({name:"VarCountdown",props:bU,setup(e){var t,n=qn(""),o=qn({days:0,hours:0,minutes:0,seconds:0,milliseconds:0}),r=0,i=!1,a=0,s=0,c=t=>{var r={days:Math.floor(t/TU),hours:Math.floor(t%TU/wU),minutes:Math.floor(t%wU/kU),seconds:Math.floor(t%kU/CU),milliseconds:Math.floor(t%CU)};o.value=r,bO(e.onChange,o.value),n.value=((e,t)=>{var n=Object.values(t),o=[24,60,60,1e3];if(["DD","HH","mm","ss"].forEach(((t,r)=>{e.includes(t)?e=e.replace(t,UR(""+n[r],2,"0")):n[r+1]+=n[r]*o[r]})),e.includes("S")){var r=UR(""+n[n.length-1],3,"0");e=e.includes("SSS")?e.replace("SSS",r):e.includes("SS")?e.replace("SS",r.slice(0,2)):e.replace("S",r.slice(0,1))}return e})(e.format,r)},l=()=>{var{time:t,onEnd:n}=e,o=performance.now();r||(r=o+kR(t)),(s=r-o)<0&&(s=0),c(s),0!==s?i&&(a=ZR(l)):bO(n)},u=function(t){void 0===t&&(t=!1),i&&!t||(i=!0,r=performance.now()+(s||kR(e.time)),l())},d=()=>{i=!1,QR(a)},p=()=>{r=0,i=!1,QR(a),l()};return Bo((()=>e.time),(()=>{p(),e.autoStart&&u()}),{immediate:!0}),lr((()=>{null!=t&&!0===(i=t)&&u(!0)})),ur((()=>{t=i,d()})),Tr(d),{showTime:n,timeData:o,n:MU,start:u,pause:d,reset:p}}});SU.render=function(e,t){return Fi(),zi("div",{class:a(e.n())},[qr(e.$slots,"default",s(Qi(e.timeData)),(()=>[ta(p(e.showTime),1)]))],2)};const IU=SU;IU.install=function(e){e.component(IU.name,IU)};
/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */
var EU,DU,AU=9e15,LU=1e9,RU="0123456789abcdef",OU="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",xU="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",NU={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-AU,maxE:AU,crypto:!1},PU=!0,UU="[DecimalError] ",GU=UU+"Invalid argument: ",BU=UU+"Precision limit exceeded",FU=UU+"crypto unavailable",qU="[object Decimal]",VU=Math.floor,HU=Math.pow,zU=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,jU=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$U=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,WU=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,KU=1e7,YU=7,XU=OU.length-1,JU=xU.length-1,ZU={toStringTag:qU};function QU(e){var t,n,o,r=e.length-1,i="",a=e[0];if(r>0){for(i+=a,t=1;t<r;t++)o=e[t]+"",(n=YU-o.length)&&(i+=uG(n)),i+=o;a=e[t],(n=YU-(o=a+"").length)&&(i+=uG(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return i+a}function eG(e,t,n){if(e!==~~e||e<t||e>n)throw Error(GU+e)}function tG(e,t,n,o){var r,i,a,s;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=YU,r=0):(r=Math.ceil((t+1)/YU),t%=YU),i=HU(10,YU-t),s=e[r]%i|0,null==o?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==i||n>3&&s+1==i/2)&&(e[r+1]/i/100|0)==HU(10,t-2)-1||(s==i/2||0==s)&&0==(e[r+1]/i/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(o||n<4)&&9999==s||!o&&n>3&&4999==s):a=((o||n<4)&&s+1==i||!o&&n>3&&s+1==i/2)&&(e[r+1]/i/1e3|0)==HU(10,t-3)-1,a}function nG(e,t,n){for(var o,r,i=[0],a=0,s=e.length;a<s;){for(r=i.length;r--;)i[r]*=t;for(i[0]+=RU.indexOf(e.charAt(a++)),o=0;o<i.length;o++)i[o]>n-1&&(void 0===i[o+1]&&(i[o+1]=0),i[o+1]+=i[o]/n|0,i[o]%=n)}return i.reverse()}ZU.absoluteValue=ZU.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),rG(e)},ZU.ceil=function(){return rG(new this.constructor(this),this.e+1,2)},ZU.clampedTo=ZU.clamp=function(e,t){var n=this,o=n.constructor;if(e=new o(e),t=new o(t),!e.s||!t.s)return new o(NaN);if(e.gt(t))throw Error(GU+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new o(n)},ZU.comparedTo=ZU.cmp=function(e){var t,n,o,r,i=this,a=i.d,s=(e=new i.constructor(e)).d,c=i.s,l=e.s;if(!a||!s)return c&&l?c!==l?c:a===s?0:!a^c<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?c:s[0]?-l:0;if(c!==l)return c;if(i.e!==e.e)return i.e>e.e^c<0?1:-1;for(t=0,n=(o=a.length)<(r=s.length)?o:r;t<n;++t)if(a[t]!==s[t])return a[t]>s[t]^c<0?1:-1;return o===r?0:o>r^c<0?1:-1},ZU.cosine=ZU.cos=function(){var e,t,n=this,o=n.constructor;return n.d?n.d[0]?(e=o.precision,t=o.rounding,o.precision=e+Math.max(n.e,n.sd())+YU,o.rounding=1,n=function(e,t){var n,o,r;if(t.isZero())return t;o=t.d.length,o<32?r=(1/yG(4,n=Math.ceil(o/3))).toString():(n=16,r="2.3283064365386962890625e-10");e.precision+=n,t=_G(e,1,t.times(r),new e(1));for(var i=n;i--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(o,bG(o,n)),o.precision=e,o.rounding=t,rG(2==DU||3==DU?n.neg():n,e,t,!0)):new o(1):new o(NaN)},ZU.cubeRoot=ZU.cbrt=function(){var e,t,n,o,r,i,a,s,c,l,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(PU=!1,(i=u.s*HU(u.s*u,1/3))&&Math.abs(i)!=1/0?o=new d(i.toString()):(n=QU(u.d),(i=((e=u.e)-n.length+1)%3)&&(n+=1==i||-2==i?"0":"00"),i=HU(n,1/3),e=VU((e+1)/3)-(e%3==(e<0?-1:2)),(o=new d(n=i==1/0?"5e"+e:(n=i.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=u.s),a=(e=d.precision)+3;;)if(l=(c=(s=o).times(s).times(s)).plus(u),o=oG(l.plus(u).times(s),l.plus(c),a+2,1),QU(s.d).slice(0,a)===(n=QU(o.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(r||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(rG(o,e+1,1),t=!o.times(o).times(o).eq(u));break}if(!r&&(rG(s,e+1,0),s.times(s).times(s).eq(u))){o=s;break}a+=4,r=1}return PU=!0,rG(o,e,d.rounding,t)},ZU.decimalPlaces=ZU.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-VU(this.e/YU))*YU,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},ZU.dividedBy=ZU.div=function(e){return oG(this,new this.constructor(e))},ZU.dividedToIntegerBy=ZU.divToInt=function(e){var t=this.constructor;return rG(oG(this,new t(e),0,1,1),t.precision,t.rounding)},ZU.equals=ZU.eq=function(e){return 0===this.cmp(e)},ZU.floor=function(){return rG(new this.constructor(this),this.e+1,3)},ZU.greaterThan=ZU.gt=function(e){return this.cmp(e)>0},ZU.greaterThanOrEqualTo=ZU.gte=function(e){var t=this.cmp(e);return 1==t||0===t},ZU.hyperbolicCosine=ZU.cosh=function(){var e,t,n,o,r,i=this,a=i.constructor,s=new a(1);if(!i.isFinite())return new a(i.s?1/0:NaN);if(i.isZero())return s;n=a.precision,o=a.rounding,a.precision=n+Math.max(i.e,i.sd())+4,a.rounding=1,(r=i.d.length)<32?t=(1/yG(4,e=Math.ceil(r/3))).toString():(e=16,t="2.3283064365386962890625e-10"),i=_G(a,1,i.times(t),new a(1),!0);for(var c,l=e,u=new a(8);l--;)c=i.times(i),i=s.minus(c.times(u.minus(c.times(u))));return rG(i,a.precision=n,a.rounding=o,!0)},ZU.hyperbolicSine=ZU.sinh=function(){var e,t,n,o,r=this,i=r.constructor;if(!r.isFinite()||r.isZero())return new i(r);if(t=i.precision,n=i.rounding,i.precision=t+Math.max(r.e,r.sd())+4,i.rounding=1,(o=r.d.length)<3)r=_G(i,2,r,r,!0);else{e=(e=1.4*Math.sqrt(o))>16?16:0|e,r=_G(i,2,r=r.times(1/yG(5,e)),r,!0);for(var a,s=new i(5),c=new i(16),l=new i(20);e--;)a=r.times(r),r=r.times(s.plus(a.times(c.times(a).plus(l))))}return i.precision=t,i.rounding=n,rG(r,t,n,!0)},ZU.hyperbolicTangent=ZU.tanh=function(){var e,t,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(e=o.precision,t=o.rounding,o.precision=e+7,o.rounding=1,oG(n.sinh(),n.cosh(),o.precision=e,o.rounding=t)):new o(n.s)},ZU.inverseCosine=ZU.acos=function(){var e,t=this,n=t.constructor,o=t.abs().cmp(1),r=n.precision,i=n.rounding;return-1!==o?0===o?t.isNeg()?cG(n,r,i):new n(0):new n(NaN):t.isZero()?cG(n,r+4,i).times(.5):(n.precision=r+6,n.rounding=1,t=t.asin(),e=cG(n,r+4,i).times(.5),n.precision=r,n.rounding=i,e.minus(t))},ZU.inverseHyperbolicCosine=ZU.acosh=function(){var e,t,n=this,o=n.constructor;return n.lte(1)?new o(n.eq(1)?0:NaN):n.isFinite()?(e=o.precision,t=o.rounding,o.precision=e+Math.max(Math.abs(n.e),n.sd())+4,o.rounding=1,PU=!1,n=n.times(n).minus(1).sqrt().plus(n),PU=!0,o.precision=e,o.rounding=t,n.ln()):new o(n)},ZU.inverseHyperbolicSine=ZU.asinh=function(){var e,t,n=this,o=n.constructor;return!n.isFinite()||n.isZero()?new o(n):(e=o.precision,t=o.rounding,o.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,o.rounding=1,PU=!1,n=n.times(n).plus(1).sqrt().plus(n),PU=!0,o.precision=e,o.rounding=t,n.ln())},ZU.inverseHyperbolicTangent=ZU.atanh=function(){var e,t,n,o,r=this,i=r.constructor;return r.isFinite()?r.e>=0?new i(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=i.precision,t=i.rounding,o=r.sd(),Math.max(o,e)<2*-r.e-1?rG(new i(r),e,t,!0):(i.precision=n=o-r.e,r=oG(r.plus(1),new i(1).minus(r),n+e,1),i.precision=e+4,i.rounding=1,r=r.ln(),i.precision=e,i.rounding=t,r.times(.5))):new i(NaN)},ZU.inverseSine=ZU.asin=function(){var e,t,n,o,r=this,i=r.constructor;return r.isZero()?new i(r):(t=r.abs().cmp(1),n=i.precision,o=i.rounding,-1!==t?0===t?((e=cG(i,n+4,o).times(.5)).s=r.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,r=r.div(new i(1).minus(r.times(r)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=o,r.times(2)))},ZU.inverseTangent=ZU.atan=function(){var e,t,n,o,r,i,a,s,c,l=this,u=l.constructor,d=u.precision,p=u.rounding;if(l.isFinite()){if(l.isZero())return new u(l);if(l.abs().eq(1)&&d+4<=JU)return(a=cG(u,d+4,p).times(.25)).s=l.s,a}else{if(!l.s)return new u(NaN);if(d+4<=JU)return(a=cG(u,d+4,p).times(.5)).s=l.s,a}for(u.precision=s=d+10,u.rounding=1,e=n=Math.min(28,s/YU+2|0);e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(PU=!1,t=Math.ceil(s/YU),o=1,c=l.times(l),a=new u(l),r=l;-1!==e;)if(r=r.times(c),i=a.minus(r.div(o+=2)),r=r.times(c),void 0!==(a=i.plus(r.div(o+=2))).d[t])for(e=t;a.d[e]===i.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),PU=!0,rG(a,u.precision=d,u.rounding=p,!0)},ZU.isFinite=function(){return!!this.d},ZU.isInteger=ZU.isInt=function(){return!!this.d&&VU(this.e/YU)>this.d.length-2},ZU.isNaN=function(){return!this.s},ZU.isNegative=ZU.isNeg=function(){return this.s<0},ZU.isPositive=ZU.isPos=function(){return this.s>0},ZU.isZero=function(){return!!this.d&&0===this.d[0]},ZU.lessThan=ZU.lt=function(e){return this.cmp(e)<0},ZU.lessThanOrEqualTo=ZU.lte=function(e){return this.cmp(e)<1},ZU.logarithm=ZU.log=function(e){var t,n,o,r,i,a,s,c,l=this,u=l.constructor,d=u.precision,p=u.rounding;if(null==e)e=new u(10),t=!0;else{if(n=(e=new u(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new u(n&&!n[0]?-1/0:1!=l.s?NaN:n?0:1/0);if(t)if(n.length>1)i=!0;else{for(r=n[0];r%10==0;)r/=10;i=1!==r}if(PU=!1,a=gG(l,s=d+5),o=t?sG(u,s+10):gG(e,s),tG((c=oG(a,o,s,1)).d,r=d,p))do{if(a=gG(l,s+=10),o=t?sG(u,s+10):gG(e,s),c=oG(a,o,s,1),!i){+QU(c.d).slice(r+1,r+15)+1==1e14&&(c=rG(c,d+1,0));break}}while(tG(c.d,r+=10,p));return PU=!0,rG(c,d,p)},ZU.minus=ZU.sub=function(e){var t,n,o,r,i,a,s,c,l,u,d,p,h=this,f=h.constructor;if(e=new f(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new f(e.d||h.s!==e.s?h:NaN):e=new f(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,p=e.d,s=f.precision,c=f.rounding,!l[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!l[0])return new f(3===c?-0:0);e=new f(h)}return PU?rG(e,s,c):e}if(n=VU(e.e/YU),u=VU(h.e/YU),l=l.slice(),i=u-n){for((d=i<0)?(t=l,i=-i,a=p.length):(t=p,n=u,a=l.length),i>(o=Math.max(Math.ceil(s/YU),a)+2)&&(i=o,t.length=1),t.reverse(),o=i;o--;)t.push(0);t.reverse()}else{for((d=(o=l.length)<(a=p.length))&&(a=o),o=0;o<a;o++)if(l[o]!=p[o]){d=l[o]<p[o];break}i=0}for(d&&(t=l,l=p,p=t,e.s=-e.s),a=l.length,o=p.length-a;o>0;--o)l[a++]=0;for(o=p.length;o>i;){if(l[--o]<p[o]){for(r=o;r&&0===l[--r];)l[r]=KU-1;--l[r],l[o]+=KU}l[o]-=p[o]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(e.d=l,e.e=aG(l,n),PU?rG(e,s,c):e):new f(3===c?-0:0)},ZU.modulo=ZU.mod=function(e){var t,n=this,o=n.constructor;return e=new o(e),!n.d||!e.s||e.d&&!e.d[0]?new o(NaN):!e.d||n.d&&!n.d[0]?rG(new o(n),o.precision,o.rounding):(PU=!1,9==o.modulo?(t=oG(n,e.abs(),0,3,1)).s*=e.s:t=oG(n,e,0,o.modulo,1),t=t.times(e),PU=!0,n.minus(t))},ZU.naturalExponential=ZU.exp=function(){return fG(this)},ZU.naturalLogarithm=ZU.ln=function(){return gG(this)},ZU.negated=ZU.neg=function(){var e=new this.constructor(this);return e.s=-e.s,rG(e)},ZU.plus=ZU.add=function(e){var t,n,o,r,i,a,s,c,l,u,d=this,p=d.constructor;if(e=new p(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new p(e.d||d.s===e.s?d:NaN)):e=new p(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(l=d.d,u=e.d,s=p.precision,c=p.rounding,!l[0]||!u[0])return u[0]||(e=new p(d)),PU?rG(e,s,c):e;if(i=VU(d.e/YU),o=VU(e.e/YU),l=l.slice(),r=i-o){for(r<0?(n=l,r=-r,a=u.length):(n=u,o=i,a=l.length),r>(a=(i=Math.ceil(s/YU))>a?i+1:a+1)&&(r=a,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for((a=l.length)-(r=u.length)<0&&(r=a,n=u,u=l,l=n),t=0;r;)t=(l[--r]=l[r]+u[r]+t)/KU|0,l[r]%=KU;for(t&&(l.unshift(t),++o),a=l.length;0==l[--a];)l.pop();return e.d=l,e.e=aG(l,o),PU?rG(e,s,c):e},ZU.precision=ZU.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(GU+e);return n.d?(t=lG(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},ZU.round=function(){var e=this,t=e.constructor;return rG(new t(e),e.e+1,t.rounding)},ZU.sine=ZU.sin=function(){var e,t,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(e=o.precision,t=o.rounding,o.precision=e+Math.max(n.e,n.sd())+YU,o.rounding=1,n=function(e,t){var n,o=t.d.length;if(o<3)return t.isZero()?t:_G(e,2,t,t);n=(n=1.4*Math.sqrt(o))>16?16:0|n,t=t.times(1/yG(5,n)),t=_G(e,2,t,t);for(var r,i=new e(5),a=new e(16),s=new e(20);n--;)r=t.times(t),t=t.times(i.plus(r.times(a.times(r).minus(s))));return t}(o,bG(o,n)),o.precision=e,o.rounding=t,rG(DU>2?n.neg():n,e,t,!0)):new o(NaN)},ZU.squareRoot=ZU.sqrt=function(){var e,t,n,o,r,i,a=this,s=a.d,c=a.e,l=a.s,u=a.constructor;if(1!==l||!s||!s[0])return new u(!l||l<0&&(!s||s[0])?NaN:s?a:1/0);for(PU=!1,0==(l=Math.sqrt(+a))||l==1/0?(((t=QU(s)).length+c)%2==0&&(t+="0"),l=Math.sqrt(t),c=VU((c+1)/2)-(c<0||c%2),o=new u(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):o=new u(l.toString()),n=(c=u.precision)+3;;)if(o=(i=o).plus(oG(a,i,n+2,1)).times(.5),QU(i.d).slice(0,n)===(t=QU(o.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(rG(o,c+1,1),e=!o.times(o).eq(a));break}if(!r&&(rG(i,c+1,0),i.times(i).eq(a))){o=i;break}n+=4,r=1}return PU=!0,rG(o,c,u.rounding,e)},ZU.tangent=ZU.tan=function(){var e,t,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(e=o.precision,t=o.rounding,o.precision=e+10,o.rounding=1,(n=n.sin()).s=1,n=oG(n,new o(1).minus(n.times(n)).sqrt(),e+10,0),o.precision=e,o.rounding=t,rG(2==DU||4==DU?n.neg():n,e,t,!0)):new o(NaN)},ZU.times=ZU.mul=function(e){var t,n,o,r,i,a,s,c,l,u=this,d=u.constructor,p=u.d,h=(e=new d(e)).d;if(e.s*=u.s,!(p&&p[0]&&h&&h[0]))return new d(!e.s||p&&!p[0]&&!h||h&&!h[0]&&!p?NaN:p&&h?0*e.s:e.s/0);for(n=VU(u.e/YU)+VU(e.e/YU),(c=p.length)<(l=h.length)&&(i=p,p=h,h=i,a=c,c=l,l=a),i=[],o=a=c+l;o--;)i.push(0);for(o=l;--o>=0;){for(t=0,r=c+o;r>o;)s=i[r]+h[o]*p[r-o-1]+t,i[r--]=s%KU|0,t=s/KU|0;i[r]=(i[r]+t)%KU|0}for(;!i[--a];)i.pop();return t?++n:i.shift(),e.d=i,e.e=aG(i,n),PU?rG(e,d.precision,d.rounding):e},ZU.toBinary=function(e,t){return MG(this,2,e,t)},ZU.toDecimalPlaces=ZU.toDP=function(e,t){var n=this,o=n.constructor;return n=new o(n),void 0===e?n:(eG(e,0,LU),void 0===t?t=o.rounding:eG(t,0,8),rG(n,e+n.e+1,t))},ZU.toExponential=function(e,t){var n,o=this,r=o.constructor;return void 0===e?n=iG(o,!0):(eG(e,0,LU),void 0===t?t=r.rounding:eG(t,0,8),n=iG(o=rG(new r(o),e+1,t),!0,e+1)),o.isNeg()&&!o.isZero()?"-"+n:n},ZU.toFixed=function(e,t){var n,o,r=this,i=r.constructor;return void 0===e?n=iG(r):(eG(e,0,LU),void 0===t?t=i.rounding:eG(t,0,8),n=iG(o=rG(new i(r),e+r.e+1,t),!1,e+o.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},ZU.toFraction=function(e){var t,n,o,r,i,a,s,c,l,u,d,p,h=this,f=h.d,g=h.constructor;if(!f)return new g(h);if(l=n=new g(1),o=c=new g(0),a=(i=(t=new g(o)).e=lG(f)-h.e-1)%YU,t.d[0]=HU(10,a<0?YU+a:a),null==e)e=i>0?t:l;else{if(!(s=new g(e)).isInt()||s.lt(l))throw Error(GU+s);e=s.gt(t)?i>0?t:l:s}for(PU=!1,s=new g(QU(f)),u=g.precision,g.precision=i=f.length*YU*2;d=oG(s,t,0,1,1),1!=(r=n.plus(d.times(o))).cmp(e);)n=o,o=r,r=l,l=c.plus(d.times(r)),c=r,r=t,t=s.minus(d.times(r)),s=r;return r=oG(e.minus(n),o,0,1,1),c=c.plus(r.times(l)),n=n.plus(r.times(o)),c.s=l.s=h.s,p=oG(l,o,i,1).minus(h).abs().cmp(oG(c,n,i,1).minus(h).abs())<1?[l,o]:[c,n],g.precision=u,PU=!0,p},ZU.toHexadecimal=ZU.toHex=function(e,t){return MG(this,16,e,t)},ZU.toNearest=function(e,t){var n=this,o=n.constructor;if(n=new o(n),null==e){if(!n.d)return n;e=new o(1),t=o.rounding}else{if(e=new o(e),void 0===t?t=o.rounding:eG(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(PU=!1,n=oG(n,e,0,t,1).times(e),PU=!0,rG(n)):(e.s=n.s,n=e),n},ZU.toNumber=function(){return+this},ZU.toOctal=function(e,t){return MG(this,8,e,t)},ZU.toPower=ZU.pow=function(e){var t,n,o,r,i,a,s=this,c=s.constructor,l=+(e=new c(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new c(HU(+s,l));if((s=new c(s)).eq(1))return s;if(o=c.precision,i=c.rounding,e.eq(1))return rG(s,o,i);if((t=VU(e.e/YU))>=e.d.length-1&&(n=l<0?-l:l)<=9007199254740991)return r=dG(c,s,n,o),e.s<0?new c(1).div(r):rG(r,o,i);if((a=s.s)<0){if(t<e.d.length-1)return new c(NaN);if(0==(1&e.d[t])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(t=0!=(n=HU(+s,l))&&isFinite(n)?new c(n+"").e:VU(l*(Math.log("0."+QU(s.d))/Math.LN10+s.e+1)))>c.maxE+1||t<c.minE-1?new c(t>0?a/0:0):(PU=!1,c.rounding=s.s=1,n=Math.min(12,(t+"").length),(r=fG(e.times(gG(s,o+n)),o)).d&&tG((r=rG(r,o+5,1)).d,o,i)&&(t=o+10,+QU((r=rG(fG(e.times(gG(s,t+n)),t),t+5,1)).d).slice(o+1,o+15)+1==1e14&&(r=rG(r,o+1,0))),r.s=a,PU=!0,c.rounding=i,rG(r,o,i))},ZU.toPrecision=function(e,t){var n,o=this,r=o.constructor;return void 0===e?n=iG(o,o.e<=r.toExpNeg||o.e>=r.toExpPos):(eG(e,1,LU),void 0===t?t=r.rounding:eG(t,0,8),n=iG(o=rG(new r(o),e,t),e<=o.e||o.e<=r.toExpNeg,e)),o.isNeg()&&!o.isZero()?"-"+n:n},ZU.toSignificantDigits=ZU.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(eG(e,1,LU),void 0===t?t=n.rounding:eG(t,0,8)),rG(new n(this),e,t)},ZU.toString=function(){var e=this,t=e.constructor,n=iG(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},ZU.truncated=ZU.trunc=function(){return rG(new this.constructor(this),this.e+1,1)},ZU.valueOf=ZU.toJSON=function(){var e=this,t=e.constructor,n=iG(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var oG=function(){function e(e,t,n){var o,r=0,i=e.length;for(e=e.slice();i--;)o=e[i]*t+r,e[i]=o%n|0,r=o/n|0;return r&&e.unshift(r),e}function t(e,t,n,o){var r,i;if(n!=o)i=n>o?1:-1;else for(r=i=0;r<n;r++)if(e[r]!=t[r]){i=e[r]>t[r]?1:-1;break}return i}function n(e,t,n,o){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*o+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(o,r,i,a,s,c){var l,u,d,p,h,f,g,v,m,_,y,b,M,C,k,w,T,S,I,E,D=o.constructor,A=o.s==r.s?1:-1,L=o.d,R=r.d;if(!(L&&L[0]&&R&&R[0]))return new D(o.s&&r.s&&(L?!R||L[0]!=R[0]:R)?L&&0==L[0]||!R?0*A:A/0:NaN);for(c?(h=1,u=o.e-r.e):(c=KU,h=YU,u=VU(o.e/h)-VU(r.e/h)),I=R.length,T=L.length,_=(m=new D(A)).d=[],d=0;R[d]==(L[d]||0);d++);if(R[d]>(L[d]||0)&&u--,null==i?(C=i=D.precision,a=D.rounding):C=s?i+(o.e-r.e)+1:i,C<0)_.push(1),f=!0;else{if(C=C/h+2|0,d=0,1==I){for(p=0,R=R[0],C++;(d<T||p)&&C--;d++)k=p*c+(L[d]||0),_[d]=k/R|0,p=k%R|0;f=p||d<T}else{for((p=c/(R[0]+1)|0)>1&&(R=e(R,p,c),L=e(L,p,c),I=R.length,T=L.length),w=I,b=(y=L.slice(0,I)).length;b<I;)y[b++]=0;(E=R.slice()).unshift(0),S=R[0],R[1]>=c/2&&++S;do{p=0,(l=t(R,y,I,b))<0?(M=y[0],I!=b&&(M=M*c+(y[1]||0)),(p=M/S|0)>1?(p>=c&&(p=c-1),1==(l=t(g=e(R,p,c),y,v=g.length,b=y.length))&&(p--,n(g,I<v?E:R,v,c))):(0==p&&(l=p=1),g=R.slice()),(v=g.length)<b&&g.unshift(0),n(y,g,b,c),-1==l&&(l=t(R,y,I,b=y.length))<1&&(p++,n(y,I<b?E:R,b,c)),b=y.length):0===l&&(p++,y=[0]),_[d++]=p,l&&y[0]?y[b++]=L[w]||0:(y=[L[w]],b=1)}while((w++<T||void 0!==y[0])&&C--);f=void 0!==y[0]}_[0]||_.shift()}if(1==h)m.e=u,EU=f;else{for(d=1,p=_[0];p>=10;p/=10)d++;m.e=d+u*h-1,rG(m,s?i+m.e+1:i,a,f)}return m}}();function rG(e,t,n,o){var r,i,a,s,c,l,u,d,p,h=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(r=1,s=d[0];s>=10;s/=10)r++;if((i=t-r)<0)i+=YU,a=t,c=(u=d[p=0])/HU(10,r-a-1)%10|0;else if((p=Math.ceil((i+1)/YU))>=(s=d.length)){if(!o)break e;for(;s++<=p;)d.push(0);u=c=0,r=1,a=(i%=YU)-YU+1}else{for(u=s=d[p],r=1;s>=10;s/=10)r++;c=(a=(i%=YU)-YU+r)<0?0:u/HU(10,r-a-1)%10|0}if(o=o||t<0||void 0!==d[p+1]||(a<0?u:u%HU(10,r-a-1)),l=n<4?(c||o)&&(0==n||n==(e.s<0?3:2)):c>5||5==c&&(4==n||o||6==n&&(i>0?a>0?u/HU(10,r-a):0:d[p-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,l?(t-=e.e+1,d[0]=HU(10,(YU-t%YU)%YU),e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=p,s=1,p--):(d.length=p+1,s=HU(10,YU-i),d[p]=a>0?(u/HU(10,r-a)%HU(10,a)|0)*s:0),l)for(;;){if(0==p){for(i=1,a=d[0];a>=10;a/=10)i++;for(a=d[0]+=s,s=1;a>=10;a/=10)s++;i!=s&&(e.e++,d[0]==KU&&(d[0]=1));break}if(d[p]+=s,d[p]!=KU)break;d[p--]=0,s=1}for(i=d.length;0===d[--i];)d.pop()}return PU&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function iG(e,t,n){if(!e.isFinite())return vG(e);var o,r=e.e,i=QU(e.d),a=i.length;return t?(n&&(o=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+uG(o):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):r<0?(i="0."+uG(-r-1)+i,n&&(o=n-a)>0&&(i+=uG(o))):r>=a?(i+=uG(r+1-a),n&&(o=n-r-1)>0&&(i=i+"."+uG(o))):((o=r+1)<a&&(i=i.slice(0,o)+"."+i.slice(o)),n&&(o=n-a)>0&&(r+1===a&&(i+="."),i+=uG(o))),i}function aG(e,t){var n=e[0];for(t*=YU;n>=10;n/=10)t++;return t}function sG(e,t,n){if(t>XU)throw PU=!0,n&&(e.precision=n),Error(BU);return rG(new e(OU),t,1,!0)}function cG(e,t,n){if(t>JU)throw Error(BU);return rG(new e(xU),t,n,!0)}function lG(e){var t=e.length-1,n=t*YU+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function uG(e){for(var t="";e--;)t+="0";return t}function dG(e,t,n,o){var r,i=new e(1),a=Math.ceil(o/YU+4);for(PU=!1;;){if(n%2&&CG((i=i.times(t)).d,a)&&(r=!0),0===(n=VU(n/2))){n=i.d.length-1,r&&0===i.d[n]&&++i.d[n];break}CG((t=t.times(t)).d,a)}return PU=!0,i}function pG(e){return 1&e.d[e.d.length-1]}function hG(e,t,n){for(var o,r=new e(t[0]),i=0;++i<t.length;){if(!(o=new e(t[i])).s){r=o;break}r[n](o)&&(r=o)}return r}function fG(e,t){var n,o,r,i,a,s,c,l=0,u=0,d=0,p=e.constructor,h=p.rounding,f=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(PU=!1,c=f):c=t,s=new p(.03125);e.e>-2;)e=e.times(s),d+=5;for(c+=o=Math.log(HU(2,d))/Math.LN10*2+5|0,n=i=a=new p(1),p.precision=c;;){if(i=rG(i.times(e),c,1),n=n.times(++u),QU((s=a.plus(oG(i,n,c,1))).d).slice(0,c)===QU(a.d).slice(0,c)){for(r=d;r--;)a=rG(a.times(a),c,1);if(null!=t)return p.precision=f,a;if(!(l<3&&tG(a.d,c-o,h,l)))return rG(a,p.precision=f,h,PU=!0);p.precision=c+=10,n=i=s=new p(1),u=0,l++}a=s}}function gG(e,t){var n,o,r,i,a,s,c,l,u,d,p,h=1,f=e,g=f.d,v=f.constructor,m=v.rounding,_=v.precision;if(f.s<0||!g||!g[0]||!f.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=f.s?NaN:g?0:f);if(null==t?(PU=!1,u=_):u=t,v.precision=u+=10,o=(n=QU(g)).charAt(0),!(Math.abs(i=f.e)<15e14))return l=sG(v,u+2,_).times(i+""),f=gG(new v(o+"."+n.slice(1)),u-10).plus(l),v.precision=_,null==t?rG(f,_,m,PU=!0):f;for(;o<7&&1!=o||1==o&&n.charAt(1)>3;)o=(n=QU((f=f.times(e)).d)).charAt(0),h++;for(i=f.e,o>1?(f=new v("0."+n),i++):f=new v(o+"."+n.slice(1)),d=f,c=a=f=oG(f.minus(1),f.plus(1),u,1),p=rG(f.times(f),u,1),r=3;;){if(a=rG(a.times(p),u,1),QU((l=c.plus(oG(a,new v(r),u,1))).d).slice(0,u)===QU(c.d).slice(0,u)){if(c=c.times(2),0!==i&&(c=c.plus(sG(v,u+2,_).times(i+""))),c=oG(c,new v(h),u,1),null!=t)return v.precision=_,c;if(!tG(c.d,u-10,m,s))return rG(c,v.precision=_,m,PU=!0);v.precision=u+=10,l=a=f=oG(d.minus(1),d.plus(1),u,1),p=rG(f.times(f),u,1),r=s=1}c=l,r+=2}}function vG(e){return String(e.s*e.s/0)}function mG(e,t){var n,o,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(o=t.search(/e/i))>0?(n<0&&(n=o),n+=+t.slice(o+1),t=t.substring(0,o)):n<0&&(n=t.length),o=0;48===t.charCodeAt(o);o++);for(r=t.length;48===t.charCodeAt(r-1);--r);if(t=t.slice(o,r)){if(r-=o,e.e=n=n-o-1,e.d=[],o=(n+1)%YU,n<0&&(o+=YU),o<r){for(o&&e.d.push(+t.slice(0,o)),r-=YU;o<r;)e.d.push(+t.slice(o,o+=YU));t=t.slice(o),o=YU-t.length}else o-=r;for(;o--;)t+="0";e.d.push(+t),PU&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function _G(e,t,n,o,r){var i,a,s,c,l=e.precision,u=Math.ceil(l/YU);for(PU=!1,c=n.times(n),s=new e(o);;){if(a=oG(s.times(c),new e(t++*t++),l,1),s=r?o.plus(a):o.minus(a),o=oG(a.times(c),new e(t++*t++),l,1),void 0!==(a=s.plus(o)).d[u]){for(i=u;a.d[i]===s.d[i]&&i--;);if(-1==i)break}i=s,s=o,o=a,a=i}return PU=!0,a.d.length=u+1,a}function yG(e,t){for(var n=e;--t;)n*=e;return n}function bG(e,t){var n,o=t.s<0,r=cG(e,e.precision,1),i=r.times(.5);if((t=t.abs()).lte(i))return DU=o?4:1,t;if((n=t.divToInt(r)).isZero())DU=o?3:2;else{if((t=t.minus(n.times(r))).lte(i))return DU=pG(n)?o?2:3:o?4:1,t;DU=pG(n)?o?1:4:o?3:2}return t.minus(r).abs()}function MG(e,t,n,o){var r,i,a,s,c,l,u,d,p,h=e.constructor,f=void 0!==n;if(f?(eG(n,1,LU),void 0===o?o=h.rounding:eG(o,0,8)):(n=h.precision,o=h.rounding),e.isFinite()){for(f?(r=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):r=t,(a=(u=iG(e)).indexOf("."))>=0&&(u=u.replace(".",""),(p=new h(1)).e=u.length-a,p.d=nG(iG(p),10,r),p.e=p.d.length),i=c=(d=nG(u,10,r)).length;0==d[--c];)d.pop();if(d[0]){if(a<0?i--:((e=new h(e)).d=d,e.e=i,d=(e=oG(e,p,n,o,0,r)).d,i=e.e,l=EU),a=d[n],s=r/2,l=l||void 0!==d[n+1],l=o<4?(void 0!==a||l)&&(0===o||o===(e.s<0?3:2)):a>s||a===s&&(4===o||l||6===o&&1&d[n-1]||o===(e.s<0?8:7)),d.length=n,l)for(;++d[--n]>r-1;)d[n]=0,n||(++i,d.unshift(1));for(c=d.length;!d[c-1];--c);for(a=0,u="";a<c;a++)u+=RU.charAt(d[a]);if(f){if(c>1)if(16==t||8==t){for(a=16==t?4:3,--c;c%a;c++)u+="0";for(c=(d=nG(u,r,t)).length;!d[c-1];--c);for(a=1,u="1.";a<c;a++)u+=RU.charAt(d[a])}else u=u.charAt(0)+"."+u.slice(1);u=u+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)u="0"+u;u="0."+u}else if(++i>c)for(i-=c;i--;)u+="0";else i<c&&(u=u.slice(0,i)+"."+u.slice(i))}else u=f?"0p+0":"0";u=(16==t?"0x":2==t?"0b":8==t?"0o":"")+u}else u=vG(e);return e.s<0?"-"+u:u}function CG(e,t){if(e.length>t)return e.length=t,!0}function kG(e){return new this(e).abs()}function wG(e){return new this(e).acos()}function TG(e){return new this(e).acosh()}function SG(e,t){return new this(e).plus(t)}function IG(e){return new this(e).asin()}function EG(e){return new this(e).asinh()}function DG(e){return new this(e).atan()}function AG(e){return new this(e).atanh()}function LG(e,t){e=new this(e),t=new this(t);var n,o=this.precision,r=this.rounding,i=o+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?cG(this,o,r):new this(0)).s=e.s:!e.d||t.isZero()?(n=cG(this,i,1).times(.5)).s=e.s:t.s<0?(this.precision=i,this.rounding=1,n=this.atan(oG(e,t,i,1)),t=cG(this,i,1),this.precision=o,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(oG(e,t,i,1)):(n=cG(this,i,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function RG(e){return new this(e).cbrt()}function OG(e){return rG(e=new this(e),e.e+1,2)}function xG(e,t,n){return new this(e).clamp(t,n)}function NG(e){if(!e||"object"!=typeof e)throw Error(UU+"Object expected");var t,n,o,r=!0===e.defaults,i=["precision",1,LU,"rounding",0,8,"toExpNeg",-AU,0,"toExpPos",0,AU,"maxE",0,AU,"minE",-AU,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(n=i[t],r&&(this[n]=NU[n]),void 0!==(o=e[n])){if(!(VU(o)===o&&o>=i[t+1]&&o<=i[t+2]))throw Error(GU+n+": "+o);this[n]=o}if(n="crypto",r&&(this[n]=NU[n]),void 0!==(o=e[n])){if(!0!==o&&!1!==o&&0!==o&&1!==o)throw Error(GU+n+": "+o);if(o){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(FU);this[n]=!0}else this[n]=!1}return this}function PG(e){return new this(e).cos()}function UG(e){return new this(e).cosh()}function GG(e,t){return new this(e).div(t)}function BG(e){return new this(e).exp()}function FG(e){return rG(e=new this(e),e.e+1,3)}function qG(){var e,t,n=new this(0);for(PU=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return PU=!0,new this(1/0);n=t}return PU=!0,n.sqrt()}function VG(e){return e instanceof lB||e&&e.toStringTag===qU||!1}function HG(e){return new this(e).ln()}function zG(e,t){return new this(e).log(t)}function jG(e){return new this(e).log(2)}function $G(e){return new this(e).log(10)}function WG(){return hG(this,arguments,"lt")}function KG(){return hG(this,arguments,"gt")}function YG(e,t){return new this(e).mod(t)}function XG(e,t){return new this(e).mul(t)}function JG(e,t){return new this(e).pow(t)}function ZG(e){var t,n,o,r,i=0,a=new this(1),s=[];if(void 0===e?e=this.precision:eG(e,1,LU),o=Math.ceil(e/YU),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(o));i<o;)(r=t[i])>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:s[i++]=r%1e7;else{if(!crypto.randomBytes)throw Error(FU);for(t=crypto.randomBytes(o*=4);i<o;)(r=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((127&t[i+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,i):(s.push(r%1e7),i+=4);i=o/4}else for(;i<o;)s[i++]=1e7*Math.random()|0;for(o=s[--i],e%=YU,o&&e&&(r=HU(10,YU-e),s[i]=(o/r|0)*r);0===s[i];i--)s.pop();if(i<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=YU)s.shift();for(o=1,r=s[0];r>=10;r/=10)o++;o<YU&&(n-=YU-o)}return a.e=n,a.d=s,a}function QG(e){return rG(e=new this(e),e.e+1,this.rounding)}function eB(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function tB(e){return new this(e).sin()}function nB(e){return new this(e).sinh()}function oB(e){return new this(e).sqrt()}function rB(e,t){return new this(e).sub(t)}function iB(){var e=0,t=arguments,n=new this(t[e]);for(PU=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return PU=!0,rG(n,this.precision,this.rounding)}function aB(e){return new this(e).tan()}function sB(e){return new this(e).tanh()}function cB(e){return rG(e=new this(e),e.e+1,1)}ZU[Symbol.for("nodejs.util.inspect.custom")]=ZU.toString,ZU[Symbol.toStringTag]="Decimal";var lB=ZU.constructor=function e(t){var n,o,r;function i(e){var t,n,o,r=this;if(!(r instanceof i))return new i(e);if(r.constructor=i,VG(e))return r.s=e.s,void(PU?!e.d||e.e>i.maxE?(r.e=NaN,r.d=null):e.e<i.minE?(r.e=0,r.d=[0]):(r.e=e.e,r.d=e.d.slice()):(r.e=e.e,r.d=e.d?e.d.slice():e.d));if("number"===(o=typeof e)){if(0===e)return r.s=1/e<0?-1:1,r.e=0,void(r.d=[0]);if(e<0?(e=-e,r.s=-1):r.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(PU?t>i.maxE?(r.e=NaN,r.d=null):t<i.minE?(r.e=0,r.d=[0]):(r.e=t,r.d=[e]):(r.e=t,r.d=[e]))}return 0*e!=0?(e||(r.s=NaN),r.e=NaN,void(r.d=null)):mG(r,e.toString())}if("string"!==o)throw Error(GU+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),r.s=-1):(43===n&&(e=e.slice(1)),r.s=1),WU.test(e)?mG(r,e):function(e,t){var n,o,r,i,a,s,c,l,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),WU.test(t))return mG(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(jU.test(t))n=16,t=t.toLowerCase();else if(zU.test(t))n=2;else{if(!$U.test(t))throw Error(GU+t);n=8}for((i=t.search(/p/i))>0?(c=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),a=(i=t.indexOf("."))>=0,o=e.constructor,a&&(i=(s=(t=t.replace(".","")).length)-i,r=dG(o,new o(n),i,2*i)),i=u=(l=nG(t,n,KU)).length-1;0===l[i];--i)l.pop();return i<0?new o(0*e.s):(e.e=aG(l,u),e.d=l,PU=!1,a&&(e=oG(e,r,4*s)),c&&(e=e.times(Math.abs(c)<54?HU(2,c):lB.pow(2,c))),PU=!0,e)}(r,e)}if(i.prototype=ZU,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=NG,i.clone=e,i.isDecimal=VG,i.abs=kG,i.acos=wG,i.acosh=TG,i.add=SG,i.asin=IG,i.asinh=EG,i.atan=DG,i.atanh=AG,i.atan2=LG,i.cbrt=RG,i.ceil=OG,i.clamp=xG,i.cos=PG,i.cosh=UG,i.div=GG,i.exp=BG,i.floor=FG,i.hypot=qG,i.ln=HG,i.log=zG,i.log10=$G,i.log2=jG,i.max=WG,i.min=KG,i.mod=YG,i.mul=XG,i.pow=JG,i.random=ZG,i.round=QG,i.sign=eB,i.sin=tB,i.sinh=nB,i.sqrt=oB,i.sub=rB,i.sum=iB,i.tan=aB,i.tanh=sB,i.trunc=cB,void 0===t&&(t={}),t&&!0!==t.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)t.hasOwnProperty(o=r[n++])||(t[o]=this[o]);return i.config(t),i}(NU);OU=new lB(OU),xU=new lB(xU);var uB={modelValue:{type:[String,Number],default:0},min:{type:[String,Number]},max:{type:[String,Number]},step:{type:[String,Number],default:1},color:{type:String},inputWidth:{type:[String,Number]},inputTextSize:{type:[String,Number]},buttonSize:{type:[String,Number]},decimalLength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disableIncrement:{type:Boolean,default:!1},disableDecrement:{type:Boolean,default:!1},disableInput:{type:Boolean,default:!1},lazyChange:{type:Boolean,default:!1},incrementButton:{type:Boolean,default:!0},decrementButton:{type:Boolean,default:!0},press:{type:Boolean,default:!0},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onInputChange","onLazyChange","onIncrement","onDecrement"]},rules:{type:Array},onBeforeChange:MO(),onChange:MO(),onIncrement:MO(),onDecrement:MO(),"onUpdate:modelValue":MO()},{n:dB,classes:pB}=yO("counter"),hB=["inputmode","readonly","disabled"];var fB=er({name:"VarCounter",components:{VarIcon:zO,VarFormDetails:GP},directives:{Ripple:EO},inheritAttrs:!1,props:uB,setup(e){var t,n,o,r,i=qn(""),{bindForm:a,form:s}=HP(),{errorMessage:c,validateWithTrigger:l,validate:u,resetValidation:d}=mO(),{readonly:p,disabled:h}=null!=s?s:{},f=()=>u(e.rules,e.modelValue),g=t=>{po((()=>{var{validateTrigger:n,rules:o,modelValue:r}=e;l(n,t,o,r)}))},v=()=>{var{min:t}=e;bO(e["onUpdate:modelValue"],null!=t?kR(t):0),d()},m={reset:v,validate:f,resetValidation:d},_=Ma((()=>{var{max:t,modelValue:n}=e;return null!=t&&kR(n)>=kR(t)})),y=Ma((()=>{var{min:t,modelValue:n}=e;return null!=t&&kR(n)<=kR(t)})),b=t=>{var{decimalLength:n,max:o,min:r}=e,i=kR(t);return null!=o&&i>kR(o)&&(i=kR(o)),null!=r&&i<kR(r)&&(i=kR(r)),t=String(i),null!=n&&(t=i.toFixed(kR(n))),t},M=()=>{var{disabled:t,readonly:n,disableDecrement:o,decrementButton:r,lazyChange:i,step:a,modelValue:s,onDecrement:c,onBeforeChange:l}=e;if(!(null!=h&&h.value||null!=p&&p.value||t||n||o)&&r&&!y.value){var u=new lB(kR(s)).minus(new lB(kR(a))).toString(),d=b(u),f=kR(d);bO(c,f),i?bO(l,f,S):(T(d),g("onDecrement"))}},C=()=>{var{disabled:t,readonly:n,disableIncrement:o,incrementButton:r,lazyChange:i,step:a,modelValue:s,onIncrement:c,onBeforeChange:l}=e;if(!(null!=h&&h.value||null!=p&&p.value||t||n||o)&&r&&!_.value){var u=new lB(kR(s)).plus(new lB(kR(a))).toString(),d=b(u),f=kR(d);bO(c,f),i?bO(l,f,S):(T(d),g("onIncrement"))}},k=()=>{t=window.setTimeout((()=>{C(),k()}),100)},w=()=>{n=window.setTimeout((()=>{M(),w()}),100)},T=t=>{i.value=t;var n=kR(t);bO(e["onUpdate:modelValue"],n)},S=e=>{T(b(String(e))),g("onLazyChange")};return bO(a,m),Bo((()=>e.modelValue),(t=>{T(b(String(t))),bO(e.onChange,kR(t))})),T(b(String(e.modelValue))),{n:dB,classes:pB,inputValue:i,errorMessage:c,formDisabled:h,formReadonly:p,isMax:_,isMin:y,validate:f,reset:v,resetValidation:d,handleChange:t=>{var{lazyChange:n,onBeforeChange:o}=e,{value:r}=t.target,i=b(r);n?bO(o,kR(i),S):T(i),g("onInputChange")},decrement:M,increment:C,pressDecrement:()=>{var{press:t,lazyChange:n}=e;t&&!n&&(r=window.setTimeout((()=>{w()}),600))},pressIncrement:()=>{var{press:t,lazyChange:n}=e;t&&!n&&(o=window.setTimeout((()=>{k()}),600))},releaseDecrement:()=>{n&&clearTimeout(n),r&&clearTimeout(r)},releaseIncrement:()=>{t&&clearTimeout(t),o&&clearTimeout(o)},toSizeUnit:XR,toNumber:kR}}});fB.render=function(e,n){var o=xr("var-icon"),r=xr("var-form-details"),i=Ur("ripple");return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box")))},[Ji("div",aa({class:e.classes(e.n("controller"),e.n("$-elevation--2"),[e.disabled||e.formDisabled,e.n("--disabled")],[e.errorMessage,e.n("--error")]),style:{background:e.color?e.color:void 0}},e.$attrs),[Ar(Zi(o,{"var-counter-cover":"",name:"minus",class:a(e.classes(e.n("decrement-button"),[!e.decrementButton,e.n("--hidden")],[e.disabled||e.formDisabled,e.n("--not-allowed")])),style:t({width:e.toSizeUnit(e.buttonSize),height:e.toSizeUnit(e.buttonSize)}),onClick:e.decrement,onTouchstart:e.pressDecrement,onTouchend:e.releaseDecrement,onTouchcancel:e.releaseDecrement},null,8,["class","style","onClick","onTouchstart","onTouchend","onTouchcancel"]),[[i,{disabled:!e.ripple||e.disabled||e.formDisabled||e.readonly||e.formReadonly||e.disableDecrement||!e.decrementButton||e.isMin}]]),Ar(Ji("input",{class:a(e.classes(e.n("input"),[e.disabled||e.formDisabled,e.n("--not-allowed")])),style:t({width:e.toSizeUnit(e.inputWidth),fontSize:e.toSizeUnit(e.inputTextSize)}),inputmode:0===e.toNumber(e.decimalLength)?"numeric":"decimal",readonly:e.readonly||e.formReadonly,disabled:e.disabled||e.formDisabled||e.disableInput,"onUpdate:modelValue":n[0]||(n[0]=t=>e.inputValue=t),onChange:n[1]||(n[1]=function(){return e.handleChange&&e.handleChange(...arguments)})},null,46,hB),[[ws,e.inputValue]]),Ar(Zi(o,{"var-counter-cover":"",name:"plus",class:a(e.classes(e.n("increment-button"),[!e.incrementButton,e.n("--hidden")],[e.disabled||e.formDisabled,e.n("--not-allowed")])),style:t({width:e.toSizeUnit(e.buttonSize),height:e.toSizeUnit(e.buttonSize)}),onClick:e.increment,onTouchstart:e.pressIncrement,onTouchend:e.releaseIncrement,onTouchcancel:e.releaseIncrement},null,8,["class","style","onClick","onTouchstart","onTouchend","onTouchcancel"]),[[i,{disabled:!e.ripple||e.disabled||e.readonly||e.formDisabled||e.formReadonly||e.disableIncrement||!e.incrementButton||e.isMax}]])],16),Zi(r,{"error-message":e.errorMessage},null,8,["error-message"])],2)};const gB=fB;gB.install=function(e){e.component(gB.name,gB)};var vB=1e3,mB=6e4,_B=36e5,yB="millisecond",bB="second",MB="minute",CB="hour",kB="day",wB="week",TB="month",SB="quarter",IB="year",EB="date",DB="Invalid Date",AB=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,LB=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;const RB={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}};var OB=function(e,t,n){var o=String(e);return!o||o.length>=t?e:""+Array(t+1-o.length).join(n)+e};const xB={s:OB,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),o=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+OB(o,2,"0")+":"+OB(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var o=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(o,TB),i=n-r<0,a=t.clone().add(o+(i?-1:1),TB);return+(-(o+(n-r)/(i?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:TB,y:IB,w:wB,d:kB,D:EB,h:CB,m:MB,s:bB,ms:yB,Q:SB}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};var NB="en",PB={};PB[NB]=RB;var UB=function(e){return e instanceof qB},GB=function e(t,n,o){var r;if(!t)return NB;if("string"==typeof t){var i=t.toLowerCase();PB[i]&&(r=i),n&&(PB[i]=n,r=i);var a=t.split("-");if(!r&&a.length>1)return e(a[0])}else{var s=t.name;PB[s]=t,r=s}return!o&&r&&(NB=r),r||!o&&NB},BB=function(e,t){if(UB(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new qB(n)},FB=xB;FB.l=GB,FB.i=UB,FB.w=function(e,t){return BB(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var qB=function(){function e(e){this.$L=GB(e.locale,null,!0),this.parse(e)}var t=e.prototype;return t.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(FB.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var o=t.match(AB);if(o){var r=o[2]-1||0,i=(o[7]||"0").substring(0,3);return n?new Date(Date.UTC(o[1],r,o[3]||1,o[4]||0,o[5]||0,o[6]||0,i)):new Date(o[1],r,o[3]||1,o[4]||0,o[5]||0,o[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},t.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},t.$utils=function(){return FB},t.isValid=function(){return!(this.$d.toString()===DB)},t.isSame=function(e,t){var n=BB(e);return this.startOf(t)<=n&&n<=this.endOf(t)},t.isAfter=function(e,t){return BB(e)<this.startOf(t)},t.isBefore=function(e,t){return this.endOf(t)<BB(e)},t.$g=function(e,t,n){return FB.u(e)?this[t]:this.set(n,e)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(e,t){var n=this,o=!!FB.u(t)||t,r=FB.p(e),i=function(e,t){var r=FB.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return o?r:r.endOf(kB)},a=function(e,t){return FB.w(n.toDate()[e].apply(n.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},s=this.$W,c=this.$M,l=this.$D,u="set"+(this.$u?"UTC":"");switch(r){case IB:return o?i(1,0):i(31,11);case TB:return o?i(1,c):i(0,c+1);case wB:var d=this.$locale().weekStart||0,p=(s<d?s+7:s)-d;return i(o?l-p:l+(6-p),c);case kB:case EB:return a(u+"Hours",0);case CB:return a(u+"Minutes",1);case MB:return a(u+"Seconds",2);case bB:return a(u+"Milliseconds",3);default:return this.clone()}},t.endOf=function(e){return this.startOf(e,!1)},t.$set=function(e,t){var n,o=FB.p(e),r="set"+(this.$u?"UTC":""),i=(n={},n[kB]=r+"Date",n[EB]=r+"Date",n[TB]=r+"Month",n[IB]=r+"FullYear",n[CB]=r+"Hours",n[MB]=r+"Minutes",n[bB]=r+"Seconds",n[yB]=r+"Milliseconds",n)[o],a=o===kB?this.$D+(t-this.$W):t;if(o===TB||o===IB){var s=this.clone().set(EB,1);s.$d[i](a),s.init(),this.$d=s.set(EB,Math.min(this.$D,s.daysInMonth())).$d}else i&&this.$d[i](a);return this.init(),this},t.set=function(e,t){return this.clone().$set(e,t)},t.get=function(e){return this[FB.p(e)]()},t.add=function(e,t){var n,o=this;e=Number(e);var r=FB.p(t),i=function(t){var n=BB(o);return FB.w(n.date(n.date()+Math.round(t*e)),o)};if(r===TB)return this.set(TB,this.$M+e);if(r===IB)return this.set(IB,this.$y+e);if(r===kB)return i(1);if(r===wB)return i(7);var a=(n={},n[MB]=mB,n[CB]=_B,n[bB]=vB,n)[r]||1,s=this.$d.getTime()+e*a;return FB.w(s,this)},t.subtract=function(e,t){return this.add(-1*e,t)},t.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||DB;var o=e||"YYYY-MM-DDTHH:mm:ssZ",r=FB.z(this),i=this.$H,a=this.$m,s=this.$M,c=n.weekdays,l=n.months,u=function(e,n,r,i){return e&&(e[n]||e(t,o))||r[n].slice(0,i)},d=function(e){return FB.s(i%12||12,e,"0")},p=n.meridiem||function(e,t,n){var o=e<12?"AM":"PM";return n?o.toLowerCase():o},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:FB.s(s+1,2,"0"),MMM:u(n.monthsShort,s,l,3),MMMM:u(l,s),D:this.$D,DD:FB.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,c,2),ddd:u(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:FB.s(i,2,"0"),h:d(1),hh:d(2),a:p(i,a,!0),A:p(i,a,!1),m:String(a),mm:FB.s(a,2,"0"),s:String(this.$s),ss:FB.s(this.$s,2,"0"),SSS:FB.s(this.$ms,3,"0"),Z:r};return o.replace(LB,(function(e,t){return t||h[e]||r.replace(":","")}))},t.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},t.diff=function(e,t,n){var o,r=FB.p(t),i=BB(e),a=(i.utcOffset()-this.utcOffset())*mB,s=this-i,c=FB.m(this,i);return c=(o={},o[IB]=c/12,o[TB]=c,o[SB]=c/3,o[wB]=(s-a)/6048e5,o[kB]=(s-a)/864e5,o[CB]=s/_B,o[MB]=s/mB,o[bB]=s/vB,o)[r]||s,n?c:FB.a(c)},t.daysInMonth=function(){return this.endOf(TB).$D},t.$locale=function(){return PB[this.$L]},t.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),o=GB(e,t,!0);return o&&(n.$L=o),n},t.clone=function(){return FB.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},e}(),VB=qB.prototype;BB.prototype=VB,[["$ms",yB],["$s",bB],["$m",MB],["$H",CB],["$W",kB],["$M",TB],["$y",IB],["$D",EB]].forEach((function(e){VB[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),BB.extend=function(e,t){return e.$i||(e(t,qB,BB),e.$i=!0),BB},BB.locale=GB,BB.isDayjs=UB,BB.unix=function(e){return BB(1e3*e)},BB.en=PB[NB],BB.Ls=PB,BB.p={};const HB=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}},zB=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}};var jB=[{index:"01"},{index:"02"},{index:"03"},{index:"04"},{index:"05"},{index:"06"},{index:"07"},{index:"08"},{index:"09"},{index:"10"},{index:"11"},{index:"12"}],$B=[{index:"0"},{index:"1"},{index:"2"},{index:"3"},{index:"4"},{index:"5"},{index:"6"}],WB={modelValue:{type:[String,Array]},type:{type:String,default:"date",validator:function(e){return["date","month"].includes(e)}},allowedDates:{type:Function},color:{type:String},headerColor:{type:String},elevation:{type:Boolean,default:!1},firstDayOfWeek:{type:[String,Number],default:0},min:{type:String},max:{type:String},showCurrent:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},range:{type:Boolean,default:!1},touchable:{type:Boolean,default:!0},onPreview:MO(),onChange:MO(),"onUpdate:modelValue":MO()},{n:KB}=yO("picker-header");var YB=er({name:"PanelHeader",components:{VarButton:AN,VarIcon:zO},props:{date:{type:Object,required:!0},type:{type:String,default:"date"},disabled:{type:Object,required:!0}},emits:["check-panel","check-date"],setup(e,t){var{emit:n}=t,o=qn(!1),r=qn(0),i=Ma((()=>{var t,{date:n,type:o}=e,{previewMonth:i,previewYear:a}=n;if("month"===o)return kR(a)+r.value;var s=null==(t=JO.value.datePickerMonthDict)?void 0:t[i.index].name;return"zh-CN"===JO.value.lang?a+" "+s:s+" "+a}));return Bo((()=>e.date),(()=>{r.value=0})),{n:KB,reverse:o,showDate:i,checkDate:t=>{"prev"===t&&e.disabled.left||"next"===t&&e.disabled.right||(n("check-date",t),o.value="prev"===t,r.value+="prev"===t?-1:1)}}}});YB.render=function(e,t){var n=xr("var-icon"),o=xr("var-button");return Fi(),zi("div",{class:a(e.n())},[Zi(o,{round:"",text:"",style:{filter:"opacity(0.54)"},disabled:e.disabled.left,onClick:t[0]||(t[0]=t=>e.checkDate("prev"))},{default:Do((()=>[Zi(n,{name:"chevron-left"})])),_:1},8,["disabled"]),Ji("div",{class:a(e.n("value")),onClick:t[1]||(t[1]=t=>e.$emit("check-panel"))},[Zi(Za,{name:"var-date-picker"+(e.reverse?"-reverse":"")+"-translatex"},{default:Do((()=>[(Fi(),zi("div",{key:e.showDate},p(e.showDate),1))])),_:1},8,["name"])],2),Zi(o,{round:"",text:"",style:{filter:"opacity(0.54)"},disabled:e.disabled.right,onClick:t[2]||(t[2]=t=>e.checkDate("next"))},{default:Do((()=>[Zi(n,{name:"chevron-right"})])),_:1},8,["disabled"])],2)};const XB=YB;function JB(){return JB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},JB.apply(this,arguments)}BB.extend(HB),BB.extend(zB);var{n:ZB,classes:QB}=yO("month-picker"),{n:eF}=yO("date-picker");var tF=er({name:"MonthPickerPanel",components:{VarButton:AN,PanelHeader:XB},props:{choose:{type:Object,required:!0},preview:{type:Object,required:!0},current:{type:String,required:!0},clickYear:{type:Function,required:!0},componentProps:{type:Object,required:!0}},emits:["check-preview","choose-month"],setup(e,t){var{emit:n}=t,[o,r]=e.current.split("-"),i=qn(!1),a=qn(0),s=qn(null),c=In({left:!1,right:!1}),l=Ma((()=>e.choose.chooseYear===e.preview.previewYear)),u=Ma((()=>e.preview.previewYear===o)),d=t=>{var{choose:{chooseMonths:n,chooseDays:o,chooseRangeMonth:r},componentProps:{type:i,range:a}}=e;if(a){if(!r.length)return!1;var s=BB(t).isSameOrBefore(BB(r[1]),"month"),c=BB(t).isSameOrAfter(BB(r[0]),"month");return s&&c}return"month"===i?n.includes(t):o.some((e=>e.includes(t)))};return Bo((()=>e.preview.previewYear),(t=>{var{componentProps:{min:n,max:o}}=e;o&&(c.right=!BB(""+(kR(t)+1)).isSameOrBefore(BB(o),"year")),n&&(c.left=!BB(""+(kR(t)-1)).isSameOrAfter(BB(n),"year"))}),{immediate:!0}),{n:ZB,nDate:eF,pack:JO,MONTH_LIST:jB,headerEl:s,reverse:i,panelKey:a,panelBtnDisabled:c,forwardRef:e=>{s.value.checkDate(e)},buttonProps:t=>{var{choose:{chooseMonth:n},preview:{previewYear:o},componentProps:{allowedDates:i,color:a,multiple:s,range:c}}=e,p=o+"-"+t,h=!(t=>{var{preview:{previewYear:n},componentProps:{min:o,max:r}}=e,i=!0,a=!0,s=n+"-"+t;return r&&(i=BB(s).isSameOrBefore(BB(r),"month")),o&&(a=BB(s).isSameOrAfter(BB(o),"month")),i&&a})(t)||!!i&&!i(p),f=()=>!!h||(c||s?!d(p):!l.value||(null==n?void 0:n.index)!==t),g=()=>!(!u.value||r!==t||!e.componentProps.showCurrent)&&(!(!(c||s||l.value)||!h)||(c||s?!d(p):!l.value||(null==n?void 0:n.index)!==r)),v=()=>h?"":g()?null!=a?a:"":(c||s?d(p):(null==n?void 0:n.index)===t&&l.value)?"":eF()+"-color-cover",m=v().startsWith(eF());return{outline:g(),text:f(),color:f()?"":a,textColor:m?"":v(),[eF()+"-color-cover"]:m,class:QB(ZB("button"),[h,ZB("button--disabled")])}},getMonthAbbr:e=>{var t,n;return null!=(t=null==(n=JO.value.datePickerMonthDict)?void 0:n[e].abbr)?t:""},chooseMonth:(e,t)=>{t.currentTarget.classList.contains(ZB("button--disabled"))||n("choose-month",e)},checkDate:e=>{i.value="prev"===e,a.value+="prev"===e?-1:1,n("check-preview","year",e)}}}});tF.render=function(e,t){var n=xr("panel-header"),o=xr("var-button");return Fi(),zi("div",{class:a(e.n())},[Ji("div",{class:a(e.n("content"))},[Zi(n,{ref:"headerEl",type:"month",date:e.preview,disabled:e.panelBtnDisabled,onCheckPanel:e.clickYear,onCheckDate:e.checkDate},null,8,["date","disabled","onCheckPanel","onCheckDate"]),Zi(Za,{name:e.nDate()+(e.reverse?"-reverse":"")+"-translatex"},{default:Do((()=>[(Fi(),zi("ul",{key:e.panelKey},[(Fi(!0),zi(xi,null,Fr(e.MONTH_LIST,(t=>(Fi(),zi("li",{key:t.index},[Zi(o,aa({type:"primary","var-month-picker-cover":"",ripple:!1},JB({},e.buttonProps(t.index)),{onClick:n=>e.chooseMonth(t,n)}),{default:Do((()=>[ta(p(e.getMonthAbbr(t.index)),1)])),_:2},1040,["onClick"])])))),128))]))])),_:1},8,["name"])],2)],2)};const nF=tF;var{n:oF,classes:rF}=yO("year-picker"),iF=["onClick"];var aF=er({name:"YearPickerPanel",props:{preview:{type:String},componentProps:{type:Object,required:!0}},emits:["choose-year"],setup(e,t){var{emit:n}=t,o=Ma((()=>{var t=[],{preview:n,componentProps:{max:o,min:r}}=e;if(!n)return t;var i=[kR(n)+100,kR(n)-100];if(o){var a=BB(o).format("YYYY-MM-D"),s=kR(a.split("-")[0]);if(s<i[0]&&s>i[1]&&(i=[s,i[1]]),s<=i[1])return[s]}if(r){var c=BB(r).format("YYYY-MM-D"),l=kR(c.split("-")[0]);if(l<i[0]&&l>i[1]&&(i=[i[0],l]),l>=i[0])return[l]}for(var u=i[0];u>=i[1];u--)t.push(u);return t}));return iO((()=>{var e=document.querySelector("."+oF("item--active"));null==e||e.scrollIntoView({block:"center"})})),{n:oF,classes:rF,yearList:o,chooseYear:e=>{n("choose-year",e)},toNumber:kR}}});aF.render=function(e,n){return Fi(),zi("ul",{class:a(e.n())},[(Fi(!0),zi(xi,null,Fr(e.yearList,(n=>(Fi(),zi("li",{key:n,class:a(e.classes(e.n("item"),[n===e.toNumber(e.preview),e.n("item--active")])),style:t({color:n===e.toNumber(e.preview)?e.componentProps.color:""}),onClick:t=>e.chooseYear(n)},p(n),15,iF)))),128))],2)};const sF=aF;function cF(){return cF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},cF.apply(this,arguments)}BB.extend(HB),BB.extend(zB);var{n:lF,classes:uF}=yO("day-picker"),{n:dF}=yO("date-picker");var pF=er({name:"DayPickerPanel",components:{VarButton:AN,PanelHeader:XB},props:{choose:{type:Object,required:!0},preview:{type:Object,required:!0},current:{type:String,required:!0},clickMonth:{type:Function,required:!0},componentProps:{type:Object,required:!0}},emits:["check-preview","choose-day"],setup(e,t){var{emit:n}=t,[o,r,i]=e.current.split("-"),a=qn([]),s=qn(!1),c=qn(0),l=qn(null),u=In({left:!1,right:!1}),d=Ma((()=>e.preview.previewYear===o&&e.preview.previewMonth.index===r)),p=Ma((()=>{var t;return e.choose.chooseYear===e.preview.previewYear&&(null==(t=e.choose.chooseMonth)?void 0:t.index)===e.preview.previewMonth.index})),h=Ma((()=>{var t=$B.findIndex((t=>t.index===e.componentProps.firstDayOfWeek));return-1===t||0===t?$B:$B.slice(t).concat($B.slice(0,t))})),f=()=>{var{preview:{previewMonth:t,previewYear:n}}=e,o=BB(n+"-"+t.index).daysInMonth(),r=BB(n+"-"+t.index+"-01").day(),i=h.value.findIndex((e=>e.index===""+r));a.value=[...Array(i).fill(-1),...Array.from(Array(o+1).keys())].filter((e=>e))},g=()=>{var{preview:{previewYear:t,previewMonth:n},componentProps:{max:o,min:r}}=e;if(o){var i=t+"-"+(kR(n.index)+1);u.right=!BB(i).isSameOrBefore(BB(o),"month")}if(r){var a=t+"-"+(kR(n.index)-1);u.left=!BB(a).isSameOrAfter(BB(r),"month")}},v=t=>{var{choose:{chooseDays:n,chooseRangeDay:o},componentProps:{range:r}}=e;if(r){if(!o.length)return!1;var i=BB(t).isSameOrBefore(BB(o[1]),"day"),a=BB(t).isSameOrAfter(BB(o[0]),"day");return i&&a}return n.includes(t)};return iO((()=>{f(),g()})),Bo((()=>e.preview),(()=>{f(),g()})),{n:lF,nDate:dF,days:a,reverse:s,headerEl:l,panelKey:c,sortWeekList:h,panelBtnDisabled:u,forwardRef:e=>{l.value.checkDate(e)},filterDay:e=>e>0?e:"",getDayAbbr:e=>{var t,n;return null!=(t=null==(n=JO.value.datePickerWeekDict)?void 0:n[e].abbr)?t:""},checkDate:e=>{s.value="prev"===e,c.value+="prev"===e?-1:1,n("check-preview","month",e)},chooseDay:(e,t)=>{t.currentTarget.classList.contains(lF("button--disabled"))||n("choose-day",e)},buttonProps:t=>{if(t<0)return{text:!0,outline:!1,textColor:"",class:lF("button")};var{choose:{chooseDay:n},preview:{previewYear:o,previewMonth:r},componentProps:{allowedDates:a,color:s,multiple:c,range:l}}=e,u=o+"-"+r.index+"-"+t,h=!(t=>{var{preview:{previewYear:n,previewMonth:o},componentProps:{min:r,max:i}}=e,a=!0,s=!0,c=n+"-"+o.index+"-"+t;return i&&(a=BB(c).isSameOrBefore(BB(i),"day")),r&&(s=BB(c).isSameOrAfter(BB(r),"day")),a&&s})(t)||!!a&&!a(u),f=()=>!(!d.value||kR(i)!==t||!e.componentProps.showCurrent)&&(!(!(l||c||p.value)||!h)||(l||c?!v(u):!p.value||n!==i)),g=()=>h?"":f()?null!=s?s:"":(l||c?v(u):kR(n)===t&&p.value)?"":dF()+"-color-cover",m=g().startsWith(dF());return{text:!!h||(l||c?!v(u):!p.value||kR(n)!==t),outline:f(),textColor:m?"":g(),[dF()+"-color-cover"]:m,class:uF(lF("button"),lF("button--usable"),[h,lF("button--disabled")])}}}}});pF.render=function(e,t){var n=xr("panel-header"),o=xr("var-button");return Fi(),zi("div",{class:a(e.n())},[Ji("div",{class:a(e.n("content"))},[Zi(n,{ref:"headerEl",type:"day",date:e.preview,disabled:e.panelBtnDisabled,onCheckPanel:e.clickMonth,onCheckDate:e.checkDate},null,8,["date","disabled","onCheckPanel","onCheckDate"]),Zi(Za,{name:e.nDate()+(e.reverse?"-reverse":"")+"-translatex"},{default:Do((()=>[(Fi(),zi("div",{key:e.panelKey},[Ji("ul",{class:a(e.n("head"))},[(Fi(!0),zi(xi,null,Fr(e.sortWeekList,(t=>(Fi(),zi("li",{key:t.index},p(e.getDayAbbr(t.index)),1)))),128))],2),Ji("ul",{class:a(e.n("body"))},[(Fi(!0),zi(xi,null,Fr(e.days,((t,n)=>(Fi(),zi("li",{key:n},[Zi(o,aa({type:"primary","var-day-picker-cover":"",round:"",ripple:!1},cF({},e.buttonProps(t)),{onClick:n=>e.chooseDay(t,n)}),{default:Do((()=>[ta(p(e.filterDay(t)),1)])),_:2},1040,["onClick"])])))),128))],2)]))])),_:1},8,["name"])],2)],2)};const hF=pF;var{n:fF,classes:gF}=yO("date-picker");var vF=er({name:"VarDatePicker",components:{MonthPickerPanel:nF,YearPickerPanel:sF,DayPickerPanel:hF},props:WB,setup(e){var t,n=0,o=0,r="",i=BB().format("YYYY-MM-D"),[a,s]=i.split("-"),c=jB.find((e=>e.index===s)),l=qn(!1),u=qn(!1),d=qn(!0),p=qn(),h=qn(),f=qn(),g=qn(c),v=qn(a),m=qn(!1),_=qn([]),y=qn([]),b=qn([]),M=qn([]),C=qn(null),k=qn(null),w=In({allowedDates:e.allowedDates,type:e.type,color:e.color,firstDayOfWeek:e.firstDayOfWeek,min:e.min,max:e.max,showCurrent:e.showCurrent,multiple:e.multiple,range:e.range}),T=Ma((()=>({chooseMonth:p.value,chooseYear:h.value,chooseDay:f.value,chooseMonths:_.value,chooseDays:y.value,chooseRangeMonth:b.value,chooseRangeDay:M.value}))),S=Ma((()=>({previewMonth:g.value,previewYear:v.value}))),I=Ma((()=>{var{multiple:t,range:n}=e;if(n)return b.value.length?b.value[0]+" ~ "+b.value[1]:"";var o,r,i="";p.value&&(i=null!=(o=null==(r=JO.value.datePickerMonthDict)?void 0:r[p.value.index].name)?o:"");return t?""+_.value.length+JO.value.datePickerSelected:i})),E=Ma((()=>{var t,n,o,r,{multiple:i,range:a}=e;if(a){var s=M.value.map((e=>BB(e).format("YYYY-MM-DD")));return s.length?s[0]+" ~ "+s[1]:""}if(i)return""+y.value.length+JO.value.datePickerSelected;if(!h.value||!p.value||!f.value)return"";var c=BB(h.value+"-"+p.value.index+"-"+f.value).day(),l=$B.find((e=>e.index===""+c)),u=null!=(t=null==(n=JO.value.datePickerWeekDict)?void 0:n[l.index].name)?t:"",d=null!=(o=null==(r=JO.value.datePickerMonthDict)?void 0:r[p.value.index].name)?o:"",g=UR(f.value,2,"0");return"zh-CN"===JO.value.lang?p.value.index+"-"+g+" "+u.slice(0,3):u.slice(0,3)+", "+d.slice(0,3)+" "+f.value})),D=Ma((()=>l.value?"year":"month"===e.type||u.value?"month":"date"===e.type?"date":"")),A=Ma((()=>!e.touchable||["","year"].includes(D.value))),L=Ma((()=>{var e,t,n,o,r=BB(h.value+"-"+(null==(e=p.value)?void 0:e.index)+"-"+f.value).day(),i=f.value?UR(f.value,2,"0"):"";return{week:""+r,year:null!=(t=h.value)?t:"",month:null!=(n=null==(o=p.value)?void 0:o.index)?n:"",date:i}})),R=Ma((()=>T.value.chooseRangeDay.map((e=>BB(e).format("YYYY-MM-DD"))))),O=Ma((()=>h.value===v.value)),x=Ma((()=>{var e;return(null==(e=p.value)?void 0:e.index)===g.value.index})),N=(t,n)=>{var o="month"===n?b:M;if(o.value=d.value?[t,t]:[o.value[0],t],d.value=!d.value,d.value){var r=BB(o.value[0]).isAfter(o.value[1])?[o.value[1],o.value[0]]:[...o.value];bO(e["onUpdate:modelValue"],r),bO(e.onChange,r)}},P=(t,n)=>{var o="month"===n?"YYYY-MM":"YYYY-MM-DD",r=("month"===n?_:y).value.map((e=>BB(e).format(o))),i=r.findIndex((e=>e===t));-1===i?r.push(t):r.splice(i,1),bO(e["onUpdate:modelValue"],r),bO(e.onChange,r)},U=(e,t)=>!(!h.value||!p.value)&&(O.value?"month"===e?t.index<p.value.index:x.value?t<kR(f.value):p.value.index>g.value.index:h.value>v.value),G=e=>!bR(e)&&("Invalid Date"===e&&(console.error('[Varlet] DatePicker: "modelValue" is an Invalid Date'),!0)),B=()=>{o=0,n=0,r="",t=void 0};return Bo((()=>e.modelValue),(t=>{if((!e.multiple&&!e.range||bR(e.modelValue)?e.multiple||e.range||!bR(e.modelValue)||(console.error('[Varlet] DatePicker: type of prop "modelValue" should be a String'),0):(console.error('[Varlet] DatePicker: type of prop "modelValue" should be an Array'),0))&&!G(t)&&t)if(e.range){if(!bR(t))return;d.value=1!==t.length,((e,t)=>{var n="month"===t?b:M,o="month"===t?"YYYY-MM":"YYYY-MM-D",r=e.map((e=>BB(e).format(o))).slice(0,2);if(!n.value.some((e=>G(e)))){n.value=r;var i=BB(n.value[0]).isAfter(n.value[1]);2===n.value.length&&i&&(n.value=[n.value[1],n.value[0]])}})(t,e.type)}else if(e.multiple){if(!bR(t))return;((e,t)=>{var n="month"===t?_:y,o="month"===t?"YYYY-MM":"YYYY-MM-D",r=Array.from(new Set(e.map((e=>BB(e).format(o)))));n.value=r.filter((e=>"Invalid Date"!==e))})(t,e.type)}else(e=>{var t=BB(e).format("YYYY-MM-D");if(!G(t)){var[n,o,r]=t.split("-"),i=jB.find((e=>e.index===o));p.value=i,h.value=n,f.value=r,g.value=i,v.value=n}})(t)}),{immediate:!0}),Bo(D,B),{n:fF,classes:gF,monthPanelEl:C,dayPanelEl:k,reverse:m,currentDate:i,chooseMonth:p,chooseYear:h,chooseDay:f,previewYear:v,isYearPanel:l,isMonthPanel:u,getMonthTitle:I,getDateTitle:E,getPanelType:D,getChoose:T,getPreview:S,componentProps:w,slotProps:L,formatRange:R,clickEl:e=>{"year"===e?l.value=!0:"month"===e?u.value=!0:(l.value=!1,u.value=!1)},handleTouchstart:e=>{if(!A.value){var{clientX:t,clientY:r}=e.touches[0];n=t,o=r}},handleTouchmove:e=>{if(!A.value){var{clientX:i,clientY:a}=e.touches[0],s=i-n,c=a-o;t=((e,t)=>e>=t&&e>20?"x":"y")(Math.abs(s),Math.abs(c)),r=s>0?"prev":"next"}},handleTouchend:()=>{if(!A.value&&"x"===t){var e="month"===D.value?C:k;eO((()=>{e.value.forwardRef(r),B()}))}},getChooseDay:t=>{var{readonly:n,range:o,multiple:r,onChange:i,"onUpdate:modelValue":a}=e;if(!(t<0||n)){m.value=U("day",t);var s=v.value+"-"+g.value.index+"-"+t,c=BB(s).format("YYYY-MM-DD");o?N(c,"day"):r?P(c,"day"):(bO(a,c),bO(i,c))}},getChooseMonth:t=>{var{type:n,readonly:o,range:r,multiple:i,onChange:a,onPreview:s,"onUpdate:modelValue":c}=e;if(m.value=U("month",t),"month"!==n||o)g.value=t,bO(s,kR(v.value),kR(g.value.index));else{var l=v.value+"-"+t.index;r?N(l,"month"):i?P(l,"month"):(bO(c,l),bO(a,l))}u.value=!1},getChooseYear:t=>{v.value=""+t,l.value=!1,u.value=!0,bO(e.onPreview,kR(v.value),kR(g.value.index))},checkPreview:(t,n)=>{var o="prev"===n?-1:1;if("year"===t)v.value=""+(kR(v.value)+o);else{var r=kR(g.value.index)+o;r<1&&(v.value=""+(kR(v.value)-1),r=12),r>12&&(v.value=""+(kR(v.value)+1),r=1),g.value=jB.find((e=>kR(e.index)===r))}bO(e.onPreview,kR(v.value),kR(g.value.index))}}}});vF.render=function(e,n){var o=xr("year-picker-panel"),r=xr("month-picker-panel"),i=xr("day-picker-panel");return Fi(),zi("div",{class:a(e.classes(e.n(),[e.elevation,e.n("$-elevation--2")]))},[Ji("div",{class:a(e.n("title")),style:t({background:e.headerColor||e.color})},[Ji("div",{class:a(e.classes(e.n("title-year"),[e.isYearPanel,e.n("title-year--active")])),onClick:n[0]||(n[0]=t=>e.clickEl("year"))},[qr(e.$slots,"year",{year:e.chooseYear},(()=>[ta(p(e.chooseYear),1)]))],2),Ji("div",{class:a(e.classes(e.n("title-date"),[!e.isYearPanel,e.n("title-date--active")],[e.range,e.n("title-date--range")])),onClick:n[1]||(n[1]=t=>e.clickEl("date"))},[Zi(Za,{name:e.multiple?"":e.n()+(e.reverse?"-reverse":"")+"-translatey"},{default:Do((()=>{var t,n,o;return["month"===e.type?(Fi(),zi("div",{key:""+e.chooseYear+(null==(t=e.chooseMonth)?void 0:t.index)},[e.range?qr(e.$slots,"range",{key:0,choose:e.getChoose.chooseRangeMonth},(()=>[ta(p(e.getMonthTitle),1)])):e.multiple?qr(e.$slots,"multiple",{key:1,choose:e.getChoose.chooseMonths},(()=>[ta(p(e.getMonthTitle),1)])):qr(e.$slots,"month",{key:2,month:null==(n=e.chooseMonth)?void 0:n.index,year:e.chooseYear},(()=>[ta(p(e.getMonthTitle),1)]))])):(Fi(),zi("div",{key:""+e.chooseYear+(null==(o=e.chooseMonth)?void 0:o.index)+e.chooseDay},[e.range?qr(e.$slots,"range",{key:0,choose:e.formatRange},(()=>[ta(p(e.getDateTitle),1)])):e.multiple?qr(e.$slots,"multiple",{key:1,choose:e.getChoose.chooseDays},(()=>[ta(p(e.getDateTitle),1)])):qr(e.$slots,"date",s(aa({key:2},e.slotProps)),(()=>[ta(p(e.getDateTitle),1)]))]))]})),_:3},8,["name"])],2)],6),Ji("div",{class:a(e.n("body")),onTouchstart:n[2]||(n[2]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)}),onTouchmove:n[3]||(n[3]=function(){return e.handleTouchmove&&e.handleTouchmove(...arguments)}),onTouchend:n[4]||(n[4]=function(){return e.handleTouchend&&e.handleTouchend(...arguments)})},[Zi(Za,{name:e.n()+"-panel-fade"},{default:Do((()=>["year"===e.getPanelType?(Fi(),ji(o,{key:0,"component-props":e.componentProps,preview:e.previewYear,onChooseYear:e.getChooseYear},null,8,["component-props","preview","onChooseYear"])):"month"===e.getPanelType?(Fi(),ji(r,{key:1,ref:"monthPanelEl",current:e.currentDate,choose:e.getChoose,preview:e.getPreview,"click-year":()=>e.clickEl("year"),"component-props":e.componentProps,onChooseMonth:e.getChooseMonth,onCheckPreview:e.checkPreview},null,8,["current","choose","preview","click-year","component-props","onChooseMonth","onCheckPreview"])):"date"===e.getPanelType?(Fi(),ji(i,{key:2,ref:"dayPanelEl",current:e.currentDate,choose:e.getChoose,preview:e.getPreview,"component-props":e.componentProps,"click-month":()=>e.clickEl("month"),onChooseDay:e.getChooseDay,onCheckPreview:e.checkPreview},null,8,["current","choose","preview","component-props","click-month","onChooseDay","onCheckPreview"])):na("v-if",!0)])),_:1},8,["name"])],34)],2)};const mF=vF;function _F(){return _F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_F.apply(this,arguments)}mF.install=function(e){e.component(mF.name,mF)};var yF=_F({show:{type:Boolean,default:!1},width:{type:[Number,String]},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:function(e){return["left","center","right"].includes(e)}},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},dialogClass:{type:String},dialogStyle:{type:Object},onBeforeClose:MO(),onConfirm:MO(),onCancel:MO(),"onUpdate:show":MO()},fO(DO,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"]));function bF(){return bF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},bF.apply(this,arguments)}var{n:MF,classes:CF}=yO("dialog");var kF=er({name:"VarDialog",components:{VarPopup:GO,VarButton:AN},inheritAttrs:!1,props:yF,setup(e){var t=qn(!1),n=qn(!1),o=()=>bO(e["onUpdate:show"],!1);return Bo((()=>e.show),(e=>{t.value=e}),{immediate:!0}),Bo((()=>e.closeOnClickOverlay),(t=>{null==e.onBeforeClose?n.value=t:n.value=!1}),{immediate:!0}),{n:MF,classes:CF,pack:JO,dt:NR,popupShow:t,popupCloseOnClickOverlay:n,handleClickOverlay:()=>{var{closeOnClickOverlay:t,onClickOverlay:n,onBeforeClose:r}=e;bO(n),t&&(null==r?bO(e["onUpdate:show"],!1):r("close",o))},confirm:()=>{var{onBeforeClose:t,onConfirm:n}=e;bO(n),null==t?bO(e["onUpdate:show"],!1):t("confirm",o)},cancel:()=>{var{onBeforeClose:t,onCancel:n}=e;bO(n),null==t?bO(e["onUpdate:show"],!1):t("cancel",o)},toSizeUnit:XR}}});kF.render=function(e,n){var o=xr("var-button"),r=xr("var-popup");return Fi(),ji(r,{class:a(e.n("popup")),"var-dialog-cover":"",show:e.popupShow,overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.popupCloseOnClickOverlay,teleport:e.teleport,onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange,onClickOverlay:e.handleClickOverlay},{default:Do((()=>[Ji("div",aa({class:e.classes(e.n("$--box"),e.n(),e.dialogClass),style:bF({width:e.toSizeUnit(e.width)},e.dialogStyle)},e.$attrs),[Ji("div",{class:a(e.n("title"))},[qr(e.$slots,"title",{},(()=>[ta(p(e.dt(e.title,e.pack.dialogTitle)),1)]))],2),Ji("div",{class:a(e.n("message")),style:t({textAlign:e.messageAlign})},[qr(e.$slots,"default",{},(()=>[ta(p(e.message),1)]))],6),Ji("div",{class:a(e.n("actions"))},[e.cancelButton?(Fi(),ji(o,{key:0,class:a(e.classes(e.n("button"),e.n("cancel-button"))),"var-dialog-cover":"",text:"","text-color":e.cancelButtonTextColor,color:e.cancelButtonColor,onClick:e.cancel},{default:Do((()=>[ta(p(e.dt(e.cancelButtonText,e.pack.dialogCancelButtonText)),1)])),_:1},8,["class","text-color","color","onClick"])):na("v-if",!0),e.confirmButton?(Fi(),ji(o,{key:1,class:a(e.classes(e.n("button"),e.n("confirm-button"))),"var-dialog-cover":"",text:"","text-color":e.confirmButtonTextColor,color:e.confirmButtonColor,onClick:e.confirm},{default:Do((()=>[ta(p(e.dt(e.confirmButtonText,e.pack.dialogConfirmButtonText)),1)])),_:1},8,["class","text-color","color","onClick"])):na("v-if",!0)],2)],16)])),_:3},8,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])};const wF=kF;function TF(){return TF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},TF.apply(this,arguments)}var SF,IF={};function EF(e){return SR()?new Promise((t=>{EF.close();var n=function(e){return void 0===e&&(e={}),gR(e)?TF({},IF,{message:e}):TF({},IF,e)}(e),o=In(n);o.teleport="body",SF=o;var{unmountInstance:r}=gO(wF,o,{onConfirm:()=>{bO(o.onConfirm),t("confirm")},onCancel:()=>{bO(o.onCancel),t("cancel")},onClose:()=>{bO(o.onClose),t("close")},onClosed:()=>{bO(o.onClosed),r(),SF===o&&(SF=null)},onRouteChange:()=>{r(),SF===o&&(SF=null)},"onUpdate:show":e=>{o.show=e}});o.show=!0})):Promise.resolve()}Object.assign(EF,{setDefaultOptions:function(e){IF=e},resetDefaultOptions:function(){IF={}},close:function(){if(null!=SF){var e=SF;SF=null,po().then((()=>{e.show=!1}))}}}),wF.install=function(e){e.component(wF.name,wF)},EF.install=function(e){e.component(wF.name,wF)},EF.Component=wF;var DF={inset:{type:[Boolean,Number,String],default:!1},vertical:{type:Boolean,default:!1},description:{type:String},margin:{type:String},dashed:{type:Boolean,default:!1},hairline:{type:Boolean,default:!1}};function AF(){return AF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},AF.apply(this,arguments)}var{n:LF,classes:RF}=yO("divider");var OF=er({name:"VarDivider",props:DF,setup(e,t){var{slots:n}=t,o=In({withText:!1}),r=Ma((()=>!vR(e.inset)||e.inset)),i=Ma((()=>{var{inset:t,vertical:n,margin:o}=e,r={margin:o};if(vR(t)||0===t)return AF({},r);var i=kR(t),a=Math.abs(i)+(t+"").replace(i+"","");return AF({},r,n?{height:"calc(80% - "+XR(a)+")"}:{width:"calc(100% - "+XR(a)+")",left:XR(i>0?a:0)})})),a=()=>{o.withText=Boolean(n.default)||Boolean(e.description)};return iO((()=>{a()})),kr((()=>{a()})),AF({n:LF,classes:RF},Kn(o),{style:i,isInset:r})}});OF.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),[e.vertical,e.n("--vertical")],[e.withText,e.n("--with-text")],[e.isInset,e.n("--inset")],[e.dashed,e.n("--dashed")],[e.hairline,e.n("--hairline")])),style:t(e.style)},[qr(e.$slots,"default",{},(()=>[e.description?(Fi(),zi("span",{key:0,class:a(e.n("text"))},p(e.description),3)):na("v-if",!0)]))],6)};const xF=OF;xF.install=function(e){e.component(xF.name,xF)};var NF={left:"right",right:"left",bottom:"top",top:"bottom"};function PF(e){return e.replace(/left|right|bottom|top/g,(function(e){return NF[e]}))}var UF="top",GF="bottom",BF="right",FF="left",qF="auto",VF=[UF,GF,BF,FF],HF="start",zF="end",jF="clippingParents",$F="viewport",WF="popper",KF="reference",YF=VF.reduce((function(e,t){return e.concat([t+"-"+HF,t+"-"+zF])}),[]),XF=[].concat(VF,[qF]).reduce((function(e,t){return e.concat([t,t+"-"+HF,t+"-"+zF])}),[]),JF=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ZF(e){return e.split("-")[0]}var QF={start:"end",end:"start"};function eq(e){return e.replace(/start|end/g,(function(e){return QF[e]}))}function tq(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function nq(e){return e instanceof tq(e).Element||e instanceof Element}function oq(e){return e instanceof tq(e).HTMLElement||e instanceof HTMLElement}function rq(e){return"undefined"!=typeof ShadowRoot&&(e instanceof tq(e).ShadowRoot||e instanceof ShadowRoot)}function iq(e){return((nq(e)?e.ownerDocument:e.document)||window.document).documentElement}var aq=Math.max,sq=Math.min,cq=Math.round;function lq(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function uq(){return!/^((?!chrome|android).)*safari/i.test(lq())}function dq(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=e.getBoundingClientRect(),r=1,i=1;t&&oq(e)&&(r=e.offsetWidth>0&&cq(o.width)/e.offsetWidth||1,i=e.offsetHeight>0&&cq(o.height)/e.offsetHeight||1);var a=(nq(e)?tq(e):window).visualViewport,s=!uq()&&n,c=(o.left+(s&&a?a.offsetLeft:0))/r,l=(o.top+(s&&a?a.offsetTop:0))/i,u=o.width/r,d=o.height/i;return{width:u,height:d,top:l,right:c+u,bottom:l+d,left:c,x:c,y:l}}function pq(e){var t=tq(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function hq(e){return dq(iq(e)).left+pq(e).scrollLeft}function fq(e){return tq(e).getComputedStyle(e)}function gq(e){return e?(e.nodeName||"").toLowerCase():null}function vq(e){return"html"===gq(e)?e:e.assignedSlot||e.parentNode||(rq(e)?e.host:null)||iq(e)}function mq(e){var t=fq(e),n=t.overflow,o=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function _q(e){return["html","body","#document"].indexOf(gq(e))>=0?e.ownerDocument.body:oq(e)&&mq(e)?e:_q(vq(e))}function yq(e,t){var n;void 0===t&&(t=[]);var o=_q(e),r=o===(null==(n=e.ownerDocument)?void 0:n.body),i=tq(o),a=r?[i].concat(i.visualViewport||[],mq(o)?o:[]):o,s=t.concat(a);return r?s:s.concat(yq(vq(a)))}function bq(e){return["table","td","th"].indexOf(gq(e))>=0}function Mq(e){return oq(e)&&"fixed"!==fq(e).position?e.offsetParent:null}function Cq(e){for(var t=tq(e),n=Mq(e);n&&bq(n)&&"static"===fq(n).position;)n=Mq(n);return n&&("html"===gq(n)||"body"===gq(n)&&"static"===fq(n).position)?t:n||function(e){var t=/firefox/i.test(lq());if(/Trident/i.test(lq())&&oq(e)&&"fixed"===fq(e).position)return null;var n=vq(e);for(rq(n)&&(n=n.host);oq(n)&&["html","body"].indexOf(gq(n))<0;){var o=fq(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(e)||t}function kq(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wq(e,t,n){return t===$F?kq(function(e,t){var n=tq(e),o=iq(e),r=n.visualViewport,i=o.clientWidth,a=o.clientHeight,s=0,c=0;if(r){i=r.width,a=r.height;var l=uq();(l||!l&&"fixed"===t)&&(s=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:s+hq(e),y:c}}(e,n)):nq(t)?function(e,t){var n=dq(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):kq(function(e){var t,n=iq(e),o=pq(e),r=null==(t=e.ownerDocument)?void 0:t.body,i=aq(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=aq(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-o.scrollLeft+hq(e),c=-o.scrollTop;return"rtl"===fq(r||n).direction&&(s+=aq(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:s,y:c}}(iq(e)))}function Tq(e){var t=yq(vq(e)),n=["absolute","fixed"].indexOf(fq(e).position)>=0&&oq(e)?Cq(e):e;return nq(n)?t.filter((function(e){return nq(e)&&function(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&rq(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}(e,n)&&"body"!==gq(e)})):[]}function Sq(e){return e.split("-")[1]}function Iq(e){var t,n=e.reference,o=e.element,r=e.placement,i=r?ZF(r):null,a=r?Sq(r):null,s=n.x+n.width/2-o.width/2,c=n.y+n.height/2-o.height/2;switch(i){case UF:t={x:s,y:n.y-o.height};break;case GF:t={x:s,y:n.y+n.height};break;case BF:t={x:n.x+n.width,y:c};break;case FF:t={x:n.x-o.width,y:c};break;default:t={x:n.x,y:n.y}}var l=i?function(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}(i):null;if(null!=l){var u="y"===l?"height":"width";switch(a){case HF:t[l]=t[l]-(n[u]/2-o[u]/2);break;case zF:t[l]=t[l]+(n[u]/2-o[u]/2)}}return t}function Eq(e,t){void 0===t&&(t={});var n,o=t,r=o.placement,i=void 0===r?e.placement:r,a=o.strategy,s=void 0===a?e.strategy:a,c=o.boundary,l=void 0===c?jF:c,u=o.rootBoundary,d=void 0===u?$F:u,p=o.elementContext,h=void 0===p?WF:p,f=o.altBoundary,g=void 0!==f&&f,v=o.padding,m=void 0===v?0:v,_=function(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}("number"!=typeof m?m:(n=m,VF.reduce((function(e,t){return e[t]=n,e}),{}))),y=h===WF?KF:WF,b=e.rects.popper,M=e.elements[g?y:h],C=function(e,t,n,o){var r="clippingParents"===t?Tq(e):[].concat(t),i=[].concat(r,[n]),a=i[0],s=i.reduce((function(t,n){var r=wq(e,n,o);return t.top=aq(r.top,t.top),t.right=sq(r.right,t.right),t.bottom=sq(r.bottom,t.bottom),t.left=aq(r.left,t.left),t}),wq(e,a,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}(nq(M)?M:M.contextElement||iq(e.elements.popper),l,d,s),k=dq(e.elements.reference),w=Iq({reference:k,element:b,strategy:"absolute",placement:i}),T=kq(Object.assign({},b,w)),S=h===WF?T:k,I={top:C.top-S.top+_.top,bottom:S.bottom-C.bottom+_.bottom,left:C.left-S.left+_.left,right:S.right-C.right+_.right},E=e.modifiersData.offset;if(h===WF&&E){var D=E[i];Object.keys(I).forEach((function(e){var t=[BF,GF].indexOf(e)>=0?1:-1,n=[UF,GF].indexOf(e)>=0?"y":"x";I[e]+=D[n]*t}))}return I}const Dq={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var r=n.mainAxis,i=void 0===r||r,a=n.altAxis,s=void 0===a||a,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,g=n.allowedAutoPlacements,v=t.options.placement,m=ZF(v),_=c||(m===v||!f?[PF(v)]:function(e){if(ZF(e)===qF)return[];var t=PF(e);return[eq(e),t,eq(t)]}(v)),y=[v].concat(_).reduce((function(e,n){return e.concat(ZF(n)===qF?function(e,t){void 0===t&&(t={});var n=t,o=n.placement,r=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?XF:c,u=Sq(o),d=u?s?YF:YF.filter((function(e){return Sq(e)===u})):VF,p=d.filter((function(e){return l.indexOf(e)>=0}));0===p.length&&(p=d);var h=p.reduce((function(t,n){return t[n]=Eq(e,{placement:n,boundary:r,rootBoundary:i,padding:a})[ZF(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:f,allowedAutoPlacements:g}):n)}),[]),b=t.rects.reference,M=t.rects.popper,C=new Map,k=!0,w=y[0],T=0;T<y.length;T++){var S=y[T],I=ZF(S),E=Sq(S)===HF,D=[UF,GF].indexOf(I)>=0,A=D?"width":"height",L=Eq(t,{placement:S,boundary:u,rootBoundary:d,altBoundary:p,padding:l}),R=D?E?BF:FF:E?GF:UF;b[A]>M[A]&&(R=PF(R));var O=PF(R),x=[];if(i&&x.push(L[I]<=0),s&&x.push(L[R]<=0,L[O]<=0),x.every((function(e){return e}))){w=S,k=!1;break}C.set(S,x)}if(k)for(var N=function(e){var t=y.find((function(t){var n=C.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return w=t,"break"},P=f?3:1;P>0;P--){if("break"===N(P))break}t.placement!==w&&(t.modifiersData[o]._skip=!0,t.placement=w,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};const Aq={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,o=e.name,r=n.offset,i=void 0===r?[0,0]:r,a=XF.reduce((function(e,n){return e[n]=function(e,t,n){var o=ZF(e),r=[FF,UF].indexOf(o)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*r,[FF,BF].indexOf(o)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,i),e}),{}),s=a[t.placement],c=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[o]=a}};function Lq(e,t,n){void 0===n&&(n=!1);var o,r,i=oq(t),a=oq(t)&&function(e){var t=e.getBoundingClientRect(),n=cq(t.width)/e.offsetWidth||1,o=cq(t.height)/e.offsetHeight||1;return 1!==n||1!==o}(t),s=iq(t),c=dq(e,a,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!n)&&(("body"!==gq(t)||mq(s))&&(l=(o=t)!==tq(o)&&oq(o)?{scrollLeft:(r=o).scrollLeft,scrollTop:r.scrollTop}:pq(o)),oq(t)?((u=dq(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=hq(s))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function Rq(e){var t=new Map,n=new Set,o=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var o=t.get(e);o&&r(o)}})),o.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),o}var Oq={placement:"bottom",modifiers:[],strategy:"absolute"};function xq(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Nq(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,o=void 0===n?[]:n,r=t.defaultOptions,i=void 0===r?Oq:r;return function(e,t,n){void 0===n&&(n=i);var r,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Oq,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,u={state:s,setOptions:function(n){var r="function"==typeof n?n(s.options):n;d(),s.options=Object.assign({},i,s.options,r),s.scrollParents={reference:nq(e)?yq(e):e.contextElement?yq(e.contextElement):[],popper:yq(t)};var a,l,p=function(e){var t=Rq(e);return JF.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((a=[].concat(o,s.options.modifiers),l=a.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(l).map((function(e){return l[e]}))));return s.orderedModifiers=p.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,o=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var i=r({state:s,name:t,instance:u,options:o}),a=function(){};c.push(i||a)}})),u.update()},forceUpdate:function(){if(!l){var e=s.elements,t=e.reference,n=e.popper;if(xq(t,n)){var o,r,i,a;s.rects={reference:Lq(t,Cq(n),"fixed"===s.options.strategy),popper:(o=n,r=dq(o),i=o.offsetWidth,a=o.offsetHeight,Math.abs(r.width-i)<=1&&(i=r.width),Math.abs(r.height-a)<=1&&(a=r.height),{x:o.offsetLeft,y:o.offsetTop,width:i,height:a})},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var c=0;c<s.orderedModifiers.length;c++)if(!0!==s.reset){var d=s.orderedModifiers[c],p=d.fn,h=d.options,f=void 0===h?{}:h,g=d.name;"function"==typeof p&&(s=p({state:s,options:f,name:g,instance:u})||s)}else s.reset=!1,c=-1}}},update:(r=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(r())}))}))),a}),destroy:function(){d(),l=!0}};if(!xq(e,t))return u;function d(){c.forEach((function(e){return e()})),c=[]}return u.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Pq={passive:!0};var Uq={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gq(e){var t,n=e.popper,o=e.popperRect,r=e.placement,i=e.variation,a=e.offsets,s=e.position,c=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,d=e.isFixed,p=a.x,h=void 0===p?0:p,f=a.y,g=void 0===f?0:f,v="function"==typeof u?u({x:h,y:g}):{x:h,y:g};h=v.x,g=v.y;var m=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),y=FF,b=UF,M=window;if(l){var C=Cq(n),k="clientHeight",w="clientWidth";if(C===tq(n)&&"static"!==fq(C=iq(n)).position&&"absolute"===s&&(k="scrollHeight",w="scrollWidth"),r===UF||(r===FF||r===BF)&&i===zF)b=GF,g-=(d&&C===M&&M.visualViewport?M.visualViewport.height:C[k])-o.height,g*=c?1:-1;if(r===FF||(r===UF||r===GF)&&i===zF)y=BF,h-=(d&&C===M&&M.visualViewport?M.visualViewport.width:C[w])-o.width,h*=c?1:-1}var T,S=Object.assign({position:s},l&&Uq),I=!0===u?function(e){var t=e.x,n=e.y,o=window.devicePixelRatio||1;return{x:cq(t*o)/o||0,y:cq(n*o)/o||0}}({x:h,y:g}):{x:h,y:g};return h=I.x,g=I.y,c?Object.assign({},S,((T={})[b]=_?"0":"",T[y]=m?"0":"",T.transform=(M.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",T)):Object.assign({},S,((t={})[b]=_?g+"px":"",t[y]=m?h+"px":"",t.transform="",t))}var Bq=Nq({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,r=o.scroll,i=void 0===r||r,a=o.resize,s=void 0===a||a,c=tq(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&l.forEach((function(e){e.addEventListener("scroll",n.update,Pq)})),s&&c.addEventListener("resize",n.update,Pq),function(){i&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Pq)})),s&&c.removeEventListener("resize",n.update,Pq)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Iq({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,o=n.gpuAcceleration,r=void 0===o||o,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,c=void 0===s||s,l={placement:ZF(t.placement),variation:Sq(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Gq(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Gq(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},r=t.elements[e];oq(r)&&gq(r)&&(Object.assign(r.style,n),Object.keys(o).forEach((function(e){var t=o[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var o=t.elements[e],r=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});oq(o)&&gq(o)&&(Object.assign(o.style,i),Object.keys(r).forEach((function(e){o.removeAttribute(e)})))}))}},requires:["computeStyles"]}]});function Fq(){return Fq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Fq.apply(this,arguments)}function Vq(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function Hq(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){Vq(i,o,r,a,s,"next",e)}function s(e){Vq(i,o,r,a,s,"throw",e)}a(void 0)}))}}function zq(e){var t=qn(null),n=qn(null),o=qn(!1),r=qn({width:0,height:0}),{zIndex:i}=xO((()=>o.value),1),a=null,s=!1,c=!1,l=function(){var t=Hq((function*(){"hover"===e.trigger&&(c=!1,yield tO(),s||v())}));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Hq((function*(){"hover"===e.trigger&&(s=!1,yield tO(),c||v())}));return function(){return t.apply(this,arguments)}}(),d=()=>{o.value=!1,bO(e["onUpdate:show"],!1)},p=()=>{(()=>{var{width:e,height:n}=window.getComputedStyle(t.value);r.value={width:YR(e),height:YR(n)}})();var n={x:YR(e.offsetX),y:YR(e.offsetY)};switch(e.placement){case"cover-top":return{placement:"bottom",skidding:n.x,distance:n.y-r.value.height};case"cover-top-start":return{placement:"bottom-start",skidding:n.x,distance:n.y-r.value.height};case"cover-top-end":return{placement:"bottom-end",skidding:n.x,distance:n.y-r.value.height};case"cover-bottom":return{placement:"top",skidding:n.x,distance:-n.y-r.value.height};case"cover-bottom-start":return{placement:"top-start",skidding:n.x,distance:-n.y-r.value.height};case"cover-bottom-end":return{placement:"top-end",skidding:n.x,distance:-n.y-r.value.height};case"cover-left":return{placement:"right",skidding:n.y,distance:n.x-r.value.width};case"cover-right":return{placement:"left",skidding:n.y,distance:-n.x-r.value.width};case"left":case"left-start":case"left-end":return{placement:e.placement,skidding:n.y,distance:-n.x};case"top":case"top-start":case"top-end":return{placement:e.placement,skidding:n.x,distance:-n.y};case"bottom":case"bottom-start":case"bottom-end":return{placement:e.placement,skidding:n.x,distance:n.y};case"right":case"right-start":case"right-end":return{placement:e.placement,skidding:n.y,distance:n.x}}},h=()=>{var{placement:e,skidding:t,distance:n}=p();return{placement:e,modifiers:[Fq({},Dq,{enabled:o.value}),Fq({},Aq,{options:{offset:[t,n]}})]}},f=()=>{a.setOptions(h())},g=()=>{var{disabled:t}=e;t||(o.value=!0,bO(e["onUpdate:show"],!0))},v=()=>{o.value=!1,bO(e["onUpdate:show"],!1)};return sO(t,"click",(()=>{"click"===e.trigger&&d()})),Bo((()=>e.show),(e=>{o.value=null!=e&&e}),{immediate:!0}),Bo((()=>e.offsetX),f),Bo((()=>e.offsetY),f),Bo((()=>e.placement),f),Bo((()=>o.value),(t=>{t?(f(),bO(e.onOpen)):bO(e.onClose)})),Bo((()=>e.disabled),v),Mr((()=>{var o,r=e.reference?null==(o=t.value)?void 0:o.querySelector(e.reference):t.value;a=Bq(null!=r?r:t.value,n.value,h())})),Tr((()=>{a.destroy()})),{show:o,popover:n,zIndex:i,host:t,hostSize:r,handleHostClick:()=>{g()},handleHostMouseenter:()=>{"hover"===e.trigger&&(c=!0,g())},handleHostMouseleave:l,handlePopoverClose:d,handlePopoverMouseenter:()=>{"hover"===e.trigger&&(s=!0)},handlePopoverMouseleave:u,resize:f,open:g,close:v}}var jq={type:{type:String,default:"default",validator:function(e){return["default","primary","info","success","warning","danger"].includes(e)}},color:{type:String},content:{type:String},show:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},trigger:{type:String,default:"hover",validator:function(e){return["click","hover"].includes(e)}},reference:{type:String},placement:{type:String,default:"bottom",validator:function(e){return["top","top-start","top-end","bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end"].includes(e)}},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:[String,Object],default:"body"},sameWidth:{type:Boolean,default:!1},onOpen:MO(),onOpened:MO(),onClose:MO(),onClosed:MO(),"onUpdate:show":MO()},{n:$q,classes:Wq}=yO("tooltip");var Kq=er({name:"VarTooltip",props:jq,setup(e){var{popover:t,host:n,hostSize:o,show:r,zIndex:i,handleHostClick:a,handleHostMouseenter:s,handleHostMouseleave:c,handlePopoverMouseenter:l,handlePopoverMouseleave:u,handlePopoverClose:d,open:p,close:h,resize:f}=zq(e);return{toSizeUnit:XR,popover:t,host:n,hostSize:o,show:r,zIndex:i,n:$q,classes:Wq,handleHostClick:a,handlePopoverClose:d,handleHostMouseenter:s,handleHostMouseleave:c,handlePopoverMouseenter:l,handlePopoverMouseleave:u,resize:f,open:p,close:h}}});Kq.render=function(e,n){return Fi(),zi("div",{ref:"host",class:a(e.n()),onClick:n[3]||(n[3]=function(){return e.handleHostClick&&e.handleHostClick(...arguments)}),onMouseenter:n[4]||(n[4]=function(){return e.handleHostMouseenter&&e.handleHostMouseenter(...arguments)}),onMouseleave:n[5]||(n[5]=function(){return e.handleHostMouseleave&&e.handleHostMouseleave(...arguments)})},[qr(e.$slots,"default"),(Fi(),ji(Ri,{to:e.teleport},[Zi(Za,{name:e.n(),onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:Do((()=>[Ar(Ji("div",{ref:"popover",class:a(e.n("tooltip")),style:t({zIndex:e.zIndex}),onClick:n[0]||(n[0]=Ps((()=>{}),["stop"])),onMouseenter:n[1]||(n[1]=function(){return e.handlePopoverMouseenter&&e.handlePopoverMouseenter(...arguments)}),onMouseleave:n[2]||(n[2]=function(){return e.handlePopoverMouseleave&&e.handlePopoverMouseleave(...arguments)})},[Ji("div",{style:t({background:e.color,width:e.sameWidth?e.toSizeUnit(Math.ceil(e.hostSize.width)):void 0}),class:a(e.classes(e.n("content-container"),e.n("--"+e.type)))},[qr(e.$slots,"content",{},(()=>[ta(p(e.content),1)]))],6)],38),[[Bs,e.show]])])),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to"]))],34)};const Yq=Kq;Yq.install=function(e){e.component(Yq.name,Yq)};var Xq={expandTrigger:{type:String,validator:function(e){return["click"].includes(e)}},lineClamp:{type:[Number,String]},tooltip:{type:[Object,Boolean],default:!0}};function Jq(){return Jq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Jq.apply(this,arguments)}var{n:Zq,classes:Qq}=yO("ellipsis"),eV={key:0};var tV=er({name:"VarEllipsis",components:{VarTooltip:Yq},props:Xq,setup(e){var t=qn(!1),n=Ma((()=>e.lineClamp?{"-webkit-line-clamp":e.lineClamp}:{})),o=Ma((()=>!1===e.tooltip?{disabled:!0}:!0===e.tooltip?{sameWidth:!0}:Jq({sameWidth:!0},e.tooltip)));return{n:Zq,classes:Qq,tooltip:o,expanding:t,rootStyles:n,handleClick:()=>{e.expandTrigger&&(t.value=!t.value)}}}});tV.render=function(e,n){var o=xr("var-tooltip");return Fi(),ji(o,s(Qi(e.tooltip)),{content:Do((()=>[qr(e.$slots,"tooltip-content",{},(()=>{var t;return[null!=(t=e.tooltip)&&t.content?(Fi(),zi("span",eV,p(e.tooltip.content),1)):qr(e.$slots,"default",{key:1})]}))])),default:Do((()=>[Ji("span",{class:a(e.classes(e.n(),[e.lineClamp,e.n("--clamp"),e.n("--line")],[e.expandTrigger,e.n("--cursor")],[e.expanding,e.n("--expand")])),style:t(e.rootStyles),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[qr(e.$slots,"default")],6)])),_:3},16)};const nV=tV;nV.install=function(e){e.component(nV.name,nV)};var oV={active:{type:Boolean,default:!1},show:{type:Boolean,default:!0},type:{type:String,default:"primary",validator:kN},position:{type:String,default:"right-bottom",validator:function(e){return["left-top","right-top","left-bottom","right-bottom"].includes(e)}},direction:{type:String,default:"top",validator:function(e){return["top","right","bottom","left"].includes(e)}},trigger:{type:String,default:"click",validator:function(e){return["click","hover"].includes(e)}},disabled:{type:Boolean,default:!1},color:{type:String},inactiveIcon:{type:String,default:"plus"},activeIcon:{type:String,default:"window-close"},inactiveIconSize:{type:[Number,String]},activeIconSize:{type:[Number,String]},fixed:{type:Boolean,default:!0},zIndex:{type:[Number,String],default:90},top:{type:[Number,String]},bottom:{type:[Number,String]},left:{type:[Number,String]},right:{type:[Number,String]},teleport:{type:String},onClick:MO(),onOpen:MO(),onOpened:MO(),onClose:MO(),onClosed:MO(),"onUpdate:active":MO()};function rV(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!$i(e)}var{classes:iV,n:aV}=yO("fab");const sV=er({name:"VarFab",inheritAttrs:!1,props:oV,setup(e,t){var{slots:n,attrs:o}=t,r=qn(!1),i=qn(null),{disabled:a}=_O(),s=Ma({get:()=>r.value,set(t){r.value=t,bO(e["onUpdate:active"],t)}}),c=(t,n)=>{"hover"!==e.trigger||e.disabled||0===n||(s.value=t,bO(s.value?e.onOpen:e.onClose))},l=()=>{var t,r,a=vO(null!=(r=null==n.default?void 0:n.default())?r:[]);return Zi("div",aa({class:iV(aV(),aV("--position-"+e.position),aV("--direction-"+e.direction),[e.fixed,aV("--fixed"),aV("--absolute")]),style:{zIndex:kR(e.zIndex),top:XR(e.top),bottom:XR(e.bottom),left:XR(e.left),right:XR(e.right)},ref:i,onClick:t=>((t,n,o)=>{t.stopPropagation(),"click"!==e.trigger||e.disabled||(0!==o?(s.value=n,bO(e.onClick,s.value,t),bO(s.value?e.onOpen:e.onClose)):bO(e.onClick,s.value,t))})(t,!s.value,a.length),onMouseleave:()=>c(!1,a.length),onMouseenter:()=>c(!0,a.length)},o),[Zi(Za,{name:aV("--active-transition")},rV(t=n.trigger?e.show?n.trigger({active:s.value}):null:Ar(Zi(AN,{"var-fab-cover":!0,class:aV("trigger"),type:e.type,color:e.color,disabled:e.disabled,round:!0},{default:()=>[Zi(zO,{"var-fab-cover":!0,class:iV([s.value,aV("trigger-active-icon"),aV("trigger-inactive-icon")]),name:s.value?e.activeIcon:e.inactiveIcon,size:s.value?e.inactiveIconSize:e.activeIconSize,transition:200,animationClass:aV("--trigger-icon-animation")},null)]}),[[Bs,e.show]]))?t:{default:()=>[t]}),Zi(Za,{name:aV("--actions-transition-"+e.direction),onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:()=>[Ar(Zi("div",{class:aV("actions"),onClick:e=>e.stopPropagation()},[a.map((e=>Zi("div",{class:aV("action")},[e])))]),[[Bs,e.show&&s.value&&a.length]])]})])};return Bo((()=>e.active),(e=>{r.value=e}),{immediate:!0}),Bo((()=>e.trigger),(()=>{s.value=!1})),Bo((()=>e.disabled),(()=>{s.value=!1})),sO(i,"click",(()=>{"click"!==e.trigger||e.disabled||!1!==s.value&&(s.value=!1,bO(e.onClose))})),()=>{var t,{teleport:n}=e;return n?Zi(Ri,{to:n,disabled:a.value},rV(t=l())?t:{default:()=>[t]}):l()}}});sV.install=function(e){e.component(sV.name,sV)};var cV={disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},scrollToError:{type:String,validator:function(e){return["start","end"].includes(e)}},scrollToErrorOffsetY:{type:[String,Number],default:0}};function lV(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}var{n:uV}=yO("form");var dV=er({name:"VarForm",props:cV,setup(e){var t=Ma((()=>e.disabled)),n=Ma((()=>e.readonly)),{formItems:o,bindFormItems:r}=function(){var{childProviders:e,length:t,bindChildren:n}=uO(VP);return{length:t,formItems:e,bindFormItems:n}}(),i=function(){var t,n=(t=function*(){var t=yield Promise.all(o.map((e=>{var{validate:t}=e;return t()})));if(e.scrollToError){var n,[,r]=((e,t,n="start")=>{let o="start"===n?0:e.length-1;for(;e.length>0&&o>=0&&o<=e.length-1;){if(t(e[o],o,e))return[e[o],o];"start"===n?o++:o--}return[null,-1]})(t,(e=>!1===e),e.scrollToError),i=r>-1;return i&&(t=>{setTimeout((()=>{var n=zR(t),o=n===window?0:BR(n);nO(n,{top:BR(t)-o-YR(e.scrollToErrorOffsetY),animation:RR})}),300)})(null==(n=o[r].instance.proxy)?void 0:n.$el),!i}return t.every((e=>!0===e))},function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(e){lV(i,o,r,a,s,"next",e)}function s(e){lV(i,o,r,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return r({disabled:t,readonly:n}),{n:uV,validate:i,reset:()=>o.forEach((e=>{var{reset:t}=e;return t()})),resetValidation:()=>o.forEach((e=>{var{resetValidation:t}=e;return t()}))}}});dV.render=function(e,t){return Fi(),zi("div",{class:a(e.n())},[qr(e.$slots,"default")],2)};const pV=dV;pV.install=function(e){e.component(pV.name,pV)},pV.useValidation=mO,pV.useForm=HP;var hV={src:{type:String},fit:{type:String,validator:function(e){return["fill","contain","cover","none","scale-down"].includes(e)},default:"fill"},alt:{type:String},title:{type:String},width:{type:[String,Number]},height:{type:[String,Number]},radius:{type:[String,Number],default:0},loading:{type:String},error:{type:String},lazy:{type:Boolean,default:!1},ripple:{type:Boolean,default:!1},block:{type:Boolean,default:!0},onClick:MO(),onLoad:MO(),onError:MO()},{n:fV,classes:gV}=yO("image"),vV=["alt","title","lazy-error","lazy-loading"],mV=["alt","title","src"];var _V=er({name:"VarImage",directives:{Lazy:jx,Ripple:EO},props:hV,setup:e=>({n:fV,classes:gV,toSizeUnit:XR,handleLoad:t=>{var n=t.currentTarget,{lazy:o,onLoad:r,onError:i}=e;o?("success"===n._lazy.state&&bO(r,t),"error"===n._lazy.state&&bO(i,t)):bO(r,t)},handleError:t=>{var{lazy:n,onError:o}=e;!n&&bO(o,t)},handleClick:t=>{bO(e.onClick,t)}})});_V.render=function(e,n){var o=Ur("lazy"),r=Ur("ripple");return Ar((Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),[!e.block,e.n("$--inline-block")])),style:t({width:e.toSizeUnit(e.width),height:e.toSizeUnit(e.height),"border-radius":e.toSizeUnit(e.radius)})},[e.lazy?Ar((Fi(),zi("img",{key:0,class:a(e.n("image")),alt:e.alt,title:e.title,"lazy-error":e.error,"lazy-loading":e.loading,style:t({objectFit:e.fit}),onLoad:n[0]||(n[0]=function(){return e.handleLoad&&e.handleLoad(...arguments)}),onError:n[1]||(n[1]=function(){return e.handleError&&e.handleError(...arguments)}),onClick:n[2]||(n[2]=function(){return e.handleClick&&e.handleClick(...arguments)})},null,46,vV)),[[o,e.src]]):(Fi(),zi("img",{key:1,class:a(e.n("image")),alt:e.alt,title:e.title,style:t({objectFit:e.fit}),src:e.src,onLoad:n[3]||(n[3]=function(){return e.handleLoad&&e.handleLoad(...arguments)}),onError:n[4]||(n[4]=function(){return e.handleError&&e.handleError(...arguments)}),onClick:n[5]||(n[5]=function(){return e.handleClick&&e.handleClick(...arguments)})},null,46,mV))],6)),[[r,{disabled:!e.ripple}]])};const yV=_V;yV.install=function(e){e.component(yV.name,yV)};var bV=Symbol("SWIPE_BIND_SWIPE_ITEM_KEY");var MV={loop:{type:Boolean,default:!0},autoplay:{type:[String,Number]},duration:{type:[String,Number],default:300},initialIndex:{type:[String,Number],default:0},indicator:{type:Boolean,default:!0},indicatorColor:{type:String},vertical:{type:Boolean,default:!1},touchable:{type:Boolean,default:!0},onChange:MO()};function CV(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function kV(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){CV(i,o,r,a,s,"next",e)}function s(e){CV(i,o,r,a,s,"throw",e)}a(void 0)}))}}var{n:wV,classes:TV}=yO("swipe"),SV=["onClick"];var IV=er({name:"VarSwipe",props:MV,setup(e){var t,n,o,r,i,a=qn(null),s=qn(0),c=Ma((()=>e.vertical)),l=qn(0),u=qn(0),d=qn(!1),p=qn(0),{swipeItems:h,bindSwipeItems:f,length:g}=function(){var{childProviders:e,length:t,bindChildren:n}=uO(bV);return{length:t,swipeItems:e,bindSwipeItems:n}}(),v=!1,m=-1,_=e=>h.find((t=>{var{index:n}=t;return n.value===e})),y=t=>{var n=mR(t)?t:Math.floor((u.value-s.value/2)/-s.value),{loop:o}=e;return n<=-1?o?-1:0:n>=g.value?o?g.value:g.value-1:n},b=t=>{var{loop:n}=e;return t<0?n?g.value-1:0:t>g.value-1?n?0:g.value-1:t},M=e=>{var t=u.value>=s.value,n=u.value<=-l.value,o=-(l.value-s.value);d.value=!0,(t||n)&&(d.value=!0,u.value=n?0:o,_(0).setTranslate(0),_(g.value-1).setTranslate(0)),eO((()=>{d.value=!1,bO(e)}))},C=()=>{var{autoplay:t}=e;!t||g.value<=1||(k(),m=window.setTimeout((()=>{T(),C()}),kR(t)))},k=()=>{m&&clearTimeout(m)},w=()=>{a.value&&(d.value=!0,s.value=e.vertical?a.value.offsetHeight:a.value.offsetWidth,l.value=s.value*g.value,u.value=p.value*-s.value,h.forEach((e=>{e.setTranslate(0)})),C(),setTimeout((()=>{d.value=!1})))},T=t=>{if(!(g.value<=1)){var{loop:n,onChange:o}=e,r=p.value;p.value=b(r+1),!1!==(null==t?void 0:t.event)&&bO(o,p.value),M((()=>{if(r===g.value-1&&n)return _(0).setTranslate(l.value),void(u.value=g.value*-s.value);r!==g.value-1&&(u.value=p.value*-s.value)}))}},S=t=>{if(!(g.value<=1)){var{loop:n,onChange:o}=e,r=p.value;p.value=b(r-1),!1!==(null==t?void 0:t.event)&&bO(o,p.value),M((()=>{if(0===r&&n)return _(g.value-1).setTranslate(-l.value),void(u.value=s.value);0!==r&&(u.value=p.value*-s.value)}))}};return f({size:s,vertical:c}),Bo((()=>g.value),kV((function*(){yield tO(),p.value=b(kR(e.initialIndex)),w()}))),lr(w),ur(k),Tr(k),aO(window,"resize",w),{n:wV,classes:TV,length:g,index:p,swipeEl:a,trackSize:l,translate:u,lockDuration:d,handleTouchstart:r=>{if(!(g.value<=1)&&e.touchable){var{clientX:i,clientY:a}=r.touches[0];t=i,n=a,o=performance.now(),v=!0,k(),M((()=>{d.value=!0}))}},handleTouchmove:o=>{var{touchable:a,vertical:c}=e;if(v&&a){var d,p,{clientX:h,clientY:f}=o.touches[0],m=Math.abs(h-t),y=Math.abs(f-n);if(((d=m)>(p=y)&&d>10?"horizontal":p>d&&p>10?"vertical":void 0)===(c?"vertical":"horizontal")){o.preventDefault();var b=void 0!==r?h-r:0,M=void 0!==i?f-i:0;r=h,i=f,u.value+=c?M:b,e.loop&&(u.value>=0&&_(g.value-1).setTranslate(-l.value),u.value<=-(l.value-s.value)&&_(0).setTranslate(l.value),u.value>-(l.value-s.value)&&u.value<0&&(_(g.value-1).setTranslate(0),_(0).setTranslate(0)))}}},handleTouchend:()=>{if(v){var{vertical:a,onChange:c}=e,l=a?i<n:r<t,h=a?Math.abs(n-i):Math.abs(t-r),f=performance.now()-o<=250&&h>=20?y(l?p.value+1:p.value-1):y();v=!1,d.value=!1,r=void 0,i=void 0,u.value=f*-s.value;var m=p.value;p.value=(t=>{var{loop:n}=e;return-1===t?n?g.value-1:0:t===g.value?n?0:g.value-1:t})(f),C(),m!==p.value&&bO(c,p.value)}},next:T,prev:S,to:(e,t)=>{if(!(g.value<=1||e===p.value)){var n=(e=(e=e<0?0:e)>=g.value?g.value:e)>p.value?T:S,o=Math.abs(e-p.value);Array.from({length:o}).forEach(((e,r)=>{n({event:r===o-1&&(null==t?void 0:t.event)})}))}},resize:w,toNumber:kR}}});IV.render=function(e,n){return Fi(),zi("div",{class:a(e.n()),ref:"swipeEl"},[Ji("div",{class:a(e.classes(e.n("track"),[e.vertical,e.n("--vertical")])),style:t({width:e.vertical?void 0:e.trackSize+"px",height:e.vertical?e.trackSize+"px":void 0,transform:"translate"+(e.vertical?"Y":"X")+"("+e.translate+"px)",transitionDuration:e.lockDuration?"0ms":e.toNumber(e.duration)+"ms"}),onTouchstart:n[0]||(n[0]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)}),onTouchmove:n[1]||(n[1]=function(){return e.handleTouchmove&&e.handleTouchmove(...arguments)}),onTouchend:n[2]||(n[2]=function(){return e.handleTouchend&&e.handleTouchend(...arguments)})},[qr(e.$slots,"default")],38),qr(e.$slots,"indicator",{index:e.index,length:e.length},(()=>[e.indicator&&e.length?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("indicators"),[e.vertical,e.n("--indicators-vertical")]))},[(Fi(!0),zi(xi,null,Fr(e.length,((n,o)=>(Fi(),zi("div",{class:a(e.classes(e.n("indicator"),[e.index===o,e.n("--indicator-active")],[e.vertical,e.n("--indicator-vertical")])),style:t({background:e.indicatorColor}),key:n,onClick:t=>e.to(o)},null,14,SV)))),128))],2)):na("v-if",!0)]))],2)};const EV=IV;EV.install=function(e){e.component(EV.name,EV)};var{n:DV}=yO("swipe-item");var AV=er({name:"VarSwipeItem",setup(){var e=qn(0),{swipe:t,bindSwipe:n,index:o}=function(){var{bindParent:e,index:t,parentProvider:n}=lO(bV);if(!e)throw Error("<var-swipe-item/> must in <var-swipe/>");return{index:t,swipe:n,bindSwipe:e}}(),{size:r,vertical:i}=t;return n({index:o,setTranslate:t=>{e.value=t}}),{n:DV,size:r,vertical:i,translate:e}}});AV.render=function(e,n){return Fi(),zi("div",{class:a(e.n()),style:t({width:e.vertical?void 0:e.size+"px",height:e.vertical?e.size+"px":void 0,transform:"translate"+(e.vertical?"Y":"X")+"("+e.translate+"px)"})},[qr(e.$slots,"default")],6)};const LV=AV;function RV(){return RV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},RV.apply(this,arguments)}LV.install=function(e){e.component(LV.name,LV)};var OV=RV({show:{type:Boolean,default:!1},images:{type:Array,default:()=>[]},current:{type:String},zoom:{type:[String,Number],default:2},closeable:{type:Boolean,default:!1},"onUpdate:show":MO()},fO(MV,["loop","indicator","onChange"]),fO(DO,["lockScroll","teleport","onOpen","onClose","onOpened","onClosed","onRouteChange"])),{n:xV,classes:NV}=yO("image-preview"),PV=["src","alt"];var UV=er({name:"VarImagePreview",components:{VarSwipe:EV,VarSwipeItem:LV,VarPopup:GO,VarIcon:zO},inheritAttrs:!1,props:OV,setup(e){var t=qn(!1),n=Ma((()=>{var{images:t,current:n}=e,o=t.findIndex((e=>e===n));return o>=0?o:0})),o=qn(1),r=qn(0),i=qn(0),a=qn(void 0),s=qn(void 0),c=qn(!0),l=null,u=null,d=null,p=(e,t)=>{var{clientX:n,clientY:o}=e,{clientX:r,clientY:i}=t;return Math.abs(Math.sqrt(Math.pow(r-n,2)+Math.pow(i-o,2)))},h=(e,t)=>({clientX:e.clientX,clientY:e.clientY,timestamp:Date.now(),target:t}),f=()=>{o.value=1,r.value=0,i.value=0,c.value=!0,u=null,a.value=void 0,s.value=void 0},g=t=>{var{offsetWidth:n,offsetHeight:o}=t,{naturalWidth:r,naturalHeight:i}=t.querySelector("."+xV("image"));return{width:n,height:o,imageRadio:i/r,rootRadio:o/n,zoom:kR(e.zoom)}},v=(e,t,n)=>e+t>=n?n:e+t<=-n?-n:e+t,m=()=>{if(o.value>1)return f(),void setTimeout((()=>bO(e["onUpdate:show"],!1)),200);bO(e["onUpdate:show"],!1)};return Bo((()=>e.show),(e=>{t.value=e}),{immediate:!0}),{n:xV,classes:NV,initialIndex:n,popupShow:t,scale:o,translateX:r,translateY:i,canSwipe:c,transitionTimingFunction:a,transitionDuration:s,handleTouchstart:t=>{d&&window.clearTimeout(d);var{touches:n}=t,r=h(n[0],t.currentTarget);l=r,(e=>!!u&&p(u,e)<=12&&e.timestamp-u.timestamp<=200&&u.target===e.target)(r)?o.value>1?f():(o.value=kR(e.zoom),c.value=!1,u=null,window.setTimeout((()=>{a.value="linear",s.value="0s"}),200)):u=r},handleTouchmove:e=>{if(u){var t=e.currentTarget,{touches:n}=e,a=h(n[0],t);if(o.value>1){var s=a.clientX-u.clientX,c=a.clientY-u.clientY,l=(e=>{var{zoom:t,imageRadio:n,rootRadio:o,width:r,height:i}=g(e);if(!n)return 0;var a=n>o?i/n:r;return Math.max(0,(t*a-r)/2)/t})(t),d=(e=>{var{zoom:t,imageRadio:n,rootRadio:o,width:r,height:i}=g(e);if(!n)return 0;var a=n>o?i:r*n;return Math.max(0,(t*a-i)/2)/t})(t);r.value=v(r.value,s,l),i.value=v(i.value,c,d)}u=a}},handleTouchend:e=>{d=window.setTimeout((()=>{var t;(t=e.target)&&l&&u&&p(l,u)<=12&&Date.now()-u.timestamp<350&&(t===l.target||t.parentNode===l.target)&&m(),l=null}),200)},close:m}}});UV.render=function(e,n){var o=xr("var-swipe-item"),r=xr("var-swipe"),i=xr("var-icon"),s=xr("var-popup");return Fi(),ji(s,{class:a(e.n("popup")),"var-image-preview-cover":"",transition:e.n("$-fade"),show:e.popupShow,overlay:!1,"close-on-click-overlay":!1,"lock-scroll":e.lockScroll,teleport:e.teleport,onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange},{default:Do((()=>[Zi(r,aa({class:e.n("swipe"),"var-image-preview-cover":"",touchable:e.canSwipe,indicator:e.indicator&&e.images.length>1,"initial-index":e.initialIndex,loop:e.loop,onChange:e.onChange},e.$attrs),{default:Do((()=>[(Fi(!0),zi(xi,null,Fr(e.images,(r=>(Fi(),ji(o,{class:a(e.n("swipe-item")),"var-image-preview-cover":"",key:r},{default:Do((()=>[Ji("div",{class:a(e.n("zoom-container")),style:t({transform:"scale("+e.scale+") translate("+e.translateX+"px, "+e.translateY+"px)",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:e.transitionDuration}),onTouchstart:n[0]||(n[0]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)}),onTouchmove:n[1]||(n[1]=function(){return e.handleTouchmove&&e.handleTouchmove(...arguments)}),onTouchend:n[2]||(n[2]=function(){return e.handleTouchend&&e.handleTouchend(...arguments)})},[Ji("img",{class:a(e.n("image")),src:r,alt:r},null,10,PV)],38)])),_:2},1032,["class"])))),128))])),indicator:Do((t=>{var{index:n,length:o}=t;return[qr(e.$slots,"indicator",{index:n,length:o},(()=>[e.indicator&&e.images.length>1?(Fi(),zi("div",{key:0,class:a(e.n("indicators"))},p(n+1)+" / "+p(o),3)):na("v-if",!0)]))]})),_:3},16,["class","touchable","indicator","initial-index","loop","onChange"]),qr(e.$slots,"close-icon",{},(()=>[e.closeable?(Fi(),ji(i,{key:0,class:a(e.n("close-icon")),name:"close-circle","var-image-preview-cover":"",onClick:e.close},null,8,["class","onClick"])):na("v-if",!0)])),Ji("div",{class:a(e.n("extra"))},[qr(e.$slots,"extra")],2)])),_:3},8,["class","transition","show","lock-scroll","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange"])};const GV=UV;var BV;function FV(e){if(SR()){FV.close();var t=In(gR(e)?{images:[e]}:bR(e)?{images:e}:e);t.teleport="body",BV=t;var{unmountInstance:n}=gO(GV,t,{onClose:()=>bO(t.onClose),onClosed:()=>{bO(t.onClosed),n(),BV===t&&(BV=null)},onRouteChange:()=>{n(),BV===t&&(BV=null)},"onUpdate:show":e=>{t.show=e}});t.show=!0}}FV.close=()=>{if(null!=BV){var e=BV;BV=null,po().then((()=>{e.show=!1}))}},GV.install=function(e){e.component(GV.name,GV)},FV.install=function(e){e.component(GV.name,GV)},FV.Component=GV;var qV={offsetTop:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:10},cssMode:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onScroll:MO()};function VV(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function HV(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){VV(i,o,r,a,s,"next",e)}function s(e){VV(i,o,r,a,s,"throw",e)}a(void 0)}))}}var{n:zV,classes:jV}=yO("sticky");var $V=er({name:"VarSticky",props:qV,setup(e){var t,n=qn(null),o=qn(null),r=qn(!1),i=qn("0px"),a=qn("0px"),s=qn("auto"),c=qn("auto"),l=qn("auto"),u=qn("auto"),d=Ma((()=>!e.disabled&&e.cssMode)),p=Ma((()=>!e.disabled&&!e.cssMode&&r.value)),h=Ma((()=>YR(e.offsetTop))),f=()=>{var{cssMode:d,disabled:p}=e;if(!p){var f=0;if(t!==window){var{top:g}=t.getBoundingClientRect();f=g}var v=o.value,m=n.value,{top:_,left:y}=m.getBoundingClientRect(),b=_-f;return b<=h.value?(d||(s.value=m.offsetWidth+"px",c.value=m.offsetHeight+"px",i.value=f+h.value+"px",a.value=y+"px",l.value=v.offsetWidth+"px",u.value=v.offsetHeight+"px",r.value=!0),{offsetTop:h.value,isFixed:!0}):(r.value=!1,{offsetTop:b,isFixed:!1})}},g=()=>{if(t){var n=f();n&&bO(e.onScroll,n.offsetTop,n.isFixed)}},v=function(){var e=HV((function*(){r.value=!1,yield new Promise((e=>{ZR(e)})),f()}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=HV((function*(){yield tO(),(t=zR(n.value))!==window&&t.addEventListener("scroll",g),g()}));return function(){return e.apply(this,arguments)}}(),_=()=>{t!==window&&t.removeEventListener("scroll",g)};return Bo((()=>e.disabled),v),iO(m),Tr(_),ur(_),aO(window,"scroll",g),{n:zV,classes:jV,resize:v,stickyEl:n,wrapperEl:o,isFixed:r,offsetTop:h,fixedTop:i,fixedLeft:a,fixedWidth:s,fixedHeight:c,fixedWrapperWidth:l,fixedWrapperHeight:u,enableCSSMode:d,enableFixedMode:p,toNumber:kR}}});$V.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n(),[e.enableCSSMode,e.n("--css-mode")])),ref:"stickyEl",style:t({zIndex:e.toNumber(e.zIndex),top:e.enableCSSMode?e.offsetTop+"px":void 0,width:e.enableFixedMode?e.fixedWidth:void 0,height:e.enableFixedMode?e.fixedHeight:void 0})},[Ji("div",{class:a(e.n("wrapper")),ref:"wrapperEl",style:t({zIndex:e.toNumber(e.zIndex),position:e.enableFixedMode?"fixed":void 0,width:e.enableFixedMode?e.fixedWrapperWidth:void 0,height:e.enableFixedMode?e.fixedWrapperHeight:void 0,left:e.enableFixedMode?e.fixedLeft:void 0,top:e.enableFixedMode?e.fixedTop:void 0})},[qr(e.$slots,"default")],6)],6)};const WV=$V;WV.install=function(e){e.component(WV.name,WV)};var KV=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY");var YV={index:{type:[Number,String]}},{n:XV,classes:JV}=yO("index-anchor");var ZV=er({name:"VarIndexAnchor",components:{VarSticky:WV},inheritAttrs:!1,props:YV,setup(e){var{index:t,indexBar:n,bindIndexBar:o}=function(){var{parentProvider:e,index:t,bindParent:n}=lO(KV);if(!n)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:t,indexBar:e,bindIndexBar:n}}(),r=qn(0),i=qn(!1),a=Ma((()=>e.index)),s=qn(null),{active:c,sticky:l,cssMode:u,stickyOffsetTop:d,zIndex:p}=n;return o({index:t,name:a,ownTop:r,setOwnTop:()=>{s.value&&(r.value=s.value.$el?s.value.$el.offsetTop:s.value.offsetTop)},setDisabled:e=>{i.value=e}}),{n:XV,classes:JV,name:a,anchorEl:s,active:c,sticky:l,zIndex:p,disabled:i,cssMode:u,stickyOffsetTop:d,Transition:Za}}});ZV.render=function(e,t){return Fi(),ji(Pr(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:Do((()=>[Ji("div",aa({class:e.n()},e.$attrs),[qr(e.$slots,"default",{},(()=>[ta(p(e.name),1)]))],16)])),_:3},8,["offset-top","z-index","disabled","css-mode"])};const QV=ZV;QV.install=function(e){e.component(QV.name,QV)};var eH={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:MO(),onChange:MO()};function tH(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function nH(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){tH(i,o,r,a,s,"next",e)}function s(e){tH(i,o,r,a,s,"throw",e)}a(void 0)}))}}var{n:oH,classes:rH}=yO("index-bar"),iH=["onClick"];var aH=er({name:"VarIndexBar",props:eH,setup(e){var{length:t,indexAnchors:n,bindIndexAnchors:o}=function(){var{bindChildren:e,length:t,childProviders:n}=uO(KV);return{length:t,indexAnchors:n,bindIndexAnchors:e}}(),r=qn(""),i=qn(null),a=qn([]),s=qn(),c=Ma((()=>e.sticky)),l=Ma((()=>e.cssMode)),u=Ma((()=>YR(e.stickyOffsetTop))),d=Ma((()=>e.zIndex)),p=null;o({active:s,sticky:c,cssMode:l,stickyOffsetTop:u,zIndex:d});var h=(t,n)=>{var o=_R(t)?t.name.value:t;o!==s.value&&void 0!==o&&(s.value=o,!1!==(null==n?void 0:n.event)&&bO(e.onChange,o))},f=()=>{if(!("getBoundingClientRect"in p))return 0;var{top:e}=p.getBoundingClientRect(),{scrollTop:t}=p,{top:n}=i.value.getBoundingClientRect();return t-e+n},g=()=>{var t=FR(p),o=p===window?document.body.scrollHeight:p.scrollHeight,i=f();n.forEach(((a,s)=>{var c=a.ownTop.value,l=t-c+u.value-i,d=s===n.length-1?o:n[s+1].ownTop.value-a.ownTop.value;l>=0&&l<d&&""===r.value&&(s&&!e.cssMode&&n[s-1].setDisabled(!0),a.setDisabled(!1),h(a))}))},v=function(){var t=nH((function*(t){var{anchorName:o,manualCall:i=!1,options:a}=t;if(i&&bO(e.onClick,o),o!==s.value){var c=n.find((e=>{var{name:t}=e;return o===t.value}));if(c){var l=f(),d=c.ownTop.value-u.value+l,g=qR(p);r.value=o,h(o,a),yield nO(p,{left:g,top:d,animation:xR,duration:kR(e.duration)}),eO((()=>{r.value=""}))}}}));return function(e){return t.apply(this,arguments)}}(),m=function(){var e=nH((function*(){yield tO(),p=zR(i.value)}));return function(){return e.apply(this,arguments)}}(),_=()=>{p.removeEventListener("scroll",g)};return Bo((()=>t.value),nH((function*(){yield tO(),n.forEach((e=>{var{name:t,setOwnTop:n}=e;t.value&&a.value.push(t.value),n()}))}))),iO(nH((function*(){yield m(),p.addEventListener("scroll",g)}))),wr(_),ur(_),{n:oH,classes:rH,barEl:i,active:s,zIndex:d,anchorNameList:a,toNumber:kR,scrollTo:(e,t)=>{ZR((()=>v({anchorName:e,options:t})))},anchorClick:v}}});aH.render=function(e,n){return Fi(),zi("div",{class:a(e.n()),ref:"barEl"},[qr(e.$slots,"default"),Ji("ul",{class:a(e.n("anchor-list")),style:t({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(Fi(!0),zi(xi,null,Fr(e.anchorNameList,(n=>(Fi(),zi("li",{key:n,class:a(e.classes(e.n("anchor-item"),[e.active===n,e.n("anchor-item--active")])),style:t({color:e.active===n&&e.highlightColor?e.highlightColor:""}),onClick:t=>e.anchorClick({anchorName:n,manualCall:!0})},p(n),15,iH)))),128))],6)],2)};const sH=aH;sH.install=function(e){e.component(sH.name,sH)};var cH={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:function(e){return["text","password","number"].includes(e)}},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:MO(),onBlur:MO(),onClick:MO(),onClear:MO(),onInput:MO(),onChange:MO(),"onUpdate:modelValue":MO()},{n:lH,classes:uH}=yO("input"),dH=["id","disabled","type","value","maxlength","rows"],pH=["id","disabled","type","value","maxlength"],hH=["for"];var fH=er({name:"VarInput",components:{VarIcon:zO,VarFormDetails:GP},props:cH,setup(e){var t=qn("var-input-"+da().uid),n=qn(null),o=qn(!1),r=Ma((()=>"number"===e.type?"text":e.type)),i=Ma((()=>{var{maxlength:t,modelValue:n}=e;return t?CR(n)?"0 / "+t:String(n).length+"/"+t:""})),{bindForm:a,form:s}=HP(),{errorMessage:c,validateWithTrigger:l,validate:u,resetValidation:d}=mO(),p=t=>{po((()=>{var{validateTrigger:n,rules:o,modelValue:r}=e;l(n,t,o,r)}))},h=t=>{var n=t.target,{value:o}=n;return"number"===e.type&&(o=f(o)),o=v(g(o)),n.value=o,o},f=e=>{var t=e.indexOf("-"),n=e.indexOf(".");return t>-1&&(e=0===t?"-"+e.replace(/-/g,""):e.replace(/-/g,"")),n>-1&&(e=e.slice(0,n+1)+e.slice(n).replace(/\./g,"")),e.replace(/[^-0-9.]/g,"")},g=t=>e.modelModifiers.trim?t.trim():t,v=t=>e.maxlength?t.slice(0,kR(e.maxlength)):t,m=()=>{bO(e["onUpdate:modelValue"],""),d()},_=()=>u(e.rules,e.modelValue),y=()=>{var e;null==(e=n.value)||e.focus()};return bO(a,{reset:m,validate:_,resetValidation:d}),iO((()=>{e.autofocus&&y()})),{el:n,id:t,isFocus:o,errorMessage:c,type:r,maxlengthText:i,formDisabled:null==s?void 0:s.disabled,formReadonly:null==s?void 0:s.readonly,n:lH,classes:uH,isEmpty:CR,computePlaceholderState:()=>{var{hint:t,modelValue:n}=e;return t||CR(n)?!t||CR(n)&&!o.value?void 0:lH("--placeholder-hint"):lH("--placeholder-hidden")},handleFocus:t=>{o.value=!0,bO(e.onFocus,t),p("onFocus")},handleBlur:t=>{o.value=!1,bO(e.onBlur,t),p("onBlur")},handleInput:t=>{var{composing:n}=t.target;if(!n){var o=h(t);bO(e["onUpdate:modelValue"],o),bO(e.onInput,o,t),p("onInput")}},handleChange:t=>{var n=h(t);bO(e.onChange,n,t),p("onChange")},handleClear:()=>{var{disabled:t,readonly:n,clearable:o,onClear:r}=e;null!=s&&s.disabled.value||null!=s&&s.readonly.value||t||n||!o||(bO(e["onUpdate:modelValue"],""),bO(r,""),p("onClear"))},handleClick:t=>{var{disabled:n,onClick:o}=e;null!=s&&s.disabled.value||n||(bO(o,t),p("onClick"))},handleTouchstart:t=>{var{disabled:n,readonly:o}=e;null!=s&&s.disabled.value||null!=s&&s.readonly.value||n||o||t.stopPropagation()},handleCompositionStart:e=>{Object.assign(e.target,{composing:!0})},handleCompositionEnd:e=>{var t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))},validate:_,resetValidation:d,reset:m,focus:y,blur:()=>{n.value.blur()}}}});fH.render=function(e,n){var o=xr("var-icon"),r=xr("var-form-details");return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:n[14]||(n[14]=function(){return e.handleClick&&e.handleClick(...arguments)})},[Ji("div",{class:a(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:t({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[Ji("div",{class:a(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[qr(e.$slots,"prepend-icon")],2),Ji("div",{class:a(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},["password"===e.type?(Fi(),zi("input",{key:0,class:a(e.n("autocomplete"))},null,2)):na("v-if",!0),e.textarea?(Fi(),zi("textarea",{key:1,class:a(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:t({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:n[0]||(n[0]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:n[1]||(n[1]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:n[2]||(n[2]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:n[3]||(n[3]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:n[4]||(n[4]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)}),onCompositionstart:n[5]||(n[5]=function(){return e.handleCompositionStart&&e.handleCompositionStart(...arguments)}),onCompositionend:n[6]||(n[6]=function(){return e.handleCompositionEnd&&e.handleCompositionEnd(...arguments)})},"\n        ",46,dH)):(Fi(),zi("input",{key:2,class:a(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:t({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:n[7]||(n[7]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:n[8]||(n[8]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:n[9]||(n[9]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:n[10]||(n[10]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:n[11]||(n[11]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)}),onCompositionstart:n[12]||(n[12]=function(){return e.handleCompositionStart&&e.handleCompositionStart(...arguments)}),onCompositionend:n[13]||(n[13]=function(){return e.handleCompositionEnd&&e.handleCompositionEnd(...arguments)})},null,46,pH)),Ji("label",{class:a(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:t({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},p(e.placeholder),15,hH)],2),Ji("div",{class:a(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[qr(e.$slots,"append-icon",{},(()=>[e.clearable&&!e.isEmpty(e.modelValue)?(Fi(),ji(o,{key:0,class:a(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):na("v-if",!0)]))],2)],6),e.line?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.blurColor})},[Ji("div",{class:a(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):na("v-if",!0),Zi(r,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)};const gH=fH;gH.install=function(e){e.component(gH.name,gH)};var vH={type:{type:String,default:"default",validator:function(e){return["default","primary","info","success","warning","danger"].includes(e)}},href:{type:String},target:{type:String},to:{type:[String,Object]},replace:{type:Boolean,default:!1},underline:{type:String,default:"always",validator:function(e){return["always","hover","none"].includes(e)}},disabled:{type:Boolean,default:!1},textSize:{type:[String,Number]},textColor:{type:String},onClick:MO()},{n:mH,classes:_H}=yO("link");var yH=er({name:"VarLink",props:vH,setup(e){var t=Ma((()=>e.disabled?"span":e.href?"a":e.to?"router-link":"a")),n=Ma((()=>{var{disabled:t,href:n,target:o,to:r,replace:i}=e;return t?{}:n?{href:n,target:o}:r?{to:r,target:o,replace:i}:{}}));return{n:mH,classes:_H,tag:t,linkProps:n,handleClick:t=>{var{disabled:n,onClick:o}=e;n||bO(o,t)},toSizeUnit:XR}}});yH.render=function(e,t){return Fi(),ji(Pr(e.tag),aa(e.linkProps,{class:e.classes(e.n(),e.n("$--box"),e.n("$--inline-flex"),e.n("--"+e.type),["none"!==e.underline,e.n("--underline-"+e.underline)],[e.disabled,e.n("--disabled")]),style:{color:e.textColor,fontSize:e.toSizeUnit(e.textSize)},onClick:e.handleClick}),{default:Do((()=>[qr(e.$slots,"default")])),_:3},16,["class","style","onClick"])};const bH=yH;bH.install=function(e){e.component(bH.name,bH)};var MH={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:MO(),"onUpdate:loading":MO(),"onUpdate:error":MO()};function CH(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}var{n:kH,classes:wH}=yO("list");var TH=er({name:"VarList",directives:{Ripple:EO},components:{VarLoading:pN},props:MH,setup(e){var t,n=qn(null),o=qn(null),r=()=>{bO(e["onUpdate:error"],!1),bO(e["onUpdate:loading"],!0),bO(e.onLoad)},i=function(){var n,i=(n=function*(){yield po();var{loading:n,finished:i,error:a}=e;n||i||a||!(()=>{var n=t===window?window.innerHeight:t.getBoundingClientRect().bottom,{bottom:r}=o.value.getBoundingClientRect();return Math.floor(r)-YR(e.offset)<=n})()||r()},function(){var e=this,t=arguments;return new Promise((function(o,r){var i=n.apply(e,t);function a(e){CH(i,o,r,a,s,"next",e)}function s(e){CH(i,o,r,a,s,"throw",e)}a(void 0)}))});return function(){return i.apply(this,arguments)}}();return iO((()=>{t=zR(n.value),e.immediateCheck&&i(),t.addEventListener("scroll",i)})),Tr((()=>{t.removeEventListener("scroll",i)})),{pack:JO,listEl:n,detectorEl:o,dt:NR,isNumber:mR,load:r,check:i,n:kH,classes:wH}}});TH.render=function(e,t){var n=xr("var-loading"),o=Ur("ripple");return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[qr(e.$slots,"default"),e.loading?qr(e.$slots,"loading",{key:0},(()=>[Ji("div",{class:a(e.n("loading"))},[Ji("div",{class:a(e.n("loading-text"))},p(e.dt(e.loadingText,e.pack.listLoadingText)),3),Zi(n,{size:"mini",radius:10})],2)])):na("v-if",!0),e.finished?qr(e.$slots,"finished",{key:1},(()=>[Ji("div",{class:a(e.n("finished"))},p(e.dt(e.finishedText,e.pack.listFinishedText)),3)])):na("v-if",!0),e.error?qr(e.$slots,"error",{key:2},(()=>[Ar((Fi(),zi("div",{class:a(e.n("error")),onClick:t[0]||(t[0]=function(){return e.load&&e.load(...arguments)})},[ta(p(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[o]])])):na("v-if",!0),Ji("div",{class:a(e.n("detector")),ref:"detectorEl"},null,2)],2)};const SH=TH;SH.install=function(e){e.component(SH.name,SH)};var IH={value:{type:Number,default:0},opacity:{type:Number,default:0},error:{type:Boolean,default:!1},color:{type:String},errorColor:{type:String},height:{type:[Number,String]},top:{type:[Number,String]}},{classes:EH,n:DH}=yO("loading-bar");const AH=er({name:"VarLoadingBar",props:IH,setup:e=>()=>Zi("div",{class:EH(DH(),[e.error,DH("--error")]),style:{zIndex:fR.zIndex+10,width:e.value+"%",opacity:e.opacity,height:XR(e.height),backgroundColor:e.error?e.errorColor:e.color,top:XR(e.top)}},null)});var LH,RH,OH,xH,NH,PH={},UH=In({value:0,opacity:0,error:!1}),GH=()=>{NH||(NH=!0,gO(AH,UH))},BH=()=>{LH=window.setTimeout((()=>{if(!(UH.value>=95)){var e=Math.random();UH.value<70&&(e=Math.round(5*Math.random())),UH.value+=e,BH()}}),200)},FH=()=>{window.clearTimeout(RH),window.clearTimeout(LH),window.clearTimeout(OH),window.clearTimeout(xH)},qH=()=>{FH(),UH.value=100,OH=window.setTimeout((()=>{UH.opacity=0,RH=window.setTimeout((()=>{UH.error=!1}),250)}),300)};const VH={start:()=>{FH(),UH.error=!1,UH.value=0,GH(),OH=window.setTimeout((()=>{UH.opacity=1}),200),BH()},finish:qH,error:()=>{FH(),UH.error=!0,100===UH.value&&(UH.value=0),GH(),OH=window.setTimeout((()=>{UH.opacity=1}),200),BH(),xH=window.setTimeout(qH,300)},mergeConfig:e=>{Object.assign(UH,e)},setDefaultOptions:e=>{Object.assign(UH,e),PH=e},resetDefaultOptions:()=>{Object.keys(PH).forEach((e=>{void 0!==UH[e]&&(UH[e]=void 0)}))}};var HH={show:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator:function(e){return["click","hover"].includes(e)}},reference:{type:String},placement:{type:String,default:"cover-top-start",validator:function(e){return["top","top-start","top-end","bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","cover-top","cover-top-start","cover-top-end","cover-bottom","cover-bottom-start","cover-bottom-end","cover-left","cover-right"].includes(e)}},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:[String,Object],default:"body"},sameWidth:{type:Boolean,default:!1},defaultStyle:{type:Boolean,default:!0},onOpen:MO(),onOpened:MO(),onClose:MO(),onClosed:MO(),"onUpdate:show":MO()},{n:zH,classes:jH}=yO("menu");var $H=er({name:"VarMenu",props:HH,setup(e){var{popover:t,host:n,hostSize:o,show:r,zIndex:i,handleHostClick:a,handleHostMouseenter:s,handleHostMouseleave:c,handlePopoverMouseenter:l,handlePopoverMouseleave:u,handlePopoverClose:d,open:p,close:h,resize:f}=zq(e);return{popover:t,host:n,hostSize:o,show:r,zIndex:i,toSizeUnit:XR,n:zH,classes:jH,handleHostClick:a,handleHostMouseenter:s,handleHostMouseleave:c,handlePopoverMouseenter:l,handlePopoverMouseleave:u,handlePopoverClose:d,resize:f,open:p,close:h}}});$H.render=function(e,n){return Fi(),zi("div",{ref:"host",class:a(e.n()),onClick:n[3]||(n[3]=function(){return e.handleHostClick&&e.handleHostClick(...arguments)}),onMouseenter:n[4]||(n[4]=function(){return e.handleHostMouseenter&&e.handleHostMouseenter(...arguments)}),onMouseleave:n[5]||(n[5]=function(){return e.handleHostMouseleave&&e.handleHostMouseleave(...arguments)})},[qr(e.$slots,"default"),(Fi(),ji(Ri,{to:e.teleport},[Zi(Za,{name:e.n(),onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:Do((()=>[Ar(Ji("div",{ref:"popover",style:t({zIndex:e.zIndex,width:e.sameWidth?e.toSizeUnit(Math.ceil(e.hostSize.width)):void 0}),class:a(e.classes(e.n("menu"),[e.defaultStyle,e.n("--menu-background-color")+" "+e.n("$-elevation--3")])),onClick:n[0]||(n[0]=Ps((()=>{}),["stop"])),onMouseenter:n[1]||(n[1]=function(){return e.handlePopoverMouseenter&&e.handlePopoverMouseenter(...arguments)}),onMouseleave:n[2]||(n[2]=function(){return e.handlePopoverMouseleave&&e.handlePopoverMouseleave(...arguments)})},[qr(e.$slots,"menu")],38),[[Bs,e.show]])])),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to"]))],34)};const WH=$H;WH.install=function(e){e.component(WH.name,WH)};var KH=Symbol("SELECT_BIND_OPTION_KEY");var{n:YH,classes:XH}=yO("option");var JH=er({name:"VarOption",directives:{Ripple:EO},components:{VarCheckbox:WP},props:{label:{},value:{}},setup(e){var t=qn(!1),n=Ma((()=>t.value)),o=Ma((()=>e.label)),r=Ma((()=>e.value)),{select:i,bindSelect:a}=function(){var{index:e,parentProvider:t,bindParent:n}=lO(KH);if(!n)throw Error("<var-option/> must in <var-select/>");return{index:e,select:t,bindSelect:n}}(),{wrapWidth:s,multiple:c,focusColor:l,onSelect:u,computeLabel:d}=i,p={label:o,value:r,selected:n,sync:e=>{t.value=e}};return Bo([()=>e.label,()=>e.value],d),a(p),{n:YH,classes:XH,optionSelected:t,wrapWidth:s,multiple:c,focusColor:l,handleClick:()=>{t.value=!t.value,u(p)},handleSelect:()=>u(p)}}});JH.render=function(e,n){var o=xr("var-checkbox"),r=Ur("ripple");return Ar((Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),[e.optionSelected,e.n("--selected-color")])),style:t({width:e.wrapWidth,color:e.optionSelected?e.focusColor:void 0}),onClick:n[2]||(n[2]=function(){return e.handleClick&&e.handleClick(...arguments)})},[Ji("div",{class:a(e.classes(e.n("cover"),[e.optionSelected,e.n("--selected-background")])),style:t({background:e.optionSelected?e.focusColor:void 0})},null,6),e.multiple?(Fi(),ji(o,{key:0,ref:"checkbox","checked-color":e.focusColor,modelValue:e.optionSelected,"onUpdate:modelValue":n[0]||(n[0]=t=>e.optionSelected=t),onClick:n[1]||(n[1]=Ps((()=>{}),["stop"])),onChange:e.handleSelect},null,8,["checked-color","modelValue","onChange"])):na("v-if",!0),Ji("div",{class:a(e.classes(e.n("text"),e.n("$--ellipsis")))},[qr(e.$slots,"default",{},(()=>[ta(p(e.label),1)]))],2)],6)),[[r]])};const ZH=JH;ZH.install=function(e){e.component(ZH.name,ZH)};var QH={show:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},teleport:{type:String},onClick:MO(),"onUpdate:show":MO()};var{n:ez}=yO("overlay");const tz=er({name:"VarOverlay",inheritAttrs:!1,props:QH,setup(e,t){var{slots:n,attrs:o}=t,{zIndex:r}=xO((()=>e.show),1),{disabled:i}=_O(),a=()=>{bO(e.onClick),bO(e["onUpdate:show"],!1)};OO((()=>e.show),(()=>e.lockScroll));var s=()=>{var{show:t}=e;return Zi(Za,{name:ez("--fade")},{default:()=>[t&&Zi("div",aa({class:ez(),style:{zIndex:r.value-1}},o,{onClick:a}),[bO(n.default)])]})};return()=>{var t,n,{teleport:o}=e;return o?Zi(Ri,{to:o,disabled:i.value},"function"==typeof(n=t=s())||"[object Object]"===Object.prototype.toString.call(n)&&!$i(n)?t:{default:()=>[t]}):s()}}});tz.install=function(e){e.component(tz.name,tz)};var nz={current:{type:[Number,String]},size:{type:[Number,String],default:10},total:{type:[Number,String],default:0},maxPagerCount:{type:Number,default:3},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!1},sizeOption:{type:Array,default:()=>[10,20,50,100]},showTotal:{type:Function},onChange:MO(),"onUpdate:current":MO(),"onUpdate:size":MO()},{n:oz,classes:rz}=yO("pagination"),iz=["item-mode","onClick"];var az=er({name:"VarPagination",components:{VarMenu:WH,VarIcon:zO,VarCell:RP,VarInput:gH},directives:{Ripple:EO},props:nz,setup(e){var t=qn(!1),n=qn(""),o=qn("1"),r=qn(!1),i=qn(!1),a=qn(kR(e.current)||1),s=qn(kR(e.size)||10),c=qn([]),l=Ma((()=>Math.ceil(e.maxPagerCount/2))),u=Ma((()=>Math.ceil(kR(e.total)/kR(s.value)))),d=Ma((()=>[s.value*(a.value-1)+1,Math.min(s.value*a.value,kR(e.total))])),p=Ma((()=>e.showTotal?e.showTotal(kR(e.total),d.value):"")),h=e=>/^[1-9][0-9]*$/.test(e);return Bo([()=>e.current,()=>e.size],(e=>{var[t,n]=e;a.value=kR(t)||1,s.value=kR(n||10)})),Bo([a,s,u],((t,n)=>{var[a,s,u]=t,[d,p]=n,h=[],{maxPagerCount:f,total:g,onChange:v}=e,m=Math.ceil(kR(g)/kR(p)),_=u-(f-l.value)-1;if(o.value=""+a,u-2>f){if(void 0===d||u!==m)for(var y=2;y<f+2;y++)h.push(y);if(a<=f&&a<_){h=[];for(var b=1;b<f+1;b++)h.push(b+1);r.value=!0,i.value=!1}if(a>f&&a<_){h=[];for(var M=1;M<f+1;M++)h.push(a+M-l.value);r.value=2===a&&1===f,i.value=!1}if(a>=_){h=[];for(var C=1;C<f+1;C++)h.push(u-(f-C)-1);r.value=!1,i.value=!0}h=[1,"...",...h,"...",u]}else for(var k=1;k<=u;k++)h.push(k);c.value=h,void 0!==d&&u>0&&bO(v,a,s),bO(e["onUpdate:current"],a),bO(e["onUpdate:size"],s)}),{immediate:!0}),{n:oz,classes:rz,pack:JO,current:a,menuVisible:t,size:s,pageCount:u,pageList:c,inputValue:n,simpleValue:o,totalText:p,getMode:(e,t)=>mR(e)?"basic":1===t?"head":"tail",isHideEllipsis:(e,t)=>!mR(e)&&(1===t?r.value:i.value),clickItem:(t,n)=>{t===a.value||e.disabled||(mR(t)?a.value=t:"prev"===t?a.value>1&&(a.value-=1):"next"===t?a.value<u.value&&(a.value+=1):"..."===t&&(a.value=1===n?Math.max(a.value-e.maxPagerCount,1):Math.min(a.value+e.maxPagerCount,u.value)))},showMenu:()=>{e.disabled||(t.value=!0)},clickSize:e=>{s.value=e,t.value=!1},setPage:(e,t,r)=>{if(r.target.blur(),h(t)){var i=kR(t);i>u.value&&(i=u.value,o.value=""+i),i!==a.value&&(a.value=i)}"quick"===e&&(n.value=""),"simple"!==e||h(t)||(o.value=""+a.value)},toNumber:kR}}});az.render=function(e,t){var n=xr("var-icon"),o=xr("var-input"),r=xr("var-cell"),i=xr("var-menu"),s=Ur("ripple");return Fi(),zi("ul",{class:a(e.n())},[Ar((Fi(),zi("li",{class:a(e.classes(e.n("item"),e.n("prev"),[e.current<=1||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--simple"),e.n("$-elevation--2")])),onClick:t[0]||(t[0]=t=>e.clickItem("prev"))},[qr(e.$slots,"prev",{},(()=>[Zi(n,{name:"chevron-left"})]))],2)),[[s,{disabled:e.current<=1||e.disabled}]]),e.simple?(Fi(),zi("li",{key:0,class:a(e.classes(e.n("simple"),[e.disabled,e.n("item--disabled")]))},[Zi(o,{modelValue:e.simpleValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.simpleValue=t),disabled:e.disabled,"var-pagination-cover":"",onBlur:t[2]||(t[2]=t=>e.setPage("simple",e.simpleValue,t)),onKeydown:t[3]||(t[3]=Gs((t=>e.setPage("simple",e.simpleValue,t)),["enter"]))},null,8,["modelValue","disabled"]),Ji("span",null,[ta(" / "+p(e.pageCount)+" ",1),Ji("div",{class:a(e.n("simple-line"))},null,2)])],2)):(Fi(!0),zi(xi,{key:1},Fr(e.pageList,((t,n)=>Ar((Fi(),zi("li",{key:e.toNumber(t)+n,"item-mode":e.getMode(t,n),class:a(e.classes(e.n("item"),e.n("$-elevation--2"),[t===e.current&&!e.disabled,e.n("item--active")],[e.isHideEllipsis(t,n),e.n("item--hide")],[e.disabled,e.n("item--disabled")],[t===e.current&&e.disabled,e.n("item--disabled--active")])),onClick:o=>e.clickItem(t,n)},[ta(p(t),1)],10,iz)),[[s,{disabled:e.disabled}]]))),128)),Ar((Fi(),zi("li",{class:a(e.classes(e.n("item"),e.n("next"),[e.current>=e.pageCount||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--simple"),e.n("$-elevation--2")])),onClick:t[4]||(t[4]=t=>e.clickItem("next"))},[qr(e.$slots,"next",{},(()=>[Zi(n,{name:"chevron-right"})]))],2)),[[s,{disabled:e.current>=e.pageCount||e.disabled}]]),e.showSizeChanger?(Fi(),zi("li",{key:2,class:a(e.classes(e.n("size"),[e.disabled,e.n("item--disabled")]))},[Zi(i,{show:e.menuVisible,"onUpdate:show":t[6]||(t[6]=t=>e.menuVisible=t),"offset-x":-4},{menu:Do((()=>[(Fi(!0),zi(xi,null,Fr(e.sizeOption,((t,n)=>Ar((Fi(),ji(r,{class:a(e.classes(e.n("list"),[e.size===t,e.n("list--active")])),key:n,onClick:n=>e.clickSize(t)},{default:Do((()=>[ta(p(t)+p(e.pack.paginationItem)+" / "+p(e.pack.paginationPage),1)])),_:2},1032,["class","onClick"])),[[s]]))),128))])),default:Do((()=>[Ji("div",{class:a(e.classes(e.n("size--open"),[e.current<=1||e.disabled,e.n("size--open--disabled")])),onClick:t[5]||(t[5]=function(){return e.showMenu&&e.showMenu(...arguments)})},[Ji("span",null,p(e.size)+p(e.pack.paginationItem)+" / "+p(e.pack.paginationPage),1),Zi(n,{class:a(e.n("size--open-icon")),"var-pagination-cover":"",name:"menu-down"},null,8,["class"])],2)])),_:1},8,["show"])],2)):na("v-if",!0),e.showQuickJumper&&!e.simple?(Fi(),zi("li",{key:3,class:a(e.classes(e.n("quickly"),[e.disabled,"item--disabled"]))},[ta(p(e.pack.paginationJump)+" ",1),Zi(o,{modelValue:e.inputValue,"onUpdate:modelValue":t[7]||(t[7]=t=>e.inputValue=t),disabled:e.disabled,"var-pagination-cover":"",onBlur:t[8]||(t[8]=t=>e.setPage("quick",e.inputValue,t)),onKeydown:t[9]||(t[9]=Gs((t=>e.setPage("quick",e.inputValue,t)),["enter"]))},null,8,["modelValue","disabled"])],2)):na("v-if",!0),e.totalText?(Fi(),zi("li",{key:4,class:a(e.n("total"))},p(e.totalText),3)):na("v-if",!0)],2)};const sz=az;sz.install=function(e){e.component(sz.name,sz)};var cz={elevation:{type:[Number,String]},ripple:{type:Boolean,default:!1},radius:{type:[Number,String]},width:{type:[Number,String]},height:{type:[Number,String]},round:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},onClick:MO()},{n:lz,classes:uz}=yO("paper");var dz=er({name:"VarPaper",directives:{Ripple:EO},props:cz,setup:e=>({n:lz,classes:uz,toSizeUnit:XR,handleClick:t=>{bO(e.onClick,t)}})});dz.render=function(e,n){var o=Ur("ripple");return Ar((Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),[null!=e.elevation,e.n("$-elevation--"+e.elevation)],[e.onClick,e.n("--cursor")],[e.round,e.n("--round")],[e.inline,e.n("$--inline-flex")])),style:t({width:e.toSizeUnit(e.width),height:e.toSizeUnit(e.height),"border-radius":e.toSizeUnit(e.radius)}),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[qr(e.$slots,"default")],6)),[[o,{disabled:!e.ripple}]])};const pz=dz;function hz(){return hz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},hz.apply(this,arguments)}pz.install=function(e){e.component(pz.name,pz)};var fz=hz({columns:{type:Array,default:()=>[]},title:{type:String},textKey:{type:String,default:"text"},toolbar:{type:Boolean,default:!0},cascade:{type:Boolean,default:!1},cascadeInitialIndexes:{type:Array,default:()=>[]},optionHeight:{type:[Number,String],default:44},optionCount:{type:[Number,String],default:6},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},dynamic:{type:Boolean,default:!1},textFormatter:{type:Function,default:e=>e},onChange:MO(),onConfirm:MO(),onCancel:MO()},fO(DO,["show","onUpdate:show","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"])),{n:gz,classes:vz}=yO("picker"),mz=0,_z=["onTouchstart","onTouchmove","onTouchend"],yz=["onTransitionend"];var bz=er({name:"VarPicker",components:{VarButton:AN,VarPopup:GO},inheritAttrs:!1,props:fz,setup(e){var t=qn([]),n=Ma((()=>YR(e.optionHeight))),o=Ma((()=>YR(e.optionCount))),r=Ma((()=>o.value*n.value/2-n.value/2)),i=Ma((()=>o.value*n.value)),a=[],s=(e,t)=>{var{length:n}=e.column.texts;return t=(t=t>=n?n-1:t)<=0?0:t},c=e=>{var t=Math.round((r.value-e.translate)/n.value);return s(e,t)},l=()=>({texts:t.value.map((e=>e.column.texts[e.index])),indexes:t.value.map((e=>e.index))}),u=function(e,t,o,i){void 0===i&&(i=!1);var a=r.value-s(e,t)*n.value;a===e.translate&&(e.scrolling=!1,!i&&h(e)),e.translate=a,e.duration=o},d=function(t,n,o,i){if(void 0===i&&(i=!1),bR(n)&&n.length){var a,s=i&&null!=(a=e.cascadeInitialIndexes[t.length])?a:0,c={id:mz++,prevY:void 0,momentumPrevY:void 0,touching:!1,translate:r.value,index:s,columnIndex:o,duration:0,momentumTime:0,column:{texts:n.map((t=>t[e.textKey]))},columns:n,scrollEl:null,scrolling:!1};t.push(c),u(c,c.index,0,!0),d(t,c.columns[c.index].children,o+1,i)}},p=e=>{t.value.splice(t.value.indexOf(e)+1),d(t.value,e.columns[e.index].children,e.columnIndex+1)},h=n=>{var{cascade:o,onChange:r}=e;if(o&&p(n),!t.value.some((e=>e.scrolling))){var{texts:i,indexes:s}=l();s.every(((e,t)=>e===a[t]))||(a=[...s],bO(r,i,s))}},f=()=>{if(e.cascade){var n=t.value.find((e=>e.scrolling));n&&(n.translate=HR(n.scrollEl),n.index=c(n),u(n,n.index,0,!0),n.scrolling=!1,p(n))}else t.value.forEach((e=>{e.translate=HR(e.scrollEl),e.index=c(e),u(e,e.index,0)}))};return Bo((()=>e.columns),(n=>{var o,i;t.value=e.cascade?(o=xn(n),d(i=[],o,0,!0),i):xn(n).map(((e,t)=>{var n,o=bR(e)?{texts:e}:e,i={id:mz++,prevY:void 0,momentumPrevY:void 0,touching:!1,translate:r.value,index:null!=(n=o.initialIndex)?n:0,columnIndex:t,duration:0,momentumTime:0,column:o,scrollEl:null,scrolling:!1};return u(i,i.index,0,!0),i}));var{indexes:s}=l();a=[...s]}),{immediate:!0,deep:!0}),{n:gz,classes:vz,pack:JO,optionHeight:n,optionCount:o,scrollColumns:t,columnHeight:i,center:r,Transition:Za,getScrollEl:(e,t)=>{t.scrollEl=e},handlePopupUpdateShow:t=>{bO(e["onUpdate:show"],t)},handleTouchstart:(e,t)=>{t.touching=!0,t.scrolling=!1,t.duration=0,t.translate=HR(t.scrollEl)},handleTouchmove:(e,t)=>{if(t.touching){var{clientY:o}=e.touches[0],i=void 0!==t.prevY?o-t.prevY:0;t.prevY=o,t.translate+=i,(e=>{var t=n.value+r.value,o=r.value-e.column.texts.length*n.value;e.translate>=t&&(e.translate=t),e.translate<=o&&(e.translate=o)})(t);var a=performance.now();a-t.momentumTime>300&&(t.momentumTime=a,t.momentumPrevY=t.translate)}},handleTouchend:(e,t)=>{t.touching=!1,t.scrolling=!0,t.prevY=void 0;var n=t.translate-t.momentumPrevY,o=performance.now()-t.momentumTime,r=Math.abs(n)>=15&&o<=300;r&&((e,t,n)=>{e.translate+=Math.abs(t/n)/.003*(t<0?-1:1)})(t,n,o),t.index=c(t),u(t,t.index,r?1e3:200)},handleTransitionend:e=>{e.scrolling=!1,h(e)},confirm:()=>{f();var{texts:t,indexes:n}=l();a=[...n],bO(e.onConfirm,t,n)},cancel:()=>{f();var{texts:t,indexes:n}=l();a=[...n],bO(e.onCancel,t,n)},dt:NR}}});bz.render=function(e,n){var o=xr("var-button");return Fi(),ji(Pr(e.dynamic?e.n("$-popup"):e.Transition),aa(e.dynamic?{onOpen:e.onOpen,onOpened:e.onOpened,onClose:e.onClose,onClosed:e.onClosed,onClickOverlay:e.onClickOverlay,onRouteChange:e.onRouteChange,closeOnClickOverlay:e.closeOnClickOverlay,teleport:e.teleport,show:e.show,"onUpdate:show":e.handlePopupUpdateShow,position:"bottom",class:e.n("popup")}:null,{"var-picker-cover":""}),{default:Do((()=>[Ji("div",aa({class:e.n()},e.$attrs),[e.toolbar?(Fi(),zi("div",{key:0,class:a(e.n("toolbar"))},[qr(e.$slots,"cancel",{},(()=>[Zi(o,{class:a(e.n("cancel-button")),"var-picker-cover":"",text:"","text-color":e.cancelButtonTextColor,onClick:e.cancel},{default:Do((()=>[ta(p(e.dt(e.cancelButtonText,e.pack.pickerCancelButtonText)),1)])),_:1},8,["class","text-color","onClick"])])),qr(e.$slots,"title",{},(()=>[Ji("div",{class:a(e.n("title"))},p(e.dt(e.title,e.pack.pickerTitle)),3)])),qr(e.$slots,"confirm",{},(()=>[Zi(o,{class:a(e.n("confirm-button")),text:"","var-picker-cover":"","text-color":e.confirmButtonTextColor,onClick:e.confirm},{default:Do((()=>[ta(p(e.dt(e.confirmButtonText,e.pack.pickerConfirmButtonText)),1)])),_:1},8,["class","text-color","onClick"])]))],2)):na("v-if",!0),Ji("div",{class:a(e.n("columns")),style:t({height:e.columnHeight+"px"})},[(Fi(!0),zi(xi,null,Fr(e.scrollColumns,(n=>(Fi(),zi("div",{class:a(e.n("column")),key:n.id,onTouchstart:t=>e.handleTouchstart(t,n),onTouchmove:Ps((t=>e.handleTouchmove(t,n)),["prevent"]),onTouchend:t=>e.handleTouchend(t,n)},[Ji("div",{class:a(e.n("scroller")),ref_for:!0,ref:t=>e.getScrollEl(t,n),style:t({transform:"translateY("+n.translate+"px)",transitionDuration:n.duration+"ms",transitionProperty:n.duration?"transform":"none"}),onTransitionend:t=>e.handleTransitionend(n)},[(Fi(!0),zi(xi,null,Fr(n.column.texts,(o=>(Fi(),zi("div",{class:a(e.n("option")),style:t({height:e.optionHeight+"px"}),key:o},[Ji("div",{class:a(e.n("text"))},p(e.textFormatter(o,n.columnIndex)),3)],6)))),128))],46,yz)],42,_z)))),128)),Ji("div",{class:a(e.n("picked")),style:t({top:e.center+"px",height:e.optionHeight+"px"})},null,6),Ji("div",{class:a(e.n("mask")),style:t({backgroundSize:"100% "+(e.columnHeight-e.optionHeight)/2+"px"})},null,6)],6)],16)])),_:3},16)};const Mz=bz;var Cz;function kz(e){return new Promise((t=>{kz.close();var n=In(bR(e)?{columns:e}:e);n.dynamic=!0,n.teleport="body",Cz=n;var{unmountInstance:o}=gO(Mz,n,{onConfirm:(e,o)=>{bO(n.onConfirm,e,o),t({state:"confirm",texts:e,indexes:o}),n.show=!1,Cz===n&&(Cz=null)},onCancel:(e,o)=>{bO(n.onCancel,e,o),t({state:"cancel",texts:e,indexes:o}),n.show=!1,Cz===n&&(Cz=null)},onClose:()=>{bO(n.onClose),t({state:"close"}),Cz===n&&(Cz=null)},onClosed:()=>{bO(n.onClosed),o(),Cz===n&&(Cz=null)},onRouteChange:()=>{o(),Cz===n&&(Cz=null)},"onUpdate:show":e=>{n.show=e}});n.show=!0}))}Mz.install=function(e){e.component(Mz.name,Mz)},kz.Component=Mz,kz.install=function(e){e.component(Mz.name,Mz)},kz.close=()=>{if(null!=Cz){var e=Cz;Cz=null,po().then((()=>{e.show=!1}))}};var wz={mode:{type:String,default:"linear",validator:function(e){return["linear","circle"].includes(e)}},lineWidth:{type:[Number,String],default:4},color:{type:String},trackColor:{type:String},ripple:{type:Boolean,default:!1},value:{type:[Number,String],default:0},label:{type:Boolean,default:!1},labelClass:{type:String},size:{type:[Number,String],default:40},rotate:{type:Number,default:0},track:{type:Boolean,default:!0}},{n:Tz,classes:Sz}=yO("progress"),Iz=["viewBox"],Ez=["cx","cy","r","stroke-width"],Dz=["cx","cy","r","stroke-width"];var Az=er({name:"VarProgress",props:wz,setup(e){var t=Ma((()=>{var t=kR(e.value);return{width:(t>100?100:t)+"%",roundValue:(t>100?100:Math.round(t))+"%"}})),n=Ma((()=>{var{size:t,lineWidth:n,value:o}=e,r="0 0 "+YR(t)+" "+YR(t),i=kR(o)>100?100:Math.round(kR(o)),a=(YR(t)-YR(n))/2,s=2*Math.PI*a;return{viewBox:r,radius:a,strokeDasharray:i/100*s+", "+s,perimeter:s,roundValue:i+"%"}}));return{n:Tz,classes:Sz,toSizeUnit:XR,multiplySizeUnit:JR,linearProps:t,circleProps:n}}});Az.render=function(e,n){return Fi(),zi("div",{class:a(e.n())},["linear"===e.mode?(Fi(),zi("div",{key:0,class:a(e.n("linear"))},[Ji("div",{class:a(e.n("linear-block")),style:t({height:e.toSizeUnit(e.lineWidth)})},[e.track?(Fi(),zi("div",{key:0,class:a(e.n("linear-background")),style:t({background:e.trackColor})},null,6)):na("v-if",!0),Ji("div",{class:a(e.classes(e.n("linear-certain"),[e.ripple,e.n("linear-ripple")])),style:t({background:e.color,width:e.linearProps.width})},null,6)],6),e.label?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("linear-label"),[e.labelClass,e.labelClass]))},[qr(e.$slots,"default",{},(()=>[ta(p(e.linearProps.roundValue),1)]))],2)):na("v-if",!0)],2)):na("v-if",!0),"circle"===e.mode?(Fi(),zi("div",{key:1,class:a(e.n("circle")),style:t({width:e.toSizeUnit(e.size),height:e.toSizeUnit(e.size)})},[(Fi(),zi("svg",{class:a(e.n("circle-svg")),style:t({transform:"rotate("+(e.rotate-90)+"deg)"}),viewBox:e.circleProps.viewBox},[e.track?(Fi(),zi("circle",{key:0,class:a(e.n("circle-background")),cx:e.multiplySizeUnit(e.size,.5),cy:e.multiplySizeUnit(e.size,.5),r:e.circleProps.radius,fill:"transparent","stroke-width":e.toSizeUnit(e.lineWidth),style:t({strokeDasharray:e.circleProps.perimeter,stroke:e.trackColor})},null,14,Ez)):na("v-if",!0),Ji("circle",{class:a(e.n("circle-certain")),cx:e.multiplySizeUnit(e.size,.5),cy:e.multiplySizeUnit(e.size,.5),r:e.circleProps.radius,fill:"transparent","stroke-width":e.toSizeUnit(e.lineWidth),style:t({strokeDasharray:e.circleProps.strokeDasharray,stroke:e.color})},null,14,Dz)],14,Iz)),e.label?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("circle-label"),[e.labelClass,e.labelClass]))},[qr(e.$slots,"default",{},(()=>[ta(p(e.circleProps.roundValue),1)]))],2)):na("v-if",!0)],6)):na("v-if",!0)],2)};const Lz=Az;Lz.install=function(e){e.component(Lz.name,Lz)};var Rz={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},target:{type:[String,Object]},onRefresh:MO(),"onUpdate:modelValue":MO()};function Oz(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}var{n:xz,classes:Nz}=yO("pull-refresh");var Pz=er({name:"VarPullRefresh",components:{VarIcon:zO},props:Rz,setup(e){var t,n,o=qn(0),r=qn(null),i=qn(null),a=qn(0),s=qn(-999),c=qn("arrow-down"),l=qn("default"),u=qn(!1),d=0,p=0,h=qn(!0),f=Ma((()=>"loading"!==l.value&&"success"!==l.value&&!e.disabled)),g=Ma((()=>({transform:"translate3d(0px, "+s.value+"px, 0px) translate(-50%, 0)",transition:u.value?"transform "+e.animationDuration+"ms":void 0,background:m.value?e.successBgColor:e.bgColor,color:m.value?e.successColor:e.color}))),v=Ma((()=>Math.abs(2*o.value))),m=Ma((()=>"success"===l.value)),_=e=>{("classList"in t?t:document.body).classList[e](xz()+"--lock")},y=e=>{if(f.value){var r=FR(t);if(!(r>0)){var i=0===r,u=e.touches[0];p=u.clientY-d,i&&p>=0&&e.preventDefault(),"pulling"!==l.value&&(l.value="pulling",a.value=e.touches[0].clientY),i&&s.value>o.value&&_("add");var g=(e.touches[0].clientY-a.value)/2+o.value;s.value=g>=v.value?v.value:g,s.value>=.2*v.value?(h.value=!1,c.value="refresh",n=new Promise((e=>{window.setTimeout((()=>{h.value=!0,e()}),150)}))):c.value="arrow-down"}}},b=function(){var t,r=(t=function*(){f.value&&(u.value=!0,s.value>=.2*v.value?(yield n,l.value="loading",s.value=.3*v.value,bO(e["onUpdate:modelValue"],!0),bO(e.onRefresh),_("remove")):(l.value="loosing",c.value="arrow-down",s.value=o.value,setTimeout((()=>{u.value=!1,_("remove")}),kR(e.animationDuration))))},function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(e){Oz(i,o,r,a,s,"next",e)}function s(e){Oz(i,o,r,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Bo((()=>e.modelValue),(t=>{!1===t&&(u.value=!0,l.value="success",c.value="checkbox-marked-circle",setTimeout((()=>{s.value=o.value,setTimeout((()=>{l.value="default",c.value="arrow-down",u.value=!1}),kR(e.animationDuration))}),kR(e.successDuration)))})),iO((()=>{t=e.target?jR(e.target,"PullRefresh"):zR(r.value),(()=>{var{width:e}=i.value.getBoundingClientRect();s.value=-(e+.25*e),o.value=-(e+.25*e)})()})),aO(r,"touchmove",y),{n:xz,classes:Nz,iconHasChanged:h,ICON_TRANSITION:150,refreshStatus:l,freshNode:r,controlNode:i,touchStart:e=>{d=e.touches[0].clientY,p=0},touchMove:y,touchEnd:b,iconName:c,controlStyle:g,isSuccess:m}}});Pz.render=function(e,n){var o=xr("var-icon");return Fi(),zi("div",{ref:"freshNode",class:a(e.n()),onTouchstart:n[0]||(n[0]=function(){return e.touchStart&&e.touchStart(...arguments)}),onTouchend:n[1]||(n[1]=function(){return e.touchEnd&&e.touchEnd(...arguments)}),onTouchcancel:n[2]||(n[2]=function(){return e.touchEnd&&e.touchEnd(...arguments)})},[Ji("div",{ref:"controlNode",class:a(e.classes(e.n("control"),e.n("$-elevation--2"),[e.isSuccess,e.n("control-success")])),style:t(e.controlStyle)},[Zi(o,{name:e.iconName,transition:e.ICON_TRANSITION,class:a(e.classes(e.n("icon"),["loading"===e.refreshStatus&&e.iconHasChanged,e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),qr(e.$slots,"default")],34)};const Uz=Pz;Uz.install=function(e){e.component(Uz.name,Uz)};var Gz={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},checkedColor:{type:String},uncheckedColor:{type:String},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onChange"]},rules:{type:Array},onClick:MO(),onChange:MO(),"onUpdate:modelValue":MO()},Bz=Symbol("RADIO_GROUP_BIND_RADIO_KEY");var{n:Fz,classes:qz}=yO("radio");var Vz=er({name:"VarRadio",directives:{Ripple:EO},components:{VarIcon:zO,VarFormDetails:GP},inheritAttrs:!1,props:Gz,setup(e){var t=qn(!1),n=Ma((()=>t.value===e.checkedValue)),o=qn(!1),{radioGroup:r,bindRadioGroup:i}=function(){var{bindParent:e,parentProvider:t,index:n}=lO(Bz);return{index:n,radioGroup:t,bindRadioGroup:e}}(),{form:a,bindForm:s}=HP(),{errorMessage:c,validateWithTrigger:l,validate:u,resetValidation:d}=mO(),p=n=>{var o,{checkedValue:i,onChange:a}=e;r&&t.value===i||(t.value=n,bO(e["onUpdate:modelValue"],t.value),bO(a,t.value),null==r||r.onToggle(i),o="onChange",po((()=>{var{validateTrigger:t,rules:n,modelValue:r}=e;l(t,o,n,r)})))},h=()=>{bO(e["onUpdate:modelValue"],e.uncheckedValue),d()},f=()=>u(e.rules,e.modelValue);Bo((()=>e.modelValue),(e=>{t.value=e}),{immediate:!0});var g={sync:n=>{var{checkedValue:o,uncheckedValue:r}=e;t.value=n===o?o:r},validate:f,resetValidation:d,reset:h};return bO(i,g),bO(s,g),{withAnimation:o,checked:n,errorMessage:c,radioGroupErrorMessage:null==r?void 0:r.errorMessage,formDisabled:null==a?void 0:a.disabled,formReadonly:null==a?void 0:a.readonly,n:Fz,classes:qz,handleClick:t=>{var{disabled:r,readonly:i,uncheckedValue:s,checkedValue:c,onClick:l}=e;null!=a&&a.disabled.value||r||(bO(l,t),null!=a&&a.readonly.value||i||(o.value=!0,p(n.value?s:c)))},toggle:t=>{var{uncheckedValue:o,checkedValue:r}=e;![o,r].includes(t)&&(t=n.value?o:r),p(t)},reset:h,validate:f,resetValidation:d}}});Vz.render=function(e,n){var o=xr("var-icon"),r=xr("var-form-details"),i=Ur("ripple");return Fi(),zi("div",{class:a(e.n("wrap"))},[Ji("div",aa({class:e.n(),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},e.$attrs),[Ar((Fi(),zi("div",{class:a(e.classes(e.n("action"),[e.checked,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.radioGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:t({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?qr(e.$slots,"checked-icon",{key:0},(()=>[Zi(o,{class:a(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),"var-radio-cover":"",name:"radio-marked",size:e.iconSize},null,8,["class","size"])])):qr(e.$slots,"unchecked-icon",{key:1},(()=>[Zi(o,{class:a(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),"var-radio-cover":"",name:"radio-blank",size:e.iconSize},null,8,["class","size"])]))],6)),[[i,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),Ji("div",{class:a(e.classes(e.n("text"),[e.errorMessage||e.radioGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[qr(e.$slots,"default")],2)],16),Zi(r,{"error-message":e.errorMessage},null,8,["error-message"])],2)};const Hz=Vz;Hz.install=function(e){e.component(Hz.name,Hz)};var zz={modelValue:{type:[String,Number,Boolean,Object,Array],default:void 0},direction:{type:String,default:"horizontal",validator:function(e){return["horizontal","vertical"].includes(e)}},validateTrigger:{type:Array,default:()=>["onChange"]},rules:{type:Array},onChange:MO(),"onUpdate:modelValue":MO()},{n:jz,classes:$z}=yO("radio-group");var Wz=er({name:"VarRadioGroup",components:{VarFormDetails:GP},props:zz,setup(e){var{length:t,radios:n,bindRadios:o}=function(){var{bindChildren:e,childProviders:t,length:n}=uO(Bz);return{length:n,radios:t,bindRadios:e}}(),{bindForm:r}=HP(),{errorMessage:i,validateWithTrigger:a,validate:s,resetValidation:c}=mO(),l=Ma((()=>i.value)),u=()=>n.forEach((t=>{var{sync:n}=t;return n(e.modelValue)})),d=()=>s(e.rules,e.modelValue),p=()=>{bO(e["onUpdate:modelValue"],void 0),c()};Bo((()=>e.modelValue),u),Bo((()=>t.value),u);var h={onToggle:t=>{var n;bO(e["onUpdate:modelValue"],t),bO(e.onChange,t),n="onChange",po((()=>{var{validateTrigger:t,rules:o,modelValue:r}=e;a(t,n,o,r)}))},validate:d,reset:p,resetValidation:c,errorMessage:l};return bO(r,h),o(h),{errorMessage:i,n:jz,classes:$z,reset:p,validate:d,resetValidation:c}}});Wz.render=function(e,t){var n=xr("var-form-details");return Fi(),zi("div",{class:a(e.n("wrap"))},[Ji("div",{class:a(e.classes(e.n(),e.n("--"+e.direction)))},[qr(e.$slots,"default")],2),Zi(n,{"error-message":e.errorMessage},null,8,["error-message"])],2)};const Kz=Wz;Kz.install=function(e){e.component(Kz.name,Kz)};var Yz={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:MO(),"onUpdate:modelValue":MO()},{n:Xz}=yO("rate"),Jz=["onClick"];var Zz=er({name:"VarRate",components:{VarIcon:zO,VarFormDetails:GP},directives:{Ripple:EO},props:Yz,setup(e){var{form:t,bindForm:n}=HP(),{errorMessage:o,validateWithTrigger:r,validate:i,resetValidation:a}=mO(),s=n=>{var{modelValue:o,disabled:r,disabledColor:i,color:a,half:s,emptyColor:c,icon:l,halfIcon:u,emptyIcon:d}=e,p=a;return(r||null!=t&&t.disabled.value)&&(p=i),n<=kR(o)?{color:p,name:l}:s&&n<=kR(o)+.5?{color:p,name:u}:{color:r||null!=t&&t.disabled.value?i:c,name:d}},c=()=>i(e.rules,kR(e.modelValue)),l=()=>{bO(e["onUpdate:modelValue"],0),a()};return bO(n,{reset:l,validate:c,resetValidation:a}),{errorMessage:o,formDisabled:null==t?void 0:t.disabled,formReadonly:null==t?void 0:t.readonly,getStyle:t=>{var{count:n,gap:o}=e;return{color:s(t).color,marginRight:t!==kR(n)?XR(o):0}},getClass:n=>{var{name:r,color:i}=s(n);return{[Xz("content")]:!0,[Xz("--disabled")]:(null==t?void 0:t.disabled.value)||e.disabled,[Xz("--error")]:o.value,[Xz("--primary")]:r!==e.emptyIcon&&!i}},getCurrentState:s,handleClick:(n,o)=>{var{readonly:i,disabled:a,onChange:s}=e;i||a||null!=t&&t.disabled.value||null!=t&&t.readonly.value||(((t,n)=>{if(e.half){var{offsetWidth:o}=n.target;n.offsetX<=Math.floor(o/2)&&(t-=.5)}bO(e["onUpdate:modelValue"],t)})(n,o),bO(s,n),po((()=>r(["onChange"],"onChange",e.rules,e.modelValue))))},reset:l,validate:c,resetValidation:a,toSizeUnit:XR,toNumber:kR,n:Xz}}});Zz.render=function(e,n){var o=xr("var-icon"),r=xr("var-form-details"),i=Ur("ripple");return Fi(),zi("div",{class:a(e.n("wrap"))},[Ji("div",{class:a(e.n())},[(Fi(!0),zi(xi,null,Fr(e.toNumber(e.count),(n=>Ar((Fi(),zi("div",{key:n,style:t(e.getStyle(n)),class:a(e.getClass(n)),onClick:t=>e.handleClick(n,t)},[Zi(o,{class:a(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(n).name,style:t({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"])],14,Jz)),[[i,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]))),128))],2),Zi(r,{"error-message":e.errorMessage},null,8,["error-message"])],2)};const Qz=Zz;Qz.install=function(e){e.component(Qz.name,Qz)};var ej={imageSize:{type:[String,Number]},type:{type:String,default:"success",validator:function(e){return["info","success","warning","error","question","empty"].includes(e)}},title:{type:String},description:{type:String},animation:{type:Boolean,default:!0}},tj=e=>(Io(""),e=e(),Eo(),e),nj={xmlns:"http://www.w3.org/2000/svg",viewBox:"2 3.6 20 20"},oj=[tj((()=>Ji("path",{d:"M11,9H13V7H11M11,20H13V11H11V20Z"},null,-1)))];var rj=er({});rj.render=function(e,t){return Fi(),zi("svg",nj,oj)};const ij=rj;var aj=e=>(Io(""),e=e(),Eo(),e),sj={xmlns:"http://www.w3.org/2000/svg",viewBox:"2 2 20 20"},cj=[aj((()=>Ji("path",{d:"M19,3V5H19V19M17,8.4L13.4,12L17,15.6L15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4Z"},null,-1)))];var lj=er({});lj.render=function(e,t){return Fi(),zi("svg",sj,cj)};const uj=lj;var dj=e=>(Io(""),e=e(),Eo(),e),pj={xmlns:"http://www.w3.org/2000/svg",viewBox:"-6 -4 35 35"},hj=[dj((()=>Ji("path",{d:"M10,21H14A2,2 0 0,1 12,23A2,2 0 0,1 10,21M21,19V20H3V19L5,17V11C5,7.9 7.03,5.17 10,4.29C10,4.19 10,4.1 10,4A2,2 0 0,1 12,2A2,2 0 0,1 14,4C14,4.1 14,4.19 14,4.29C16.97,5.17 19,7.9 19,11V17L21,19M17,11A5,5 0 0,0 12,6A5,5 0 0,0 7,11V18H17V11M19.75,3.19L18.33,4.61M1,11"},null,-1)))];var fj=er({});fj.render=function(e,t){return Fi(),zi("svg",pj,hj)};const gj=fj;var{n:vj,classes:mj}=yO("result");var _j=er({props:{animation:{type:Boolean},borderSize:{type:String}},setup:()=>({n:vj,classes:mj,toNumber:kR})});_j.render=function(e,n){return Fi(),zi(xi,null,[Ji("span",{class:a(e.n("success-cover-left"))},null,2),Ji("span",{class:a(e.classes(e.n("success-line"),e.n("success-line-tip"))),style:t({animationDuration:e.animation?"760ms":"0ms",borderRadius:"calc("+e.borderSize+" * 0.625)"})},null,6),Ji("span",{class:a(e.classes(e.n("success-line"),e.n("success-line-long"))),style:t({animationDuration:e.animation?"770ms":"0ms",borderRadius:"calc("+e.borderSize+" * 0.625)"})},null,6),Ji("span",{ref:"circle",class:a(e.n("success-circle")),style:t({left:"-"+e.borderSize,top:"-"+e.borderSize,borderWidth:e.borderSize})},null,6),Ji("span",{class:a(e.n("success-line-fix"))},null,2),Ji("span",{class:a(e.n("success-cover-right")),style:t({animationDuration:e.animation?"4250ms":"0ms"})},null,6)],64)};const yj=_j;var bj=e=>(Io(""),e=e(),Eo(),e),Mj={xmlns:"http://www.w3.org/2000/svg",viewBox:"-3 -3 30 30"},Cj=[bj((()=>Ji("path",{d:"M10,19H13V22H10V19M12,2C17.35,2.22 19.68,7.62 16.5,11.67C15.67,12.67 14.33,13.33 13.67,14.17C13,15 13,16 13,17H10C10,15.33 10,13.92 10.67,12.92C11.33,11.92 12.67,11.33 13.5,10.67C15.92,8.43 15.32,5.26 12,5A3,3 0 0,0 9,8H6A6,6 0 0,1 12,2Z"},null,-1)))];var kj=er({});kj.render=function(e,t){return Fi(),zi("svg",Mj,Cj)};const wj=kj;var Tj=e=>(Io(""),e=e(),Eo(),e),Sj={viewBox:"-4 -4 32 32"},Ij=[Tj((()=>Ji("path",{fill:"currentColor",d:"M2,10.96C1.5,10.68 1.35,10.07 1.63,9.59L3.13,7C3.24,6.8 3.41,6.66 3.6,6.58L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.66,6.72 20.82,6.88 20.91,7.08L22.36,9.6C22.64,10.08 22.47,10.69 22,10.96L21,11.54V16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V10.96C2.7,11.13 2.32,11.14 2,10.96M12,4.15V4.15L12,10.85V10.85L17.96,7.5L12,4.15M5,15.91L11,19.29V12.58L5,9.21V15.91M19,15.91V12.69L14,15.59C13.67,15.77 13.3,15.76 13,15.6V19.29L19,15.91M13.85,13.36L20.13,9.73L19.55,8.72L13.27,12.35L13.85,13.36Z"},null,-1)))];var Ej=er({});Ej.render=function(e,t){return Fi(),zi("svg",Sj,Ij)};const Dj=Ej;var{n:Aj,classes:Lj}=yO("result");var Rj=er({name:"VarResult",components:{Info:ij,Success:yj,Warning:gj,Error:uj,Question:wj,Empty:Dj},props:ej,setup(e){var t=Ma((()=>{var{imageSize:t}=e;return"calc("+(t?XR(t):"var(--result-image-size)")+" * 0.9)"})),n=Ma((()=>{var{imageSize:t}=e;return"calc("+(t?XR(e.imageSize):"var(--result-image-size)")+" * 0.05)"}));return{n:Aj,classes:Lj,toNumber:kR,toPxNum:YR,toSizeUnit:XR,circleSize:t,borderSize:n}}});Rj.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box")))},[qr(e.$slots,"image",{},(()=>[e.type?(Fi(),zi("div",{key:0,class:a(e.n("image-container"))},[Ji("div",{class:a(e.classes(e.n("image"),e.n(e.type))),style:t({width:e.circleSize,height:e.circleSize,borderWidth:e.borderSize})},[(Fi(),ji(Pr(e.type),{"border-size":e.borderSize,animation:e.animation},null,8,["border-size","animation"]))],6)],2)):na("v-if",!0)])),qr(e.$slots,"title",{},(()=>[e.title?(Fi(),zi("div",{key:0,class:a(e.n("title"))},p(e.title),3)):na("v-if",!0)])),qr(e.$slots,"description",{},(()=>[e.description?(Fi(),zi("div",{key:0,class:a(e.n("description"))},p(e.description),3)):na("v-if",!0)])),e.$slots.footer?(Fi(),zi("div",{key:0,class:a(e.n("footer"))},[qr(e.$slots,"footer")],2)):na("v-if",!0)],2)};const Oj=Rj;Oj.install=function(e){e.component(Oj.name,Oj)};var xj={gutter:{type:[String,Number],default:0},justify:{type:String,default:"flex-start",validator:function(e){return["flex-start","flex-end","start","end","center","space-between","space-around"].includes(e)}},align:{type:String,default:"flex-start",validator:function(e){return["flex-start","center","flex-end","start","end"].includes(e)}},onClick:MO()},{n:Nj,classes:Pj}=yO("row");var Uj=er({name:"VarRow",props:xj,setup(e){var{cols:t,bindCols:n,length:o}=function(){var{bindChildren:e,childProviders:t,length:n}=uO(iU);return{length:n,cols:t,bindCols:e}}(),r=Ma((()=>YR(e.gutter)/2)),i=()=>{t.forEach((e=>{e.setPadding({left:r.value,right:r.value})}))},a={computePadding:i};return Bo((()=>o.value),i),Bo((()=>e.gutter),i),n(a),{n:Nj,classes:Pj,average:r,handleClick:t=>{bO(e.onClick,t)},padStartFlex:rO}}});Uj.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"))),style:t({justifyContent:e.padStartFlex(e.justify),alignItems:e.padStartFlex(e.align),margin:e.average?"0 -"+e.average+"px":void 0}),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[qr(e.$slots,"default")],6)};const Gj=Uj;Gj.install=function(e){e.component(Gj.name,Gj)};var Bj={modelValue:{default:void 0},placeholder:{type:String},multiple:{type:Boolean,default:!1},offsetY:{type:[String,Number],default:0},chip:{type:Boolean,default:!1},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},separator:{type:String,default:","},textAlign:{type:String,default:"left",validator:function(e){return["left","right","center"].includes(e)}},validateTrigger:{type:Array,default:()=>["onChange","onClear","onClose"]},rules:{type:Array},onFocus:MO(),onBlur:MO(),onClick:MO(),onClear:MO(),onClose:MO(),onChange:MO(),"onUpdate:modelValue":MO()},{n:Fj,classes:qj}=yO("select"),Vj={key:1};var Hj=er({name:"VarSelect",components:{VarIcon:zO,VarMenu:WH,VarChip:oU,VarFormDetails:GP},props:Bj,setup(e){var t=qn(null),n=qn(!1),o=Ma((()=>e.multiple)),r=Ma((()=>e.focusColor)),i=qn(""),a=qn([]),s=Ma((()=>CR(e.modelValue))),c=qn("0px"),l=qn(0),{bindForm:u,form:d}=HP(),{length:p,options:h,bindOptions:f}=function(){var{length:e,childProviders:t,bindChildren:n}=uO(KH);return{length:e,options:t,bindOptions:n}}(),{errorMessage:g,validateWithTrigger:v,validate:m,resetValidation:_}=mO(),y=qn(null),b=()=>{var{multiple:t,modelValue:n}=e;if(t){var o=n;a.value=o.map(k)}t||CR(n)||(i.value=k(n)),!t&&CR(n)&&(i.value="")},M=t=>{po((()=>{var{validateTrigger:n,rules:o,modelValue:r}=e;v(n,t,o,r)}))},C=e=>{var{value:t,label:n}=e;return null!=t.value?t.value:n.value},k=e=>{var t,n,o=h.find((t=>{var{value:n}=t;return n.value===e}));return o||(o=h.find((t=>{var{label:n}=t;return n.value===e}))),null!=(t=null==(n=o)?void 0:n.label.value)?t:""},w=()=>t.value&&window.getComputedStyle(t.value).width||"0px",T=()=>{var{multiple:t,modelValue:n}=e;if(t){var o=n;h.forEach((e=>e.sync(o.includes(C(e)))))}else h.forEach((e=>e.sync(n===C(e))));b()},S=()=>m(e.rules,e.modelValue),I=()=>{bO(e["onUpdate:modelValue"],e.multiple?[]:void 0),_()};Bo((()=>e.multiple),(()=>{var{multiple:t,modelValue:n}=e;if(t&&!bR(n))throw Error("The modelValue must be an array when multiple is true")})),Bo((()=>e.modelValue),T,{deep:!0}),Bo((()=>p.value),T);var E={wrapWidth:Ma((()=>c.value)),multiple:o,focusColor:r,computeLabel:b,onSelect:t=>{var{disabled:o,readonly:r,multiple:i,onChange:a}=e;if(!(null!=d&&d.disabled.value||null!=d&&d.readonly.value||o||r)){var s=i?h.filter((e=>{var{selected:t}=e;return t.value})).map(C):C(t);bO(e["onUpdate:modelValue"],s),bO(a,s),M("onChange"),!i&&(n.value=!1)}},reset:I,validate:S,resetValidation:_};return f(E),bO(u,E),{wrapEl:t,offsetY:l,isFocus:n,errorMessage:g,formDisabled:null==d?void 0:d.disabled,formReadonly:null==d?void 0:d.readonly,label:i,labels:a,isEmptyModelValue:s,menuEl:y,n:Fj,classes:qj,computePlaceholderState:()=>{var{hint:t,modelValue:o}=e;return t||CR(o)?!t||CR(o)&&!n.value?void 0:Fj("--placeholder-hint"):Fj("--placeholder-hidden")},handleFocus:()=>{var{disabled:t,readonly:o,onFocus:r}=e;null!=d&&d.disabled.value||null!=d&&d.readonly.value||t||o||(c.value=w(),l.value=YR(e.offsetY),n.value=!0,bO(r),M("onFocus"))},handleBlur:()=>{var{disabled:t,readonly:n,onBlur:o}=e;null!=d&&d.disabled.value||null!=d&&d.readonly.value||t||n||(bO(o),M("onBlur"))},handleClear:()=>{var{disabled:t,readonly:n,multiple:o,clearable:r,onClear:i}=e;if(!(null!=d&&d.disabled.value||null!=d&&d.readonly.value||t||n)&&r){var a=o?[]:void 0;bO(e["onUpdate:modelValue"],a),bO(i,a),M("onClear")}},handleClick:t=>{var{disabled:n,onClick:o}=e;null!=d&&d.disabled.value||n||(bO(o,t),M("onClick"))},handleClose:t=>{var{disabled:n,readonly:o,modelValue:r,onClose:i}=e;if(!(null!=d&&d.disabled.value||null!=d&&d.readonly.value||n||o)){var a=r,s=h.find((e=>{var{label:n}=e;return n.value===t})),c=a.filter((e=>{var t;return e!==(null!=(t=s.value.value)?t:s.label.value)}));bO(e["onUpdate:modelValue"],c),bO(i,c),M("onClose")}},reset:I,validate:S,resetValidation:_,focus:()=>{c.value=w(),l.value=YR(e.offsetY),n.value=!0},blur:()=>{n.value=!1}}}});Hj.render=function(e,n){var o=xr("var-chip"),r=xr("var-icon"),i=xr("var-menu"),s=xr("var-form-details");return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),[e.formDisabled||e.disabled,e.n("--disabled")])),onClick:n[3]||(n[3]=function(){return e.handleClick&&e.handleClick(...arguments)})},[Ji("div",{class:a(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:t({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[Ji("div",{class:a(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[qr(e.$slots,"prepend-icon")],2),Ji("div",{class:a(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")])),ref:"wrapEl",onClick:n[2]||(n[2]=function(){return e.handleFocus&&e.handleFocus(...arguments)})},[Zi(i,{"var-select-cover":"",class:a(e.classes(e.n("menu"))),"offset-y":e.offsetY,disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled,"default-style":!1,show:e.isFocus,"onUpdate:show":n[1]||(n[1]=t=>e.isFocus=t),onClose:e.handleBlur},{menu:Do((()=>[Ji("div",{ref:"menuEl",class:a(e.classes(e.n("scroller"),e.n("$-elevation--3")))},[qr(e.$slots,"default")],2)])),default:Do((()=>[Ji("div",{class:a(e.classes(e.n("select"),[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:t({textAlign:e.textAlign,color:e.textColor})},[Ji("div",{class:a(e.n("label"))},[e.isEmptyModelValue?na("v-if",!0):qr(e.$slots,"selected",{key:0},(()=>[e.multiple?(Fi(),zi(xi,{key:0},[e.chip?(Fi(),zi("div",{key:0,class:a(e.n("chips"))},[(Fi(!0),zi(xi,null,Fr(e.labels,(t=>(Fi(),ji(o,{class:a(e.n("chip")),"var-select-cover":"",closable:"",size:"small",type:e.errorMessage?"danger":void 0,key:t,onClick:n[0]||(n[0]=Ps((()=>{}),["stop"])),onClose:()=>e.handleClose(t)},{default:Do((()=>[ta(p(t),1)])),_:2},1032,["class","type","onClose"])))),128))],2)):(Fi(),zi("div",{key:1,class:a(e.n("values"))},p(e.labels.join(e.separator)),3))],2112)):(Fi(),zi("span",Vj,p(e.label),1))]))],2),qr(e.$slots,"arrow-icon",{focus:e.isFocus},(()=>[Zi(r,{class:a(e.classes(e.n("arrow"),[e.isFocus,e.n("--arrow-rotate")])),"var-select-cover":"",name:"menu-down",transition:300},null,8,["class"])]))],6),Ji("label",{class:a(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:t({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},p(e.placeholder),7)])),_:3},8,["class","offset-y","disabled","show","onClose"])],2),Ji("div",{class:a(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[qr(e.$slots,"append-icon",{},(()=>[e.clearable?(Fi(),ji(r,{key:0,class:a(e.n("clear-icon")),name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):na("v-if",!0)]))],2)],6),e.line?(Fi(),zi("div",{key:0,class:a(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.blurColor})},[Ji("div",{class:a(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):na("v-if",!0),Zi(s,{"error-message":e.errorMessage},null,8,["error-message"])],2)};const zj=Hj;zj.install=function(e){e.component(zj.name,zj)};var jj={loading:{type:Boolean,default:!0},title:{type:Boolean,default:!1},card:{type:Boolean,default:!1},avatar:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},fullscreenZIndex:{type:[Number,String],default:100},titleWidth:{type:[Number,String]},cardHeight:{type:[Number,String]},avatarSize:{type:[Number,String]},rows:{type:[Number,String],default:3},rowsWidth:{type:Array,default:()=>[]}},{n:$j,classes:Wj}=yO("skeleton");var Kj=er({name:"VarSkeleton",props:jj,setup:()=>({n:$j,classes:Wj,toSizeUnit:XR,toNumber:kR})});Kj.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n("$--box"),e.n()))},[e.loading?na("v-if",!0):(Fi(),zi("div",{key:0,class:a(e.n("data"))},[qr(e.$slots,"default")],2)),e.loading&&!e.fullscreen?(Fi(),zi("div",{key:1,class:a(e.n("content"))},[e.card?(Fi(),zi("div",{key:0,class:a(e.n("card")),style:t({height:e.toSizeUnit(e.cardHeight)})},[Ji("div",{class:a(e.n("--animation"))},null,2)],6)):na("v-if",!0),e.avatar||e.title||e.toNumber(e.rows)>0?(Fi(),zi("div",{key:1,class:a(e.n("article"))},[e.avatar?(Fi(),zi("div",{key:0,class:a(e.n("avatar")),style:t({width:e.toSizeUnit(e.avatarSize),height:e.toSizeUnit(e.avatarSize)})},[Ji("div",{class:a(e.n("--animation"))},null,2)],6)):na("v-if",!0),e.title||e.toNumber(e.rows)>0?(Fi(),zi("div",{key:1,class:a(e.n("section"))},[e.title?(Fi(),zi("div",{key:0,class:a(e.n("title")),style:t({width:e.toSizeUnit(e.titleWidth)})},[Ji("div",{class:a(e.n("--animation"))},null,2)],6)):na("v-if",!0),(Fi(!0),zi(xi,null,Fr(e.toNumber(e.rows),((n,o)=>(Fi(),zi("div",{class:a(e.n("row")),key:n,style:t({width:e.toSizeUnit(e.rowsWidth[o])})},[Ji("div",{class:a(e.n("--animation"))},null,2)],6)))),128))],2)):na("v-if",!0)],2)):na("v-if",!0)],2)):na("v-if",!0),e.loading&&e.fullscreen?(Fi(),zi("div",{key:2,class:a(e.n("fullscreen")),style:t({zIndex:e.toNumber(e.fullscreenZIndex)})},[Ji("div",{class:a(e.n("--animation"))},null,2)],6)):na("v-if",!0)],2)};const Yj=Kj;var Xj,Jj;Yj.install=function(e){e.component(Yj.name,Yj)},(Jj=Xj||(Xj={})).First="1",Jj.Second="2";var Zj={modelValue:{type:[Number,Array],default:0},step:{type:[Number,String],default:1},range:{type:Boolean,default:!1},labelVisible:{type:String,default:"normal",validator:function(e){return["always","normal","never"].includes(e)}},activeColor:{type:String},trackColor:{type:String},thumbColor:{type:String},labelColor:{type:String},labelTextColor:{type:String},trackHeight:{type:[String,Number]},max:{type:[String,Number],default:100},min:{type:[String,Number],default:0},thumbSize:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},onChange:MO(),onStart:MO(),onEnd:MO(),"onUpdate:modelValue":MO()},{n:Qj,classes:e$}=yO("slider"),t$=["onTouchstart","onTouchmove","onTouchend","onTouchcancel"];var n$=er({name:"VarSlider",components:{VarFormDetails:GP},props:Zj,setup(e){var{bindForm:t,form:n}=HP(),{errorMessage:o,validateWithTrigger:r,validate:i,resetValidation:a}=mO(),s=qn(null),c=qn(0),l=qn(!1),u=In({[Xj.First]:{startPosition:0,currentLeft:0,active:!1,percentValue:0},[Xj.Second]:{startPosition:0,currentLeft:0,active:!1,percentValue:0}}),d=Ma((()=>kR(e.max)-kR(e.min))),p=Ma((()=>c.value/d.value*kR(e.step))),h=Ma((()=>{var{modelValue:t,range:n}=e,o=[];return n&&bR(t)?o=[{value:m(t[0]),enumValue:Xj.First,text:_(t[0])},{value:m(t[1]),enumValue:Xj.Second,text:_(t[1])}]:mR(t)&&(o=[{value:m(t),enumValue:Xj.First,text:_(t)}]),o})),f=Ma((()=>{var{activeColor:t,range:n,modelValue:o}=e,r=n&&bR(o)?m(Math.min(o[0],o[1])):0;return{width:(n&&bR(o)?m(Math.max(o[0],o[1]))-r:m(o))+"%",left:r+"%",background:t}})),g=Ma((()=>e.disabled||(null==n?void 0:n.disabled.value))),v=Ma((()=>e.readonly||(null==n?void 0:n.readonly.value))),m=t=>{var{min:n,max:o}=e;return t<kR(n)?0:t>kR(o)?100:(t-kR(n))/d.value*100},_=t=>{if(!mR(t))return 0;var n=t;return n<Number(e.min)&&(n=Number(e.min)),n>Number(e.max)&&(n=Number(e.max)),parseInt(""+n,10)===n?n:kR(n.toPrecision(5))},y=(t,n)=>{var o=[],{step:i,range:a,modelValue:s,onChange:c,min:l}=e,d=kR(i),h=Math.round(t/p.value),f=h*d+kR(l),g=u[n].percentValue*d+kR(l);if(u[n].percentValue=h,a&&bR(s)&&(o=n===Xj.First?[f,s[1]]:[s[0],f]),g!==f){var v=a?o.map((e=>_(e))):_(f);bO(c,v),bO(e["onUpdate:modelValue"],v),po((()=>r(["onChange"],"onChange",e.rules,e.modelValue)))}},b=t=>{var{range:n,modelValue:o,onEnd:r,step:i,min:a}=e;if(!g.value&&!v.value){var s=[];u[t].currentLeft=u[t].percentValue*p.value,u[t].active=!1;var c=u[t].percentValue*kR(i)+kR(a);n&&bR(o)&&(s=t===Xj.First?[c,o[1]]:[o[0],c]),bO(r,n?s:c),l.value=!1}},M=()=>{var t=kR(e.step);return isNaN(t)?(console.warn('[Varlet] Slider: type of prop "step" should be Number'),!1):!(t<0)||(console.warn('[Varlet] Slider: "step" should be > 0'),!1)},C=()=>{var{range:t,modelValue:n}=e;return t&&!bR(n)?(console.error('[Varlet] Slider: "modelValue" should be an Array'),!1):!t&&bR(n)?(console.error('[Varlet] Slider: "modelValue" should be a Number'),!1):!(t&&bR(n)&&n.length<2)||(console.error('[Varlet] Slider: "modelValue" should have two value'),!1)},k=function(t,n){void 0===t&&(t=e.modelValue),void 0===n&&(n=kR(e.step));var o=t=>{var{min:o,max:r}=e;return t<kR(o)?0:t>kR(r)?d.value/n:(t-kR(o))/n};e.range&&bR(t)?(u[Xj.First].percentValue=o(t[0]),u[Xj.First].currentLeft=u[Xj.First].percentValue*p.value,u[Xj.Second].percentValue=o(t[1]),u[Xj.Second].currentLeft=u[Xj.Second].percentValue*p.value):mR(t)&&(u[Xj.First].currentLeft=o(t)*p.value)},w={reset:()=>{var t=e.range?[0,0]:0;bO(e["onUpdate:modelValue"],t),a()},validate:()=>i(e.rules,e.modelValue),resetValidation:a};return bO(t,w),Bo([()=>e.modelValue,()=>e.step],(e=>{var[t,n]=e;M()&&C()&&!l.value&&k(t,kR(n))})),Bo(c,(()=>k())),iO((()=>{M()&&C()&&(c.value=s.value.offsetWidth)})),{n:Qj,classes:e$,Thumbs:Xj,sliderEl:s,getFillStyle:f,isDisabled:g,errorMessage:o,thumbsProps:u,thumbList:h,multiplySizeUnit:JR,toNumber:kR,showLabel:t=>"always"===e.labelVisible||"never"!==e.labelVisible&&u[t].active,start:(t,n)=>{c.value||(c.value=s.value.offsetWidth),g.value||v.value||(bO(e.onStart),l.value=!0,u[n].startPosition=t.touches[0].clientX)},move:(e,t)=>{if(!g.value&&!v.value&&l.value){var n=e.touches[0].clientX-u[t].startPosition+u[t].currentLeft;u[t].active=!0,n<=0?n=0:n>=c.value&&(n=c.value),y(n,t)}},end:b,click:t=>{if(!g.value&&!v.value&&!t.target.closest("."+Qj("thumb"))){var n=t.clientX-function(e){var{left:t}=e.getBoundingClientRect();return t+(document.body.scrollLeft||document.documentElement.scrollLeft)}(t.currentTarget),o=(t=>{if(!e.range)return Xj.First;var n=u[Xj.First].percentValue*p.value,o=u[Xj.Second].percentValue*p.value;return Math.abs(t-n)<=Math.abs(t-o)?Xj.First:Xj.Second})(n);y(n,o),b(o)}}}}});n$.render=function(e,n){var o=xr("var-form-details");return Fi(),zi("div",{class:a(e.n())},[Ji("div",{class:a(e.classes(e.n("block"),[e.isDisabled,e.n("--disabled")],[e.errorMessage,e.n("--error")])),ref:"sliderEl",onClick:n[0]||(n[0]=function(){return e.click&&e.click(...arguments)})},[Ji("div",{class:a(e.n("track"))},[Ji("div",{class:a(e.n("track-background")),style:t({background:e.trackColor,height:e.multiplySizeUnit(e.trackHeight)})},null,6),Ji("div",{class:a(e.n("track-fill")),style:t(e.getFillStyle)},null,6)],2),(Fi(!0),zi(xi,null,Fr(e.thumbList,(n=>(Fi(),zi("div",{class:a(e.n("thumb")),key:n.enumValue,style:t({left:n.value+"%",zIndex:e.thumbsProps[n.enumValue].active?1:void 0}),onTouchstart:Ps((t=>e.start(t,n.enumValue)),["stop"]),onTouchmove:Ps((t=>e.move(t,n.enumValue)),["stop"]),onTouchend:t=>e.end(n.enumValue),onTouchcancel:t=>e.end(n.enumValue)},[qr(e.$slots,"button",{currentValue:n.text},(()=>[Ji("div",{class:a(e.n("thumb-block")),style:t({background:e.thumbColor})},null,6),Ji("div",{class:a(e.classes(e.n("thumb-ripple"),[e.thumbsProps[n.enumValue].active,e.n("thumb-ripple--active")])),style:t({background:e.thumbColor})},null,6),Ji("div",{class:a(e.classes(e.n("thumb-label"),[e.showLabel(n.enumValue),e.n("thumb-label--active")])),style:t({background:e.labelColor,color:e.labelTextColor,height:void 0===e.thumbSize?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2),width:void 0===e.thumbSize?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2)})},[Ji("span",null,p(n.text),1)],6)]))],46,t$)))),128))],2),Zi(o,{"error-message":e.errorMessage,class:a(e.n("form")),"var-slider-cover":""},null,8,["error-message","class"])],2)};const o$=n$;function r$(){return r$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r$.apply(this,arguments)}o$.install=function(e){e.component(o$.name,o$)};var i$={type:{type:String,validator:function(e){return v$.includes(e)}},position:{type:String,default:"top",validator:function(e){return["top","center","bottom"].includes(e)}},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:fO(aN,"type"),loadingSize:fO(aN,"size"),loadingRadius:fO(aN,"radius"),loadingColor:r$({},fO(aN,"color"),{default:"currentColor"}),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:MO(),onOpened:MO(),onClose:MO(),onClosed:MO(),"onUpdate:show":MO(),_update:{type:String}},{n:a$,classes:s$}=yO("snackbar"),c$={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""};var l$=er({name:"VarSnackbarCore",components:{VarLoading:pN,VarIcon:zO},props:i$,setup(e){var t=qn(null),{zIndex:n}=xO((()=>e.show),1);OO((()=>e.show),(()=>e.lockScroll));var o=Ma((()=>"loading"===e.type||e.forbidClick)),r=Ma((()=>e.type?c$[e.type]:"")),i=()=>{t.value=setTimeout((()=>{"loading"!==e.type&&bO(e["onUpdate:show"],!1)}),e.duration)};return Bo((()=>e.show),(n=>{n?(bO(e.onOpen),i()):!1===n&&(clearTimeout(t.value),bO(e.onClose))})),Bo((()=>e._update),(()=>{clearTimeout(t.value),i()})),iO((()=>{e.show&&(bO(e.onOpen),i())})),{SNACKBAR_TYPE:v$,n:a$,classes:s$,zIndex:n,iconName:r,isForbidClick:o}}});l$.render=function(e,n){var o=xr("var-icon"),r=xr("var-loading");return Ar((Fi(),zi("div",{class:a(e.n()),style:t({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[Ji("div",{class:a(e.classes(e.n("wrapper"),e.n("wrapper-"+e.position),e.n("$-elevation--4"),[e.vertical,e.n("vertical")],[e.type&&e.SNACKBAR_TYPE.includes(e.type),e.n("wrapper-"+e.type)])),style:t({zIndex:e.zIndex})},[Ji("div",{class:a([e.n("content"),e.contentClass])},[qr(e.$slots,"default",{},(()=>[ta(p(e.content),1)]))],2),Ji("div",{class:a(e.n("action"))},[e.iconName?(Fi(),ji(o,{key:0,name:e.iconName},null,8,["name"])):na("v-if",!0),"loading"===e.type?(Fi(),ji(r,{key:1,type:e.loadingType,size:e.loadingSize,color:e.loadingColor,radius:e.loadingRadius},null,8,["type","size","color","radius"])):na("v-if",!0),qr(e.$slots,"action")],2)],6)],6)),[[Bs,e.show]])};const u$=l$;var{n:d$}=yO("snackbar");var p$=er({name:"VarSnackbar",components:{VarSnackbarCore:u$},props:i$,setup(){var{disabled:e}=_O();return{n:d$,disabled:e}}});p$.render=function(e,t){var n=xr("var-snackbar-core");return Fi(),ji(Ri,{to:e.teleport,disabled:e.disabled},[Zi(Za,{name:e.n()+"-fade",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:Do((()=>[Zi(n,aa(e.$props,{class:e.n("transition")}),{action:Do((()=>[qr(e.$slots,"action")])),default:Do((()=>[qr(e.$slots,"default",{},(()=>[ta(p(e.content),1)]))])),_:3},16,["class"])])),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])};const h$=p$;function f$(){return f$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f$.apply(this,arguments)}var g$,v$=["loading","success","warning","info","error"],m$=0,_$=!1,y$=!1,b$={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},M$=In([]),C$=b$,k$={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},w$={setup:()=>()=>{var e,t=M$.map((e=>{var{id:t,reactiveSnackOptions:n,_update:o}=e,r=document.querySelector(".var-transition-group");n.forbidClick||"loading"===n.type?r.classList.add("var-pointer-auto"):r.classList.remove("var-pointer-auto"),y$&&(n.position="top");var i=f$({position:y$?"relative":"absolute"},function(e){void 0===e&&(e="top");return"bottom"===e?{[e]:"5%"}:{top:"top"===e?"5%":"45%"}}(n.position));return Zi(u$,aa(n,{key:t,style:i,"data-id":t,_update:o,show:n.show,"onUpdate:show":e=>n.show=e}),null)}));return Zi(ms,aa(k$,{style:{zIndex:fR.zIndex},onAfterEnter:S$,onAfterLeave:I$}),"function"==typeof(e=t)||"[object Object]"===Object.prototype.toString.call(e)&&!$i(e)?t:{default:()=>[t]})}},T$=function(e){var t=function(e){void 0===e&&(e={});return gR(e)?{content:e}:e}(e),n=In(f$({},C$,t));n.show=!0,_$||(_$=!0,g$=gO(w$).unmountInstance);var{length:o}=M$,r={id:m$++,reactiveSnackOptions:n};0===o||y$?function(e){M$.push(e)}(r):function(e,t){var[n]=M$;n.reactiveSnackOptions=f$({},n.reactiveSnackOptions,e),n._update=t}(n,"update-"+m$);return{clear(){!y$&&M$.length?M$[0].reactiveSnackOptions.show=!1:n.show=!1}}};function S$(e){var t=e.getAttribute("data-id"),n=M$.find((e=>e.id===kR(t)));n&&bO(n.reactiveSnackOptions.onOpened)}function I$(e){e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");var t=e.getAttribute("data-id"),n=M$.find((e=>e.id===kR(t)));n&&(n.animationEnd=!0,bO(n.reactiveSnackOptions.onClosed)),M$.every((e=>e.animationEnd))&&(bO(g$),M$=In([]),_$=!1)}v$.forEach((e=>{T$[e]=t=>(_R(t)?t.type=e:t={content:t,type:e},T$(t))})),T$.install=function(e){e.component(h$.name,h$)},T$.allowMultiple=function(e){void 0===e&&(e=!1),e!==y$&&(M$.forEach((e=>{e.reactiveSnackOptions.show=!1})),y$=e)},T$.clear=function(){M$.forEach((e=>{e.reactiveSnackOptions.show=!1}))},T$.setDefaultOptions=function(e){C$=e},T$.resetDefaultOptions=function(){C$=b$},T$.Component=h$,h$.install=function(e){e.component(h$.name,h$)};const E$=T$;var D$=e=>["mini","small","normal","large"].includes(e),A$={size:{type:[String,Number,Array],default:"normal",validator:e=>D$(e)||bR(e)||mR(e)||gR(e)},wrap:{type:Boolean,default:!0},direction:{type:String,default:"row"},justify:{type:String,default:"flex-start",validator:e=>["start","end","center","space-around","space-between","flex-start","flex-end"].includes(e)},align:{type:String,validator:e=>["stretch","center","start","end","baseline","flex-start","flex-end"].includes(e)},inline:{type:Boolean,default:!1}};function L$(e){return"calc("+e+" / 2)"}var{n:R$,classes:O$}=yO("space");const x$=er({name:"VarSpace",props:A$,setup(e,t){var{slots:n}=t;return()=>{var t,{inline:o,justify:r,align:i,wrap:a,direction:s,size:c}=e,l=null!=(t=bO(n.default))?t:[],u=D$(c),[d,p]=((e,t)=>t?["var(--space-size-"+e+"-y)","var(--space-size-"+e+"-x)"]:bR(e)?e.map(XR):[XR(e),XR(e)])(c,u),h=(l=vO(l)).length-1,f=l.map(((e,t)=>{var n=function(e,t,n){var{direction:o,justify:r,index:i,lastIndex:a}=n,s="0";return"row"===o&&(["flex-start","center","flex-end","start","end"].includes(r)?s=i!==a?L$(e)+" "+t+" "+L$(e)+" 0":L$(e)+" 0":"space-around"===r?s=L$(e)+" "+L$(t):"space-between"===r&&(s=0===i?L$(e)+" "+L$(t)+" "+L$(e)+" 0":i===a?L$(e)+" 0 "+L$(e)+" "+L$(t):L$(e)+" "+L$(t))),"column"===o&&i!==a&&(s="0 0 "+e+" 0"),s}(d,p,{direction:s,justify:r,index:t,lastIndex:h});return Zi("div",{style:{margin:n}},[e])}));return Zi("div",{class:O$(R$(),R$("$--box"),[o,R$("--inline")]),style:{flexDirection:s,justifyContent:rO(r),alignItems:rO(i),flexWrap:a?"wrap":"nowrap",margin:"row"===s?"calc(-1 * "+d+" / 2) 0":void 0}},[f])}}});x$.install=function(e){e.component(x$.name,x$)};var N$={activeIcon:{type:String,default:"check"},currentIcon:{type:String},inactiveIcon:{type:String}},P$=Symbol("STEPS_BIND_STEP_KEY");var{n:U$,classes:G$}=yO("step"),B$={key:3};var F$=er({name:"VarStep",components:{VarIcon:zO},props:N$,setup(){var e=qn(null),t=qn(""),n=qn(!1),{index:o,steps:r,bindSteps:i}=function(){var{parentProvider:e,index:t,bindParent:n}=lO(P$);if(!n)throw Error("[Varlet] Steps: <step/> must in <steps>");return{index:t,steps:e,bindSteps:n}}(),{active:a,length:s,activeColor:c,inactiveColor:l,direction:u,clickStep:d}=r,p=Ma((()=>a.value===o.value)),h=Ma((()=>-1!==o.value&&a.value>o.value));return i({index:o}),Bo(s,(r=>{if(n.value=r-1===o.value,e.value){var i=e.value.offsetWidth/2-14;t.value="0 -"+i+"px"}})),{n:U$,classes:G$,main:e,index:o,isActive:h,isCurrent:p,direction:u,lineMargin:t,activeColor:c,inactiveColor:l,isLastChild:n,click:()=>d(o.value),getRef:t=>{"horizontal"===u.value&&(e.value=t)}}}});F$.render=function(e,n){var o=xr("var-icon");return Fi(),zi("div",{class:a(e.n())},[Ji("div",{class:a(e.n(e.direction))},[Ji("div",{class:a(e.n(e.direction+"-main")),ref:e.getRef},[Ji("div",{class:a(e.classes(e.n(e.direction+"-tag"),[e.isActive||e.isCurrent,e.n(e.direction+"-tag--active")])),style:t({backgroundColor:e.isActive||e.isCurrent?e.activeColor:e.inactiveColor}),onClick:n[0]||(n[0]=function(){return e.click&&e.click(...arguments)})},[e.isActive?(Fi(),ji(o,{key:0,class:a(e.n("icon")),"var-step-cover":"",name:e.activeIcon},null,8,["class","name"])):e.isCurrent&&e.currentIcon?(Fi(),ji(o,{key:1,class:a(e.n("icon")),"var-step-cover":"",name:e.currentIcon},null,8,["class","name"])):e.inactiveIcon?(Fi(),ji(o,{key:2,class:a(e.n("icon")),"var-step-cover":"",name:e.inactiveIcon},null,8,["class","name"])):(Fi(),zi("span",B$,p(e.index+1),1))],6),Ji("div",{class:a(e.classes(e.n(e.direction+"-content"),[e.isActive||e.isCurrent,e.n(e.direction+"-content--active")])),onClick:n[1]||(n[1]=function(){return e.click&&e.click(...arguments)})},[qr(e.$slots,"default")],2)],2),e.isLastChild?na("v-if",!0):(Fi(),zi("div",{key:0,class:a(e.n(e.direction+"-line")),style:t({margin:e.lineMargin})},null,6))],2)],2)};const q$=F$;q$.install=function(e){e.component(q$.name,q$)};var V$={active:{type:[String,Number],default:0},direction:{type:String,default:"horizontal",validator:function(e){return["horizontal","vertical"].includes(e)}},activeColor:{type:String},inactiveColor:{type:String},onClickStep:MO()},{n:H$}=yO("steps");var z$=er({name:"VarSteps",props:V$,setup(e){var t=Ma((()=>e.active)),n=Ma((()=>e.activeColor)),o=Ma((()=>e.inactiveColor)),r=Ma((()=>e.direction)),{length:i,bindStep:a}=function(){var{bindChildren:e,length:t,childProviders:n}=uO(P$);return{length:t,step:n,bindStep:e}}();return a({active:t,length:i,direction:r,activeColor:n,inactiveColor:o,clickStep:t=>{bO(e.onClickStep,t)}}),{n:H$}}});z$.render=function(e,n){return Fi(),zi("div",{class:a(e.n()),style:t({flexDirection:"horizontal"===e.direction?"row":"column"})},[qr(e.$slots,"default")],6)};const j$=z$;j$.install=function(e){e.component(j$.name,j$)};var $$={styleVars:{type:Object,default:()=>({})},tag:{type:String,default:"div"}},{n:W$}=yO("style-provider");const K$=er({name:"VarStyleProvider",props:$$,setup(e,t){var{slots:n}=t;return()=>Ca(e.tag,{class:W$(),style:oO(e.styleVars)},bO(n.default))}});var Y$=[];function X$(e){Y$.forEach((e=>document.documentElement.style.removeProperty(e))),Y$.length=0;var t=oO(null!=e?e:{});Object.entries(t).forEach((e=>{var[t,n]=e;document.documentElement.style.setProperty(t,n),Y$.push(t)}))}X$.Component=K$,K$.install=function(e){e.component(K$.name,K$)},X$.install=function(e){e.component(K$.name,K$)};var J$={modelValue:{default:!1},activeValue:{default:!0},inactiveValue:{default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},color:{type:String},loadingColor:{type:String},closeColor:{type:String},size:{type:[String,Number]},rules:{type:Array},ripple:{type:Boolean,default:!0},onClick:MO(),onChange:MO(),"onUpdate:modelValue":MO()},{n:Z$,classes:Q$}=yO("switch");var eW=er({name:"VarSwitch",components:{VarLoading:pN,VarFormDetails:GP},directives:{Ripple:EO},props:J$,setup(e){var{bindForm:t,form:n}=HP(),{errorMessage:o,validateWithTrigger:r,validate:i,resetValidation:a}=mO(),s=Ma((()=>{var{size:t,modelValue:n,color:r,closeColor:i,loadingColor:a,activeValue:s}=e;return{handle:{width:JR(t),height:JR(t),backgroundColor:n===s?r:i,color:a},ripple:{left:n===s?JR(t,.5):"-"+JR(t,.5),color:n===s?r:i||"#999",width:JR(t,2),height:JR(t,2)},track:{height:JR(t,.72),width:JR(t,1.9),borderRadius:JR(t,2/3),filter:n===s||null!=o&&o.value?void 0:"brightness(.6)",backgroundColor:n===s?r:i},switch:{height:JR(t,1.2),width:JR(t,2)}}})),c=Ma((()=>{var{size:t="5.333vw"}=e;return JR(t,.4)})),l={reset:()=>{bO(e["onUpdate:modelValue"],e.inactiveValue),a()},validate:()=>i(e.rules,e.modelValue),resetValidation:a};return bO(t,l),{n:Z$,classes:Q$,switchActive:t=>{var{onClick:o,onChange:i,disabled:a,loading:s,readonly:c,modelValue:l,activeValue:u,inactiveValue:d,"onUpdate:modelValue":p}=e;if(bO(o,t),!(a||s||c||null!=n&&n.disabled.value||null!=n&&n.readonly.value)){var h=l===u?d:u;bO(i,h),bO(p,h),po((()=>r(["onChange"],"onChange",e.rules,e.modelValue)))}},radius:c,styleComputed:s,errorMessage:o,formDisabled:null==n?void 0:n.disabled,formReadonly:null==n?void 0:n.readonly}}});eW.render=function(e,n){var o=xr("var-loading"),r=xr("var-form-details"),i=Ur("ripple");return Fi(),zi("div",{class:a(e.n())},[Ji("div",{class:a(e.classes(e.n("block"),[e.disabled||e.formDisabled,e.n("--disabled")])),onClick:n[0]||(n[0]=function(){return e.switchActive&&e.switchActive(...arguments)}),style:t(e.styleComputed.switch)},[Ji("div",{style:t(e.styleComputed.track),class:a(e.classes(e.n("track"),[e.modelValue===e.activeValue,e.n("track--active")],[e.errorMessage,e.n("track--error")]))},null,6),Ar((Fi(),zi("div",{class:a(e.classes(e.n("ripple"),[e.modelValue===e.activeValue,e.n("ripple--active")])),style:t(e.styleComputed.ripple)},[Ji("div",{style:t(e.styleComputed.handle),class:a(e.classes(e.n("handle"),e.n("$-elevation--2"),[e.modelValue===e.activeValue,e.n("handle--active")],[e.errorMessage,e.n("handle--error")]))},[e.loading?(Fi(),ji(o,{key:0,radius:e.radius,color:"currentColor"},null,8,["radius"])):na("v-if",!0)],6)],6)),[[i,{disabled:!e.ripple||e.disabled||e.loading||e.formDisabled}]])],6),Zi(r,{"error-message":e.errorMessage},null,8,["error-message"])],2)};const tW=eW;tW.install=function(e){e.component(tW.name,tW)};var nW={name:{type:[String,Number]},disabled:{type:Boolean,default:!1},onClick:MO()},oW=Symbol("TABS_BIND_TAB_KEY");var{n:rW,classes:iW}=yO("tab");var aW=er({name:"VarTab",directives:{Ripple:EO},props:nW,setup(e){var t=qn(null),n=Ma((()=>e.name)),o=Ma((()=>e.disabled)),r=Ma((()=>t.value)),{index:i,tabs:a,bindTabs:s}=function(){var{parentProvider:e,bindParent:t,index:n}=lO(oW);if(!t)throw Error("<var-tab/> must in <var-tabs/>");return{index:n,tabs:e,bindTabs:t}}(),{onTabClick:c,active:l,activeColor:u,inactiveColor:d,disabledColor:p,itemDirection:h,resize:f}=a,g={name:n,index:i,disabled:o,element:r};s(g);return Bo((()=>e.name),f),Bo((()=>e.disabled),f),{n:rW,classes:iW,tabEl:t,active:l,activeColor:u,inactiveColor:d,itemDirection:h,computeColorStyle:()=>{var{disabled:t,name:n}=e;return t?p.value:l.value===n||l.value===(null==i?void 0:i.value)?u.value:d.value},computeColorClass:()=>{var{disabled:t,name:n}=e;return t?rW("$-tab--disabled"):l.value===n||l.value===(null==i?void 0:i.value)?rW("$-tab--active"):rW("$-tab--inactive")},handleClick:t=>{var{disabled:n,name:o,onClick:r}=e;n||(bO(r,null!=o?o:i.value,t),c(g))}}}});aW.render=function(e,n){var o=Ur("ripple");return Ar((Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box"),e.computeColorClass(),e.n("--"+e.itemDirection))),ref:"tabEl",style:t({color:e.computeColorStyle()}),onClick:n[0]||(n[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[qr(e.$slots,"default")],6)),[[o,{disabled:e.disabled}]])};const sW=aW;sW.install=function(e){e.component(sW.name,sW)};var cW=Symbol("TABS_ITEMS_BIND_TAB_ITEM_KEY");var lW={name:{type:[String,Number]}},{n:uW,classes:dW}=yO("tab-item");var pW=er({name:"VarTabItem",components:{VarSwipeItem:LV},props:lW,setup(e){var t=qn(!1),n=qn(!1),o=Ma((()=>e.name)),{index:r,bindTabsItems:i}=function(){var{parentProvider:e,bindParent:t,index:n}=lO(cW);if(!t)throw Error("<var-tab-item/> must in <var-tabs-items/>");return{index:n,tabsItems:e,bindTabsItems:t}}();return i({index:r,name:o,setCurrent:e=>{!n.value&&e&&(n.value=!0),t.value=e}}),{n:uW,classes:dW,current:t,initSlot:n}}});pW.render=function(e,t){var n=xr("var-swipe-item");return Fi(),ji(n,{class:a(e.classes(e.n(),[!e.current,e.n("--inactive")])),"var-tab-item-cover":""},{default:Do((()=>[e.initSlot?qr(e.$slots,"default",{key:0}):na("v-if",!0)])),_:3},8,["class"])};const hW=pW;hW.install=function(e){e.component(hW.name,hW)};var fW={fullWidth:{type:[Number,String],default:"100%"}},{n:gW,classes:vW}=yO("table");var mW=er({name:"VarTable",props:fW,setup:()=>({toSizeUnit:XR,n:gW,classes:vW})});mW.render=function(e,n){return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$-elevation--1"),e.n("$--box")))},[Ji("div",{class:a(e.n("main"))},[Ji("table",{class:a(e.n("table")),style:t({width:e.toSizeUnit(e.fullWidth)})},[qr(e.$slots,"default")],6)],2),e.$slots.footer?(Fi(),zi("div",{key:0,class:a(e.n("footer"))},[qr(e.$slots,"footer")],2)):na("v-if",!0)],2)};const _W=mW;function yW(e){return["horizontal","vertical"].includes(e)}_W.install=function(e){e.component(_W.name,_W)};var bW={active:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal",validator:yW},itemDirection:{type:String,default:"horizontal",validator:yW},fixedBottom:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},disabledColor:{type:String},color:{type:String},indicatorColor:{type:String},indicatorSize:{type:[String,Number]},elevation:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyCssMode:fO(qV,"cssMode"),stickyZIndex:fO(qV,"zIndex"),offsetTop:fO(qV,"offsetTop"),safeArea:{type:Boolean,default:!1},onClick:MO(),onChange:MO(),"onUpdate:active":MO()};function MW(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function CW(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){MW(i,o,r,a,s,"next",e)}function s(e){MW(i,o,r,a,s,"throw",e)}a(void 0)}))}}var{n:kW,classes:wW}=yO("tabs");var TW=er({name:"VarTabs",components:{VarSticky:WV},inheritAttrs:!1,props:bW,setup(e){var t=qn("0px"),n=qn("0px"),o=qn("0px"),r=qn("0px"),i=qn(!1),a=qn(null),s=Ma((()=>e.active)),c=Ma((()=>e.activeColor)),l=Ma((()=>e.inactiveColor)),u=Ma((()=>e.disabledColor)),d=Ma((()=>e.itemDirection)),p=qn(null),{tabList:h,bindTabList:f,length:g}=function(){var{childProviders:e,bindChildren:t,length:n}=uO(oW);return{length:n,tabList:e,bindTabList:t}}(),v=t=>h.find((n=>{var{index:o}=n;return(null!=t?t:e.active)===o.value})),m=()=>{var s=h.find((t=>{var{name:n}=t;return e.active===n.value}))||v()||(()=>{if(0!==g.value){var{active:t}=e;if(mR(t)){var n=t>g.value-1?g.value-1:0;return bO(e["onUpdate:active"],n),v(n)}}})();s&&!s.disabled.value&&(i.value=h.length>=5,(i=>{var{element:a}=i,s=a.value;s&&("horizontal"===e.layoutDirection?(t.value=s.offsetWidth+"px",o.value=s.offsetLeft+"px"):(n.value=s.offsetHeight+"px",r.value=s.offsetTop+"px"))})(s),(t=>{var{element:n}=t;if(i.value){var o=a.value,r=n.value;"horizontal"===e.layoutDirection?nO(o,{left:r.offsetLeft+r.offsetWidth/2-o.offsetWidth/2,animation:RR}):nO(o,{top:r.offsetTop+r.offsetHeight/2-o.offsetHeight/2,animation:RR})}})(s))},_=function(){var t=CW((function*(){e.sticky&&p.value&&(yield p.value.resize())}));return function(){return t.apply(this,arguments)}}();return f({active:s,activeColor:c,inactiveColor:l,disabledColor:u,itemDirection:d,resize:m,onTabClick:t=>{var n,o=null!=(n=t.name.value)?n:t.index.value,{active:r,onChange:i,onClick:a}=e;bO(e["onUpdate:active"],o),bO(a,o),o!==r&&bO(i,o)}}),Bo((()=>g.value),CW((function*(){yield tO(),m()}))),Bo((()=>e.active),m),aO(window,"resize",m),{stickyComponent:p,indicatorWidth:t,indicatorHeight:n,indicatorX:o,indicatorY:r,scrollable:i,scrollerEl:a,Transition:Za,toSizeUnit:XR,n:kW,classes:wW,resize:m,resizeSticky:_}}});TW.render=function(e,n){return Fi(),ji(Pr(e.sticky?e.n("$-sticky"):e.Transition),{ref:e.sticky?"stickyComponent":void 0,"css-mode":e.sticky?e.stickyCssMode:void 0,"offset-top":e.sticky?e.offsetTop:void 0,"z-index":e.sticky?e.stickyZIndex:void 0},{default:Do((()=>[Ji("div",aa({class:e.classes(e.n(),e.n("$--box"),e.n("--item-"+e.itemDirection),e.n("--layout-"+e.layoutDirection+"-padding"),[e.elevation,e.n("$-elevation--4")],[e.fixedBottom,e.n("--fixed-bottom")],[e.safeArea,e.n("--safe-area")]),style:{background:e.color}},e.$attrs),[Ji("div",{ref:"scrollerEl",class:a(e.classes(e.n("tab-wrap"),[e.scrollable,e.n("--layout-"+e.layoutDirection+"-scrollable")],e.n("--layout-"+e.layoutDirection)))},[qr(e.$slots,"default"),Ji("div",{class:a(e.classes(e.n("indicator"),e.n("--layout-"+e.layoutDirection+"-indicator"))),style:t({width:"horizontal"===e.layoutDirection?e.indicatorWidth:e.toSizeUnit(e.indicatorSize),height:"horizontal"===e.layoutDirection?e.toSizeUnit(e.indicatorSize):e.indicatorHeight,transform:"horizontal"===e.layoutDirection?"translateX("+e.indicatorX+")":"translateY("+e.indicatorY+")",background:e.indicatorColor||e.activeColor})},null,6)],2)],16)])),_:3},8,["css-mode","offset-top","z-index"])};const SW=TW;SW.install=function(e){e.component(SW.name,SW)};var IW={active:{type:[String,Number],default:0},canSwipe:{type:Boolean,default:!0},loop:{type:Boolean,default:!1},"onUpdate:active":MO()};function EW(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function DW(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){EW(i,o,r,a,s,"next",e)}function s(e){EW(i,o,r,a,s,"throw",e)}a(void 0)}))}}var{n:AW}=yO("tabs-items");var LW=er({name:"VarTabsItems",components:{VarSwipe:EV},props:IW,setup(e){var t=qn(null),{tabItemList:n,bindTabItem:o,length:r}=function(){var{bindChildren:e,childProviders:t,length:n}=uO(cW);return{length:n,tabItemList:t,bindTabItem:e}}(),i=e=>(e=>n.find((t=>{var{name:n}=t;return e===n.value})))(e)||(e=>n.find((t=>{var{index:n}=t;return e===n.value})))(e),a=e=>{var o,r=i(e);r&&(n.forEach((e=>{var{setCurrent:t}=e;return t(!1)})),r.setCurrent(!0),null==(o=t.value)||o.to(r.index.value))};return o({}),Bo((()=>e.active),a),Bo((()=>r.value),DW((function*(){yield tO(),a(e.active)}))),{swipe:t,n:AW,handleSwipeChange:t=>{var o,r=n.find((e=>{var{index:n}=e;return n.value===t})),i=null!=(o=r.name.value)?o:r.index.value;bO(e["onUpdate:active"],i)},getSwipe:()=>t.value}}});LW.render=function(e,t){var n=xr("var-swipe");return Fi(),ji(n,{class:a(e.n()),ref:"swipe",loop:e.loop,touchable:e.canSwipe,indicator:!1,onChange:e.handleSwipeChange},{default:Do((()=>[qr(e.$slots,"default")])),_:3},8,["class","loop","touchable","onChange"])};const RW=LW;RW.install=function(e){e.component(RW.name,RW)};function OW(){return OW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},OW.apply(this,arguments)}const xW={dark:OW({"--color-body":"#1e1e1e","--color-text":"#fff","--color-primary":"#4a7afe","--color-info":"#10afef","--color-success":"#10c48f","--color-warning":"#ff8800","--color-danger":"#ef5350","--color-disabled":"#404040","--color-text-disabled":"#757575"},{"--button-default-color":"#303030"},{"--cell-description-color":"#aaa","--cell-border-color":"#545454"},{"--card-background":"#303030","--card-title-color":"#ffffff","--card-outline-color":"rgba(255, 255, 255, 0.2)","--card-subtitle-color":"#aaaaaa","--card-description-color":"#aaaaaa"},{"--time-picker-clock-container-background":"#545454","--time-picker-body-background":"#303030","--time-picker-clock-item-disable-color":"#aaaaaa"},{"--date-picker-main-color":"#fff","--date-picker-body-background-color":"#303030","--day-picker-head-item-color":"#aaaaaa"},{"--skeleton-card-background-color":"hsla(0,0%,100%,.12)","--skeleton-animation-background":"linear-gradient(\n        90deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.05),hsla(0,0%,100%,0))\n      ","--skeleton-avatar-background-color":"hsla(0,0%,100%,.12)","--skeleton-title-background-color":"hsla(0,0%,100%,.12)"},{"--tabs-background":"#1e1e1e"},{"--tab-inactive-color":"rgba(255, 255, 255, .65)"},{"--popup-content-background-color":"#1e1e1e"},{"--dialog-background":"#1e1e1e","--dialog-message-color":"#bbb"},{"--action-sheet-background":"#1e1e1e","--action-sheet-title-color":"#aaa","--action-sheet-action-item-color":"#fff"},{"--chip-default-color":"#555"},{"--badge-default-color":"#555"},{"--uploader-action-background":"#303030","--uploader-action-icon-color":"#fff","--uploader-file-name-background":"#303030","--uploader-file-name-color":"#aaa","--uploader-file-cover-background":"#303030"},{"--collapse-background":"#303030","--collapse-text-color":"#fff","--collapse-border-top":"thin solid rgba(255, 255, 255, 0.12)"},{"--pull-refresh-background":"#303030"},{"--switch-track-background":"#727272","--switch-handle-background":"#727272"},{"--step-content-color":"rgba(255, 255, 255, .38)","--step-content-active-color":"#fff","--step-line-background":"#fff"},{"--pagination-list-bg-color":"#303030","--pagination-hover-bg-color":"#25293a","--pagination-list-active-bg-color":"#25293a","--pagination-list-active-color":"#4a7afe","--pagination-item-background":"#303030"},{"--table-background":"#303030","--table-thead-th-text-color":"rgba(255, 255, 255, 0.6)","--table-tbody-tr-hover-background":"#4c4b4b","--table-thead-border-bottom":"thin solid rgba(255, 255, 255, 0.12)","--table-tbody-tr-border-bottom":"thin solid rgba(255, 255, 255, 0.12)","--table-footer-border-top":"thin solid rgba(255, 255, 255, 0.12)"},{"--input-input-text-color":"#fff","--input-blur-color":"rgb(255, 255, 255, .7)"},{"--select-select-text-color":"#fff","--select-blur-color":"rgb(255, 255, 255, .7)","--select-scroller-background":"#303030"},{"--radio-unchecked-color":"#fff"},{"--checkbox-unchecked-color":"#fff"},{"--divider-color":"rgba(255, 255, 255, 0.2)","--divider-text-color":"#aaa"},{"--picker-background":"#1e1e1e","--picker-cancel-button-text-color":"#aaa","--picker-picked-border":"1px solid rgba(255, 255, 255, 0.12)","--picker-mask-background-image":"linear-gradient(180deg, hsla(0, 0%, 12%, 0.9), hsla(0, 0%, 12%, 0.4)), linear-gradient(0deg, hsla(0, 0%, 12%, 0.9), hsla(0, 0%, 12%, 0.4))"},{"--app-bar-color":"#272727"},{"--bottom-navigation-background-color":"#272727","--bottom-navigation-border-color":"#444"},{"--bottom-navigation-item-active-background-color":"#272727"},{"--menu-background-color":"#272727"},{"--result-background":"#303030","--result-title-color":"#ffffff","--result-description-color":"#aaaaaa","--result-question-color":"#7f8e96","--result-question-border-color":"rgba(151,194,216,0.3)","--result-empty-color":"#adadad","--result-empty-border-color":"rgba(232,229,229,0.3)"},{"--breadcrumb-inactive-color":"#aaa"},{"--paper-background":"#303030"},{"--avatar-background-color":"#303030","--avatar-border":"2px solid #1e1e1e"})};var NW=["12","1","2","3","4","5","6","7","8","9","10","11"],PW=["00","13","14","15","16","17","18","19","20","21","22","23"],UW=["00","05","10","15","20","25","30","35","40","45","50","55"];var GW={modelValue:{type:String},elevation:{type:Boolean,default:!1},color:{type:String},headerColor:{type:String},format:{type:String,default:"ampm",validator:function(e){return["ampm","24hr"].includes(e)}},allowedTime:{type:Object},min:{type:String},max:{type:String},useSeconds:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},"onUpdate:modelValue":MO(),onChange:MO()},BW=(e,t)=>"24hr"===e||"am"===t,FW=(e,t,n)=>{var o=NW.findIndex((e=>kR(e)===kR(n))),r=BW(e,t)?n:PW[o];return{hourStr:r,hourNum:kR(r)}},qW=e=>{var[t,n,o]=e.split(":");return{hour:kR(t),minute:kR(n),second:kR(o)}},VW=e=>{var t,n,{time:o,format:r,ampm:i,hour:a,max:s,min:c,disableHour:l}=e,{hourStr:u,hourNum:d}=FW(r,i,a),p=!1,h=!1;if(l.includes(u))return!0;if(s&&!c){var{hour:f,minute:g}=qW(s);p=f===d&&o>g}if(!s&&c){var{hour:v,minute:m}=qW(c);p=v===d&&o<m}if(s&&c){var{hour:_,minute:y}=qW(s),{hour:b,minute:M}=qW(c);p=b===d&&o<M||_===d&&o>y}return null!=(t=e.allowedTime)&&t.minutes&&(h=null==(n=e.allowedTime)?void 0:n.minutes(o)),p||h},HW=e=>{var t,n,{time:o,format:r,ampm:i,hour:a,minute:s,max:c,min:l,disableHour:u}=e,{hourStr:d,hourNum:p}=FW(r,i,a),h=!1,f=!1;if(u.includes(d))return!0;if(c&&!l){var{hour:g,minute:v,second:m}=qW(c);h=g===p&&v<s||v===s&&o>m}if(!c&&l){var{hour:_,minute:y,second:b}=qW(l);h=_===p&&y>s||y===s&&o>b}if(c&&l){var{hour:M,minute:C,second:k}=qW(c),{hour:w,minute:T,second:S}=qW(l);h=M===p&&C<s||w===p&&T>s||M===p&&C===s&&o>k||w===p&&T===s&&o<S}return null!=(t=e.allowedTime)&&t.seconds&&(f=null==(n=e.allowedTime)?void 0:n.seconds(o)),h||f},{n:zW,classes:jW}=yO("time-picker");var $W=er({name:"Clock",props:{isInner:{type:Boolean,required:!0},rad:{type:Number},format:{type:String,default:"ampm"},allowedTime:{type:Object},time:{type:Object,required:!0},useSeconds:{type:Boolean,default:!1},preventNextUpdate:{type:Boolean,default:!1},type:{type:String,default:"hour"},ampm:{type:String,default:"am"},color:{type:String},min:{type:String},max:{type:String}},emits:["update","change-prevent-update"],setup(e,t){var{emit:n}=t,o=qn(null),r=qn([]),i=qn([]),a=Ma((()=>({transform:"rotate("+kR(e.rad)+"deg)",height:e.isInner&&"hour"===e.type?"calc(50% - 40px)":"calc(50% - 4px)",backgroundColor:u(),borderColor:u()}))),s=Ma((()=>{if(void 0!==e.rad){var t=e.rad/30;return t>=0?t:t+12}})),c=Ma((()=>"hour"===e.type?NW:UW)),l=(t,n)=>{var o;t=null!=(o=t)?o:"minute"===e.type?e.time.minute:e.time.second;var i="minute"===e.type?VW:HW,a={time:kR(t),format:e.format,ampm:e.ampm,hour:e.time.hour,minute:kR(e.time.minute),max:e.max,min:e.min,allowedTime:e.allowedTime,disableHour:r.value};return n&&"minute"===e.type&&Reflect.deleteProperty(a,"minute"),i(a)},u=()=>{if(void 0===s.value)return e.color;var t=e.isInner?PW[s.value]:c.value[s.value];return c.value===UW?l()?"#bdbdbd":e.color:p(t)?"#bdbdbd":e.color},d=(t,n)=>n?s.value===t&&e.isInner:s.value===t&&(!e.isInner||"hour"!==e.type),p=t=>{if("hour"===e.type){if(BW(e.format,e.ampm))return r.value.includes(t);var n=NW.findIndex((e=>e===t));return i.value.includes(n)}return l(t,!0)};return Bo([s,()=>e.isInner],((t,o)=>{var[r,i]=t,[a,c]=o;if(!(r===a&&i===c)&&"hour"===e.type&&void 0!==s.value){var l=i?PW[s.value]:(()=>{if(void 0!==s.value){var t="am"===e.ampm?NW:PW;return UR(t[s.value],2,"0")}})(),u=e.useSeconds?":"+e.time.second:"",d=l+":"+e.time.minute+u;e.preventNextUpdate||n("update",d),n("change-prevent-update")}})),Bo((()=>e.rad),((t,o)=>{if("hour"!==e.type&&void 0!==t&&void 0!==o){var r=t/6>=0?t/6:t/6+60;if(r!==(o/6>=0?o/6:o/6+60)){var i,{hourStr:a}=FW(e.format,e.ampm,e.time.hour);if("minute"===e.type)i=a+":"+BB().minute(r).format("mm")+(e.useSeconds?":"+e.time.second:"");if("second"===e.type){var s=BB().second(r).format("ss"),c=e.useSeconds?":"+s:"";i=a+":"+e.time.minute+c}n("update",i)}}})),Bo([()=>e.max,()=>e.min,()=>e.allowedTime],(e=>{var[t,n,o]=e;if(r.value=[],t&&!n){var{hour:a}=qW(t),s=NW.filter((e=>kR(e)>a)),c=PW.filter((e=>kR(e)>a));r.value=[...s,...c]}if(!t&&n){var{hour:l}=qW(n),u=NW.filter((e=>kR(e)<l)),d=PW.filter((e=>kR(e)<l));r.value=[...u,...d]}if(t&&n){var{hour:p}=qW(t),{hour:h}=qW(n),f=NW.filter((e=>kR(e)<h||kR(e)>p)),g=PW.filter((e=>kR(e)<h||kR(e)>p));r.value=[...f,...g]}if(null!=o&&o.hours){var{hours:v}=o,m=NW.filter((e=>!v(kR(e)))),_=PW.filter((e=>!v(kR(e))));r.value=[...new Set([...r.value,...m,..._])]}i.value=r.value.map((e=>PW.findIndex((t=>e===t)))).filter((e=>e>=0))}),{immediate:!0}),{n:zW,classes:jW,hours24:PW,timeScales:c,inner:o,handStyle:a,disableHour:r,isActive:d,isDisable:p,getSize:()=>{var{width:e,height:t}=o.value.getBoundingClientRect();return{width:e,height:t}},getStyle:(t,n,o)=>{var r=2*Math.PI/12*t-Math.PI/2,i=50*(1+Math.cos(r)),a=50*(1+Math.sin(r)),{backgroundColor:s,color:c}=d(t,o)?p(n)?{backgroundColor:"#bdbdbd",color:"#fff"}:{backgroundColor:e.color,color:void 0}:{backgroundColor:void 0,color:void 0};return{left:i+"%",top:a+"%",backgroundColor:s,color:c}},activeItemIndex:s}}});$W.render=function(e,n){return Fi(),zi("div",{class:a(e.n("clock"))},[Ji("div",{class:a(e.n("clock-hand")),style:t(e.handStyle)},null,6),(Fi(!0),zi(xi,null,Fr(e.timeScales,((n,o)=>(Fi(),zi("div",{class:a(e.classes(e.n("clock-item"),[e.isActive(o,!1),e.n("clock-item--active")],[e.isDisable(n),e.n("clock-item--disable")])),key:n,style:t(e.getStyle(o,n,!1))},p(n),7)))),128)),"24hr"===e.format&&"hour"===e.type?(Fi(),zi("div",{key:0,class:a(e.n("clock-inner")),ref:"inner"},[(Fi(!0),zi(xi,null,Fr(e.hours24,((n,o)=>(Fi(),zi("div",{class:a(e.classes(e.n("clock-item"),[e.isActive(o,!0),e.n("clock-item--active")],[e.isDisable(n),e.n("clock-item--disable")])),key:n,style:t(e.getStyle(o,n,!0))},p(n),7)))),128))],2)):na("v-if",!0)],2)};const WW=$W;var{n:KW,classes:YW}=yO("time-picker"),XW=e=>(Io(""),e=e(),Eo(),e),JW=XW((()=>Ji("span",null,":",-1))),ZW={key:0};var QW=er({name:"VarTimePicker",components:{Clock:WW},props:GW,setup(e){var t=qn(null),n=qn(null),o=qn(null),r=qn(!1),i=qn(!1),a=qn(!1),s=qn(!1),c=qn(!1),l=qn(void 0),u=qn(0),d=qn(0),p=qn("hour"),h=qn("am"),f=qn(!1),g=qn(!1),v=qn({hour:"00",minute:"00",second:"00"}),m=In({x:0,y:0}),_=In({x:[],y:[]}),y=Ma((()=>"hour"===p.value?l.value:"minute"===p.value?u.value:d.value)),b=t=>{bO(e["onUpdate:modelValue"],t),bO(e.onChange,t)},M=(e,t)=>{var n=e>=_.x[0]&&e<=_.x[1],o=t>=_.y[0]&&t<=_.y[1];return n&&o},C=()=>{var{left:n,top:r,width:i,height:a}=t.value.getBoundingClientRect();if(m.x=n+i/2,m.y=r+a/2,"hour"===p.value&&"24hr"===e.format){var{rangeXMin:s,rangeXMax:c,rangeYMin:l,rangeYMax:u}=(()=>{var{width:e,height:t}=o.value.getSize();return{rangeXMin:m.x-e/2-8,rangeXMax:m.x+e/2+8,rangeYMin:m.y-t/2-8,rangeYMax:m.y+t/2+8}})();_.x=[s,c],_.y=[l,u]}};return Bo((()=>e.modelValue),(t=>{if(t){var{hour:n,minute:o,second:i}=qW(t),a=BB().hour(n).format("hh"),s=BB().hour(n).format("HH"),c=BB().minute(o).format("mm"),p=BB().second(i).format("ss");l.value=30*("12"===a?0:kR(a)),u.value=6*kR(c),d.value=6*kR(p),v.value=(t=>{var n="24hr"===e.format?"HH":"hh",{hour:o,minute:r,second:i}=qW(t);return{hour:BB().hour(o).format(n),minute:BB().minute(r).format("mm"),second:BB().second(i).format("ss")}})(t),"24hr"!==e.format&&(h.value=UR(""+n,2,"0")===s&&PW.includes(s)?"pm":"am"),r.value="24hr"===e.format&&PW.includes(s)}}),{immediate:!0}),{n:KW,classes:YW,getRad:y,time:v,container:t,inner:o,picker:n,isInner:r,type:p,ampm:h,isPreventNextUpdate:i,moveHand:t=>{if(t.preventDefault(),!e.readonly){C();var{clientX:n,clientY:i}=t.touches[0],_=n-m.x,y=i-m.y,b=Math.round(57.29577951308232*Math.atan2(y,_));"hour"===p.value?((t,n,i)=>{var{disableHour:c}=o.value;a.value=M(t,n);var u=30*Math.round(i/30)+90,d=(e=>{var t=e/30;return t>=0?t:t+12})(u),p=r.value?NW[d]:PW[d];if(c.includes(p)||(r.value="24hr"===e.format&&M(t,n)),r.value===a.value){var g=r.value||"pm"===h.value?PW[d]:NW[d];f.value=c.includes(g),f.value||(l.value=u,s.value=!0)}})(n,i,b):"minute"===p.value?(t=>{var{disableHour:n}=o.value,r=6*Math.round(t/6)+90,i={time:r/6>=0?r/6:r/6+60,format:e.format,ampm:h.value,hour:v.value.hour,max:e.max,min:e.min,disableHour:n,allowedTime:e.allowedTime};g.value=VW(i),g.value||(u.value=r,c.value=!0)})(b):(t=>{var{disableHour:n}=o.value,r=6*Math.round(t/6)+90,i={time:r/6>=0?r/6:r/6+60,format:e.format,ampm:h.value,hour:v.value.hour,minute:kR(v.value.minute),max:e.max,min:e.min,disableHour:n,allowedTime:e.allowedTime};HW(i)||(d.value=r)})(b)}},checkPanel:e=>{s.value=!1,g.value=!1,p.value=e},checkAmpm:t=>{if(!e.readonly){h.value=t;var n=(e=>{var{disableHour:t}=o.value,n=NW.findIndex((e=>kR(e)===kR(v.value.hour))),r="am"===e?NW:PW;return[...r.slice(n),...r.slice(0,n)].find(((e,n)=>(i.value=0!==n,!t.includes(e))))})(t);if(n){var r=e.useSeconds?":"+v.value.second:"",a=UR(n,2,"0")+":"+v.value.minute+r;b(a)}}},end:()=>{e.readonly||("hour"===p.value&&s.value?p.value="minute":"minute"===p.value&&e.useSeconds&&c.value&&(p.value="second"))},update:b,changePreventUpdate:()=>{i.value=!1}}}});QW.render=function(e,n){var o=xr("clock");return Fi(),zi("div",{class:a(e.classes(e.n(),[e.elevation,e.n("$-elevation--2")])),ref:"picker"},[Ji("div",{class:a(e.n("title")),style:t({background:e.headerColor||e.color})},[Ji("div",{class:a(e.n("title-time"))},[Ji("div",{class:a(e.classes(e.n("title-btn"),["hour"===e.type,e.n("title-btn--active")])),onClick:n[0]||(n[0]=t=>e.checkPanel("hour"))},p(e.time.hour),3),JW,Ji("div",{class:a(e.classes(e.n("title-btn"),["minute"===e.type,e.n("title-btn--active")])),onClick:n[1]||(n[1]=t=>e.checkPanel("minute"))},p(e.time.minute),3),e.useSeconds?(Fi(),zi("span",ZW,":")):na("v-if",!0),e.useSeconds?(Fi(),zi("div",{key:1,class:a(e.classes(e.n("title-btn"),["second"===e.type,e.n("title-btn--active")])),onClick:n[2]||(n[2]=t=>e.checkPanel("second"))},p(e.time.second),3)):na("v-if",!0)],2),"ampm"===e.format?(Fi(),zi("div",{key:0,class:a(e.n("title-ampm"))},[Ji("div",{class:a(e.classes(e.n("title-btn"),["am"===e.ampm,e.n("title-btn--active")])),onClick:n[3]||(n[3]=t=>e.checkAmpm("am"))},"AM",2),Ji("div",{class:a(e.classes(e.n("title-btn"),["pm"===e.ampm,e.n("title-btn--active")])),onClick:n[4]||(n[4]=t=>e.checkAmpm("pm"))},"PM",2)],2)):na("v-if",!0)],6),Ji("div",{class:a(e.n("body"))},[Ji("div",{class:a(e.n("clock-container")),onTouchstart:n[5]||(n[5]=function(){return e.moveHand&&e.moveHand(...arguments)}),onTouchmove:n[6]||(n[6]=function(){return e.moveHand&&e.moveHand(...arguments)}),onTouchend:n[7]||(n[7]=function(){return e.end&&e.end(...arguments)}),ref:"container"},[Zi(Za,{name:e.n()+"-panel-fade"},{default:Do((()=>[(Fi(),ji(o,{key:e.type,ref:"inner",type:e.type,ampm:e.ampm,color:e.color,"is-inner":e.isInner,format:e.format,"allowed-time":e.allowedTime,rad:e.getRad,time:e.time,"prevent-next-update":e.isPreventNextUpdate,"use-seconds":e.useSeconds,max:e.max,min:e.min,onUpdate:e.update,onChangePreventUpdate:e.changePreventUpdate},null,8,["type","ampm","color","is-inner","format","allowed-time","rad","time","prevent-next-update","use-seconds","max","min","onUpdate","onChangePreventUpdate"]))])),_:1},8,["name"])],34)],2)],2)};const eK=QW;eK.install=function(e){e.component(eK.name,eK)};var tK={modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*"},capture:{type:[String,Boolean],default:void 0},multiple:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},removable:{type:Boolean,default:!0},maxlength:{type:[Number,String]},maxsize:{type:[Number,String]},previewed:{type:Boolean,default:!0},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onChange","onRemove"]},rules:{type:Array},hideList:{type:Boolean,default:!1},onBeforeRead:MO(),onAfterRead:MO(),onBeforeRemove:MO(),onRemove:MO(),onOversize:MO(),"onUpdate:modelValue":MO()};function nK(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(o,r)}function oK(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){nK(i,o,r,a,s,"next",e)}function s(e){nK(i,o,r,a,s,"throw",e)}a(void 0)}))}}var{n:rK,classes:iK}=yO("uploader"),aK=0,sK=["onClick"],cK=["onClick"],lK=["src","alt"],uK=["multiple","accept","capture","disabled"],dK=["src"];var pK=er({name:"VarUploader",directives:{Ripple:EO},components:{VarIcon:zO,VarPopup:GO,VarFormDetails:GP},props:tK,setup(e){var t=qn(null),n=qn(!1),o=qn(null),r=Ma((()=>{var{maxlength:t,modelValue:{length:n}}=e;return mR(t)?n+" / "+t:""})),{form:i,bindForm:a}=HP(),{errorMessage:s,validateWithTrigger:c,validate:l,resetValidation:u}=mO(),d=Ma((()=>{var{modelValue:t,hideList:n}=e;return n?[]:t})),p=e=>({id:aK++,url:"",cover:"",name:e.name,file:e}),h=e=>new Promise((t=>{var n=new FileReader;n.onload=()=>{var o=n.result;e.file.type.startsWith("image")&&(e.cover=o),e.url=o,t(e)},n.readAsDataURL(e.file)})),f=function(){var t=oK((function*(t){var{maxsize:n,maxlength:o,modelValue:r,onOversize:a,onAfterRead:s,readonly:c,disabled:l}=e;if(!(null!=i&&i.disabled.value||null!=i&&i.readonly.value||l||c)){var u=(e=>{var t=e.target,{files:n}=t;return Array.from(n)})(t),d=u.map(p);d=null!=n?d.filter((e=>!(e.file.size>kR(n)&&(bO(a,In(e)),1)))):d,d=null!=o?(e=>{var t=Math.min(e.length,kR(o)-r.length);return e.slice(0,t)})(d):d;var f=yield Promise.all((e=>e.map(h))(d)),g=yield Promise.all((t=>{var{onBeforeRead:n}=e;return t.map((e=>new Promise((t=>{n||t({valid:!0,varFile:e});var o=bO(n,In(e));o=bR(o)?o:[o],Promise.all(o).then((n=>{t({valid:!n.some((e=>!e)),varFile:e})}))}))))})(f)),v=g.filter((e=>{var{valid:t}=e;return t})).map((e=>{var{varFile:t}=e;return t}));bO(e["onUpdate:modelValue"],[...r,...v]),t.target.value="",v.forEach((e=>bO(s,In(e))))}}));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=oK((function*(t){var{disabled:n,readonly:o,modelValue:r,onBeforeRemove:a,onRemove:s}=e;if(!(null!=i&&i.disabled.value||null!=i&&i.readonly.value||n||o)){if(a){var c=bO(a,In(t));if(c=bR(c)?c:[c],(yield Promise.all(c)).some((e=>!e)))return}var l=r.filter((e=>e!==t));bO(s,In(t)),b("onRemove"),bO(e["onUpdate:modelValue"],l)}}));return function(e){return t.apply(this,arguments)}}(),v=()=>e.modelValue.filter((e=>"success"===e.state)),m=()=>e.modelValue.filter((e=>"error"===e.state)),_=()=>e.modelValue.filter((e=>"loading"===e.state)),y={getSuccess:v,getError:m,getLoading:_},b=t=>{po((()=>{var{validateTrigger:n,rules:o,modelValue:r}=e;c(n,t,o,r,y)}))},M=!1,C=()=>l(e.rules,e.modelValue,y),k=()=>{M=!0,bO(e["onUpdate:modelValue"],[]),u()};return bO(a,{validate:C,resetValidation:u,reset:k}),Bo((()=>e.modelValue),(()=>{!M&&b("onChange"),M=!1}),{deep:!0}),{n:rK,classes:iK,input:t,files:d,showPreview:n,currentPreview:o,errorMessage:s,maxlengthText:r,isHTMLSupportVideo:LR,isHTMLSupportImage:AR,formDisabled:null==i?void 0:i.disabled,formReadonly:null==i?void 0:i.readonly,preview:t=>{var{disabled:r,readonly:a,previewed:s}=e;if(!(null!=i&&i.disabled.value||null!=i&&i.readonly.value||r||a)&&s){var{url:c}=t;gR(c)&&AR(c)?FV(c):gR(c)&&LR(c)&&(o.value=t,n.value=!0)}},handleChange:f,handleRemove:g,getSuccess:v,getError:m,getLoading:_,validate:C,resetValidation:u,reset:k,chooseFile:()=>{t.value.click()},closePreview:()=>{o.value=null,n.value=!1,FV.close()}}}});pK.render=function(e,n){var o=xr("var-icon"),r=xr("var-form-details"),i=xr("var-popup"),s=Ur("ripple");return Fi(),zi("div",{class:a(e.classes(e.n(),e.n("$--box")))},[Ji("div",{class:a(e.n("file-list"))},[(Fi(!0),zi(xi,null,Fr(e.files,(n=>Ar((Fi(),zi("div",{class:a(e.classes(e.n("file"),e.n("$-elevation--2"),["loading"===n.state,e.n("--loading")])),key:n.id,onClick:t=>e.preview(n)},[Ji("div",{class:a(e.n("file-name"))},p(n.name||n.url),3),e.removable?(Fi(),zi("div",{key:0,class:a(e.n("file-close")),onClick:Ps((t=>e.handleRemove(n)),["stop"])},[Zi(o,{class:a(e.n("file-close-icon")),"var-uploader-cover":"",name:"delete"},null,8,["class"])],10,cK)):na("v-if",!0),n.cover?(Fi(),zi("img",{key:1,class:a(e.n("file-cover")),style:t({objectFit:n.fit}),src:n.cover,alt:n.name},null,14,lK)):na("v-if",!0),Ji("div",{class:a(e.classes(e.n("file-indicator"),["success"===n.state,e.n("--success")],["error"===n.state,e.n("--error")]))},null,2)],10,sK)),[[s,{disabled:e.disabled||e.formDisabled||e.readonly||e.formReadonly||!e.ripple}]]))),128)),!e.maxlength||e.modelValue.length<e.maxlength?Ar((Fi(),zi("div",{key:0,class:a(e.classes([!e.$slots.default,e.n("action")+" "+e.n("$-elevation--2")],[e.disabled||e.formDisabled,e.n("--disabled")])),onClick:n[1]||(n[1]=function(){return e.chooseFile&&e.chooseFile(...arguments)})},[Ji("input",{ref:"input",type:"file",class:a(e.n("action-input")),multiple:e.multiple,accept:e.accept,capture:e.capture,disabled:e.disabled||e.formDisabled||e.readonly||e.formReadonly,onChange:n[0]||(n[0]=function(){return e.handleChange&&e.handleChange(...arguments)})},null,42,uK),qr(e.$slots,"default",{},(()=>[Zi(o,{class:a(e.n("action-icon")),"var-uploader-cover":"",name:"plus"},null,8,["class"])]))],2)),[[s,{disabled:e.disabled||e.formDisabled||e.readonly||e.formReadonly||!e.ripple||e.$slots.default}]]):na("v-if",!0)],2),Zi(r,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"]),Zi(i,{class:a(e.n("preview")),"var-uploader-cover":"",position:"center",show:e.showPreview,"onUpdate:show":n[2]||(n[2]=t=>e.showPreview=t),onClosed:n[3]||(n[3]=t=>e.currentPreview=null)},{default:Do((()=>{var t,n;return[e.currentPreview&&e.isHTMLSupportVideo(null==(t=e.currentPreview)?void 0:t.url)?(Fi(),zi("video",{key:0,class:a(e.n("preview-video")),playsinline:"true","webkit-playsinline":"true","x5-playsinline":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"false",controls:"",src:null==(n=e.currentPreview)?void 0:n.url},null,10,dK)):na("v-if",!0)]})),_:1},8,["class","show"])],2)};const hK=pK;hK.install=function(e){e.component(hK.name,hK)};const fK={version:"2.9.0",install:function(e){ux.install&&e.use(ux),gx.install&&e.use(gx),eN.install&&e.use(eN),iN.install&&e.use(iN),NN.install&&e.use(NN),FN.install&&e.use(FN),ZN.install&&e.use(ZN),rP.install&&e.use(rP),uP.install&&e.use(uP),fP.install&&e.use(fP),AN.install&&e.use(AN),yP.install&&e.use(yP),IP.install&&e.use(IP),RP.install&&e.use(RP),WP.install&&e.use(WP),ZP.install&&e.use(ZP),oU.install&&e.use(oU),lU.install&&e.use(lU),fU.install&&e.use(fU),yU.install&&e.use(yU),fR.install&&e.use(fR),IU.install&&e.use(IU),gB.install&&e.use(gB),mF.install&&e.use(mF),EF.install&&e.use(EF),xF.install&&e.use(xF),nV.install&&e.use(nV),sV.install&&e.use(sV),pV.install&&e.use(pV),GP.install&&e.use(GP),MN.install&&e.use(MN),zO.install&&e.use(zO),yV.install&&e.use(yV),FV.install&&e.use(FV),QV.install&&e.use(QV),sH.install&&e.use(sH),gH.install&&e.use(gH),jx.install&&e.use(jx),bH.install&&e.use(bH),SH.install&&e.use(SH),pN.install&&e.use(pN),VH.install&&e.use(VH),tx.install&&e.use(tx),WH.install&&e.use(WH),ZH.install&&e.use(ZH),tz.install&&e.use(tz),sz.install&&e.use(sz),pz.install&&e.use(pz),kz.install&&e.use(kz),GO.install&&e.use(GO),Lz.install&&e.use(Lz),Uz.install&&e.use(Uz),Hz.install&&e.use(Hz),Kz.install&&e.use(Kz),Qz.install&&e.use(Qz),Oj.install&&e.use(Oj),EO.install&&e.use(EO),Gj.install&&e.use(Gj),zj.install&&e.use(zj),Yj.install&&e.use(Yj),o$.install&&e.use(o$),E$.install&&e.use(E$),x$.install&&e.use(x$),q$.install&&e.use(q$),j$.install&&e.use(j$),WV.install&&e.use(WV),X$.install&&e.use(X$),EV.install&&e.use(EV),LV.install&&e.use(LV),tW.install&&e.use(tW),sW.install&&e.use(sW),hW.install&&e.use(hW),_W.install&&e.use(_W),SW.install&&e.use(SW),RW.install&&e.use(RW),xW.install&&e.use(xW),eK.install&&e.use(eK),Yq.install&&e.use(Yq),hK.install&&e.use(hK)},ActionSheet:ux,AppBar:gx,Avatar:eN,AvatarGroup:iN,BackTop:NN,Badge:FN,BottomNavigation:ZN,BottomNavigationItem:rP,Breadcrumb:uP,Breadcrumbs:fP,Button:AN,ButtonGroup:yP,Card:IP,Cell:RP,Checkbox:WP,CheckboxGroup:ZP,Chip:oU,Col:lU,Collapse:fU,CollapseItem:yU,Context:fR,Countdown:IU,Counter:gB,DatePicker:mF,Dialog:EF,Divider:xF,Ellipsis:nV,Fab:sV,Form:pV,FormDetails:GP,Hover:MN,Icon:zO,Image:yV,ImagePreview:FV,IndexAnchor:QV,IndexBar:sH,Input:gH,Lazy:jx,Link:bH,List:SH,Loading:pN,LoadingBar:VH,Locale:tx,Menu:WH,Option:ZH,Overlay:tz,Pagination:sz,Paper:pz,Picker:kz,Popup:GO,Progress:Lz,PullRefresh:Uz,Radio:Hz,RadioGroup:Kz,Rate:Qz,Result:Oj,Ripple:EO,Row:Gj,Select:zj,Skeleton:Yj,Slider:o$,Snackbar:E$,Space:x$,Step:q$,Steps:j$,Sticky:WV,StyleProvider:X$,Swipe:EV,SwipeItem:LV,Switch:tW,Tab:sW,TabItem:hW,Table:_W,Tabs:SW,TabsItems:RW,Themes:xW,TimePicker:eK,Tooltip:Yq,Uploader:hK},gK=k_(),vK="3.8.4",mK="https://tongji.dcloud.io/uni/stat",_K="__UNI__F15C802",yK=(e,t)=>{let n=A_("$$STAT__DBDATA:"+_K)||{};n||(n={}),n[e]=t,I_("$$STAT__DBDATA:"+_K,n)},bK=e=>{let t=A_("$$STAT__DBDATA:"+_K)||{};if(!t[e]){let n=A_("$$STAT__DBDATA:"+_K);if(n||(n={}),!n[e])return;t[e]=n[e]}return t[e]},MK=e=>{let t=A_("$$STAT__DBDATA:"+_K)||{};t[e]?(delete t[e],I_("$$STAT__DBDATA:"+_K,t)):(t=A_("$$STAT__DBDATA:"+_K),t[e]&&(delete t[e],I_("$$STAT__DBDATA:"+_K,t)))},CK={enable:!0,version:"1"};let kK={};kK={"pages/liveView/index":"直播","pages/liveView/broadcast/index":"直播-聊天","pages/advice/index":"资讯","pages/rateView/index":"赛事","pages/chatView/index":"聊天","pages/myView/index":"我的","pages/login/index":"登录","pages/myView/profile/index":"个人资料","pages/myView/profile/pwd_modify":"密码修改","pages/myView/profile/user_modify":"昵称修改","pages/myView/profile/level":"我的等级","pages/TUIKit/TUIPages/TUIConversation/create":"选择联系人","pages/TUIKit/TUIPages/TUIChat/components/message-elements/video-play":"云通信 IM"};const wK="__DC_STAT_UUID",TK="__DC_UUID_VALUE";function SK(){let e="";if("n"===EK()){try{e=plus.runtime.getDCloudId()}catch(gS){e=""}return e}try{e=A_(wK)}catch(gS){e=TK}if(!e){e=Date.now()+""+Math.floor(1e7*Math.random());try{I_(wK,e)}catch(gS){I_(wK,TK)}}return e}const IK={appid:"__UNI__F15C802"},EK=()=>{const e={app:"n","app-plus":"n",h5:"h5","mp-weixin":"wx",[["y","a","p","mp-ali"].reverse().join("")]:"ali","mp-baidu":"bd","mp-toutiao":"tt","mp-qq":"qq","quickapp-native":"qn","mp-kuaishou":"ks","mp-lark":"lark","quickapp-webview":"qw"};if("ali"===e.h5&&my&&my.env){const e=my.env.clientName;if("ap"===e)return"ali";if("dingtalk"===e)return"dt"}return e.h5},DK=e=>{const t=EK();let n="";return e||("wx"===t&&(n=Uh().scene),n)},AK=e=>{let t="";for(var n in e)t+=n+"="+e[n]+"&";return t.substr(0,t.length-1)},LK=e=>{let t=e||OK();if("bd"===EK()){let e=t.$mp&&t.$mp.page&&t.$mp.page.is,n=t.$scope&&t.$scope.is;return e||n||""}return t.route||t.$scope&&t.$scope.route||t.$mp&&t.$mp.page.route},RK=e=>{let t=e&&(e.$page||e.$scope&&e.$scope.$page),n=A_("_STAT_LAST_PAGE_ROUTE");return t?"/"===t.fullPath?t.route:t.fullPath||t.route:n||""},OK=()=>{let e=pm(),t=e[e.length-1];return t?t.$vm:null},xK=e=>"page"===e.mpType||"page"===e.$mpType||e.$mp&&"page"===e.$mp.mpType||"page"===e.$options.mpType?"page":"app"===e.mpType||"app"===e.$mpType||e.$mp&&"app"===e.$mp.mpType||"app"===e.$options.mpType?"app":null,NK=e=>{let t=[],n=[],o=[];for(let r in e){e[r].forEach((e=>{let i="";i=AK(e),0===r?t.push(i):3===r?o.push(i):n.push(i)}))}return t.push(...n,...o),JSON.stringify(t)},PK=e=>kK&&kK[e]||"",UK="Report_Data_Time",GK="Report_Status",BK=e=>{let t={usv:vK,conf:JSON.stringify({ak:"__UNI__F15C802"})};cy({url:mK,method:"GET",data:t,success:t=>{const{data:n}=t;0===n.ret&&"function"==typeof e&&e({enable:n.enable})},fail:t=>{let n=1;try{n=A_(GK)}catch(o){n=1}""===n&&(n=1),"function"==typeof e&&e({enable:n})}})},FK=()=>{if(CK.collectItems){const e=CK.collectItems.uniStatPageLog;return void 0===e||("boolean"!=typeof e||e)}return!0},qK="__first__visit__time",VK="__last__visit__time",HK=()=>parseInt((new Date).getTime()/1e3),zK=()=>{const e=bK(qK);let t=0;return e?t=e:(t=HK(),yK(qK,t),MK(VK)),t},jK="__page__residence__time";let $K=0,WK=0;const KK=()=>($K=HK(),yK(jK,$K),$K),YK="__total__visit__count",XK=()=>{const e=bK(YK);let t=1;return e&&(t=e,t++),yK(YK,t),t},JK="__first_time",ZK=()=>{let e=HK();return yK(JK,e)},QK=e=>{let t=0;const n=bK(JK),o=HK();if(0!==n&&(t=o-n),t=t<1?1:t,"app"===e){return{residenceTime:t,overtime:t>300}}if("page"===e){return{residenceTime:t,overtime:t>1800}}return{residenceTime:t}},eY=(e=>{let t=CK.reportInterval;if(0===Number(t))return 0;t=t||e;return/(^[1-9]\d*$)/.test(t)?Number(t):e})(10);let tY={uuid:gK.deviceId||SK(),ak:IK.appid,p:"android"===gK.platform?"a":"i",ut:EK(),mpn:(()=>{let e="";return"wx"!==EK()&&"qq"!==EK()||am("getAccountInfoSync")&&(e=uni.getAccountInfoSync().miniProgram.appId||""),EK(),e})(),usv:vK,v:"n"===EK()?plus.runtime.version:"",ch:(()=>{let e="";return"n"===EK()&&(e=plus.runtime.channel),e})(),cn:"",pn:"",ct:"",t:HK(),tt:"",brand:gK.brand||"",md:gK.model,sv:gK.system.replace(/(Android|iOS)\s/,""),mpsdk:gK.SDKVersion||"",mpv:gK.version||"",lang:gK.language,pr:gK.pixelRatio,ww:gK.windowWidth,wh:gK.windowHeight,sw:gK.screenWidth,sh:gK.screenHeight};class nY{constructor(){this.self="",this.__licationShow=!1,this.__licationHide=!1,this.statData=tY,this._navigationBarTitle={config:"",page:"",report:"",lt:""},this._query={},"function"==typeof Qp&&(this.addInterceptorInit(),this.interceptLogin(),this.interceptShare(!0),this.interceptRequestPayment())}addInterceptorInit(){let e=this;Qp("setNavigationBarTitle",{invoke(t){e._navigationBarTitle.page=t.title}})}interceptLogin(){let e=this;Qp("login",{complete(){e._login()}})}interceptShare(e){let t=this;e?Qp("share",{success(){t._share()},fail(){t._share()}}):t._share()}interceptRequestPayment(){let e=this;Qp("requestPayment",{success(){e._payment("pay_success")},fail(){e._payment("pay_fail")}})}_login(){this.sendEventRequest({key:"login"},0)}_share(){this.sendEventRequest({key:"share"},0)}_payment(e){this.sendEventRequest({key:e},0)}applicationShow(){if(this.__licationHide){if(QK("app").overtime){let e={path:A_("_STAT_LAST_PAGE_ROUTE"),scene:this.statData.sc,cst:2};this.sendReportRequest(e)}this.__licationHide=!1}}applicationHide(e,t){e||(e=OK()),this.__licationHide=!0;const n=QK(),o=RK(e);I_("_STAT_LAST_PAGE_ROUTE",o),this.sendHideRequest({urlref:o,urlref_ts:n.residenceTime},t),ZK()}pageShow(e){this._navigationBarTitle={config:"",page:"",report:"",lt:""};const t=RK(e),n=LK(e);if(this._navigationBarTitle.config=PK(n),this.__licationShow)return ZK(),I_("_STAT_LAST_PAGE_ROUTE",t),void(this.__licationShow=!1);if(QK("page").overtime){let e={path:t,scene:this.statData.sc,cst:3};this.sendReportRequest(e)}ZK()}pageHide(e){if(!this.__licationHide){const t=QK("page");let n=RK(e),o=A_("_STAT_LAST_PAGE_ROUTE");return o||(o=n),I_("_STAT_LAST_PAGE_ROUTE",n),void this.sendPageRequest({url:n,urlref:o,urlref_ts:t.residenceTime})}}sendReportRequest(e,t){this._navigationBarTitle.lt="1",this._navigationBarTitle.config=PK(e.path);let n=e.query&&"{}"!==JSON.stringify(e.query)?"?"+JSON.stringify(e.query):"";const o=(()=>{const e=bK(VK);let t=0;return e&&(t=e),yK(VK,HK()),t})();if(0!==o||!o){const e=(e=>{let t="";if("n"===EK()){try{t=plus.device.uuid}catch(gS){t=""}return t}return gK.deviceId||SK()})();this.statData.odid=e}Object.assign(this.statData,{lt:"1",url:e.path+n||"",t:HK(),sc:DK(e.scene),fvts:zK(),lvts:o,tvc:XK(),cst:e.cst||1}),"n"===EK()?this.getProperty(t):this.getNetworkInfo(t)}sendPageRequest(e){let{url:t,urlref:n,urlref_ts:o}=e;this._navigationBarTitle.lt="11";let r={ak:this.statData.ak,uuid:this.statData.uuid,p:this.statData.p,lt:"11",ut:this.statData.ut,url:t,tt:this.statData.tt,urlref:n,urlref_ts:o,ch:this.statData.ch,usv:this.statData.usv,t:HK()};this.request(r)}sendHideRequest(e,t){let{urlref:n,urlref_ts:o}=e,r={ak:this.statData.ak,uuid:this.statData.uuid,p:this.statData.p,lt:"3",ut:this.statData.ut,urlref:n,urlref_ts:o,ch:this.statData.ch,usv:this.statData.usv,t:HK()};this.request(r,t)}sendEventRequest({key:e="",value:t=""}={}){let n="";try{n=LK()}catch(r){n=bK("__launch_options").path}this._navigationBarTitle.config=PK(n),this._navigationBarTitle.lt="21";let o={ak:this.statData.ak,uuid:this.statData.uuid,p:this.statData.p,lt:"21",ut:this.statData.ut,url:n,ch:this.statData.ch,e_n:e,e_v:"object"==typeof t?JSON.stringify(t):t.toString(),usv:this.statData.usv,t:HK()};this.request(o)}sendPushRequest(e,t){let n=HK();const o={lt:"101",cid:t,t:n,ut:this.statData.ut},r=NK({101:[o]});let i={usv:vK,t:n,requests:r};"h5"!==o.ut?"n"!==EK()||"a"!==this.statData.p?this.sendRequest(i):setTimeout((()=>{this.sendRequest(i)}),200):this.imageRequest(i)}getProperty(e){plus.runtime.getProperty(plus.runtime.appid,(t=>{this.statData.v=t.version||"",this.getNetworkInfo(e)}))}getNetworkInfo(e){T_({success:t=>{this.statData.net=t.networkType,this.getLocation(e)}})}getLocation(e){IK.getLocation?hy({type:"wgs84",geocode:!0,success:t=>{t.address&&(this.statData.cn=t.address.country,this.statData.pn=t.address.province,this.statData.ct=t.address.city),this.statData.lat=t.latitude,this.statData.lng=t.longitude,this.request(this.statData,e)}}):(this.statData.lat=0,this.statData.lng=0,this.request(this.statData,e))}request(e,t){let n=HK();const o=this._navigationBarTitle;Object.assign(e,{ttn:o.page,ttpj:o.config,ttc:o.report});let r=bK("__UNI__STAT__DATA")||{};if(r[e.lt]||(r[e.lt]=[]),r[e.lt].push(e),yK("__UNI__STAT__DATA",r),(WK=HK(),$K=bK(jK),WK-$K)<eY&&!t)return;KK();const i=NK(r);let a={usv:vK,t:n,requests:i};MK("__UNI__STAT__DATA"),"h5"!==e.ut?"n"!==EK()||"a"!==this.statData.p?this.sendRequest(a):setTimeout((()=>{this.sendRequest(a)}),200):this.imageRequest(a)}getIsReportData(){return new Promise(((e,t)=>{let n="",o=(new Date).getTime(),r=1;try{n=A_(UK),r=A_(GK)}catch(gS){n="",r=1}""!==r?(1===r&&e(),n||(I_(UK,o),n=o),o-n>864e5&&BK((({enable:e})=>{I_(UK,o),I_(GK,e)}))):BK((({enable:t})=>{I_(UK,o),I_(GK,t),1===t&&e()}))}))}sendRequest(e){this.getIsReportData().then((()=>{cy({url:mK,method:"POST",data:e,success:()=>{},fail:t=>{++this._retry<3&&setTimeout((()=>{this.sendRequest(e)}),1e3)}})}))}imageRequest(e){this.getIsReportData().then((()=>{let t=new Image,n=(e=>{let t=Object.keys(e).sort(),n={},o="";for(var r in t)n[t[r]]=e[t[r]],o+=t[r]+"="+e[t[r]]+"&";return{sign:"",options:o.substr(0,o.length-1)}})((e=>{let t={};for(let n in e)t[n]=encodeURIComponent(e[n]);return t})(e)).options;t.src="https://tongji.dcloud.io/uni/stat.gif?"+n}))}sendEvent(e,t){var n,o;(o=t,(n=e)?"string"!=typeof n?(console.error("uni.report [eventName] Parameter type error, it can only be of type String"),1):n.length>255?(console.error("uni.report [eventName] Parameter length cannot be greater than 255"),1):"string"!=typeof o&&"object"!=typeof o?(console.error("uni.report [options] Parameter type error, Only supports String or Object type"),1):"string"==typeof o&&o.length>255?(console.error("uni.report [options] Parameter length cannot be greater than 255"),1):"title"===n&&"string"!=typeof o?(console.error("uni.report [eventName] When the parameter is title, the [options] parameter can only be of type String"),1):void 0:(console.error("uni.report Missing [eventName] parameter"),1))||("title"!==e?this.sendEventRequest({key:e,value:"object"==typeof t?JSON.stringify(t):t},1):this._navigationBarTitle.report=t)}}class oY extends nY{static getInstance(){return uni.__stat_instance||(uni.__stat_instance=new oY),uni.__stat_instance}constructor(){super()}pushEvent(e){const t=(()=>{if(CK.collectItems){const e=CK.collectItems.uniPushClientID;return"boolean"==typeof e&&e}return!1})();Vh&&t&&Vh({success:t=>{const n=t.cid||!1;n&&this.sendPushRequest(e,n)}})}launch(e,t){KK(),this.__licationShow=!0,yK("__launch_options",e),e.cst=1,this.sendReportRequest(e,!0)}load(e,t){this.self=t,this._query=e}appHide(e){this.applicationHide(e,!0)}appShow(e){this.applicationShow(e)}show(e){if(this.self=e,"page"===xK(e)){FK()&&this.pageShow(e)}"h5"!==EK()&&"n"!==EK()||"app"===xK(e)&&this.appShow()}hide(e){if(this.self=e,"page"===xK(e)){FK()&&this.pageHide(e)}"h5"!==EK()&&"n"!==EK()||"app"===xK(e)&&this.appHide()}error(e){let t="";t=e.message?e.stack:JSON.stringify(e);let n="";try{n=get_route()}catch(gS){n=""}let o={ak:this.statData.ak,uuid:this.statData.uuid,p:this.statData.p,lt:"31",url:n,ut:this.statData.ut,ch:this.statData.ch,mpsdk:this.statData.mpsdk,mpv:this.statData.mpv,v:this.statData.v,em:t,usv:this.statData.usv,t:parseInt((new Date).getTime()/1e3)};this.request(o)}}const rY=oY.getInstance();let iY=!1;const aY={onLaunch(e){rY.launch(e,this),rY.pushEvent(e)},onLoad(e){if(rY.load(e,this),this.$scope&&this.$scope.onShareAppMessage){let e=this.$scope.onShareAppMessage;this.$scope.onShareAppMessage=function(t){return rY.interceptShare(!1),e.call(this,t)}}},onShow(){iY=!1,rY.show(this)},onHide(){iY=!0,rY.hide(this)},onUnload(){iY?iY=!1:rY.hide(this)},onError(e){rY.error(e)}};function sY(){!function(e){if(dt)return e(dt);pt.push(e)}((e=>{e.mixin(aY),uni.report=function(e,t){rY.sendEvent(e,t)}})),"h5"!==EK()&&"n"!==EK()&&(Ph(de,(()=>{rY.appHide(OK())})),function(e){Ph(ue,e)}((()=>{rY.appShow(OK())})))}sY(),uni.$Crypto=pR,uni.$api=Mk,uni.$Code="XIAOMI";const cY=new qD({id:RD,reportApiSpeed:!0});uni.$aegis=cY;const lY={userID:"231327",SDKAppID:1400813717,secretKey:"c74d2910cc6c7180b015d75d44e73ba0af399d5f3e3d159c6d09bd5903ff01a0"},uY=LD(lY).userSig;uni.$chat_SDKAppID=lY.SDKAppID,uni.$chat_userID=lY.userID,uni.$chat_userSig=uY,uni.$config=lY,uni.$TUIKit=PD.create({SDKAppID:uni.$chat_SDKAppID}),uni.$TIM=PD,uni.$TUIKit.registerPlugin({"tim-upload-plugin":BD});uni.$TUIKit.on(PD.EVENT.SDK_READY,(function(e){uni.$chat_isSDKReady=!0,jy()})),uni.$TUIKit.on(PD.EVENT.SDK_NOT_READY,(function(e){uni.$chat_isSDKReady=!1,jy()})),uni.$TUIKit.on(PD.EVENT.KICKED_OUT,(function(e){uni.$chat_isSDKReady=!1,jy()})),uni.$TUIKit.on(PD.EVENT.MESSAGE_RECEIVED,(function(e){console.log(e,"onMessageReceived"),VD.emit("messageReceived",e)})),uni.$http="https://svga-1317257643.cos-website.ap-shanghai.myqcloud.com/",function(){const e=Hs(jD);return e.use(fK),e.use(vw),{app:e}}().app.use(Em).mount("#app");export{nh as $,a as A,Tv as B,My as C,Ev as D,Ib as E,xi as F,Eb as G,cy as H,VD as I,Ps as J,S_ as K,w_ as L,Oh as M,_y as N,Ar as O,Bs as P,Ig as Q,PD as R,Mv as S,bk as T,fy as U,ih as V,pm as W,Km as X,vw as Y,Wd as Z,LD as _,I_ as a,yy as a0,Th as a1,iy as a2,yv as a3,k_ as a4,rb as a5,qr as a6,oc as a7,V_ as a8,sy as a9,OD as aA,ew as aB,mh as aC,th as aD,am as aE,Pb as aF,N_ as aG,qn as aH,x_ as aI,er as aJ,In as aK,Uo as aL,Kn as aM,Hd as aN,Ek as aO,u_ as aP,Mr as aQ,tb as aR,Ma as aS,Vn as aT,Bo as aU,po as aV,Gs as aW,fw as aX,Qp as aa,F_ as ab,zy as ac,jy as ad,Ly as ae,Hh as af,zh as ag,py as ah,O_ as ai,Vh as aj,xh as ak,Uh as al,P_ as am,hv as an,Rv as ao,R_ as ap,A as aq,_r as ar,da as as,ue as at,ve as au,me as av,_e as aw,Ce as ax,Ae as ay,va as az,sb as b,Mk as c,Vy as d,ji as e,Zi as f,A_ as g,hb as h,Ov as i,ta as j,zi as k,Fr as l,t as m,vy as n,Fi as o,ib as p,na as q,L_ as r,ab as s,Ji as t,p as u,cg as v,Do as w,xr as x,kv as y,Pr as z};
