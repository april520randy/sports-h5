import{M as t,aD as e,a4 as s,p as i,o as l,e as n,w as a,f as o,m as r,A as h,k as c,F as d,l as u,J as p,j as y,u as b,q as f,a6 as g,i as _,D as m,S as x,B as w,y as S}from"./index-c87fa551.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";function C(t){if("boolean"==typeof t)return!1;if("number"==typeof t)return!1;if(t instanceof Array){if(0==t.length)return!0}else{if(!(t instanceof Object))return"null"==t||null==t||"undefined"==t||null==t||""==t;if("{}"===JSON.stringify(t))return!0}return!1}function v(t){return null!=t}function k(t){return null!==t&&"object"==typeof t}function I(){}function L(t){return"function"==typeof t}function $(t){if(v(t))return t=String(t),/^\d+(\.\d+)?$/.test(t)?`${t}px`:t}function X(t){const{interceptor:e,args:s,done:i}=t;if(e){const t=e(...s);k(l=t)&&L(l.then)&&L(l.catch)?t.then((t=>{t&&i()})).catch(I):t&&i()}else i();var l}const R=["input","change","click","rendered","scroll"];let A="value";R.splice(0,1,"update:modelValue"),A="modelValue";const B={color:String,background:String,lineWidth:[Number,String],lineHeight:[Number,String],titleActiveColor:String,titleInactiveColor:String,wrapStyle:{type:[Object,null],default:()=>{}},duration:{type:[Number,String],default:.3},type:{type:String,default:"line"},tabs:{type:Array,default:()=>[]},ellipsis:{type:Boolean,default:!0},scrollToCenter:{type:Boolean,default:!0},scrollThreshold:{type:[Number,String],default:5},isLazyRender:{type:Boolean,default:!0},animated:{type:Boolean,default:!1},tabClickScrollTop:{type:Boolean,default:!1},noRenderConent:Boolean,scrollspy:Boolean,beforeChange:Function,swiper:{type:Boolean,default:!1},swipeable:{type:Boolean,default:!1},swipeAnimated:{type:Boolean,default:!1},swipeThreshold:{type:[Number,String],default:50},visible:{type:Boolean,default:!0},fixed:Boolean,offsetTop:{type:Number,default:0},zIndex:{type:Number,default:99},sticky:Boolean,stickyThreshold:{type:Number,default:0}};B[A]={type:Number,default:-1};const N=T({name:"yui-tabs",mixins:[{data:()=>({direction:"",startX:"",startY:"",nextIndex:-1,moved:!1}),methods:{touchStart(t){this.swipeable&&(this.resetTouchStatus(),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY)},touchMove(t){const e=t.touches[0];this.deltaX=e.clientX<0?0:e.clientX-this.startX,this.deltaY=e.clientY-this.startY;const s=Math.abs(this.deltaX),i=Math.abs(this.deltaY);var l,n;if((!this.direction||s<10&&i<10)&&(this.direction=(l=s)>(n=i)?"horizontal":n>l?"vertical":""),"horizontal"===this.direction){const{deltaX:t,dataLen:e,contentWidth:s,currentIndex:i,swipeAnimated:l}=this;if(t>0&&0===i||t<0&&i===e-1)return;if(this.nextIndex=i+(t>0?-1:1),this.moved=!0,l){const e=s*i*-1+t;this.changeTrackStyle(!0,0,e)}}},touchEnd(){if(!this.moved)return;const{deltaX:t,nextIndex:e,dataLen:s,swipeThreshold:i}=this;Math.abs(t)>=i?this.setCurrentIndex(e):this.changeTrackStyle(!1)},resetTouchStatus(){this.direction="",this.deltaX=0,this.deltaY=0,this.newIndex=-1,this.moved=!1}}}],emits:R,options:{styleIsolation:"shared"},props:B,data(){return{currentIndex:null,tabList:[],scrollId:"tab_0",scrollLeft:0,extraWidth:0,contentWidth:0,trackStyle:null,touchInfo:{inited:!1,startX:null,startY:null,moved:!1,deltaX:0,isLeftSide:!1},lineAnimated:!1,lineAnimatedStyle:{transform:"translateX(-100%) translateX(-50%)",transitionDuration:"0s"},isFixed:!1,current:this.currentIndex,isTabClick:!1,placeholderHeight:0,windowHeight:0,lockedScrollspy:!1}},computed:{isLine(){return"line"===this.type},tabsClass(){return`yui-tabs--${this.type} ${this.visible?"yui-tabs--visible":""} ${this.fixed||this.isFixed?"yui-tabs--fixed":""} ${this.swiper?"yui-tabs--swiper":""} `},navClass(){return`yui-tabs__nav--${this.type}`},navStyle(){const t={};return"card"===this.type&&(t.borderColor=this.color),t},innerWrapStyle(){const t={background:this.background};return(this.fixed||this.isFixed)&&(t.top=this.offsetTop+"px",t.zIndex=this.zIndex),t},scrollStyle(){return{width:`calc(100% - ${this.extraWidth}px)`}},lineStyle(){const{lineWidth:t,lineHeight:e,duration:s}=this,i={width:$(t),backgroundColor:this.color};if(v(e)){const t=$(e);i.height=t,i.borderRadius=t}return i},scrollX(){return!this.ellipsis&&"card"!==this.type&&this.tabs.length>this.scrollThreshold},dataLen(){return this.tabList.length},swiperDuration(){return this.animated?1e3*this.duration:0},scrollOffset(){return this.sticky?this.offsetTop+this.placeholderHeight:0}},watch:{tabs:{handler(){this.updateTabList()},deep:!0},currentIndex:{handler(t,e){this.current=t,this.tabChange(t,e),this.changeStyle()}}},created(){this.$watch(A,(t=>{t!==this.currentIndex&&(this.setCurrentIndex(t),setTimeout((()=>{this.scrollToTop(),this.scrollToCurrContent()}),0))})),this.initTabList()},mounted(){this.$nextTick((()=>{this.init(),this.listenEvent()}))},methods:{resize(){this.init()},getSelectorQuery(){let e=null;return e=t().in(this),e},getRect(...t){return new Promise(((e,s)=>{t||s("Parameter is empty");const i=this.getSelectorQuery();t.forEach((t=>{i.select(t).boundingClientRect()})),i.exec((t=>{e(1===(t=t||[]).length?t[0]:t)}))}))},tabClass(t,e){return`yui-tab_${t} ${e.active?"yui-tab--active":""} ${this.ellipsis&&!this.scrollX?"yui-tab__ellipsis":""}`},paneClass:(t,e)=>`yui-tab__pane${t} ${e.active?"yui-pane--active":""}`,tabStyle(t){let e=this.titleActiveColor,s=this.titleInactiveColor,i="",l="";return"line"===this.type?(C(e)&&(e="#646566"),C(s)&&(s="#323233")):"text"===this.type?(C(e)&&(e=this.color),C(s)&&(s="#323233")):"card"===this.type?(i=this.color,C(e)&&(e="#fff"),C(s)&&(s=this.color)):"button"===this.type?(i=this.color,C(e)&&(e="#fff"),C(s)&&(s="#323233")):"line-button"===this.type&&(l=this.color,C(e)&&(e=this.color),C(s)&&(s="#323233")),{color:t.active?e:s,background:t.active?i:"",borderColor:t.active?l:""}},infoClass:t=>" yui-tab__info "+(t.dot?"yui-tab__info--dot":""),listenEvent(){const t=this;(t.sticky||t.scrollspy)&&e("onPageScroll",(function(e){const{stickyThreshold:s,offsetTop:i,scrollspy:l,lockedScrollspy:n}=t;t.getRect(".depend-wrap").then((l=>{t.isFixed=l.bottom-s<=i,t.$emit("scroll",{scrollTop:e.scrollTop,isFixed:t.isFixed})})),l&&!n&&t.getCurrIndexOnScroll().then((e=>{t.setCurrentIndex(e)}))}))},getCurrIndexOnScroll(t=[]){return new Promise(((t,e)=>{const s=this.tabList.map(((t,e)=>".yui-tab__pane"+e));this.getRect(...s).then((e=>{let s=e.reduce(((t,e,s)=>e.top<this.scrollOffset?s:t),0);t(s)}))}))},initTabList(){const t=this.tabs.filter((t=>!C(t)));this.tabList=t.map(((t,e)=>{this.currentIndex;const s={label:"",slot:"pane"+e,titleSlot:"title"+e,disabled:!1,active:!1,rendered:!this.isLazyRender||this.scrollspy,show:this.scrollspy,dot:!1,translateX:0,scrollLeft:0,paneTop:0};return s.paneStyle=this.animated?{visibility:(s.show,"visible"),height:s.show?"auto":"0px"}:{display:s.show?"block":"none"},k(t)?(s.label=t.label,s.slot=C(t.slot)?s.slot:t.slot,s.titleSlot=C(t.titleSlot)?s.titleSlot:t.titleSlot,s.dot=C(t.dot)?s.dot:t.dot,s.badge=C(t.badge)||s.dot?"":t.badge):s.label=t,s}))},updateTabList(){this.tabs.length!=this.dataLen?this.initTabList():this.tabs.forEach(((t,e)=>{const s=this.tabList[e];k(t)?(this.$set(s,"label",t.label),this.$set(s,"dot",C(t.dot)?s.dot:t.dot),this.$set(s,"badge",C(t.badge)||s.dot?"":t.badge)):this.$set(s,"label",t)})),this.$nextTick((()=>{this.init()}))},async init(){this.windowHeight=s().windowHeight;let t=await this.getRect(".yui-tabs__extra");this.extraWidth=t?t.width:0,t=await this.getRect(".yui-tabs__content"),this.contentWidth=t?t.width:0,t=await this.getRect(".yui-tabs__wrap");const e=t?t.width/2:0;this.placeholderHeight=t?t.height:0,t=await this.getRect(".yui-tabs");const i=t?t.left:0,l=this.scrollspy,n=this.tabList.reduce(((t,e,s)=>(t.push(".yui-tab_"+s),l&&t.push(".yui-tab__pane"+s),t)),[]),a=await this.getRect(...n);this.tabList.forEach((t=>{const[s,n]=a.splice(0,l?2:1);t.translateX=s?s.left+s.width/2-i:0,t.scrollLeft=t.translateX-e,l&&(t.paneTop=n?n.top:0)})),this.setCurrentIndex(this[A])},onClick(t,e=!1){this.isTabClick=e,e&&this.$emit("click",t,this.tabs[t],this.isTabClick),X({interceptor:this.beforeChange,args:[t],done:()=>{this.setCurrentIndex(t),setTimeout((()=>{this.scrollToTop(),this.scrollToCurrContent()}),0)}})},setCurrentIndex(t){const e=this.currentIndex!==t,s=null!==this.currentIndex,i=this.tabList[t];!this.isLazyRender||this.scrollspy||i.rendered||this.$emit("rendered",t,this.tabs[t]),this.currentIndex=t,e&&(this.$emit(R[0],t),s&&this.$emit("change",t,this.tabs[t],this.isTabClick))},scrollToTop(){!this.scrollspy&&this.tabClickScrollTop&&setTimeout((function(){i({scrollTop:0,duration:0})}),1e3*this.duration)},scrollToCurrContent(t=!1){if(this.scrollspy){const e=t?0:1e3*this.duration;this.lockedScrollspy=!0,i({scrollTop:this.tabList[this.currentIndex].paneTop,duration:e}),setTimeout((()=>{this.lockedScrollspy=!1}),2*e)}},tabChange(t,e){const s=this.tabList[e]||{},i=this.tabList[t]||{};s.active=!1,i.active=!0,this.scrollspy||(i.rendered=!0,s.show=!1,i.show=!0)},changeStyle(){this.scrollIntoView(),this.setLine(),this.swiper||this.scrollspy||(this.changeTrackStyle(!1,this.duration),this.changePaneStyle())},scrollIntoView(){this.scrollX&&(this.scrollToCenter?this.scrollLeft=this.tabList[this.currentIndex].scrollLeft:this.scrollId="tab_"+(this.currentIndex-1))},setLine(){if(this.isLine){console.log("currentIndex:",this.currentIndex);const t=this.tabList[this.currentIndex].translateX,e=`translateX(${v(t)?t+"px":"-100%"}) translateX(-50%)`,s=`${this.lineAnimated?this.duration:"0"}s`;this.$set(this.lineAnimatedStyle,"transform",e),this.$set(this.lineAnimatedStyle,"transitionDuration",s),this.lineAnimated=!0}},changeTrackStyle(t=!1,e=0,s=0){this.animated&&(this.trackStyle={transform:t?`translate3d(${s}px,0,0)`:`translateX(${-100*this.currentIndex}%)`,transition:`transform ${e}s ease-in-out`})},changePaneStyle(){this.getRect(".yui-tab__pane"+this.currentIndex).then((t=>{const e=t&&this.swipeAnimated?t.height:0;this.tabList.forEach((t=>{const s=this.animated?{visibility:this.swipeAnimated||t.show?"visible":"hidden",height:t.show?"auto":e+"px"}:{display:t.show?"block":"none"};this.$set(t,"paneStyle",s)}))}))},stopTouchMove(t){this.swipeable||t.stopPropagation()},onSwiperChange(t){this.setCurrentIndex(t.target.current||t.detail.current)}}},[["render",function(t,e,s,i,T,C){const v=_,k=m,I=x,L=w,$=S;return l(),n(v,{class:h(["yui-tabs",[C.tabsClass]])},{default:a((()=>[o(v,{class:"depend-wrap"}),o(v,{class:"yui-tabs__wrap",style:r([C.innerWrapStyle,t.wrapStyle])},{default:a((()=>[o(I,{class:h(["yui-tabs__scroll",[C.scrollX?"enable-sroll":""]]),"scroll-x":C.scrollX,"scroll-anchoring":!0,"enable-flex":"","scroll-left":T.scrollLeft,"scroll-into-view":t.scrollToCenter?"":T.scrollId,"scroll-with-animation":"",style:r([C.scrollStyle])},{default:a((()=>[o(v,{class:h(["yui-tabs__nav",[C.navClass]]),style:r([C.navStyle])},{default:a((()=>[(l(!0),c(d,null,u(T.tabList,((t,e)=>(l(),n(v,{class:h(["yui-tab",[C.tabClass(e,t)]]),key:e,onClick:p((t=>C.onClick(e,!0)),["stop"]),id:`tab_${e}`,style:r([C.tabStyle(t)])},{default:a((()=>[o(v,{class:"yui-tab__text"},{default:a((()=>[y(b(t.label)+" ",1),t.badge||t.dot?(l(),n(k,{key:0,class:h([C.infoClass(t)])},{default:a((()=>[y(b(t.badge),1)])),_:2},1032,["class"])):f("",!0)])),_:2},1024)])),_:2},1032,["onClick","id","class","style"])))),128)),C.isLine?(l(),n(v,{key:0,class:"yui-tabs__line",style:r([C.lineStyle,T.lineAnimatedStyle])},null,8,["style"])):f("",!0)])),_:1},8,["class","style"])])),_:1},8,["class","scroll-x","scroll-left","scroll-into-view","style"]),o(v,{class:"yui-tabs__extra"},{default:a((()=>[g(t.$slots,"extra",{},void 0,!0)])),_:3})])),_:3},8,["style"]),T.isFixed?(l(),n(v,{key:0,class:"yui-tabs__placeholder",style:r([{height:T.placeholderHeight+"px"}])},null,8,["style"])):f("",!0),t.noRenderConent||t.swiper?f("",!0):(l(),n(v,{key:1,class:h(["yui-tabs__content",{"yui-tabs__content--animated":t.animated,"yui-tabs__content--scrollspy":t.scrollspy}])},{default:a((()=>[o(v,{class:"yui-tabs__track",style:r([T.trackStyle])},{default:a((()=>[(l(!0),c(d,null,u(T.tabList,((e,s)=>(l(),n(v,{class:h(["yui-tab__pane",[C.paneClass(s,e)]]),key:s,style:r([e.paneStyle]),onTouchstart:t.touchStart,onTouchmove:e=>t.touchMove(e,s),onTouchend:e=>t.touchEnd(e,s)},{default:a((()=>[e.rendered||t.value==s?(l(),n(v,{key:0},{default:a((()=>[g(t.$slots,e.slot,{},void 0,!0)])),_:2},1024)):f("",!0)])),_:2},1032,["class","style","onTouchstart","onTouchmove","onTouchend"])))),128))])),_:3},8,["style"])])),_:3},8,["class"])),!t.noRenderConent&&t.swiper?(l(),n($,{key:2,class:"yui-tabs__swiper",current:T.current,duration:C.swiperDuration,onChange:C.onSwiperChange},{default:a((()=>[(l(!0),c(d,null,u(T.tabList,((e,s)=>(l(),n(L,{class:"yui-tabs__swiper--item",key:s,onTouchmove:C.stopTouchMove},{default:a((()=>[e.rendered||t.value==s?(l(),n(v,{key:0,class:"yui-tabs__swiper--wrap"},{default:a((()=>[g(t.$slots,e.slot,{},void 0,!0)])),_:2},1024)):f("",!0)])),_:2},1032,["onTouchmove"])))),128))])),_:3},8,["current","duration","onChange"])):f("",!0)])),_:3},8,["class"])}],["__scopeId","data-v-b25e7271"]]);export{N as _};
