import{bb as l,a as v,M as f,a4 as g,t as y,d as w,bc as C,b,w as x,f as k,h,i as D,_ as H,r as m,o as r,c as _,q as N,n as P,F,bd as p,be as R}from"./index-a2af6501.js";import{R as B}from"./Country-af05ed6f.js";function A(e,n){const{days:t}=n;let{hours:c,minutes:i,seconds:a,milliseconds:o}=n;if(e.includes("DD")?e=e.replace("DD",l(t)):c+=t*24,e.includes("HH")?e=e.replace("HH",l(c)):i+=c*60,e.includes("mm")?e=e.replace("mm",l(i)):a+=i*60,e.includes("ss")?e=e.replace("ss",l(a)):o+=a*1e3,e.includes("S")){const s=l(o,3);e.includes("SSS")?e=e.replace("SSS",s):e.includes("SS")?e=e.replace("SS",s.slice(0,2)):e=e.replace("S",s.charAt(0))}return e}const[E,T]=v("count-down"),q={time:f(0),format:g("HH:mm:ss"),autoStart:y,millisecond:Boolean};var I=w({name:E,props:q,emits:["change","finish"],setup(e,{emit:n,slots:t}){const{start:c,pause:i,reset:a,current:o}=C({time:+e.time,millisecond:e.millisecond,onChange:u=>n("change",u),onFinish:()=>n("finish")}),s=b(()=>A(e.format,o.value)),d=()=>{a(+e.time),e.autoStart&&c()};return x(()=>e.time,d,{immediate:!0}),k({start:c,pause:i,reset:d}),()=>h("div",{role:"timer",class:T()},[t.default?t.default(o.value):s.value])}});const V=D(I);function K(){return new Promise(e=>{setTimeout(()=>{e({code:0,data:{code:123456},msg:"成功"})},10)})}const M={class:"send-code"},O={key:1},Z={class:"block"},j={__name:"SendCode",props:{phone:{type:[String,Number],default:""},type:{type:[String,Number],default:""}},setup(e){const n=e,t=m(!0),c=m(60*1e3),i=()=>{t.value=!0},a=()=>{const s=n.type;if(console.log(s),s===1){o();return}if(!n.phone){p("请输入手机号");return}if(!B.i18nPhoneReg.test(n.phone)){p("手机号格式错误");return}o()},o=async()=>{const s=await K();s.code===R?t.value=!1:p(s.msg)};return(s,d)=>{const u=V;return r(),_("div",M,[t.value?(r(),_("span",{key:0,onClick:a},"获取验证码")):(r(),_("p",O,[h(u,{onFinish:i,time:c.value},{default:N(S=>[P("span",Z,F(S.seconds)+"s后重发",1)]),_:1},8,["time"])]))])}}},J=H(j,[["__scopeId","data-v-3163ff92"]]);export{J as _};
